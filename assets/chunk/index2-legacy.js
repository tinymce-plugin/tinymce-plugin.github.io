!function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}var e=document.createElement("style");e.innerHTML=".tox{box-shadow:none;box-sizing:content-box;color:#222f3e;cursor:auto;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif;font-size:16px;font-style:normal;font-weight:400;line-height:normal;-webkit-tap-highlight-color:transparent;text-decoration:none;text-shadow:none;text-transform:none;vertical-align:initial;white-space:normal}.tox :not(svg):not(rect){box-sizing:inherit;color:inherit;cursor:inherit;direction:inherit;font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;line-height:inherit;-webkit-tap-highlight-color:inherit;text-align:inherit;text-decoration:inherit;text-shadow:inherit;text-transform:inherit;vertical-align:inherit;white-space:inherit}.tox :not(svg):not(rect){background:0 0;border:0;box-shadow:none;float:none;height:auto;margin:0;max-width:none;outline:0;padding:0;position:static;width:auto}.tox:not([dir=rtl]){direction:ltr;text-align:left}.tox[dir=rtl]{direction:rtl;text-align:right}.tox-tinymce{border:1px solid #ccc;border-radius:0;box-shadow:none;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif;overflow:hidden;position:relative;visibility:inherit!important}.tox-tinymce-inline{border:none;box-shadow:none}.tox-tinymce-inline .tox-editor-header{background-color:transparent;border:1px solid #ccc;border-radius:0;box-shadow:none}.tox-tinymce-aux{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif;z-index:1300}.tox-tinymce :focus,.tox-tinymce-aux :focus{outline:0}button::-moz-focus-inner{border:0}.tox .accessibility-issue__header{-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-bottom:4px}.tox .accessibility-issue__description{-webkit-box-align:stretch;-webkit-align-items:stretch;-ms-flex-align:stretch;align-items:stretch;border:1px solid #ccc;border-radius:3px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between}.tox .accessibility-issue__description>div{padding-bottom:4px}.tox .accessibility-issue__description>div>div{-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-bottom:4px}.tox .accessibility-issue__description>:last-child:not(:only-child){border-color:#ccc;border-style:solid}.tox .accessibility-issue__repair{margin-top:16px}.tox .tox-dialog__body-content .accessibility-issue--info .accessibility-issue__description{background-color:rgba(32,122,183,.1);border-color:rgba(32,122,183,.4);color:#222f3e}.tox .tox-dialog__body-content .accessibility-issue--info .accessibility-issue__description>:last-child{border-color:rgba(32,122,183,.4)}.tox .tox-dialog__body-content .accessibility-issue--info .tox-form__group h2{color:#207ab7}.tox .tox-dialog__body-content .accessibility-issue--info .tox-icon svg{fill:#207ab7}.tox .tox-dialog__body-content .accessibility-issue--info a .tox-icon{color:#207ab7}.tox .tox-dialog__body-content .accessibility-issue--warn .accessibility-issue__description{background-color:rgba(255,165,0,.1);border-color:rgba(255,165,0,.5);color:#222f3e}.tox .tox-dialog__body-content .accessibility-issue--warn .accessibility-issue__description>:last-child{border-color:rgba(255,165,0,.5)}.tox .tox-dialog__body-content .accessibility-issue--warn .tox-form__group h2{color:#cc8500}.tox .tox-dialog__body-content .accessibility-issue--warn .tox-icon svg{fill:#cc8500}.tox .tox-dialog__body-content .accessibility-issue--warn a .tox-icon{color:#cc8500}.tox .tox-dialog__body-content .accessibility-issue--error .accessibility-issue__description{background-color:rgba(204,0,0,.1);border-color:rgba(204,0,0,.4);color:#222f3e}.tox .tox-dialog__body-content .accessibility-issue--error .accessibility-issue__description>:last-child{border-color:rgba(204,0,0,.4)}.tox .tox-dialog__body-content .accessibility-issue--error .tox-form__group h2{color:#c00}.tox .tox-dialog__body-content .accessibility-issue--error .tox-icon svg{fill:#c00}.tox .tox-dialog__body-content .accessibility-issue--error a .tox-icon{color:#c00}.tox .tox-dialog__body-content .accessibility-issue--success .accessibility-issue__description{background-color:rgba(120,171,70,.1);border-color:rgba(120,171,70,.4);color:#222f3e}.tox .tox-dialog__body-content .accessibility-issue--success .accessibility-issue__description>:last-child{border-color:rgba(120,171,70,.4)}.tox .tox-dialog__body-content .accessibility-issue--success .tox-form__group h2{color:#78ab46}.tox .tox-dialog__body-content .accessibility-issue--success .tox-icon svg{fill:#78ab46}.tox .tox-dialog__body-content .accessibility-issue--success a .tox-icon{color:#78ab46}.tox .tox-dialog__body-content .accessibility-issue__header h1,.tox .tox-dialog__body-content .tox-form__group .accessibility-issue__description h2{margin-top:0}.tox:not([dir=rtl]) .tox-dialog__body-content .accessibility-issue__header .tox-button{margin-left:4px}.tox:not([dir=rtl]) .tox-dialog__body-content .accessibility-issue__header>:nth-last-child(2){margin-left:auto}.tox:not([dir=rtl]) .tox-dialog__body-content .accessibility-issue__description{padding:4px 4px 4px 8px}.tox:not([dir=rtl]) .tox-dialog__body-content .accessibility-issue__description>:last-child{border-left-width:1px;padding-left:4px}.tox[dir=rtl] .tox-dialog__body-content .accessibility-issue__header .tox-button{margin-right:4px}.tox[dir=rtl] .tox-dialog__body-content .accessibility-issue__header>:nth-last-child(2){margin-right:auto}.tox[dir=rtl] .tox-dialog__body-content .accessibility-issue__description{padding:4px 8px 4px 4px}.tox[dir=rtl] .tox-dialog__body-content .accessibility-issue__description>:last-child{border-right-width:1px;padding-right:4px}.tox .tox-anchorbar,.tox .tox-bar{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex:0;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto}.tox .tox-button{background-color:#207ab7;background-image:none;background-position:0 0;background-repeat:repeat;border-color:#207ab7;border-radius:3px;border-style:solid;border-width:1px;box-shadow:none;box-sizing:border-box;color:#fff;cursor:pointer;display:inline-block;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif;font-size:14px;font-style:normal;font-weight:700;letter-spacing:normal;line-height:24px;margin:0;outline:0;padding:4px 16px;text-align:center;text-decoration:none;text-transform:capitalize;white-space:nowrap}.tox .tox-button[disabled]{background-color:#207ab7;background-image:none;border-color:#207ab7;box-shadow:none;color:rgba(255,255,255,.5);cursor:not-allowed}.tox .tox-button:focus:not(:disabled){background-color:#1c6ca1;background-image:none;border-color:#1c6ca1;box-shadow:none;color:#fff}.tox .tox-button:hover:not(:disabled){background-color:#1c6ca1;background-image:none;border-color:#1c6ca1;box-shadow:none;color:#fff}.tox .tox-button:active:not(:disabled){background-color:#185d8c;background-image:none;border-color:#185d8c;box-shadow:none;color:#fff}.tox .tox-button--secondary{background-color:#f0f0f0;background-image:none;background-position:0 0;background-repeat:repeat;border-color:#f0f0f0;border-radius:3px;border-style:solid;border-width:1px;box-shadow:none;color:#222f3e;font-size:14px;font-style:normal;font-weight:700;letter-spacing:normal;outline:0;padding:4px 16px;text-decoration:none;text-transform:capitalize}.tox .tox-button--secondary[disabled]{background-color:#f0f0f0;background-image:none;border-color:#f0f0f0;box-shadow:none;color:rgba(34,47,62,.5)}.tox .tox-button--secondary:focus:not(:disabled){background-color:#e3e3e3;background-image:none;border-color:#e3e3e3;box-shadow:none;color:#222f3e}.tox .tox-button--secondary:hover:not(:disabled){background-color:#e3e3e3;background-image:none;border-color:#e3e3e3;box-shadow:none;color:#222f3e}.tox .tox-button--secondary:active:not(:disabled){background-color:#d6d6d6;background-image:none;border-color:#d6d6d6;box-shadow:none;color:#222f3e}.tox .tox-button--icon,.tox .tox-button.tox-button--icon,.tox .tox-button.tox-button--secondary.tox-button--icon{padding:4px}.tox .tox-button--icon .tox-icon svg,.tox .tox-button.tox-button--icon .tox-icon svg,.tox .tox-button.tox-button--secondary.tox-button--icon .tox-icon svg{display:block;fill:currentColor}.tox .tox-button-link{background:0;border:none;box-sizing:border-box;cursor:pointer;display:inline-block;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif;font-size:16px;font-weight:400;line-height:1.3;margin:0;padding:0;white-space:nowrap}.tox .tox-button-link--sm{font-size:14px}.tox .tox-button--naked{background-color:transparent;border-color:transparent;box-shadow:unset;color:#222f3e}.tox .tox-button--naked[disabled]{background-color:#f0f0f0;border-color:#f0f0f0;box-shadow:none;color:rgba(34,47,62,.5)}.tox .tox-button--naked:hover:not(:disabled){background-color:#e3e3e3;border-color:#e3e3e3;box-shadow:none;color:#222f3e}.tox .tox-button--naked:focus:not(:disabled){background-color:#e3e3e3;border-color:#e3e3e3;box-shadow:none;color:#222f3e}.tox .tox-button--naked:active:not(:disabled){background-color:#d6d6d6;border-color:#d6d6d6;box-shadow:none;color:#222f3e}.tox .tox-button--naked .tox-icon svg{fill:currentColor}.tox .tox-button--naked.tox-button--icon:hover:not(:disabled){color:#222f3e}.tox .tox-checkbox{-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;border-radius:3px;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:36px;min-width:36px}.tox .tox-checkbox__input{height:1px;overflow:hidden;position:absolute;top:auto;width:1px}.tox .tox-checkbox__icons{-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;border-radius:3px;box-shadow:0 0 0 2px transparent;box-sizing:content-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:24px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding:3px;width:24px}.tox .tox-checkbox__icons .tox-checkbox-icon__unchecked svg{display:block;fill:rgba(34,47,62,.3)}.tox .tox-checkbox__icons .tox-checkbox-icon__indeterminate svg{display:none;fill:#207ab7}.tox .tox-checkbox__icons .tox-checkbox-icon__checked svg{display:none;fill:#207ab7}.tox .tox-checkbox--disabled{color:rgba(34,47,62,.5);cursor:not-allowed}.tox .tox-checkbox--disabled .tox-checkbox__icons .tox-checkbox-icon__checked svg{fill:rgba(34,47,62,.5)}.tox .tox-checkbox--disabled .tox-checkbox__icons .tox-checkbox-icon__unchecked svg{fill:rgba(34,47,62,.5)}.tox .tox-checkbox--disabled .tox-checkbox__icons .tox-checkbox-icon__indeterminate svg{fill:rgba(34,47,62,.5)}.tox input.tox-checkbox__input:checked+.tox-checkbox__icons .tox-checkbox-icon__unchecked svg{display:none}.tox input.tox-checkbox__input:checked+.tox-checkbox__icons .tox-checkbox-icon__checked svg{display:block}.tox input.tox-checkbox__input:indeterminate+.tox-checkbox__icons .tox-checkbox-icon__unchecked svg{display:none}.tox input.tox-checkbox__input:indeterminate+.tox-checkbox__icons .tox-checkbox-icon__indeterminate svg{display:block}.tox input.tox-checkbox__input:focus+.tox-checkbox__icons{border-radius:3px;box-shadow:inset 0 0 0 1px #207ab7;padding:3px}.tox:not([dir=rtl]) .tox-checkbox__label{margin-left:4px}.tox:not([dir=rtl]) .tox-checkbox__input{left:-10000px}.tox:not([dir=rtl]) .tox-bar .tox-checkbox{margin-left:4px}.tox[dir=rtl] .tox-checkbox__label{margin-right:4px}.tox[dir=rtl] .tox-checkbox__input{right:-10000px}.tox[dir=rtl] .tox-bar .tox-checkbox{margin-right:4px}.tox .tox-collection--toolbar .tox-collection__group{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:0}.tox .tox-collection--grid .tox-collection__group{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;max-height:208px;overflow-x:hidden;overflow-y:auto;padding:0}.tox .tox-collection--list .tox-collection__group{border-bottom-width:0;border-color:#ccc;border-left-width:0;border-right-width:0;border-style:solid;border-top-width:1px;padding:4px 0}.tox .tox-collection--list .tox-collection__group:first-child{border-top-width:0}.tox .tox-collection__group-heading{background-color:#e6e6e6;color:rgba(34,47,62,.7);cursor:default;font-size:12px;font-style:normal;font-weight:400;margin-bottom:4px;margin-top:-4px;padding:4px 8px;text-transform:none;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.tox .tox-collection__item{-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;color:#222f3e;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.tox .tox-collection--list .tox-collection__item{padding:4px 8px}.tox .tox-collection--toolbar .tox-collection__item,.tox .tox-collection--grid .tox-collection__item{border-radius:3px;padding:4px}.tox .tox-collection--list .tox-collection__item--enabled{background-color:#fff;color:#222f3e}.tox .tox-collection--list .tox-collection__item--active{background-color:#dee0e2}.tox .tox-collection--toolbar .tox-collection__item--enabled{background-color:#c8cbcf;color:#222f3e}.tox .tox-collection--toolbar .tox-collection__item--active{background-color:#dee0e2}.tox .tox-collection--grid .tox-collection__item--enabled{background-color:#c8cbcf;color:#222f3e}.tox .tox-collection--grid .tox-collection__item--active:not(.tox-collection__item--state-disabled){background-color:#dee0e2;color:#222f3e}.tox .tox-collection--list .tox-collection__item--active:not(.tox-collection__item--state-disabled){color:#222f3e}.tox .tox-collection--toolbar .tox-collection__item--active:not(.tox-collection__item--state-disabled){color:#222f3e}.tox .tox-collection__item--state-disabled{background-color:transparent;color:rgba(34,47,62,.5);cursor:not-allowed}.tox .tox-collection__item-checkmark,.tox .tox-collection__item-icon{-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:24px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;width:24px}.tox .tox-collection__item-checkmark svg,.tox .tox-collection__item-icon svg{fill:currentColor}.tox .tox-collection--toolbar-lg .tox-collection__item-icon{height:48px;width:48px}.tox .tox-collection__item-label{color:currentColor;display:inline-block;-webkit-box-flex:1;-webkit-flex:1 1;-ms-flex:1 1;flex:1 1;-ms-flex-preferred-size:auto;font-size:14px;font-style:normal;font-weight:400;line-height:24px;text-transform:none;word-break:break-all}.tox .tox-collection__item-accessory{color:rgba(34,47,62,.7);display:inline-block;font-size:14px;height:24px;line-height:24px;text-transform:none}.tox .tox-collection__item-caret{-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;min-height:24px}.tox .tox-collection__item-caret:after{content:\"\";font-size:0;min-height:inherit}.tox .tox-collection__item-caret svg{fill:#222f3e}.tox .tox-collection--list .tox-collection__item:not(.tox-collection__item--enabled) .tox-collection__item-checkmark svg{display:none}.tox .tox-collection--list .tox-collection__item:not(.tox-collection__item--enabled) .tox-collection__item-accessory+.tox-collection__item-checkmark{display:none}.tox .tox-collection--horizontal{background-color:#fff;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 3px rgba(0,0,0,.15);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex:0;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;margin-bottom:0;overflow-x:auto;padding:0}.tox .tox-collection--horizontal .tox-collection__group{-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;margin:0;padding:0 4px}.tox .tox-collection--horizontal .tox-collection__item{height:34px;margin:2px 0 3px;padding:0 4px}.tox .tox-collection--horizontal .tox-collection__item-label{white-space:nowrap}.tox .tox-collection--horizontal .tox-collection__item-caret{margin-left:4px}.tox .tox-collection__item-container{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.tox .tox-collection__item-container--row{-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-flex:1;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row}.tox .tox-collection__item-container--row.tox-collection__item-container--align-left{margin-right:auto}.tox .tox-collection__item-container--row.tox-collection__item-container--align-right{-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;margin-left:auto}.tox .tox-collection__item-container--row.tox-collection__item-container--valign-top{-webkit-box-align:start;-webkit-align-items:flex-start;-ms-flex-align:start;align-items:flex-start;margin-bottom:auto}.tox .tox-collection__item-container--row.tox-collection__item-container--valign-middle{-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.tox .tox-collection__item-container--row.tox-collection__item-container--valign-bottom{-webkit-box-align:end;-webkit-align-items:flex-end;-ms-flex-align:end;align-items:flex-end;margin-top:auto}.tox .tox-collection__item-container--column{-ms-grid-row-align:center;-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;-webkit-box-flex:1;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column}.tox .tox-collection__item-container--column.tox-collection__item-container--align-left{-webkit-box-align:start;-webkit-align-items:flex-start;-ms-flex-align:start;align-items:flex-start}.tox .tox-collection__item-container--column.tox-collection__item-container--align-right{-webkit-box-align:end;-webkit-align-items:flex-end;-ms-flex-align:end;align-items:flex-end}.tox .tox-collection__item-container--column.tox-collection__item-container--valign-top{-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start}.tox .tox-collection__item-container--column.tox-collection__item-container--valign-middle{-ms-grid-row-align:center;-webkit-align-self:center;-ms-flex-item-align:center;align-self:center}.tox .tox-collection__item-container--column.tox-collection__item-container--valign-bottom{-webkit-align-self:flex-end;-ms-flex-item-align:end;align-self:flex-end}.tox:not([dir=rtl]) .tox-collection--horizontal .tox-collection__group:not(:last-of-type){border-right:1px solid #ccc}.tox:not([dir=rtl]) .tox-collection--list .tox-collection__item>:not(:first-child){margin-left:8px}.tox:not([dir=rtl]) .tox-collection--list .tox-collection__item>.tox-collection__item-label:first-child{margin-left:4px}.tox:not([dir=rtl]) .tox-collection__item-accessory{margin-left:16px;text-align:right}.tox:not([dir=rtl]) .tox-collection .tox-collection__item-caret{margin-left:16px}.tox[dir=rtl] .tox-collection--horizontal .tox-collection__group:not(:last-of-type){border-left:1px solid #ccc}.tox[dir=rtl] .tox-collection--list .tox-collection__item>:not(:first-child){margin-right:8px}.tox[dir=rtl] .tox-collection--list .tox-collection__item>.tox-collection__item-label:first-child{margin-right:4px}.tox[dir=rtl] .tox-collection__item-icon-rtl .tox-collection__item-icon svg{-webkit-transform:rotateY(180deg);transform:rotateY(180deg)}.tox[dir=rtl] .tox-collection__item-accessory{margin-right:16px;text-align:left}.tox[dir=rtl] .tox-collection .tox-collection__item-caret{margin-right:16px;-webkit-transform:rotateY(180deg);transform:rotateY(180deg)}.tox[dir=rtl] .tox-collection--horizontal .tox-collection__item-caret{margin-right:4px}.tox .tox-color-picker-container{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;height:225px;margin:0}.tox .tox-sv-palette{box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:100%}.tox .tox-sv-palette-spectrum{height:100%}.tox .tox-sv-palette,.tox .tox-sv-palette-spectrum{width:225px}.tox .tox-sv-palette-thumb{background:0 0;border:1px solid #000;border-radius:50%;box-sizing:content-box;height:12px;position:absolute;width:12px}.tox .tox-sv-palette-inner-thumb{border:1px solid #fff;border-radius:50%;height:10px;position:absolute;width:10px}.tox .tox-hue-slider{box-sizing:border-box;height:100%;width:25px}.tox .tox-hue-slider-spectrum{background:-webkit-linear-gradient(top,red,#ff0080,#f0f,#8000ff,#00f,#0080ff,#0ff,#00ff80,#0f0,#80ff00,#ff0,#ff8000,red);background:linear-gradient(to bottom,red,#ff0080,#f0f,#8000ff,#00f,#0080ff,#0ff,#00ff80,#0f0,#80ff00,#ff0,#ff8000,red);height:100%;width:100%}.tox .tox-hue-slider,.tox .tox-hue-slider-spectrum{width:20px}.tox .tox-hue-slider-thumb{background:#fff;border:1px solid #000;box-sizing:content-box;height:4px;width:100%}.tox .tox-rgb-form{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between}.tox .tox-rgb-form div{-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;margin-bottom:5px;width:inherit}.tox .tox-rgb-form input{width:6em}.tox .tox-rgb-form input.tox-invalid{border:1px solid red!important}.tox .tox-rgb-form .tox-rgba-preview{border:1px solid #000;-webkit-box-flex:2;-webkit-flex-grow:2;-ms-flex-positive:2;flex-grow:2;margin-bottom:0}.tox:not([dir=rtl]) .tox-sv-palette{margin-right:15px}.tox:not([dir=rtl]) .tox-hue-slider{margin-right:15px}.tox:not([dir=rtl]) .tox-hue-slider-thumb{margin-left:-1px}.tox:not([dir=rtl]) .tox-rgb-form label{margin-right:.5em}.tox[dir=rtl] .tox-sv-palette,.tox[dir=rtl] .tox-hue-slider{margin-left:15px}.tox[dir=rtl] .tox-hue-slider-thumb{margin-right:-1px}.tox[dir=rtl] .tox-rgb-form label{margin-left:.5em}.tox .tox-toolbar .tox-swatches,.tox .tox-toolbar__overflow .tox-swatches,.tox .tox-toolbar__primary .tox-swatches{margin:2px 0 3px 4px}.tox .tox-collection--list .tox-collection__group .tox-swatches-menu{border:0;margin:-4px 0}.tox .tox-swatches__row{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.tox .tox-swatch{height:30px;-webkit-transition:box-shadow .15s,-webkit-transform .15s;transition:box-shadow .15s,-webkit-transform .15s;transition:transform .15s,box-shadow .15s;transition:transform .15s,box-shadow .15s,-webkit-transform .15s;width:30px}.tox .tox-swatch:focus,.tox .tox-swatch:hover{box-shadow:0 0 0 1px rgba(127,127,127,.3) inset;-webkit-transform:scale(.8);-ms-transform:scale(.8);transform:scale(.8)}.tox .tox-swatch--remove{-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center}.tox .tox-swatch--remove svg path{stroke:#e74c3c}.tox .tox-swatches__picker-btn{-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;background-color:transparent;border:0;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:30px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:0;padding:0;width:30px}.tox .tox-swatches__picker-btn svg{height:24px;width:24px}.tox .tox-swatches__picker-btn:hover{background:#dee0e2}.tox:not([dir=rtl]) .tox-swatches__picker-btn{margin-left:auto}.tox[dir=rtl] .tox-swatches__picker-btn{margin-right:auto}.tox .tox-comment-thread{background:#fff;position:relative}.tox .tox-comment-thread>:not(:first-child){margin-top:8px}.tox .tox-comment{background:#fff;border:1px solid #ccc;border-radius:3px;box-shadow:0 4px 8px rgba(34,47,62,.1);padding:8px 8px 16px;position:relative}.tox .tox-comment__header{-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;color:#222f3e;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between}.tox .tox-comment__date{color:rgba(34,47,62,.7);font-size:12px}.tox .tox-comment__body{color:#222f3e;font-size:14px;font-style:normal;font-weight:400;line-height:1.3;margin-top:8px;position:relative;text-transform:initial}.tox .tox-comment__body textarea{resize:none;white-space:normal;width:100%}.tox .tox-comment__expander{padding-top:8px}.tox .tox-comment__expander p{color:rgba(34,47,62,.7);font-size:14px;font-style:normal}.tox .tox-comment__body p{margin:0}.tox .tox-comment__buttonspacing{padding-top:16px;text-align:center}.tox .tox-comment-thread__overlay:after{background:#fff;bottom:0;content:\"\";display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;left:0;opacity:.9;position:absolute;right:0;top:0;z-index:5}.tox .tox-comment__reply{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;margin-top:8px}.tox .tox-comment__reply>:first-child{margin-bottom:8px;width:100%}.tox .tox-comment__edit{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;margin-top:16px}.tox .tox-comment__gradient:after{background:-webkit-linear-gradient(rgba(255,255,255,0),#fff);background:linear-gradient(rgba(255,255,255,0),#fff);bottom:0;content:\"\";display:block;height:5em;margin-top:-40px;position:absolute;width:100%}.tox .tox-comment__overlay{background:#fff;bottom:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;left:0;opacity:.9;position:absolute;right:0;text-align:center;top:0;z-index:5}.tox .tox-comment__loading-text{-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;color:#222f3e;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;position:relative}.tox .tox-comment__loading-text>div{padding-bottom:16px}.tox .tox-comment__overlaytext{bottom:0;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;font-size:14px;left:0;padding:1em;position:absolute;right:0;top:0;z-index:10}.tox .tox-comment__overlaytext p{background-color:#fff;box-shadow:0 0 8px 8px #fff;color:#222f3e;text-align:center}.tox .tox-comment__overlaytext div:nth-of-type(2){font-size:.8em}.tox .tox-comment__busy-spinner{-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;background-color:#fff;bottom:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;left:0;position:absolute;right:0;top:0;z-index:20}.tox .tox-comment__scroll{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-flex-shrink:1;-ms-flex-negative:1;flex-shrink:1;overflow:auto}.tox .tox-conversations{margin:8px}.tox:not([dir=rtl]) .tox-comment__edit{margin-left:8px}.tox:not([dir=rtl]) .tox-comment__buttonspacing>:last-child,.tox:not([dir=rtl]) .tox-comment__edit>:last-child,.tox:not([dir=rtl]) .tox-comment__reply>:last-child{margin-left:8px}.tox[dir=rtl] .tox-comment__edit{margin-right:8px}.tox[dir=rtl] .tox-comment__buttonspacing>:last-child,.tox[dir=rtl] .tox-comment__edit>:last-child,.tox[dir=rtl] .tox-comment__reply>:last-child{margin-right:8px}.tox .tox-user{-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.tox .tox-user__avatar svg{fill:rgba(34,47,62,.7)}.tox .tox-user__name{color:rgba(34,47,62,.7);font-size:12px;font-style:normal;font-weight:700;text-transform:uppercase}.tox:not([dir=rtl]) .tox-user__avatar svg{margin-right:8px}.tox:not([dir=rtl]) .tox-user__avatar+.tox-user__name{margin-left:8px}.tox[dir=rtl] .tox-user__avatar svg{margin-left:8px}.tox[dir=rtl] .tox-user__avatar+.tox-user__name{margin-right:8px}.tox .tox-dialog-wrap{-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;bottom:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;left:0;position:fixed;right:0;top:0;z-index:1100}.tox .tox-dialog-wrap__backdrop{background-color:rgba(255,255,255,.75);bottom:0;left:0;position:absolute;right:0;top:0;z-index:1}.tox .tox-dialog-wrap__backdrop--opaque{background-color:#fff}.tox .tox-dialog{background-color:#fff;border-color:#ccc;border-radius:3px;border-style:solid;border-width:1px;box-shadow:0 16px 16px -10px rgba(34,47,62,.15),0 0 40px 1px rgba(34,47,62,.15);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;max-height:100%;max-width:480px;overflow:hidden;position:relative;width:95vw;z-index:2}@media only screen and (max-width:767px){body:not(.tox-force-desktop) .tox .tox-dialog{-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;margin:8px auto;width:calc(100vw - 16px)}}.tox .tox-dialog-inline{z-index:1100}.tox .tox-dialog__header{-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;background-color:#fff;border-bottom:none;color:#222f3e;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:16px;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;padding:8px 16px 0;position:relative}.tox .tox-dialog__header .tox-button{z-index:1}.tox .tox-dialog__draghandle{cursor:-webkit-grab;cursor:grab;height:100%;left:0;position:absolute;top:0;width:100%}.tox .tox-dialog__draghandle:active{cursor:-webkit-grabbing;cursor:grabbing}.tox .tox-dialog__dismiss{margin-left:auto}.tox .tox-dialog__title{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif;font-size:20px;font-style:normal;font-weight:400;line-height:1.3;margin:0;text-transform:none}.tox .tox-dialog__body{color:#222f3e;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex:1 1;-ms-flex:1 1;flex:1 1;-ms-flex-preferred-size:auto;font-size:16px;font-style:normal;font-weight:400;line-height:1.3;min-width:0;text-align:left;text-transform:none}@media only screen and (max-width:767px){body:not(.tox-force-desktop) .tox .tox-dialog__body{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column}}.tox .tox-dialog__body-nav{-webkit-box-align:start;-webkit-align-items:flex-start;-ms-flex-align:start;align-items:flex-start;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;padding:16px}@media only screen and (max-width:767px){body:not(.tox-force-desktop) .tox .tox-dialog__body-nav{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-overflow-scrolling:touch;overflow-x:auto;padding-bottom:0}}.tox .tox-dialog__body-nav-item{border-bottom:2px solid transparent;color:rgba(34,47,62,.7);display:inline-block;font-size:14px;line-height:1.3;margin-bottom:8px;text-decoration:none;white-space:nowrap}.tox .tox-dialog__body-nav-item:focus{background-color:rgba(32,122,183,.1)}.tox .tox-dialog__body-nav-item--active{border-bottom:2px solid #207ab7;color:#207ab7}.tox .tox-dialog__body-content{box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex:1 1;-ms-flex:1 1;flex:1 1;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-ms-flex-preferred-size:auto;max-height:650px;overflow:auto;-webkit-overflow-scrolling:touch;padding:16px}.tox .tox-dialog__body-content>*{margin-bottom:0;margin-top:16px}.tox .tox-dialog__body-content>:first-child{margin-top:0}.tox .tox-dialog__body-content>:last-child{margin-bottom:0}.tox .tox-dialog__body-content>:only-child{margin-bottom:0;margin-top:0}.tox .tox-dialog__body-content a{color:#207ab7;cursor:pointer;text-decoration:none}.tox .tox-dialog__body-content a:focus,.tox .tox-dialog__body-content a:hover{color:#185d8c;text-decoration:none}.tox .tox-dialog__body-content a:active{color:#185d8c;text-decoration:none}.tox .tox-dialog__body-content svg{fill:#222f3e}.tox .tox-dialog__body-content ul{display:block;list-style-type:disc;margin-bottom:16px;-webkit-margin-end:0;-moz-margin-end:0;margin-inline-end:0;-webkit-margin-start:0;-moz-margin-start:0;margin-inline-start:0;-webkit-padding-start:2.5rem;-moz-padding-start:2.5rem;padding-inline-start:2.5rem}.tox .tox-dialog__body-content .tox-form__group h1{color:#222f3e;font-size:20px;font-style:normal;font-weight:700;letter-spacing:normal;margin-bottom:16px;margin-top:2rem;text-transform:none}.tox .tox-dialog__body-content .tox-form__group h2{color:#222f3e;font-size:16px;font-style:normal;font-weight:700;letter-spacing:normal;margin-bottom:16px;margin-top:2rem;text-transform:none}.tox .tox-dialog__body-content .tox-form__group p{margin-bottom:16px}.tox .tox-dialog__body-content .tox-form__group h1:first-child,.tox .tox-dialog__body-content .tox-form__group h2:first-child,.tox .tox-dialog__body-content .tox-form__group p:first-child{margin-top:0}.tox .tox-dialog__body-content .tox-form__group h1:last-child,.tox .tox-dialog__body-content .tox-form__group h2:last-child,.tox .tox-dialog__body-content .tox-form__group p:last-child{margin-bottom:0}.tox .tox-dialog__body-content .tox-form__group h1:only-child,.tox .tox-dialog__body-content .tox-form__group h2:only-child,.tox .tox-dialog__body-content .tox-form__group p:only-child{margin-bottom:0;margin-top:0}.tox .tox-dialog--width-lg{height:650px;max-width:1200px}.tox .tox-dialog--width-md{max-width:800px}.tox .tox-dialog--width-md .tox-dialog__body-content{overflow:auto}.tox .tox-dialog__body-content--centered{text-align:center}.tox .tox-dialog__footer{-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;background-color:#fff;border-top:1px solid #ccc;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;padding:8px 16px}.tox .tox-dialog__footer-end,.tox .tox-dialog__footer-start{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.tox .tox-dialog__busy-spinner{-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;background-color:rgba(255,255,255,.75);bottom:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;left:0;position:absolute;right:0;top:0;z-index:3}.tox .tox-dialog__table{border-collapse:collapse;width:100%}.tox .tox-dialog__table thead th{font-weight:700;padding-bottom:8px}.tox .tox-dialog__table tbody tr{border-bottom:1px solid #ccc}.tox .tox-dialog__table tbody tr:last-child{border-bottom:none}.tox .tox-dialog__table td{padding-bottom:8px;padding-top:8px}.tox .tox-dialog__popups{position:absolute;width:100%;z-index:1100}.tox .tox-dialog__body-iframe{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex:1 1;-ms-flex:1 1;flex:1 1;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-ms-flex-preferred-size:auto}.tox .tox-dialog__body-iframe .tox-navobj{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex:1 1;-ms-flex:1 1;flex:1 1;-ms-flex-preferred-size:auto}.tox .tox-dialog__body-iframe .tox-navobj :nth-child(2){-webkit-box-flex:1;-webkit-flex:1 1;-ms-flex:1 1;flex:1 1;-ms-flex-preferred-size:auto;height:100%}.tox .tox-dialog-dock-fadeout{opacity:0;visibility:hidden}.tox .tox-dialog-dock-fadein{opacity:1;visibility:visible}.tox .tox-dialog-dock-transition{-webkit-transition:visibility 0s linear .3s,opacity .3s ease;transition:visibility 0s linear .3s,opacity .3s ease}.tox .tox-dialog-dock-transition.tox-dialog-dock-fadein{-webkit-transition-delay:0s;transition-delay:0s}.tox.tox-platform-ie .tox-dialog-wrap{position:-ms-device-fixed}@media only screen and (max-width:767px){body:not(.tox-force-desktop) .tox:not([dir=rtl]) .tox-dialog__body-nav{margin-right:0}}@media only screen and (max-width:767px){body:not(.tox-force-desktop) .tox:not([dir=rtl]) .tox-dialog__body-nav-item:not(:first-child){margin-left:8px}}.tox:not([dir=rtl]) .tox-dialog__footer .tox-dialog__footer-end>*,.tox:not([dir=rtl]) .tox-dialog__footer .tox-dialog__footer-start>*{margin-left:8px}.tox[dir=rtl] .tox-dialog__body{text-align:right}@media only screen and (max-width:767px){body:not(.tox-force-desktop) .tox[dir=rtl] .tox-dialog__body-nav{margin-left:0}}@media only screen and (max-width:767px){body:not(.tox-force-desktop) .tox[dir=rtl] .tox-dialog__body-nav-item:not(:first-child){margin-right:8px}}.tox[dir=rtl] .tox-dialog__footer .tox-dialog__footer-end>*,.tox[dir=rtl] .tox-dialog__footer .tox-dialog__footer-start>*{margin-right:8px}body.tox-dialog__disable-scroll{overflow:hidden}.tox .tox-dropzone-container{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex:1 1;-ms-flex:1 1;flex:1 1;-ms-flex-preferred-size:auto}.tox .tox-dropzone{-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;background:#fff;border:2px dashed #ccc;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;min-height:100px;padding:10px}.tox .tox-dropzone p{color:rgba(34,47,62,.7);margin:0 0 16px}.tox .tox-edit-area{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex:1 1;-ms-flex:1 1;flex:1 1;-ms-flex-preferred-size:auto;overflow:hidden;position:relative}.tox .tox-edit-area__iframe{background-color:#fff;border:0;box-sizing:border-box;-webkit-box-flex:1;-webkit-flex:1 1;-ms-flex:1 1;flex:1 1;-ms-flex-preferred-size:auto;height:100%;position:absolute;width:100%}.tox.tox-inline-edit-area{border:1px dotted #ccc}.tox .tox-editor-container{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;overflow:hidden}.tox .tox-editor-header{z-index:1}.tox:not(.tox-tinymce-inline) .tox-editor-header{box-shadow:none;-webkit-transition:box-shadow .5s;transition:box-shadow .5s}.tox.tox-tinymce--toolbar-bottom .tox-editor-header,.tox.tox-tinymce-inline .tox-editor-header{margin-bottom:-1px}.tox.tox-tinymce--toolbar-sticky-on .tox-editor-header{background-color:transparent;box-shadow:0 4px 4px -3px rgba(0,0,0,.25)}.tox-editor-dock-fadeout{opacity:0;visibility:hidden}.tox-editor-dock-fadein{opacity:1;visibility:visible}.tox-editor-dock-transition{-webkit-transition:visibility 0s linear .25s,opacity .25s ease;transition:visibility 0s linear .25s,opacity .25s ease}.tox-editor-dock-transition.tox-editor-dock-fadein{-webkit-transition-delay:0s;transition-delay:0s}.tox .tox-control-wrap{-webkit-box-flex:1;-webkit-flex:1 1;-ms-flex:1 1;flex:1 1;position:relative}.tox .tox-control-wrap:not(.tox-control-wrap--status-invalid) .tox-control-wrap__status-icon-invalid,.tox .tox-control-wrap:not(.tox-control-wrap--status-unknown) .tox-control-wrap__status-icon-unknown,.tox .tox-control-wrap:not(.tox-control-wrap--status-valid) .tox-control-wrap__status-icon-valid{display:none}.tox .tox-control-wrap svg{display:block}.tox .tox-control-wrap__status-icon-wrap{position:absolute;top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%)}.tox .tox-control-wrap__status-icon-invalid svg{fill:#c00}.tox .tox-control-wrap__status-icon-unknown svg{fill:orange}.tox .tox-control-wrap__status-icon-valid svg{fill:green}.tox:not([dir=rtl]) .tox-control-wrap--status-invalid .tox-textfield,.tox:not([dir=rtl]) .tox-control-wrap--status-unknown .tox-textfield,.tox:not([dir=rtl]) .tox-control-wrap--status-valid .tox-textfield{padding-right:32px}.tox:not([dir=rtl]) .tox-control-wrap__status-icon-wrap{right:4px}.tox[dir=rtl] .tox-control-wrap--status-invalid .tox-textfield,.tox[dir=rtl] .tox-control-wrap--status-unknown .tox-textfield,.tox[dir=rtl] .tox-control-wrap--status-valid .tox-textfield{padding-left:32px}.tox[dir=rtl] .tox-control-wrap__status-icon-wrap{left:4px}.tox .tox-autocompleter,.tox .tox-autocompleter .tox-menu{max-width:25em}.tox .tox-autocompleter .tox-autocompleter-highlight{font-weight:700}.tox .tox-color-input{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:relative;z-index:1}.tox .tox-color-input .tox-textfield{z-index:-1}.tox .tox-color-input span{border-color:rgba(34,47,62,.2);border-radius:3px;border-style:solid;border-width:1px;box-shadow:none;box-sizing:border-box;height:24px;position:absolute;top:6px;width:24px}.tox .tox-color-input span:focus:not([aria-disabled=true]),.tox .tox-color-input span:hover:not([aria-disabled=true]){border-color:#207ab7;cursor:pointer}.tox .tox-color-input span:before{background-image:-webkit-linear-gradient(45deg,rgba(0,0,0,.25) 25%,transparent 25%),-webkit-linear-gradient(135deg,rgba(0,0,0,.25) 25%,transparent 25%),-webkit-linear-gradient(45deg,transparent 75%,rgba(0,0,0,.25) 75%),-webkit-linear-gradient(135deg,transparent 75%,rgba(0,0,0,.25) 75%);background-image:linear-gradient(45deg,rgba(0,0,0,.25) 25%,transparent 25%),linear-gradient(-45deg,rgba(0,0,0,.25) 25%,transparent 25%),linear-gradient(45deg,transparent 75%,rgba(0,0,0,.25) 75%),linear-gradient(-45deg,transparent 75%,rgba(0,0,0,.25) 75%);background-position:0 0,0 6px,6px -6px,-6px 0;background-size:12px 12px;border:1px solid #fff;border-radius:3px;box-sizing:border-box;content:\"\";height:24px;left:-1px;position:absolute;top:-1px;width:24px;z-index:-1}.tox .tox-color-input span[aria-disabled=true]{cursor:not-allowed}.tox:not([dir=rtl]) .tox-color-input .tox-textfield{padding-left:36px}.tox:not([dir=rtl]) .tox-color-input span{left:6px}.tox[dir=rtl] .tox-color-input .tox-textfield{padding-right:36px}.tox[dir=rtl] .tox-color-input span{right:6px}.tox .tox-label,.tox .tox-toolbar-label{color:rgba(34,47,62,.7);display:block;font-size:14px;font-style:normal;font-weight:400;line-height:1.3;padding:0 8px 0 0;text-transform:none;white-space:nowrap}.tox .tox-toolbar-label{padding:0 8px}.tox[dir=rtl] .tox-label{padding:0 0 0 8px}.tox .tox-form{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex:1 1;-ms-flex:1 1;flex:1 1;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-ms-flex-preferred-size:auto}.tox .tox-form__group{box-sizing:border-box;margin-bottom:4px}.tox .tox-form-group--maximize{-webkit-box-flex:1;-webkit-flex:1 1;-ms-flex:1 1;flex:1 1}.tox .tox-form__group--error{color:#c00}.tox .tox-form__group--collection{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.tox .tox-form__grid{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between}.tox .tox-form__grid--2col>.tox-form__group{width:calc(50% - 4px)}.tox .tox-form__grid--3col>.tox-form__group{width:calc(100% / 3 - (8px / 2))}.tox .tox-form__grid--4col>.tox-form__group{width:calc(25% - 4px)}.tox .tox-form__controls-h-stack,.tox .tox-form__group--inline{-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.tox .tox-form__group--stretched{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex:1 1;-ms-flex:1 1;flex:1 1;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-ms-flex-preferred-size:auto}.tox .tox-form__group--stretched .tox-textarea{-webkit-box-flex:1;-webkit-flex:1 1;-ms-flex:1 1;flex:1 1;-ms-flex-preferred-size:auto}.tox .tox-form__group--stretched .tox-navobj{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex:1 1;-ms-flex:1 1;flex:1 1;-ms-flex-preferred-size:auto}.tox .tox-form__group--stretched .tox-navobj :nth-child(2){-webkit-box-flex:1;-webkit-flex:1 1;-ms-flex:1 1;flex:1 1;-ms-flex-preferred-size:auto;height:100%}.tox:not([dir=rtl]) .tox-form__controls-h-stack>:not(:first-child){margin-left:4px}.tox[dir=rtl] .tox-form__controls-h-stack>:not(:first-child){margin-right:4px}.tox .tox-lock.tox-locked .tox-lock-icon__unlock,.tox .tox-lock:not(.tox-locked) .tox-lock-icon__lock{display:none}.tox .tox-listboxfield .tox-listbox--select,.tox .tox-textarea,.tox .tox-textfield,.tox .tox-toolbar-textfield{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#fff;border-color:#ccc;border-radius:3px;border-style:solid;border-width:1px;box-shadow:none;box-sizing:border-box;color:#222f3e;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif;font-size:16px;line-height:24px;margin:0;min-height:34px;outline:0;padding:5px 4.75px;resize:none;width:100%}.tox .tox-textarea[disabled],.tox .tox-textfield[disabled]{background-color:#f2f2f2;color:rgba(34,47,62,.85);cursor:not-allowed}.tox .tox-listboxfield .tox-listbox--select:focus,.tox .tox-textarea:focus,.tox .tox-textfield:focus{background-color:#fff;border-color:#207ab7;box-shadow:none;outline:0}.tox .tox-toolbar-textfield{border-width:0;margin-bottom:3px;margin-top:2px;max-width:250px}.tox .tox-naked-btn{background-color:transparent;border:0;border-color:transparent;box-shadow:unset;color:#207ab7;cursor:pointer;display:block;margin:0;padding:0}.tox .tox-naked-btn svg{display:block;fill:#222f3e}.tox:not([dir=rtl]) .tox-toolbar-textfield+*{margin-left:4px}.tox[dir=rtl] .tox-toolbar-textfield+*{margin-right:4px}.tox .tox-listboxfield{cursor:pointer;position:relative}.tox .tox-listboxfield .tox-listbox--select[disabled]{background-color:#f2f2f2;color:rgba(34,47,62,.85);cursor:not-allowed}.tox .tox-listbox__select-label{cursor:default;-webkit-box-flex:1;-webkit-flex:1 1;-ms-flex:1 1;flex:1 1;margin:0 4px}.tox .tox-listbox__select-chevron{-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;width:16px}.tox .tox-listbox__select-chevron svg{fill:#222f3e}.tox .tox-listboxfield .tox-listbox--select{-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.tox:not([dir=rtl]) .tox-listboxfield svg{right:8px}.tox[dir=rtl] .tox-listboxfield svg{left:8px}.tox .tox-selectfield{cursor:pointer;position:relative}.tox .tox-selectfield select{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#fff;border-color:#ccc;border-radius:3px;border-style:solid;border-width:1px;box-shadow:none;box-sizing:border-box;color:#222f3e;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif;font-size:16px;line-height:24px;margin:0;min-height:34px;outline:0;padding:5px 4.75px;resize:none;width:100%}.tox .tox-selectfield select[disabled]{background-color:#f2f2f2;color:rgba(34,47,62,.85);cursor:not-allowed}.tox .tox-selectfield select::-ms-expand{display:none}.tox .tox-selectfield select:focus{background-color:#fff;border-color:#207ab7;box-shadow:none;outline:0}.tox .tox-selectfield svg{pointer-events:none;position:absolute;top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%)}.tox:not([dir=rtl]) .tox-selectfield select[size=\"0\"],.tox:not([dir=rtl]) .tox-selectfield select[size=\"1\"]{padding-right:24px}.tox:not([dir=rtl]) .tox-selectfield svg{right:8px}.tox[dir=rtl] .tox-selectfield select[size=\"0\"],.tox[dir=rtl] .tox-selectfield select[size=\"1\"]{padding-left:24px}.tox[dir=rtl] .tox-selectfield svg{left:8px}.tox .tox-textarea{-webkit-appearance:textarea;-moz-appearance:textarea;appearance:textarea;white-space:pre-wrap}.tox-fullscreen{border:0;height:100%;left:0;margin:0;overflow:hidden;-ms-scroll-chaining:none;overscroll-behavior:none;padding:0;position:fixed;top:0;-ms-touch-action:pinch-zoom;touch-action:pinch-zoom;width:100%}.tox.tox-tinymce.tox-fullscreen .tox-statusbar__resize-handle{display:none}.tox.tox-tinymce.tox-fullscreen{background-color:transparent;z-index:1200}.tox-shadowhost.tox-fullscreen{z-index:1200}.tox-fullscreen .tox.tox-tinymce-aux,.tox-fullscreen~.tox.tox-tinymce-aux{z-index:1201}.tox .tox-help__more-link{list-style:none;margin-top:1em}.tox .tox-image-tools{width:100%}.tox .tox-image-tools__toolbar{-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center}.tox .tox-image-tools__image{background-color:#666;height:380px;overflow:auto;position:relative;width:100%}.tox .tox-image-tools__image,.tox .tox-image-tools__image+.tox-image-tools__toolbar{margin-top:8px}.tox .tox-image-tools__image-bg{background:url(data:image/gif;base64,R0lGODdhDAAMAIABAMzMzP///ywAAAAADAAMAAACFoQfqYeabNyDMkBQb81Uat85nxguUAEAOw==)}.tox .tox-image-tools__toolbar>.tox-spacer{-webkit-box-flex:1;-webkit-flex:1 1;-ms-flex:1 1;flex:1 1;-ms-flex-preferred-size:auto}.tox .tox-croprect-block{background:#000;opacity:.5;position:absolute;zoom:1}.tox .tox-croprect-handle{border:2px solid #fff;height:20px;left:0;position:absolute;top:0;width:20px}.tox .tox-croprect-handle-move{border:0;cursor:move;position:absolute}.tox .tox-croprect-handle-nw{border-width:2px 0 0 2px;cursor:nw-resize;left:100px;margin:-2px 0 0 -2px;top:100px}.tox .tox-croprect-handle-ne{border-width:2px 2px 0 0;cursor:ne-resize;left:200px;margin:-2px 0 0 -20px;top:100px}.tox .tox-croprect-handle-sw{border-width:0 0 2px 2px;cursor:sw-resize;left:100px;margin:-20px 2px 0 -2px;top:200px}.tox .tox-croprect-handle-se{border-width:0 2px 2px 0;cursor:se-resize;left:200px;margin:-20px 0 0 -20px;top:200px}.tox:not([dir=rtl]) .tox-image-tools__toolbar>.tox-slider:not(:first-of-type){margin-left:8px}.tox:not([dir=rtl]) .tox-image-tools__toolbar>.tox-button+.tox-slider{margin-left:32px}.tox:not([dir=rtl]) .tox-image-tools__toolbar>.tox-slider+.tox-button{margin-left:32px}.tox[dir=rtl] .tox-image-tools__toolbar>.tox-slider:not(:first-of-type){margin-right:8px}.tox[dir=rtl] .tox-image-tools__toolbar>.tox-button+.tox-slider{margin-right:32px}.tox[dir=rtl] .tox-image-tools__toolbar>.tox-slider+.tox-button{margin-right:32px}.tox .tox-insert-table-picker{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;width:170px}.tox .tox-insert-table-picker>div{border-color:#ccc;border-style:solid;border-width:0 1px 1px 0;box-sizing:border-box;height:17px;width:17px}.tox .tox-collection--list .tox-collection__group .tox-insert-table-picker{margin:-4px 0}.tox .tox-insert-table-picker .tox-insert-table-picker__selected{background-color:rgba(32,122,183,.5);border-color:rgba(32,122,183,.5)}.tox .tox-insert-table-picker__label{color:rgba(34,47,62,.7);display:block;font-size:14px;padding:4px;text-align:center;width:100%}.tox:not([dir=rtl]) .tox-insert-table-picker>div:nth-child(10n){border-right:0}.tox[dir=rtl] .tox-insert-table-picker>div:nth-child(10n+1){border-right:0}.tox .tox-menu{background-color:#fff;border:1px solid #ccc;border-radius:3px;box-shadow:0 4px 8px rgba(34,47,62,.1);display:inline-block;overflow:hidden;vertical-align:top;z-index:1150}.tox .tox-menu.tox-collection.tox-collection--list{padding:0}.tox .tox-menu.tox-collection.tox-collection--toolbar,.tox .tox-menu.tox-collection.tox-collection--grid{padding:4px}.tox .tox-menu__label blockquote,.tox .tox-menu__label code,.tox .tox-menu__label h1,.tox .tox-menu__label h2,.tox .tox-menu__label h3,.tox .tox-menu__label h4,.tox .tox-menu__label h5,.tox .tox-menu__label h6,.tox .tox-menu__label p{margin:0}.tox .tox-menubar{background:url(\"data:image/svg+xml;charset=utf8,%3Csvg height='39px' viewBox='0 0 40 39px' width='40' xmlns='http://www.w3.org/2000/svg'%3E%3Crect x='0' y='38px' width='100' height='1' fill='%23cccccc'/%3E%3C/svg%3E\") left 0 top 0 #fff;background-color:#fff;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex:0;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;padding:0 4px}.tox.tox-tinymce:not(.tox-tinymce-inline) .tox-editor-header:not(:first-child) .tox-menubar{border-top:1px solid #ccc}.tox .tox-mbtn{-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;background:0 0;border:0;border-radius:3px;box-shadow:none;color:#222f3e;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex:0;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;font-size:14px;font-style:normal;font-weight:400;height:34px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin:2px 0 3px;outline:0;overflow:hidden;padding:0 4px;text-transform:none;width:auto}.tox .tox-mbtn[disabled]{background-color:transparent;border:0;box-shadow:none;color:rgba(34,47,62,.5);cursor:not-allowed}.tox .tox-mbtn:focus:not(:disabled){background:#dee0e2;border:0;box-shadow:none;color:#222f3e}.tox .tox-mbtn--active{background:#c8cbcf;border:0;box-shadow:none;color:#222f3e}.tox .tox-mbtn:hover:not(:disabled):not(.tox-mbtn--active){background:#dee0e2;border:0;box-shadow:none;color:#222f3e}.tox .tox-mbtn__select-label{cursor:default;font-weight:400;margin:0 4px}.tox .tox-mbtn[disabled] .tox-mbtn__select-label{cursor:not-allowed}.tox .tox-mbtn__select-chevron{-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;width:16px;display:none}.tox .tox-notification{border-radius:3px;border-style:solid;border-width:1px;box-shadow:none;box-sizing:border-box;display:-ms-grid;display:grid;font-size:14px;font-weight:400;-ms-grid-columns:minmax(40px,1fr) auto minmax(40px,1fr);grid-template-columns:minmax(40px,1fr) auto minmax(40px,1fr);margin-top:4px;opacity:0;padding:4px;-webkit-transition:opacity .15s ease-in,-webkit-transform .1s ease-in;transition:opacity .15s ease-in,-webkit-transform .1s ease-in;transition:transform .1s ease-in,opacity .15s ease-in;transition:transform .1s ease-in,opacity .15s ease-in,-webkit-transform .1s ease-in}.tox .tox-notification p{font-size:14px;font-weight:400}.tox .tox-notification a{text-decoration:underline}.tox .tox-notification--in{opacity:1}.tox .tox-notification--success{background-color:#e4eeda;border-color:#d7e6c8;color:#222f3e}.tox .tox-notification--success p{color:#222f3e}.tox .tox-notification--success a{color:#547831}.tox .tox-notification--success svg{fill:#222f3e}.tox .tox-notification--error{background-color:#f8dede;border-color:#f2bfbf;color:#222f3e}.tox .tox-notification--error p{color:#222f3e}.tox .tox-notification--error a{color:#c00}.tox .tox-notification--error svg{fill:#222f3e}.tox .tox-notification--warn,.tox .tox-notification--warning{background-color:#fffaea;border-color:#ffe89d;color:#222f3e}.tox .tox-notification--warn p,.tox .tox-notification--warning p,.tox .tox-notification--warn a,.tox .tox-notification--warning a{color:#222f3e}.tox .tox-notification--warn svg,.tox .tox-notification--warning svg{fill:#222f3e}.tox .tox-notification--info{background-color:#d9edf7;border-color:#779ecb;color:#222f3e}.tox .tox-notification--info p,.tox .tox-notification--info a{color:#222f3e}.tox .tox-notification--info svg{fill:#222f3e}.tox .tox-notification__body{-ms-grid-row-align:center;align-self:center;color:#222f3e;font-size:14px;-ms-grid-column-span:1;grid-column-end:3;-ms-grid-column:2;grid-column-start:2;-ms-grid-row-span:1;grid-row-end:2;-ms-grid-row:1;grid-row-start:1;text-align:center;white-space:normal;word-break:break-all;word-break:break-word}.tox .tox-notification__body>*{margin:0}.tox .tox-notification__body>*+*{margin-top:1rem}.tox .tox-notification__icon{-ms-grid-row-align:center;align-self:center;-ms-grid-column-span:1;grid-column-end:2;-ms-grid-column:1;grid-column-start:1;-ms-grid-row-span:1;grid-row-end:2;-ms-grid-row:1;grid-row-start:1;-ms-grid-column-align:end;justify-self:end}.tox .tox-notification__icon svg{display:block}.tox .tox-notification__dismiss{-ms-grid-row-align:start;align-self:start;-ms-grid-column-span:1;grid-column-end:4;-ms-grid-column:3;grid-column-start:3;-ms-grid-row-span:1;grid-row-end:2;-ms-grid-row:1;grid-row-start:1;-ms-grid-column-align:end;justify-self:end}.tox .tox-notification .tox-progress-bar{-ms-grid-column-span:3;grid-column-end:4;-ms-grid-column:1;grid-column-start:1;-ms-grid-row-span:1;grid-row-end:3;-ms-grid-row:2;grid-row-start:2;-ms-grid-column-align:center;justify-self:center}.tox .tox-pop{display:inline-block;position:relative}.tox .tox-pop--resizing{-webkit-transition:width .1s ease;transition:width .1s ease}.tox .tox-pop--resizing .tox-toolbar{-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap}.tox .tox-pop__dialog{background-color:#fff;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 3px rgba(0,0,0,.15);min-width:0;overflow:hidden}.tox .tox-pop__dialog>:not(.tox-toolbar){margin:4px 4px 4px 8px}.tox .tox-pop__dialog .tox-toolbar{background-color:transparent;margin-bottom:-1px}.tox .tox-pop:after,.tox .tox-pop:before{border-style:solid;content:\"\";display:block;height:0;position:absolute;width:0}.tox .tox-pop.tox-pop--bottom:after,.tox .tox-pop.tox-pop--bottom:before{left:50%;top:100%}.tox .tox-pop.tox-pop--bottom:after{border-color:#fff transparent transparent transparent;border-width:8px;margin-left:-8px;margin-top:-1px}.tox .tox-pop.tox-pop--bottom:before{border-color:#ccc transparent transparent transparent;border-width:9px;margin-left:-9px}.tox .tox-pop.tox-pop--top:after,.tox .tox-pop.tox-pop--top:before{left:50%;top:0;-webkit-transform:translateY(-100%);-ms-transform:translateY(-100%);transform:translateY(-100%)}.tox .tox-pop.tox-pop--top:after{border-color:transparent transparent #fff transparent;border-width:8px;margin-left:-8px;margin-top:1px}.tox .tox-pop.tox-pop--top:before{border-color:transparent transparent #ccc transparent;border-width:9px;margin-left:-9px}.tox .tox-pop.tox-pop--left:after,.tox .tox-pop.tox-pop--left:before{left:0;top:calc(50% - 1px);-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%)}.tox .tox-pop.tox-pop--left:after{border-color:transparent #fff transparent transparent;border-width:8px;margin-left:-15px}.tox .tox-pop.tox-pop--left:before{border-color:transparent #ccc transparent transparent;border-width:10px;margin-left:-19px}.tox .tox-pop.tox-pop--right:after,.tox .tox-pop.tox-pop--right:before{left:100%;top:calc(50% + 1px);-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%)}.tox .tox-pop.tox-pop--right:after{border-color:transparent transparent transparent #fff;border-width:8px;margin-left:-1px}.tox .tox-pop.tox-pop--right:before{border-color:transparent transparent transparent #ccc;border-width:10px;margin-left:-1px}.tox .tox-pop.tox-pop--align-left:after,.tox .tox-pop.tox-pop--align-left:before{left:20px}.tox .tox-pop.tox-pop--align-right:after,.tox .tox-pop.tox-pop--align-right:before{left:calc(100% - 20px)}.tox .tox-sidebar-wrap{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;-ms-flex-preferred-size:0;min-height:0}.tox .tox-sidebar{background-color:#fff;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end}.tox .tox-sidebar__slider{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;overflow:hidden}.tox .tox-sidebar__pane-container,.tox .tox-sidebar__pane{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.tox .tox-sidebar--sliding-closed{opacity:0}.tox .tox-sidebar--sliding-open{opacity:1}.tox .tox-sidebar--sliding-growing,.tox .tox-sidebar--sliding-shrinking{-webkit-transition:width .5s ease,opacity .5s ease;transition:width .5s ease,opacity .5s ease}.tox .tox-selector{background-color:#4099ff;border-color:#4099ff;border-style:solid;border-width:1px;box-sizing:border-box;display:inline-block;height:10px;position:absolute;width:10px}.tox.tox-platform-touch .tox-selector{height:12px;width:12px}.tox .tox-slider{-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex:1 1;-ms-flex:1 1;flex:1 1;-ms-flex-preferred-size:auto;height:24px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;position:relative}.tox .tox-slider__rail{background-color:transparent;border:1px solid #ccc;border-radius:3px;height:10px;min-width:120px;width:100%}.tox .tox-slider__handle{background-color:#207ab7;border:2px solid #185d8c;border-radius:3px;box-shadow:none;height:24px;left:50%;position:absolute;top:50%;-webkit-transform:translateX(-50%) translateY(-50%);-ms-transform:translateX(-50%) translateY(-50%);transform:translate(-50%) translateY(-50%);width:14px}.tox .tox-source-code{overflow:auto}.tox .tox-spinner{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.tox .tox-spinner>div{-webkit-animation:tam-bouncing-dots 1.5s ease-in-out 0s infinite both;animation:tam-bouncing-dots 1.5s ease-in-out 0s infinite both;background-color:rgba(34,47,62,.7);border-radius:100%;height:8px;width:8px}.tox .tox-spinner>div:nth-child(1){-webkit-animation-delay:-.32s;animation-delay:-.32s}.tox .tox-spinner>div:nth-child(2){-webkit-animation-delay:-.16s;animation-delay:-.16s}@-webkit-keyframes tam-bouncing-dots{0%,to,80%{-webkit-transform:scale(0);transform:scale(0)}40%{-webkit-transform:scale(1);transform:scale(1)}}@keyframes tam-bouncing-dots{0%,to,80%{-webkit-transform:scale(0);transform:scale(0)}40%{-webkit-transform:scale(1);transform:scale(1)}}.tox:not([dir=rtl]) .tox-spinner>div:not(:first-child){margin-left:4px}.tox[dir=rtl] .tox-spinner>div:not(:first-child){margin-right:4px}.tox .tox-statusbar{-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;background-color:#fff;border-top:1px solid #ccc;color:rgba(34,47,62,.7);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex:0;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;font-size:12px;font-weight:400;height:18px;overflow:hidden;padding:0 8px;position:relative;text-transform:uppercase}.tox .tox-statusbar__text-container{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;overflow:hidden}.tox .tox-statusbar__path{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;margin-right:auto;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tox .tox-statusbar__path>*{display:inline;white-space:nowrap}.tox .tox-statusbar__wordcount{-webkit-box-flex:0;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;margin-left:1ch}.tox .tox-statusbar a,.tox .tox-statusbar__path-item,.tox .tox-statusbar__wordcount{color:rgba(34,47,62,.7);text-decoration:none}.tox .tox-statusbar a:focus:not(:disabled):not([aria-disabled=true]),.tox .tox-statusbar a:hover:not(:disabled):not([aria-disabled=true]),.tox .tox-statusbar__path-item:focus:not(:disabled):not([aria-disabled=true]),.tox .tox-statusbar__path-item:hover:not(:disabled):not([aria-disabled=true]),.tox .tox-statusbar__wordcount:focus:not(:disabled):not([aria-disabled=true]),.tox .tox-statusbar__wordcount:hover:not(:disabled):not([aria-disabled=true]){cursor:pointer;text-decoration:underline}.tox .tox-statusbar__resize-handle{-webkit-box-align:end;-webkit-align-items:flex-end;-ms-flex-align:end;align-items:flex-end;-webkit-align-self:stretch;-ms-flex-item-align:stretch;-ms-grid-row-align:stretch;align-self:stretch;cursor:nwse-resize;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex:0;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;margin-left:auto;margin-right:-8px;padding-left:1ch}.tox .tox-statusbar__resize-handle svg{display:block;fill:rgba(34,47,62,.7)}.tox:not([dir=rtl]) .tox-statusbar__path>*{margin-right:4px}.tox:not([dir=rtl]) .tox-statusbar__branding{margin-left:1ch}.tox[dir=rtl] .tox-statusbar{-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-webkit-flex-direction:row-reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse}.tox[dir=rtl] .tox-statusbar__path>*{margin-left:4px}.tox .tox-throbber{z-index:1299}.tox .tox-throbber__busy-spinner{-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;background-color:rgba(255,255,255,.6);bottom:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;left:0;position:absolute;right:0;top:0}.tox .tox-tbtn{-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;background:0 0;border:0;border-radius:3px;box-shadow:none;color:#222f3e;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex:0;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;font-size:14px;font-style:normal;font-weight:400;height:34px;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin:2px 0 3px;outline:0;overflow:hidden;padding:0;text-transform:none;width:34px}.tox .tox-tbtn svg{display:block;fill:#222f3e}.tox .tox-tbtn.tox-tbtn-more{padding-left:5px;padding-right:5px;width:inherit}.tox .tox-tbtn:focus{background:#dee0e2;border:0;box-shadow:none}.tox .tox-tbtn:hover{background:#dee0e2;border:0;box-shadow:none;color:#222f3e}.tox .tox-tbtn:hover svg{fill:#222f3e}.tox .tox-tbtn:active{background:#c8cbcf;border:0;box-shadow:none;color:#222f3e}.tox .tox-tbtn:active svg{fill:#222f3e}.tox .tox-tbtn--disabled,.tox .tox-tbtn--disabled:hover,.tox .tox-tbtn:disabled,.tox .tox-tbtn:disabled:hover{background:0 0;border:0;box-shadow:none;color:rgba(34,47,62,.5);cursor:not-allowed}.tox .tox-tbtn--disabled svg,.tox .tox-tbtn--disabled:hover svg,.tox .tox-tbtn:disabled svg,.tox .tox-tbtn:disabled:hover svg{fill:rgba(34,47,62,.5)}.tox .tox-tbtn--enabled,.tox .tox-tbtn--enabled:hover{background:#c8cbcf;border:0;box-shadow:none;color:#222f3e}.tox .tox-tbtn--enabled:hover>*,.tox .tox-tbtn--enabled>*{-webkit-transform:none;-ms-transform:none;transform:none}.tox .tox-tbtn--enabled svg,.tox .tox-tbtn--enabled:hover svg{fill:#222f3e}.tox .tox-tbtn:focus:not(.tox-tbtn--disabled){color:#222f3e}.tox .tox-tbtn:focus:not(.tox-tbtn--disabled) svg{fill:#222f3e}.tox .tox-tbtn:active>*{-webkit-transform:none;-ms-transform:none;transform:none}.tox .tox-tbtn--md{height:51px;width:51px}.tox .tox-tbtn--lg{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:68px;width:68px}.tox .tox-tbtn--return{-ms-grid-row-align:stretch;-webkit-align-self:stretch;-ms-flex-item-align:stretch;align-self:stretch;height:unset;width:16px}.tox .tox-tbtn--labeled{padding:0 4px;width:unset}.tox .tox-tbtn__vlabel{display:block;font-size:10px;font-weight:400;letter-spacing:-.025em;margin-bottom:4px;white-space:nowrap}.tox .tox-tbtn--select{margin:2px 0 3px;padding:0 4px;width:auto}.tox .tox-tbtn__select-label{cursor:default;font-weight:400;margin:0 4px}.tox .tox-tbtn__select-chevron{-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;width:16px}.tox .tox-tbtn__select-chevron svg{fill:rgba(34,47,62,.5)}.tox .tox-tbtn--bespoke .tox-tbtn__select-label{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:7em}.tox .tox-split-button{border:0;border-radius:3px;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin:2px 0 3px;overflow:hidden}.tox .tox-split-button:hover{box-shadow:0 0 0 1px #dee0e2 inset}.tox .tox-split-button:focus{background:#dee0e2;box-shadow:none;color:#222f3e}.tox .tox-split-button>*{border-radius:0}.tox .tox-split-button__chevron{width:16px}.tox .tox-split-button__chevron svg{fill:rgba(34,47,62,.5)}.tox .tox-split-button .tox-tbtn{margin:0}.tox.tox-platform-touch .tox-split-button .tox-tbtn:first-child{width:30px}.tox.tox-platform-touch .tox-split-button__chevron{width:20px}.tox .tox-split-button.tox-tbtn--disabled .tox-tbtn:focus,.tox .tox-split-button.tox-tbtn--disabled .tox-tbtn:hover,.tox .tox-split-button.tox-tbtn--disabled:focus,.tox .tox-split-button.tox-tbtn--disabled:hover{background:0 0;box-shadow:none;color:rgba(34,47,62,.5)}.tox .tox-toolbar-overlord{background-color:#fff}.tox .tox-toolbar,.tox .tox-toolbar__overflow,.tox .tox-toolbar__primary{background:url(\"data:image/svg+xml;charset=utf8,%3Csvg height='39px' viewBox='0 0 40 39px' width='40' xmlns='http://www.w3.org/2000/svg'%3E%3Crect x='0' y='38px' width='100' height='1' fill='%23cccccc'/%3E%3C/svg%3E\") left 0 top 0 #fff;background-color:#fff;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex:0;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;padding:0}.tox .tox-toolbar__overflow.tox-toolbar__overflow--closed{height:0;opacity:0;padding-bottom:0;padding-top:0;visibility:hidden}.tox .tox-toolbar__overflow--growing{-webkit-transition:height .3s ease,opacity .2s linear .1s;transition:height .3s ease,opacity .2s linear .1s}.tox .tox-toolbar__overflow--shrinking{-webkit-transition:opacity .3s ease,height .2s linear .1s,visibility 0s linear .3s;transition:opacity .3s ease,height .2s linear .1s,visibility 0s linear .3s}.tox .tox-menubar+.tox-toolbar,.tox .tox-menubar+.tox-toolbar-overlord .tox-toolbar__primary{border-top:1px solid #ccc;margin-top:-1px}.tox .tox-toolbar--scrolling{-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;overflow-x:auto}.tox .tox-pop .tox-toolbar{border-width:0}.tox .tox-toolbar--no-divider{background-image:none}.tox-tinymce:not(.tox-tinymce-inline) .tox-editor-header:not(:first-child) .tox-toolbar-overlord:first-child .tox-toolbar__primary,.tox-tinymce:not(.tox-tinymce-inline) .tox-editor-header:not(:first-child) .tox-toolbar:first-child{border-top:1px solid #ccc}.tox.tox-tinymce-aux .tox-toolbar__overflow{background-color:#fff;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 3px rgba(0,0,0,.15)}.tox[dir=rtl] .tox-tbtn__icon-rtl svg{-webkit-transform:rotateY(180deg);transform:rotateY(180deg)}.tox .tox-toolbar__group{-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin:0;padding:0 4px}.tox .tox-toolbar__group--pull-right{margin-left:auto}.tox .tox-toolbar--scrolling .tox-toolbar__group{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap}.tox:not([dir=rtl]) .tox-toolbar__group:not(:last-of-type){border-right:1px solid #ccc}.tox[dir=rtl] .tox-toolbar__group:not(:last-of-type){border-left:1px solid #ccc}.tox .tox-tooltip{display:inline-block;padding:8px;position:relative}.tox .tox-tooltip__body{background-color:#222f3e;border-radius:3px;box-shadow:0 2px 4px rgba(34,47,62,.3);color:rgba(255,255,255,.75);font-size:14px;font-style:normal;font-weight:400;padding:4px 8px;text-transform:none}.tox .tox-tooltip__arrow{position:absolute}.tox .tox-tooltip--down .tox-tooltip__arrow{border-left:8px solid transparent;border-right:8px solid transparent;border-top:8px solid #222f3e;bottom:0;left:50%;position:absolute;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translate(-50%)}.tox .tox-tooltip--up .tox-tooltip__arrow{border-bottom:8px solid #222f3e;border-left:8px solid transparent;border-right:8px solid transparent;left:50%;position:absolute;top:0;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translate(-50%)}.tox .tox-tooltip--right .tox-tooltip__arrow{border-bottom:8px solid transparent;border-left:8px solid #222f3e;border-top:8px solid transparent;position:absolute;right:0;top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%)}.tox .tox-tooltip--left .tox-tooltip__arrow{border-bottom:8px solid transparent;border-right:8px solid #222f3e;border-top:8px solid transparent;left:0;position:absolute;top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%)}.tox .tox-well{border:1px solid #ccc;border-radius:3px;padding:8px;width:100%}.tox .tox-well>:first-child{margin-top:0}.tox .tox-well>:last-child{margin-bottom:0}.tox .tox-well>:only-child{margin:0}.tox .tox-custom-editor{border:1px solid #ccc;border-radius:3px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex:1 1;-ms-flex:1 1;flex:1 1;position:relative}.tox .tox-dialog-loading:before{background-color:rgba(0,0,0,.5);content:\"\";height:100%;position:absolute;width:100%;z-index:1000}.tox .tox-tab{cursor:pointer}.tox .tox-dialog__content-js,.tox .tox-dialog__body-content .tox-collection{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex:1 1;-ms-flex:1 1;flex:1 1;-ms-flex-preferred-size:auto}.tox .tox-image-tools-edit-panel,.tox .tox-image-tools__sidebar{height:60px}.iframeLayout .iframeLayout_margin[data-v-1dd532a0]{border:1px dashed #333;background:#F9CC9D;position:relative;margin:0;padding:0;font-size:0}.iframeLayout .iframeLayout_margin .iframeLayout_border[data-v-1dd532a0]{margin:39px;background:#FDDD9B;border:1px solid #333;position:relative}.iframeLayout .iframeLayout_margin .iframeLayout_border .iframeLayout_padding[data-v-1dd532a0]{margin:39px;background:#c3d08b;border:1px dashed #333;position:relative}.iframeLayout .iframeLayout_margin .iframeLayout_border .iframeLayout_padding .iframeLayout_size[data-v-1dd532a0]{min-height:40px;position:relative;text-align:center;line-height:40px;margin:39px;border:1px solid #333}.iframeLayout .iframeLayout_margin .iframeLayout_border .iframeLayout_padding .iframeLayout_size span[data-v-1dd532a0]{font-size:20px;color:#666;display:inline-block;vertical-align:middle}.iframeLayout .iframeLayout_margin .iframeLayout_border .iframeLayout_padding .iframeLayout_size input[data-v-1dd532a0]{position:relative;display:inline-block;vertical-align:middle}.iframeLayout .iframeLayout_margin label[data-v-1dd532a0]{font-size:20px;color:#000;position:absolute;top:2px;left:2px}.iframeLayout .iframeLayout_margin input[data-v-1dd532a0]{position:absolute;width:31px;height:31px;display:block;margin:0 auto;text-align:center;line-height:31px;font-size:12px;border:1px solid #ccc;background:#fff;border-radius:3px;overflow:hidden;padding:1px}.iframeLayout .iframeLayout_margin input[data-v-1dd532a0]:focus{outline:none;border-color:#1f81c3}.iframeLayout .iframeLayout_margin .iframeLayout_top[data-v-1dd532a0]{top:2px;left:50%;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translate(-50%)}.iframeLayout .iframeLayout_margin .iframeLayout_right[data-v-1dd532a0]{top:50%;right:2px;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%)}.iframeLayout .iframeLayout_margin .iframeLayout_bottom[data-v-1dd532a0]{bottom:2px;left:50%;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translate(-50%)}.iframeLayout .iframeLayout_margin .iframeLayout_left[data-v-1dd532a0]{top:50%;left:2px;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%)}\n",document.head.appendChild(e),System.register(["./zh_CN-legacy.js","./tpImportword-legacy.js","./index-legacy2.js","./pinia-legacy.js","../index-legacy.js","./vue-legacy.js","./tinymce-plugin-routes-legacy.js"],(function(e){"use strict";var n,o,r,i,a,u,c,l,s,f;return{setters:[function(){},function(t){n=t.T},function(){},function(t){o=t.c},function(t){r=t._},function(t){i=t.a1,a=t.K,u=t.L,c=t.a2,l=t.R,s=t.S,f=t.T},function(){}],execute:function(){var d,m,g,p,h,v,b,x,y,w,k,_,C,S,O,z,T,M,A,D,E,P,H,B,R,I,N,L,F,V,j,U,W,q,$,G,Y,X,K,J,Z,Q,tt,et,nt,ot,rt,it,at,ut,ct,lt,st,ft,dt,mt,gt,pt,ht,vt,bt,xt,yt,wt,kt,_t,Ct,St,Ot,zt,Tt,Mt,At,Dt,Et,Pt,Ht,Bt,Rt,It,Nt,Lt,Ft,Vt,jt,Ut,Wt,qt,$t,Gt,Yt,Xt,Kt,Jt,Zt,Qt,te,ee;!function(){var e=function(e){return function(n){return function(e){var n=t(e);return null===e?"null":"object"===n&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===n&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":n}(n)===e}},n=function(e){return function(n){return t(n)===e}},r=e("string"),i=e("object"),a=e("array"),u=n("boolean"),c=function(t){return function(e){return t===e}}(void 0),l=function(t){return!function(t){return null==t}(t)},s=n("function"),f=n("number"),d=function(t,e){if(a(t)){for(var n=0,o=t.length;n<o;++n)if(!e(t[n]))return!1;return!0}return!1},m=function(){},g=function(t,e){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return t(e.apply(null,n))}},p=function(t){return function(){return t}},h=function(t){return t};function v(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var r=e.concat(n);return t.apply(null,r)}}var b=function(t){return function(e){return!t(e)}},x=function(t){return function(){throw new Error(t)}},y=p(!1),w=p(!0),k=tinymce.util.Tools.resolve("tinymce.ThemeManager"),_=function(){return _=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},_.apply(this,arguments)};function C(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]])}return n}function S(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,u=i.length;a<u;a++,r++)o[r]=i[a];return o}var O,z=function(){return T},T=function(){var t=function(t){return t.isNone()},e=function(t){return t()},n=function(t){return t};return{fold:function(t,e){return t()},is:y,isSome:y,isNone:w,getOr:n,getOrThunk:e,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:p(null),getOrUndefined:p(void 0),or:n,orThunk:e,map:z,each:m,bind:z,exists:y,forall:w,filter:z,equals:t,equals_:t,toArray:function(){return[]},toString:p("none()")}}(),M=function t(e){var n=p(e),o=function(){return i},r=function(t){return t(e)},i={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:w,isNone:y,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:o,orThunk:o,map:function(n){return t(n(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?i:T},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(y,(function(t){return n(e,t)}))}};return i},A={some:M,none:z,from:function(t){return null==t?T:M(t)}},D=Array.prototype.slice,E=Array.prototype.indexOf,P=Array.prototype.push,H=function(t,e){return E.call(t,e)},B=function(t,e){return H(t,e)>-1},R=function(t,e){for(var n=0,o=t.length;n<o;n++){if(e(t[n],n))return!0}return!1},I=function(t,e){for(var n=[],o=0;o<t;o++)n.push(e(o));return n},N=function(t,e){for(var n=[],o=0;o<t.length;o+=e){var r=D.call(t,o,o+e);n.push(r)}return n},L=function(t,e){for(var n=t.length,o=new Array(n),r=0;r<n;r++){var i=t[r];o[r]=e(i,r)}return o},F=function(t,e){for(var n=0,o=t.length;n<o;n++){e(t[n],n)}},V=function(t,e){for(var n=[],o=[],r=0,i=t.length;r<i;r++){var a=t[r];(e(a,r)?n:o).push(a)}return{pass:n,fail:o}},j=function(t,e){for(var n=[],o=0,r=t.length;o<r;o++){var i=t[o];e(i,o)&&n.push(i)}return n},U=function(t,e,n){return function(t,e){for(var n=t.length-1;n>=0;n--)e(t[n],n)}(t,(function(t){n=e(n,t)})),n},W=function(t,e,n){return F(t,(function(t){n=e(n,t)})),n},q=function(t,e){return function(t,e,n){for(var o=0,r=t.length;o<r;o++){var i=t[o];if(e(i,o))return A.some(i);if(n(i,o))break}return A.none()}(t,e,y)},$=function(t,e){for(var n=0,o=t.length;n<o;n++){if(e(t[n],n))return A.some(n)}return A.none()},G=function(t){for(var e=[],n=0,o=t.length;n<o;++n){if(!a(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);P.apply(e,t[n])}return e},Y=function(t,e){return G(L(t,e))},X=function(t,e){for(var n=0,o=t.length;n<o;++n){if(!0!==e(t[n],n))return!1}return!0},K=function(t){var e=D.call(t,0);return e.reverse(),e},J=function(t,e){return j(t,(function(t){return!B(e,t)}))},Z=function(t,e){var n=D.call(t,0);return n.sort(e),n},Q=function(t,e){return e>=0&&e<t.length?A.some(t[e]):A.none()},tt=function(t){return Q(t,0)},et=function(t){return Q(t,t.length-1)},nt=s(Array.from)?Array.from:function(t){return D.call(t)},ot=function(t,e){for(var n=0;n<t.length;n++){var o=e(t[n],n);if(o.isSome())return o}return A.none()},rt=function t(e){return{is:function(t){return e===t},isValue:w,isError:y,getOr:p(e),getOrThunk:p(e),getOrDie:p(e),or:function(n){return t(e)},orThunk:function(n){return t(e)},fold:function(t,n){return n(e)},map:function(n){return t(n(e))},mapError:function(n){return t(e)},each:function(t){t(e)},bind:function(t){return t(e)},exists:function(t){return t(e)},forall:function(t){return t(e)},toOptional:function(){return A.some(e)}}},it=function t(e){return{is:y,isValue:y,isError:w,getOr:h,getOrThunk:function(t){return t()},getOrDie:function(){return x(String(e))()},or:function(t){return t},orThunk:function(t){return t()},fold:function(t,n){return t(e)},map:function(n){return t(e)},mapError:function(n){return t(n(e))},each:m,bind:function(n){return t(e)},exists:y,forall:w,toOptional:A.none}},at=rt,ut=it;!function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"}(O||(O={}));var ct=function(t,e,n){return t.stype===O.Error?e(t.serror):n(t.svalue)},lt=function(t){return{stype:O.Value,svalue:t}},st=function(t){return{stype:O.Error,serror:t}},ft=function(t){return t.fold(st,lt)},dt=function(t){return ct(t,ut,at)},mt=lt,gt=function(t){var e=[],n=[];return F(t,(function(t){ct(t,(function(t){return n.push(t)}),(function(t){return e.push(t)}))})),{values:e,errors:n}},pt=st,ht=function(t,e){return t.stype===O.Value?e(t.svalue):t},vt=function(t,e){return t.stype===O.Error?e(t.serror):t},bt=function(t,e){return t.stype===O.Value?{stype:O.Value,svalue:e(t.svalue)}:t},xt=function(t,e){return t.stype===O.Error?{stype:O.Error,serror:e(t.serror)}:t},yt=Object.keys,wt=Object.hasOwnProperty,kt=function(t,e){for(var n=yt(t),o=0,r=n.length;o<r;o++){var i=n[o];e(t[i],i)}},_t=function(t,e){return Ct(t,(function(t,n){return{k:n,v:e(t,n)}}))},Ct=function(t,e){var n={};return kt(t,(function(t,o){var r=e(t,o);n[r.k]=r.v})),n},St=function(t,e){var n={};return function(t,e,n,o){kt(t,(function(t,r){(e(t,r)?n:o)(t,r)}))}(t,e,function(t){return function(e,n){t[n]=e}}(n),m),n},Ot=function(t,e){var n=[];return kt(t,(function(t,o){n.push(e(t,o))})),n},zt=function(t,e){for(var n=yt(t),o=0,r=n.length;o<r;o++){var i=n[o],a=t[i];if(e(a,i,t))return A.some(a)}return A.none()},Tt=function(t){return Ot(t,(function(t){return t}))},Mt=function(t,e){return At(t,e)?A.from(t[e]):A.none()},At=function(t,e){return wt.call(t,e)},Dt=function(t,e){return At(t,e)&&void 0!==t[e]&&null!==t[e]},Et=function(t){if(!a(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");var e=[],n={};return F(t,(function(o,r){var i=yt(o);if(1!==i.length)throw new Error("one and only one name per case");var u=i[0],c=o[u];if(void 0!==n[u])throw new Error("duplicate key detected:"+u);if("cata"===u)throw new Error("cannot have a case named cata (sorry)");if(!a(c))throw new Error("case arguments must be an array");e.push(u),n[u]=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var i=n.length;if(i!==c.length)throw new Error("Wrong number of arguments to case "+u+". Expected "+c.length+" ("+c+"), got "+i);var a=function(t){var o=yt(t);if(e.length!==o.length)throw new Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+o.join(","));if(!X(e,(function(t){return B(o,t)})))throw new Error("Not all branches were specified when using match. Specified: "+o.join(", ")+"\nRequired: "+e.join(", "));return t[u].apply(null,n)};return{fold:function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];if(e.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+e.length);var i=e[r];return i.apply(null,n)},match:a,log:function(t){console.log(t,{constructors:e,constructor:u,params:n})}}}})),n},Pt=Object.prototype.hasOwnProperty,Ht=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(0===e.length)throw new Error("Can't merge zero objects");for(var o={},r=0;r<e.length;r++){var i=e[r];for(var a in i)Pt.call(i,a)&&(o[a]=t(o[a],i[a]))}return o}},Bt=Ht((function(t,e){return i(t)&&i(e)?Bt(t,e):e})),Rt=Ht((function(t,e){return e})),It=function(t){var e,n=!1;return function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];return n||(n=!0,e=t.apply(null,o)),e}},Nt=Et([{strict:[]},{defaultedThunk:["fallbackThunk"]},{asOption:[]},{asDefaultedOptionThunk:["fallbackThunk"]},{mergeWithThunk:["baseThunk"]}]),Lt=function(t){return Nt.defaultedThunk(p(t))},Ft=function(t){return Nt.mergeWithThunk(p(t))},Vt=Nt.strict,jt=Nt.asOption,Ut=Nt.defaultedThunk;Nt.asDefaultedOptionThunk;var Wt=Nt.mergeWithThunk;Et([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);var qt=function(t,e){var n;return(n={})[t]=e,n},$t=function(t,e){return function(t,e){var n={};return kt(t,(function(t,o){B(e,o)||(n[o]=t)})),n}(t,e)},Gt=function(t,e){return qt(t,e)},Yt=function(t){return function(t){var e={};return F(t,(function(t){e[t.key]=t.value})),e}(t)},Xt=function(t,e){var n,o=function(t){var e=[],n=[];return F(t,(function(t){t.fold((function(t){e.push(t)}),(function(t){n.push(t)}))})),{errors:e,values:n}}(t);return o.errors.length>0?(n=o.errors,ut(G(n))):function(t,e){return 0===t.length?at(e):at(Bt(e,Rt.apply(void 0,t)))}(o.values,e)},Kt=function(t){return g(pt,G)(t)},Jt=function(t,e){var n=gt(t);return n.errors.length>0?Kt(n.errors):function(t,e){return t.length>0?mt(Bt(e,Rt.apply(void 0,t))):mt(e)}(n.values,e)},Zt=function(t){var e=gt(t);return e.errors.length>0?Kt(e.errors):mt(e.values)},Qt=function(t){return i(t)&&yt(t).length>100?" removed due to size":JSON.stringify(t,null,2)},te=function(t,e){return pt([{path:t,getErrorInfo:e}])},ee=Et([{field:["key","okey","presence","prop"]},{state:["okey","instantiator"]}]),ne=function(t,e,n){return Mt(e,n).fold((function(){return function(t,e,n){return te(t,(function(){return'Could not find valid *strict* value for "'+e+'" in '+Qt(n)}))}(t,n,e)}),mt)},oe=function(t,e,n){var o=Mt(t,e).fold((function(){return n(t)}),h);return mt(o)},re=function(t,e,n,o){return n.fold((function(n,r,i,a){var u=function(e){var i=a.extract(t.concat([n]),o,e);return bt(i,(function(t){return qt(r,o(t))}))},c=function(e){return e.fold((function(){var t=qt(r,o(A.none()));return mt(t)}),(function(e){var i=a.extract(t.concat([n]),o,e);return bt(i,(function(t){return qt(r,o(A.some(t)))}))}))};return i.fold((function(){return ht(ne(t,e,n),u)}),(function(t){return ht(oe(e,n,t),u)}),(function(){return ht(function(t,e){return mt(Mt(t,e))}(e,n),c)}),(function(t){return ht(function(t,e,n){var o=Mt(t,e).map((function(e){return!0===e?n(t):e}));return mt(o)}(e,n,t),c)}),(function(t){var o=t(e),r=bt(oe(e,n,p({})),(function(t){return Bt(o,t)}));return ht(r,u)}))}),(function(t,n){var r=n(e);return mt(qt(t,o(r)))}))},ie=function(t){return{extract:function(e,n,o){return vt(t(o,n),(function(t){return function(t,e){return te(t,(function(){return e}))}(e,t)}))},toString:function(){return"val"}}},ae=function(t){return yt(St(t,(function(t){return null!=t})))},ue=function(t){var e=ce(t),n=U(t,(function(t,e){return e.fold((function(e){return Bt(t,Gt(e,!0))}),p(t))}),{});return{extract:function(t,o,r){var i=u(r)?[]:ae(r),a=j(i,(function(t){return!Dt(n,t)}));return 0===a.length?e.extract(t,o,r):function(t,e){return te(t,(function(){return"There are unsupported fields: ["+e.join(", ")+"] specified"}))}(t,a)},toString:e.toString}},ce=function(t){return{extract:function(e,n,o){return function(t,e,n,o){var r=L(n,(function(n){return re(t,e,n,o)}));return Jt(r,{})}(e,o,t,n)},toString:function(){var e=L(t,(function(t){return t.fold((function(t,e,n,o){return t+" -> "+o.toString()}),(function(t,e){return"state("+t+")"}))}));return"obj{\n"+e.join("\n")+"}"}}},le=function(t){return{extract:function(e,n,o){var r=L(o,(function(o,r){return t.extract(e.concat(["["+r+"]"]),n,o)}));return Zt(r)},toString:function(){return"array("+t.toString()+")"}}},se=function(t){return{extract:function(e,n,o){for(var r=[],i=0,a=t;i<a.length;i++){var u=a[i].extract(e,n,o);if(u.stype===O.Value)return u;r.push(u)}return Zt(r)},toString:function(){return"oneOf("+L(t,(function(t){return t.toString()})).join(", ")+")"}}},fe=function(t,e){return{extract:function(n,o,r){var i=yt(r),a=function(e,n){return le(ie(t)).extract(e,h,n)}(n,i);return ht(a,(function(t){var i=L(t,(function(t){return ee.field(t,t,Vt(),e)}));return ce(i).extract(n,o,r)}))},toString:function(){return"setOf("+e.toString()+")"}}},de=p(ie(mt)),me=g(le,ce),ge=ee.state,pe=ee.field,he=function(t,e,n,o,r){return Mt(o,r).fold((function(){return function(t,e,n){return te(t,(function(){return'The chosen schema: "'+n+'" did not exist in branches: '+Qt(e)}))}(t,o,r)}),(function(o){return o.extract(t.concat(["branch: "+r]),e,n)}))},ve=function(t,e){return{extract:function(n,o,r){return Mt(r,t).fold((function(){return function(t,e){return te(t,(function(){return'Choice schema did not contain choice key: "'+e+'"'}))}(n,t)}),(function(t){return he(n,o,r,e,t)}))},toString:function(){return"chooseOn("+t+"). Possible values: "+yt(e)}}},be=ie(mt),xe=function(t){return me(t)},ye=function(t){return{extract:function(e,n,o){return t().extract(e,n,o)},toString:function(){return t().toString()}}},we=function(t){return ie((function(e){return t(e).fold(pt,mt)}))},ke=function(t,e){return fe((function(e){return ft(t(e))}),e)},_e=function(t,e,n){return dt(function(t,e,n,o){var r=e.extract([t],n,o);return xt(r,(function(t){return{input:o,errors:t}}))}(t,e,h,n))},Ce=function(t){return t.fold((function(t){throw new Error(Oe(t))}),h)},Se=function(t,e,n){return Ce(_e(t,e,n))},Oe=function(t){return"Errors: \n"+(e=t.errors,n=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:function(){return"... (only showing first ten failures)"}}]):e,L(n,(function(t){return"Failed path: ("+t.path.join(" > ")+")\n"+t.getErrorInfo()}))).join("\n")+"\n\nInput object: "+Qt(t.input);var e,n},ze=function(t,e){return ve(t,e)},Te=function(t,e){return ve(t,_t(e,ce))},Me=p(be),Ae=function(e,n){return ie((function(o){var r=t(o);return e(o)?mt(o):pt("Expected type: "+n+" but got: "+r)}))},De=Ae(f,"number"),Ee=Ae(r,"string"),Pe=Ae(u,"boolean"),He=Ae(s,"function"),Be=function t(e){var n=function(t,e){for(var n=t.next();!n.done;){if(!e(n.value))return!1;n=t.next()}return!0};if(Object(e)!==e)return!0;switch({}.toString.call(e).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(e).every((function(n){return t(e[n])}));case"Map":return n(e.keys(),t)&&n(e.values(),t);case"Set":return n(e.keys(),t);default:return!1}},Re=ie((function(t){return Be(t)?mt(t):pt("Expected value to be acceptable for sending via postMessage")})),Ie=function(t){return we((function(e){return B(t,e)?at(e):ut('Unsupported value: "'+e+'", choose one of "'+t.join(", ")+'".')}))},Ne=function(t){return pe(t,t,Vt(),de())},Le=function(t,e){return pe(t,t,Vt(),e)},Fe=function(t){return Le(t,De)},Ve=function(t){return Le(t,Ee)},je=function(t,e){return pe(t,t,Vt(),Ie(e))},Ue=function(t){return Le(t,He)},We=function(t,e){return pe(t,t,Vt(),ce(e))},qe=function(t,e){return pe(t,t,Vt(),me(e))},$e=function(t,e){return pe(t,t,Vt(),le(e))},Ge=function(t){return pe(t,t,jt(),de())},Ye=function(t,e){return pe(t,t,jt(),e)},Xe=function(t){return Ye(t,De)},Ke=function(t){return Ye(t,Ee)},Je=function(t){return Ye(t,He)},Ze=function(t,e){return Ye(t,ce(e))},Qe=function(t,e){return pe(t,t,Lt(e),de())},tn=function(t,e,n){return pe(t,t,Lt(e),n)},en=function(t,e){return tn(t,e,De)},nn=function(t,e){return tn(t,e,Ee)},on=function(t,e,n){return tn(t,e,Ie(n))},rn=function(t,e){return tn(t,e,Pe)},an=function(t,e){return tn(t,e,He)},un=function(t,e,n){return tn(t,e,le(n))},cn=function(t,e,n){return tn(t,e,ce(n))},ln=function(t,e){return ge(t,e)},sn=function(t){var e=t;return{get:function(){return e},set:function(t){e=t}}},fn=function(t){if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}},dn={fromHtml:function(t,e){var n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||n.childNodes.length>1)throw console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return fn(n.childNodes[0])},fromTag:function(t,e){var n=(e||document).createElement(t);return fn(n)},fromText:function(t,e){var n=(e||document).createTextNode(t);return fn(n)},fromDom:fn,fromPoint:function(t,e,n){return A.from(t.dom.elementFromPoint(e,n)).map(fn)}},mn=function(){return gn(0,0)},gn=function(t,e){return{major:t,minor:e}},pn={nu:gn,detect:function(t,e){var n=String(e).toLowerCase();return 0===t.length?mn():function(t,e){var n=function(t,e){for(var n=0;n<t.length;n++){var o=t[n];if(o.test(e))return o}}(t,e);if(!n)return{major:0,minor:0};var o=function(t){return Number(e.replace(n,"$"+t))};return gn(o(1),o(2))}(t,n)},unknown:mn},hn=function(t,e){var n=String(e).toLowerCase();return q(t,(function(t){return t.search(n)}))},vn=function(t,e){return hn(t,e).map((function(t){var n=pn.detect(t.versionRegexes,e);return{current:t.name,version:n}}))},bn=function(t,e){return hn(t,e).map((function(t){var n=pn.detect(t.versionRegexes,e);return{current:t.name,version:n}}))},xn=function(t,e){return-1!==t.indexOf(e)},yn=function(t,e){return function(t,e,n){return""===e||t.length>=e.length&&t.substr(n,n+e.length)===e}(t,e,t.length-e.length)},wn=function(t){return function(e){return e.replace(t,"")}}(/^\s+|\s+$/g),kn=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,_n=function(t){return function(e){return xn(e,t)}},Cn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return xn(t,"edge/")&&xn(t,"chrome")&&xn(t,"safari")&&xn(t,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,kn],search:function(t){return xn(t,"chrome")&&!xn(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return xn(t,"msie")||xn(t,"trident")}},{name:"Opera",versionRegexes:[kn,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:_n("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:_n("firefox")},{name:"Safari",versionRegexes:[kn,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(xn(t,"safari")||xn(t,"mobile/"))&&xn(t,"applewebkit")}}],Sn=[{name:"Windows",search:_n("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return xn(t,"iphone")||xn(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:_n("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:_n("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:_n("linux"),versionRegexes:[]},{name:"Solaris",search:_n("sunos"),versionRegexes:[]},{name:"FreeBSD",search:_n("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:_n("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],On={browsers:p(Cn),oses:p(Sn)},zn="Edge",Tn="Chrome",Mn="Opera",An="Firefox",Dn="Safari",En=function(t){var e=t.current,n=t.version,o=function(t){return function(){return e===t}};return{current:e,version:n,isEdge:o(zn),isChrome:o(Tn),isIE:o("IE"),isOpera:o(Mn),isFirefox:o(An),isSafari:o(Dn)}},Pn={unknown:function(){return En({current:void 0,version:pn.unknown()})},nu:En,edge:p(zn),chrome:p(Tn),ie:p("IE"),opera:p(Mn),firefox:p(An),safari:p(Dn)},Hn="Windows",Bn="Android",Rn="Linux",In="Solaris",Nn="FreeBSD",Ln="ChromeOS",Fn=function(t){var e=t.current,n=t.version,o=function(t){return function(){return e===t}};return{current:e,version:n,isWindows:o(Hn),isiOS:o("iOS"),isAndroid:o(Bn),isOSX:o("OSX"),isLinux:o(Rn),isSolaris:o(In),isFreeBSD:o(Nn),isChromeOS:o(Ln)}},Vn={unknown:function(){return Fn({current:void 0,version:pn.unknown()})},nu:Fn,windows:p(Hn),ios:p("iOS"),android:p(Bn),linux:p(Rn),osx:p("OSX"),solaris:p(In),freebsd:p(Nn),chromeos:p(Ln)},jn=function(t,e){var n=On.browsers(),o=On.oses(),r=vn(n,t).fold(Pn.unknown,Pn.nu),i=bn(o,t).fold(Vn.unknown,Vn.nu),a=function(t,e,n,o){var r=t.isiOS()&&!0===/ipad/i.test(n),i=t.isiOS()&&!r,a=t.isiOS()||t.isAndroid(),u=a||o("(pointer:coarse)"),c=r||!i&&a&&o("(min-device-width:768px)"),l=i||a&&!c,s=e.isSafari()&&t.isiOS()&&!1===/safari/i.test(n),f=!l&&!c&&!s;return{isiPad:p(r),isiPhone:p(i),isTablet:p(c),isPhone:p(l),isTouch:p(u),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:p(s),isDesktop:p(f)}}(i,r,t,e);return{browser:r,os:i,deviceType:a}},Un=function(t){return window.matchMedia(t).matches},Wn=It((function(){return jn(navigator.userAgent,Un)})),qn=function(){return Wn()},$n=function(t,e){var n=t.dom;if(1!==n.nodeType)return!1;var o=n;if(void 0!==o.matches)return o.matches(e);if(void 0!==o.msMatchesSelector)return o.msMatchesSelector(e);if(void 0!==o.webkitMatchesSelector)return o.webkitMatchesSelector(e);if(void 0!==o.mozMatchesSelector)return o.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},Gn=function(t){return 1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType||0===t.childElementCount},Yn=function(t,e){return t.dom===e.dom},Xn=function(t,e){return function(t,e){return function(t,e,n){return 0!=(t.compareDocumentPosition(e)&n)}(t,e,Node.DOCUMENT_POSITION_CONTAINED_BY)}(t.dom,e.dom)},Kn=function(t,e){return qn().browser.isIE()?Xn(t,e):function(t,e){var n=t.dom,o=e.dom;return n!==o&&n.contains(o)}(t,e)},Jn=function(t){return s(t)?t:y},Zn=function(t,e,n){for(var o=t.dom,r=Jn(n);o.parentNode;){o=o.parentNode;var i=dn.fromDom(o),a=e(i);if(a.isSome())return a;if(r(i))break}return A.none()},Qn=function(t,e,n){var o=e(t),r=Jn(n);return o.orThunk((function(){return r(t)?A.none():Zn(t,e,r)}))},to=function(t,e){return Yn(t.element,e.event.target)},eo=function(t){if(!Dt(t,"can")&&!Dt(t,"abort")&&!Dt(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return Se("Extracting event.handler",ue([Qe("can",w),Qe("abort",y),Qe("run",m)]),t)},no=function(t){var e=function(t,e){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return W(t,(function(t,o){return t&&e(o).apply(void 0,n)}),!0)}}(t,(function(t){return t.can})),n=function(t,e){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return W(t,(function(t,o){return t||e(o).apply(void 0,n)}),!1)}}(t,(function(t){return t.abort}));return eo({can:e,abort:n,run:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];F(t,(function(t){t.run.apply(void 0,e)}))}})},oo=p,ro=oo("touchstart"),io=oo("touchmove"),ao=oo("touchend"),uo=oo("touchcancel"),co=oo("mousedown"),lo=oo("mousemove"),so=oo("mouseout"),fo=oo("mouseup"),mo=oo("mouseover"),go=oo("focusin"),po=oo("focusout"),ho=oo("keydown"),vo=oo("keyup"),bo=oo("input"),xo=oo("change"),yo=oo("click"),wo=oo("transitionend"),ko=oo("selectstart"),_o=function(t){return p("alloy."+t)},Co={tap:_o("tap")},So=_o("focus"),Oo=_o("blur.post"),zo=_o("paste.post"),To=_o("receive"),Mo=_o("execute"),Ao=_o("focus.item"),Do=Co.tap,Eo=_o("longpress"),Po=_o("sandbox.close"),Ho=_o("typeahead.cancel"),Bo=_o("system.init"),Ro=_o("system.touchmove"),Io=_o("system.touchend"),No=_o("system.scroll"),Lo=_o("system.resize"),Fo=_o("system.attached"),Vo=_o("system.detached"),jo=_o("system.dismissRequested"),Uo=_o("system.repositionRequested"),Wo=_o("focusmanager.shifted"),qo=_o("slotcontainer.visibility"),$o=_o("change.tab"),Go=_o("dismiss.tab"),Yo=_o("highlight"),Xo=_o("dehighlight"),Ko=function(t,e){tr(t,t.element,e,{})},Jo=function(t,e,n){tr(t,t.element,e,n)},Zo=function(t){Ko(t,Mo())},Qo=function(t,e,n){tr(t,e,n,{})},tr=function(t,e,n,o){var r=_({target:e},o);t.getSystem().triggerEvent(n,e,r)},er=function(t,e,n,o){t.getSystem().triggerEvent(n,e,o.event)},nr=function(t){return Yt(t)},or=function(t,e){return{key:t,value:eo({abort:e})}},rr=function(t){return{key:t,value:eo({run:function(t,e){e.event.prevent()}})}},ir=function(t,e){return{key:t,value:eo({run:e})}},ar=function(t,e,n){return{key:t,value:eo({run:function(t,o){e.apply(void 0,[t,o].concat(n))}})}},ur=function(t){return function(e){return{key:t,value:eo({run:function(t,n){to(t,n)&&e(t,n)}})}}},cr=function(t,e,n){return function(t,e){return ir(t,(function(n,o){n.getSystem().getByUid(e).each((function(e){er(e,e.element,t,o)}))}))}(t,e.partUids[n])},lr=function(t,e){return ir(t,(function(t,n){var o=n.event,r=t.getSystem().getByDom(o.target).fold((function(){return Qn(o.target,(function(e){return t.getSystem().getByDom(e).toOptional()}),y).getOr(t)}),(function(t){return t}));e(t,r,n)}))},sr=function(t){return ir(t,(function(t,e){e.cut()}))},fr=function(t){return ir(t,(function(t,e){e.stop()}))},dr=function(t,e){return ur(t)(e)},mr=ur(Fo()),gr=ur(Vo()),pr=ur(Bo()),hr=function(t){return function(e){return ir(t,e)}}(Mo());"undefined"!=typeof window?window:Function("return this;")();var vr=function(t){return t.dom.nodeName.toLowerCase()},br=function(t){return function(e){return function(t){return t.dom.nodeType}(e)===t}},xr=br(1),yr=br(3),wr=br(9),kr=br(11),_r=function(t){return dn.fromDom(t.dom.ownerDocument)},Cr=function(t){return wr(t)?t:_r(t)},Sr=function(t){return dn.fromDom(Cr(t).dom.documentElement)},Or=function(t){return dn.fromDom(Cr(t).dom.defaultView)},zr=function(t){return A.from(t.dom.parentNode).map(dn.fromDom)},Tr=function(t){return A.from(t.dom.offsetParent).map(dn.fromDom)},Mr=function(t){return L(t.dom.childNodes,dn.fromDom)},Ar=function(t,e){var n=t.dom.childNodes;return A.from(n[e]).map(dn.fromDom)},Dr=function(t){return kr(t)&&l(t.dom.host)},Er=s(Element.prototype.attachShadow)&&s(Node.prototype.getRootNode),Pr=p(Er),Hr=Er?function(t){return dn.fromDom(t.dom.getRootNode())}:Cr,Br=function(t){return Dr(t)?t:dn.fromDom(Cr(t).dom.body)},Rr=function(t){var e=Hr(t);return Dr(e)?A.some(e):A.none()},Ir=function(t){return dn.fromDom(t.dom.host)},Nr=function(t){return l(t.dom.shadowRoot)},Lr=function(t,e){zr(t).each((function(n){n.dom.insertBefore(e.dom,t.dom)}))},Fr=function(t,e){var n=function(t){return A.from(t.dom.nextSibling).map(dn.fromDom)}(t);n.fold((function(){zr(t).each((function(t){jr(t,e)}))}),(function(t){Lr(t,e)}))},Vr=function(t,e){var n=function(t){return Ar(t,0)}(t);n.fold((function(){jr(t,e)}),(function(n){t.dom.insertBefore(e.dom,n.dom)}))},jr=function(t,e){t.dom.appendChild(e.dom)},Ur=function(t,e){F(e,(function(e){jr(t,e)}))},Wr=function(t){t.dom.textContent="",F(Mr(t),(function(t){qr(t)}))},qr=function(t){var e=t.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},$r=function(t){var e,n=Mr(t);n.length>0&&(e=t,F(n,(function(t){Lr(e,t)}))),qr(t)},Gr=function(t){return t.dom.innerHTML},Yr=function(t,e){var n,o,r=_r(t).dom,i=dn.fromDom(r.createDocumentFragment()),a=(n=e,(o=(r||document).createElement("div")).innerHTML=n,Mr(dn.fromDom(o)));Ur(i,a),Wr(t),jr(t,i)},Xr=function(t,e,n){if(!(r(n)||u(n)||f(n)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")},Kr=function(t,e,n){Xr(t.dom,e,n)},Jr=function(t,e){var n=t.dom.getAttribute(e);return null===n?void 0:n},Zr=function(t,e){return A.from(Jr(t,e))},Qr=function(t,e){var n=t.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(e)},ti=function(t,e){t.dom.removeAttribute(e)},ei=function(t){return function(t,e){return dn.fromDom(t.dom.cloneNode(e))}(t,!1)},ni=function(t){return Dr(t)?"#shadow-root":function(t){var e=dn.fromTag("div"),n=dn.fromDom(t.dom.cloneNode(!0));return jr(e,n),Gr(e)}(ei(t))},oi=function(t){return ni(t)},ri=nr([function(t,e){return{key:t,value:eo({can:e})}}(So(),(function(t,e){var n=e.event,o=n.originator,r=n.target;return!function(t,e,n){return Yn(e,t.element)&&!Yn(e,n)}(t,o,r)||(console.warn(So()+" did not get interpreted by the desired target. \nOriginator: "+oi(o)+"\nTarget: "+oi(r)+"\nCheck the "+So()+" event handlers"),!1)}))]),ii=Object.freeze({__proto__:null,events:ri}),ai=0,ui=function(t){var e=(new Date).getTime();return t+"_"+Math.floor(1e9*Math.random())+ ++ai+String(e)},ci=p("alloy-id-"),li=p("data-alloy-id"),si=ci(),fi=li(),di=function(t,e){Object.defineProperty(t.dom,fi,{value:e,writable:!0})},mi=function(t){var e=xr(t)?t.dom[fi]:null;return A.from(e)},gi=function(t){return ui(t)},pi=h,hi=function(t){var e=function(e){return function(){throw new Error("The component must be in a context to send: "+e+(t?"\n"+oi(t().element)+" is not in context.":""))}};return{debugInfo:p("fake"),triggerEvent:e("triggerEvent"),triggerFocus:e("triggerFocus"),triggerEscape:e("triggerEscape"),build:e("build"),addToWorld:e("addToWorld"),removeFromWorld:e("removeFromWorld"),addToGui:e("addToGui"),removeFromGui:e("removeFromGui"),getByUid:e("getByUid"),getByDom:e("getByDom"),broadcast:e("broadcast"),broadcastOn:e("broadcastOn"),broadcastEvent:e("broadcastEvent"),isConnected:y}},vi=hi(),bi=function(t){return L(t,(function(t){return yn(t,"/*")?t.substring(0,t.length-"/*".length):t}))},xi=function(t,e){var n=t.toString(),o=n.indexOf(")")+1,r=n.indexOf("("),i=n.substring(r+1,o-1).split(/,\s*/);return t.toFunctionAnnotation=function(){return{name:e,parameters:bi(i)}},t},yi=ui("alloy-premade"),wi=function(t){return Gt(yi,t)},ki=function(t){return function(t,e){var n=e.toString(),o=n.indexOf(")")+1,r=n.indexOf("("),i=n.substring(r+1,o-1).split(/,\s*/);return t.toFunctionAnnotation=function(){return{name:"OVERRIDE",parameters:bi(i.slice(1))}},t}((function(e){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return t.apply(void 0,S([e.getApis(),e],n))}),t)},_i={init:function(){return Ci({readState:function(){return"No State required"}})}},Ci=function(t){return t},Si=function(t,e){var n={};return kt(t,(function(t,o){kt(t,(function(t,r){var i=Mt(n,r).getOr([]);n[r]=i.concat([e(o,t)])}))})),n},Oi=function(t){return{classes:void 0!==t.classes?t.classes:[],attributes:void 0!==t.attributes?t.attributes:{},styles:void 0!==t.styles?t.styles:{}}},zi=function(t){return t.cHandler},Ti=function(t,e){return{name:t,handler:e}},Mi=function(t,e,n){var o=_(_({},n),function(t,e){var n={};return F(t,(function(t){n[t.name()]=t.handlers(e)})),n}(e,t));return Si(o,Ti)},Ai=function(t){var e=function(t){return s(t)?{can:w,abort:y,run:t}:t}(t);return function(t,n){for(var o=[],r=2;r<arguments.length;r++)o[r-2]=arguments[r];var i=[t,n].concat(o);e.abort.apply(void 0,i)?n.stop():e.can.apply(void 0,i)&&e.run.apply(void 0,i)}},Di=function(t,e,n){var o=e[n];return o?function(t,e,n,o){try{var r=Z(n,(function(n,r){var i=n[e],a=r[e],u=o.indexOf(i),c=o.indexOf(a);if(-1===u)throw new Error("The ordering for "+t+" does not have an entry for "+i+".\nOrder specified: "+JSON.stringify(o,null,2));if(-1===c)throw new Error("The ordering for "+t+" does not have an entry for "+a+".\nOrder specified: "+JSON.stringify(o,null,2));return u<c?-1:c<u?1:0}));return at(r)}catch(i){return ut([i])}}("Event: "+n,"name",t,o).map((function(t){var e=L(t,(function(t){return t.handler}));return no(e)})):function(t,e){return ut(["The event ("+t+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+JSON.stringify(L(e,(function(t){return t.name})),null,2)])}(n,t)},Ei=function(t,e){var n=Ot(t,(function(t,n){return(1===t.length?at(t[0].handler):Di(t,e,n)).map((function(o){var r=Ai(o),i=t.length>1?j(e[n],(function(e){return R(t,(function(t){return t.name===e}))})).join(" > "):t[0].name;return Gt(n,function(t,e){return{handler:t,purpose:e}}(r,i))}))}));return Xt(n,{})},Pi="alloy.base.behaviour",Hi=function(t){return t.events},Bi=function(t,e){var n=Jr(t,e);return void 0===n||""===n?[]:n.split(" ")},Ri=function(t){return void 0!==t.dom.classList},Ii=function(t,e){return function(t,e,n){var o=Bi(t,e).concat([n]);return Kr(t,e,o.join(" ")),!0}(t,"class",e)},Ni=function(t,e){return function(t,e,n){var o=j(Bi(t,e),(function(t){return t!==n}));return o.length>0?Kr(t,e,o.join(" ")):ti(t,e),!1}(t,"class",e)},Li=function(t,e){Ri(t)?t.dom.classList.add(e):Ii(t,e)},Fi=function(t){var e=Ri(t)?t.dom.classList:function(t){return Bi(t,"class")}(t);0===e.length&&ti(t,"class")},Vi=function(t,e){Ri(t)?t.dom.classList.remove(e):Ni(t,e);Fi(t)},ji=function(t,e){return Ri(t)&&t.dom.classList.contains(e)},Ui=function(t,e){F(e,(function(e){Li(t,e)}))},Wi=function(t,e){F(e,(function(e){Vi(t,e)}))},qi=function(t){return void 0!==t.style&&s(t.style.getPropertyValue)},$i=function t(e){var n=yr(e)?e.dom.parentNode:e.dom;if(null==n||null===n.ownerDocument)return!1;var o,r,i=n.ownerDocument;return Rr(dn.fromDom(n)).fold((function(){return i.body.contains(n)}),(o=t,r=Ir,function(t){return o(r(t))}))},Gi=function(){return Yi(dn.fromDom(document))},Yi=function(t){var e=t.dom.body;if(null==e)throw new Error("Body is not available yet");return dn.fromDom(e)},Xi=function(t,e,n){if(!r(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);qi(t)&&t.style.setProperty(e,n)},Ki=function(t,e){qi(t)&&t.style.removeProperty(e)},Ji=function(t,e,n){var o=t.dom;Xi(o,e,n)},Zi=function(t,e){var n=t.dom;kt(e,(function(t,e){Xi(n,e,t)}))},Qi=function(t,e){var n=t.dom;kt(e,(function(t,e){t.fold((function(){Ki(n,e)}),(function(t){Xi(n,e,t)}))}))},ta=function(t,e){var n=t.dom,o=window.getComputedStyle(n).getPropertyValue(e);return""!==o||$i(t)?o:ea(n,e)},ea=function(t,e){return qi(t)?t.style.getPropertyValue(e):""},na=function(t,e){var n=t.dom,o=ea(n,e);return A.from(o).filter((function(t){return t.length>0}))},oa=function(t){var e={},n=t.dom;if(qi(n))for(var o=0;o<n.style.length;o++){var r=n.style.item(o);e[r]=n.style[r]}return e},ra=function(t,e,n){var o=dn.fromTag(t);return Ji(o,e,n),na(o,e).isSome()},ia=function(t,e){var n=t.dom;Ki(n,e),Zr(t,"style").map(wn).is("")&&ti(t,"style")},aa=function(t){return t.dom.offsetWidth},ua=function(t){return t.dom.value},ca=function(t,e){if(void 0===e)throw new Error("Value.set was undefined");t.dom.value=e},la=function(t){var e=dn.fromTag(t.tag);!function(t,e){var n=t.dom;kt(e,(function(t,e){Xr(n,e,t)}))}(e,t.attributes),Ui(e,t.classes),Zi(e,t.styles),t.innerHtml.each((function(t){return Yr(e,t)}));var n=t.domChildren;return Ur(e,n),t.value.each((function(t){ca(e,t)})),t.uid,di(e,t.uid),e},sa=function(t,e){return function(t,e){var n=L(e,(function(t){return Ze(t.name(),[Ne("config"),Qe("state",_i)])})),o=_e("component.behaviours",ce(n),t.behaviours).fold((function(e){throw new Error(Oe(e)+"\nComplete spec:\n"+JSON.stringify(t,null,2))}),(function(t){return t}));return{list:e,data:_t(o,(function(t){var e=t.map((function(t){return{config:t.config,state:t.state.init(t.config)}}));return function(){return e}}))}}(t,e)},fa=function(t){var e=function(t){var e=Mt(t,"behaviours").getOr({}),n=j(yt(e),(function(t){return void 0!==e[t]}));return L(n,(function(t){return e[t].me}))}(t);return sa(t,e)},da=function(t,e,n){var o,r,i,a=_(_({},(o=t).dom),{uid:o.uid,domChildren:L(o.components,(function(t){return t.element}))}),u=function(t){return t.domModification.fold((function(){return Oi({})}),Oi)}(t),c={"alloy.base.modification":u},l=e.length>0?function(t,e,n,o){var r=_({},e);F(n,(function(e){r[e.name()]=e.exhibit(t,o)}));var i=Si(r,(function(t,e){return{name:t,modification:e}})),a=function(t){return U(t,(function(t,e){return _(_({},e.modification),t)}),{})},u=U(i.classes,(function(t,e){return e.modification.concat(t)}),[]),c=a(i.attributes),l=a(i.styles);return Oi({classes:u,attributes:c,styles:l})}(n,c,e,a):u;return i=l,_(_({},r=a),{attributes:_(_({},r.attributes),i.attributes),styles:_(_({},r.styles),i.styles),classes:r.classes.concat(i.classes)})},ma=function(t,e,n){var o={"alloy.base.behaviour":Hi(t)};return function(t,e,n,o){var r=Mi(t,n,o);return Ei(r,e)}(n,t.eventOrder,e,o).getOrDie()},ga=function(t){var e=function(){return d},n=sn(vi),o=Ce(function(t){var e;return _e("custom.definition",ce([pe("dom","dom",Vt(),ce([Ne("tag"),Qe("styles",{}),Qe("classes",[]),Qe("attributes",{}),Ge("value"),Ge("innerHtml")])),Ne("components"),Ne("uid"),Qe("events",{}),Qe("apis",{}),pe("eventOrder","eventOrder",Ft((e={},e[Mo()]=["disabling",Pi,"toggling","typeaheadevents"],e[So()]=[Pi,"focusing","keying"],e[Bo()]=[Pi,"disabling","toggling","representing"],e[bo()]=[Pi,"representing","streaming","invalidating"],e[Vo()]=[Pi,"representing","item-events","tooltipping"],e[co()]=["focusing",Pi,"item-type-events"],e[ro()]=["focusing",Pi,"item-type-events"],e[mo()]=["item-type-events","tooltipping"],e[To()]=["receiving","reflecting","tooltipping"],e)),Me()),Ge("domModification")]),t)}(t)),r=fa(t),i=function(t){return t.list}(r),a=function(t){return t.data}(r),u=da(o,i,a),c=la(u),l=ma(o,i,a),f=sn(o.components),d={getSystem:n.get,config:function(e){var n=a;return(s(n[e.name()])?n[e.name()]:function(){throw new Error("Could not find "+e.name()+" in "+JSON.stringify(t,null,2))})()},hasConfigured:function(t){return s(a[t.name()])},spec:t,readState:function(t){return a[t]().map((function(t){return t.state.readState()})).getOr("not enabled")},getApis:function(){return o.apis},connect:function(t){n.set(t)},disconnect:function(){n.set(hi(e))},element:c,syncComponents:function(){var t=Mr(c),e=Y(t,(function(t){return n.get().getByDom(t).fold((function(){return[]}),(function(t){return[t]}))}));f.set(e)},components:f.get,events:l};return d},pa=function(t){var e=pi(t),n=e.events,o=C(e,["events"]),r=function(t){var e=Mt(t,"components").getOr([]);return L(e,xa)}(o),i=_(_({},o),{events:_(_({},ii),n),components:r});return at(ga(i))},ha=function(t){var e=dn.fromText(t);return va({element:e})},va=function(t){var e=Se("external.component",ue([Ne("element"),Ge("uid")]),t),n=sn(hi());e.uid.each((function(t){di(e.element,t)}));var o={getSystem:n.get,config:A.none,hasConfigured:y,connect:function(t){n.set(t)},disconnect:function(){n.set(hi((function(){return o})))},getApis:function(){return{}},element:e.element,spec:t,readState:p("No state"),syncComponents:m,components:p([]),events:{}};return wi(o)},ba=gi,xa=function(t){return function(t){return Mt(t,yi)}(t).fold((function(){var e=t.hasOwnProperty("uid")?t:_({uid:ba("")},t);return pa(e).getOrDie()}),(function(t){return t}))},ya=wi,wa=function(t,e){var n=function(n){var o=e(n);if(o<=0||null===o){var r=ta(n,t);return parseFloat(r)||0}return o},o=function(t,e){return W(e,(function(e,n){var o=ta(t,n),r=void 0===o?0:parseInt(o,10);return isNaN(r)?e:e+r}),0)};return{set:function(e,n){if(!f(n)&&!n.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+n);var o=e.dom;qi(o)&&(o.style[t]=n+"px")},get:n,getOuter:n,aggregate:o,max:function(t,e,n){var r=o(t,n);return e>r?e-r:0}}},ka=wa("height",(function(t){var e=t.dom;return $i(t)?e.getBoundingClientRect().height:e.offsetHeight})),_a=function(t){return ka.get(t)},Ca=function(t){return ka.getOuter(t)},Sa=function t(e,n){return{left:e,top:n,translate:function(o,r){return t(e+o,n+r)}}},Oa=function(t,e){return void 0!==t?t:void 0!==e?e:0},za=function(t){var e=t.dom.ownerDocument,n=e.body,o=e.defaultView,r=e.documentElement;if(n===t.dom)return Sa(n.offsetLeft,n.offsetTop);var i=Oa(null==o?void 0:o.pageYOffset,r.scrollTop),a=Oa(null==o?void 0:o.pageXOffset,r.scrollLeft),u=Oa(r.clientTop,n.clientTop),c=Oa(r.clientLeft,n.clientLeft);return Ta(t).translate(a-c,i-u)},Ta=function(t){var e=t.dom,n=e.ownerDocument.body;return n===e?Sa(n.offsetLeft,n.offsetTop):$i(t)?function(t){var e=t.getBoundingClientRect();return Sa(e.left,e.top)}(e):Sa(0,0)},Ma=wa("width",(function(t){return t.dom.offsetWidth})),Aa=function(t){return Ma.get(t)},Da=function(t){return Ma.getOuter(t)},Ea=function(t){var e=dn.fromDom(function(t){if(Pr()&&l(t.target)){var e=dn.fromDom(t.target);if(xr(e)&&Nr(e)&&t.composed&&t.composedPath){var n=t.composedPath();if(n)return tt(n)}}return A.from(t.target)}(t).getOr(t.target)),n=function(){return t.stopPropagation()},o=function(){return t.preventDefault()},r=g(o,n);return function(t,e,n,o,r,i,a){return{target:t,x:e,y:n,stop:o,prevent:r,kill:i,raw:a}}(e,t.clientX,t.clientY,n,o,r,t)},Pa=function(t,e,n,o,r){var i=function(t,e){return function(n){t(n)&&e(Ea(n))}}(n,o);return t.dom.addEventListener(e,i,r),{unbind:v(Ha,t,e,i,r)}},Ha=function(t,e,n,o){t.dom.removeEventListener(e,n,o)},Ba=function(t){var e=void 0!==t?t.dom:document,n=e.body.scrollLeft||e.documentElement.scrollLeft,o=e.body.scrollTop||e.documentElement.scrollTop;return Sa(n,o)},Ra=function(t,e,n){var o=(void 0!==n?n.dom:document).defaultView;o&&o.scrollTo(t,e)},Ia=function(t,e,n,o){return{x:t,y:e,width:n,height:o,right:t+n,bottom:e+o}},Na=function(t){var e=void 0===t?window:t,n=e.document,o=Ba(dn.fromDom(n));return function(t){var e=void 0===t?window:t;return A.from(e.visualViewport)}(e).fold((function(){var t=e.document.documentElement,n=t.clientWidth,r=t.clientHeight;return Ia(o.left,o.top,n,r)}),(function(t){return Ia(Math.max(t.pageLeft,o.left),Math.max(t.pageTop,o.top),t.width,t.height)}))},La=function t(e,n){return e.view(n).fold(p([]),(function(n){var o=e.owner(n),r=t(e,o);return[n].concat(r)}))},Fa=function(t,e){var n=e.owner(t),o=La(e,n);return A.some(o)},Va=Object.freeze({__proto__:null,view:function(t){var e;return(t.dom===document?A.none():A.from(null===(e=t.dom.defaultView)||void 0===e?void 0:e.frameElement)).map(dn.fromDom)},owner:function(t){return _r(t)}}),ja=function(t){var e=dn.fromDom(document),n=Ba(e);return Fa(t,Va).fold(v(za,t),(function(e){var o=Ta(t),r=U(e,(function(t,e){var n=Ta(e);return{left:t.left+n.left,top:t.top+n.top}}),{left:0,top:0});return Sa(r.left+o.left+n.left,r.top+o.top+n.top)}))},Ua=function(t,e,n,o){return{x:t,y:e,width:n,height:o,right:t+n,bottom:e+o}},Wa=function(t){var e=za(t),n=Da(t),o=Ca(t);return Ua(e.left,e.top,n,o)},qa=function(t){var e=ja(t),n=Da(t),o=Ca(t);return Ua(e.left,e.top,n,o)},$a=function(){return Na(window)};function Ga(t,e,n,o,r){return t(n,o)?A.some(n):s(r)&&r(n)?A.none():e(n,o,r)}var Ya,Xa=function(t,e,n){for(var o=t.dom,r=s(n)?n:y;o.parentNode;){o=o.parentNode;var i=dn.fromDom(o);if(e(i))return A.some(i);if(r(i))break}return A.none()},Ka=function(t,e,n){return Ga((function(t,e){return e(t)}),Xa,t,e,n)},Ja=function(t,e,n){return Ka(t,e,n).isSome()},Za=function(t,e,n){return Xa(t,(function(t){return $n(t,e)}),n)},Qa=function(t,e){return function(t,e){var n=void 0===e?document:e.dom;return Gn(n)?A.none():A.from(n.querySelector(t)).map(dn.fromDom)}(e,t)},tu=function(t,e,n){return Ga((function(t,e){return $n(t,e)}),Za,t,e,n)},eu=function(){var t=ui("aria-owns");return{id:t,link:function(e){Kr(e,"aria-owns",t)},unlink:function(t){ti(t,"aria-owns")}}},nu=function(t,e){return function(t){return Ka(t,(function(t){if(!xr(t))return!1;var e=Jr(t,"id");return void 0!==e&&e.indexOf("aria-owns")>-1})).bind((function(t){var e=Jr(t,"id"),n=Hr(t);return Qa(n,'[aria-owns="'+e+'"]')}))}(e).exists((function(e){return ou(t,e)}))},ou=function(t,e){return Ja(e,(function(e){return Yn(e,t.element)}),y)||nu(t,e)},ru="unknown";!function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"}(Ya||(Ya={}));var iu=sn({}),au=function(t,e,n){switch(Mt(iu.get(),t).orThunk((function(){var e=yt(iu.get());return ot(e,(function(e){return t.indexOf(e)>-1?A.some(iu.get()[e]):A.none()}))})).getOr(Ya.NORMAL)){case Ya.NORMAL:return n(lu());case Ya.LOGGING:var o=function(t,e){var n=[],o=(new Date).getTime();return{logEventCut:function(t,e,o){n.push({outcome:"cut",target:e,purpose:o})},logEventStopped:function(t,e,o){n.push({outcome:"stopped",target:e,purpose:o})},logNoParent:function(t,e,o){n.push({outcome:"no-parent",target:e,purpose:o})},logEventNoHandlers:function(t,e){n.push({outcome:"no-handlers-left",target:e})},logEventResponse:function(t,e,o){n.push({outcome:"response",purpose:o,target:e})},write:function(){var r=(new Date).getTime();B(["mousemove","mouseover","mouseout",Bo()],t)||console.log(t,{event:t,time:r-o,target:e.dom,sequence:L(n,(function(t){return B(["cut","stopped","response"],t.outcome)?"{"+t.purpose+"} "+t.outcome+" at ("+oi(t.target)+")":t.outcome}))})}}}(t,e),r=n(o);return o.write(),r;case Ya.STOP:return!0}},uu=["alloy/data/Fields","alloy/debugging/Debugging"],cu=function(t,e,n){return au(t,e,n)},lu=p({logEventCut:m,logEventStopped:m,logNoParent:m,logEventNoHandlers:m,logEventResponse:m,write:m}),su=p([Ne("menu"),Ne("selectedMenu")]),fu=p([Ne("item"),Ne("selectedItem")]);p(ce(fu().concat(su())));var du=p(ce(fu())),mu=We("initSize",[Ne("numColumns"),Ne("numRows")]),gu=function(){return We("markers",[Ne("backgroundMenu")].concat(su()).concat(fu()))},pu=function(t){return We("markers",L(t,Ne))},hu=function(t,e,n){return function(){var t=new Error;if(void 0!==t.stack){var e=t.stack.split("\n");return q(e,(function(t){return t.indexOf("alloy")>0&&!R(uu,(function(e){return t.indexOf(e)>-1}))})).getOr(ru)}}(),pe(e,e,n,we((function(t){return at((function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.apply(void 0,e)}))})))},vu=function(t){return hu(0,t,Lt(m))},bu=function(t){return hu(0,t,Lt(A.none))},xu=function(t){return hu(0,t,Vt())},yu=function(t){return hu(0,t,Vt())},wu=function(t,e){return ln(t,p(e))},ku=function(t){return ln(t,h)},_u=p(mu),Cu=function(t,e,n,o,r,i){return{x:t,y:e,bubble:n,direction:o,boundsRestriction:r,label:i}},Su=Et([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),Ou=Su.southeast,zu=Su.southwest,Tu=Su.northeast,Mu=Su.northwest,Au=Su.south,Du=Su.north,Eu=Su.east,Pu=Su.west,Hu=function(t,e){return function(t,e){for(var n={},o=0,r=t.length;o<r;o++){var i=t[o];n[String(i)]=e(i,o)}return n}(["left","right","top","bottom"],(function(n){return Mt(e,n).map((function(e){return function(t,e){switch(e){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}}(t,e)}))}))},Bu=function(t){return t.x},Ru=function(t,e){return t.x+t.width/2-e.width/2},Iu=function(t,e){return t.x+t.width-e.width},Nu=function(t,e){return t.y-e.height},Lu=function(t){return t.y+t.height},Fu=function(t,e){return t.y+t.height/2-e.height/2},Vu=function(t,e,n){return Cu(Bu(t),Lu(t),n.southeast(),Ou(),Hu(t,{left:1,top:3}),"layout-se")},ju=function(t,e,n){return Cu(Iu(t,e),Lu(t),n.southwest(),zu(),Hu(t,{right:0,top:3}),"layout-sw")},Uu=function(t,e,n){return Cu(Bu(t),Nu(t,e),n.northeast(),Tu(),Hu(t,{left:1,bottom:2}),"layout-ne")},Wu=function(t,e,n){return Cu(Iu(t,e),Nu(t,e),n.northwest(),Mu(),Hu(t,{right:0,bottom:2}),"layout-nw")},qu=function(t,e,n){return Cu(Ru(t,e),Nu(t,e),n.north(),Du(),Hu(t,{bottom:2}),"layout-n")},$u=function(t,e,n){return Cu(Ru(t,e),Lu(t),n.south(),Au(),Hu(t,{top:3}),"layout-s")},Gu=function(t,e,n){return Cu(function(t){return t.x+t.width}(t),Fu(t,e),n.east(),Eu(),Hu(t,{left:0}),"layout-e")},Yu=function(t,e,n){return Cu(function(t,e){return t.x-e.width}(t,e),Fu(t,e),n.west(),Pu(),Hu(t,{right:1}),"layout-w")},Xu=function(){return[Vu,ju,Uu,Wu,$u,qu,Gu,Yu]},Ku=function(){return[ju,Vu,Wu,Uu,$u,qu,Gu,Yu]},Ju=function(){return[Uu,Wu,Vu,ju,qu,$u]},Zu=function(){return[Wu,Uu,ju,Vu,qu,$u]},Qu=function(){return[Vu,ju,Uu,Wu,$u,qu]},tc=function(){return[ju,Vu,Wu,Uu,$u,qu]},ec=Object.freeze({__proto__:null,events:function(t){return nr([ir(To(),(function(e,n){var o=t.channels,r=yt(o),i=n,a=function(t,e){return e.universal?t:j(t,(function(t){return B(e.channels,t)}))}(r,i);F(a,(function(t){var n=o[t],r=n.schema,a=Se("channel["+t+"] data\nReceiver: "+oi(e.element),r,i.data);n.onReceive(e,a)}))}))])}}),nc=[Le("channels",ke(at,ue([xu("onReceive"),Qe("schema",Me())])))],oc=function(t,e,n){return pr((function(o,r){n(o,t,e)}))},rc=function(t,e,n){return function(t,e,n){var o=n.toString(),r=o.indexOf(")")+1,i=o.indexOf("("),a=o.substring(i+1,r-1).split(/,\s*/);return t.toFunctionAnnotation=function(){return{name:e,parameters:bi(a.slice(0,1).concat(a.slice(3)))}},t}((function(o){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var a=[o].concat(r);return o.config({name:p(t)}).fold((function(){throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+n)}),(function(t){var n=Array.prototype.slice.call(a,1);return e.apply(void 0,[o,t.config,t.state].concat(n))}))}),n,e)},ic=function(t){return{key:t,value:void 0}},ac=function(t,e,n,o,r,i,a){var u=function(t){return Dt(t,n)?t[n]():A.none()},c=_t(r,(function(t,e){return rc(n,t,e)})),l=_t(i,(function(t,e){return xi(t,e)})),s=_(_(_({},l),c),{revoke:v(ic,n),config:function(e){var o=Se(n+"-config",t,e);return{key:n,value:{config:o,me:s,configAsRaw:It((function(){return Se(n+"-config",t,e)})),initialConfig:e,state:a}}},schema:p(e),exhibit:function(t,e){return u(t).bind((function(t){return Mt(o,"exhibit").map((function(n){return n(e,t.config,t.state)}))})).getOr(Oi({}))},name:p(n),handlers:function(t){return u(t).map((function(t){return Mt(o,"events").getOr((function(){return{}}))(t.config,t.state)})).getOr({})}});return s},uc=function(t){return Yt(t)},cc=ue([Ne("fields"),Ne("name"),Qe("active",{}),Qe("apis",{}),Qe("state",_i),Qe("extra",{})]),lc=function(t){var e=Se("Creating behaviour: "+t.name,cc,t);return function(t,e,n,o,r,i){var a,u,c=ue(t),l=Ze(e,[(a="config",u=t,Ye(a,ue(u)))]);return ac(c,l,e,n,o,r,i)}(e.fields,e.name,e.active,e.apis,e.extra,e.state)},sc=ue([Ne("branchKey"),Ne("branches"),Ne("name"),Qe("active",{}),Qe("apis",{}),Qe("state",_i),Qe("extra",{})]),fc=function(t){var e=Se("Creating behaviour: "+t.name,sc,t);return function(t,e,n,o,r,i){var a=t,u=Ze(e,[Ye("config",t)]);return ac(a,u,e,n,o,r,i)}(Te(e.branchKey,e.branches),e.name,e.active,e.apis,e.extra,e.state)},dc=p(void 0),mc=lc({fields:nc,name:"receiving",active:ec}),gc=Object.freeze({__proto__:null,exhibit:function(t,e){return Oi({classes:[],styles:e.useFixed()?{}:{position:"relative"}})}}),pc=function(t){return t.dom.focus()},hc=function(t){return void 0===t&&(t=dn.fromDom(document)),A.from(t.dom.activeElement).map(dn.fromDom)},vc=function(t){return hc(Hr(t)).filter((function(e){return t.dom.contains(e.dom)}))},bc=function(t,e){var n=Hr(e),o=hc(n).bind((function(t){var n,o=function(e){return Yn(t,e)};return o(e)?A.some(e):(n=o,function t(e){for(var o=0;o<e.childNodes.length;o++){var r=dn.fromDom(e.childNodes[o]);if(n(r))return A.some(r);var i=t(e.childNodes[o]);if(i.isSome())return i}return A.none()}(e.dom))})),r=t(e);return o.each((function(t){hc(n).filter((function(e){return Yn(e,t)})).fold((function(){pc(t)}),m)})),r},xc=function(t,e,n,o,r){return{position:t,left:e,top:n,right:o,bottom:r}},yc=function(t,e){var n=function(t){return t+"px"};Qi(t,{position:A.some(e.position),left:e.left.map(n),top:e.top.map(n),right:e.right.map(n),bottom:e.bottom.map(n)})},wc=Et([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),kc=function(t,e,n,o,r,i){var a=e.x-n,u=e.y-o,c=r-(a+e.width),l=i-(u+e.height),s=A.some(a),f=A.some(u),d=A.some(c),m=A.some(l),g=A.none();return function(t,e,n,o,r,i,a,u,c){return t.fold(e,n,o,r,i,a,u,c)}(e.direction,(function(){return xc(t,s,f,g,g)}),(function(){return xc(t,g,f,d,g)}),(function(){return xc(t,s,g,g,m)}),(function(){return xc(t,g,g,d,m)}),(function(){return xc(t,s,f,g,g)}),(function(){return xc(t,s,g,g,m)}),(function(){return xc(t,s,f,g,g)}),(function(){return xc(t,g,f,d,g)}))},_c=function(t,e){var n=v(ja,e),o=t.fold(n,n,(function(){var t=Ba();return ja(e).translate(-t.left,-t.top)})),r=Da(e),i=Ca(e);return Ua(o.left,o.top,r,i)},Cc=function(t,e){return e.fold((function(){return t.fold($a,$a,Ua)}),(function(e){return t.fold(e,e,(function(){var n=e(),o=Sc(t,n.x,n.y);return Ua(o.left,o.top,n.width,n.height)}))}))},Sc=function(t,e,n){var o=Sa(e,n);return t.fold(p(o),p(o),(function(){var t=Ba();return o.translate(-t.left,-t.top)}))};wc.none;var Oc,zc=wc.relative,Tc=wc.fixed,Mc=function(t,e){return function(t,e){return{anchorBox:t,origin:e}}(t,e)},Ac=function(t,e,n,o){var r=t+e;return r>o?n:r<n?o:r},Dc=function(t,e,n){return Math.min(Math.max(t,e),n)},Ec=Et([{fit:["reposition"]},{nofit:["reposition","deltaW","deltaH"]}]),Pc=function(t,e,n,o){var r=t.x,i=t.y,a=t.bubble.offset,u=a.left,c=a.top,l=function(t,e,n){var o=function(t,o){var r="top"===t||"bottom"===t?n.top:n.left;return Mt(e,t).bind(h).bind((function(e){return"left"===t||"top"===t?e>=o?A.some(e):A.none():e<=o?A.some(e):A.none()})).map((function(t){return t+r})).getOr(o)},r=o("left",t.x),i=o("top",t.y),a=o("right",t.right),u=o("bottom",t.bottom);return Ua(r,i,a-r,u-i)}(o,t.boundsRestriction,a),s=l.y,f=l.bottom,d=l.x,m=l.right,g=i+c,v=function(t,e,n,o,r){var i=r.x,a=r.y,u=r.width,c=r.height,l=t>=i,s=e>=a,f=l&&s,d=t+n<=i+u&&e+o<=a+c,m=Math.abs(Math.min(n,l?i+u-t:i-(t+n))),g=Math.abs(Math.min(o,s?a+c-e:a-(e+o))),p=Math.max(r.x,r.right-n),h=Math.max(r.y,r.bottom-o);return{originInBounds:f,sizeInBounds:d,limitX:Dc(t,r.x,p),limitY:Dc(e,r.y,h),deltaW:m,deltaH:g}}(r+u,g,e,n,l),b=v.originInBounds,x=v.sizeInBounds,y=v.limitX,w=v.limitY,k=v.deltaW,_=v.deltaH,C=p(w+_-s),S=p(f-w),O=function(t,e,n,o){return t.fold(e,e,o,o,e,o,n,n)}(t.direction,S,S,C),z=p(y+k-d),T=p(m-y),M=function(t,e,n,o){return t.fold(e,o,e,o,n,n,e,o)}(t.direction,T,T,z),D={x:y,y:w,width:k,height:_,maxHeight:O,maxWidth:M,direction:t.direction,classes:{on:t.bubble.classesOn,off:t.bubble.classesOff},label:t.label,candidateYforTest:g};return b&&x?Ec.fit(D):Ec.nofit(D,k,_)},Hc=function(t,e,n,o){ia(e,"max-height"),ia(e,"max-width");var r,i={width:Da(r=e),height:Ca(r)};return function(t,e,n,o,r){var i=n.width,a=n.height,u=function(t,u,c,l){var s=t(e,n,o);return Pc(s,i,a,r).fold(Ec.fit,(function(t,e,n){return n>l||e>c?Ec.nofit(t,e,n):Ec.nofit(u,c,l)}))},c=W(t,(function(t,e){var n=v(u,e);return t.fold(Ec.fit,n)}),Ec.nofit({x:e.x,y:e.y,width:n.width,height:n.height,maxHeight:n.height,maxWidth:n.width,direction:Ou(),classes:{on:[],off:[]},label:"none",candidateYforTest:e.y},-1,-1));return c.fold(h,h)}(o.preference,t,i,n,o.bounds)},Bc=function(t,e,n){yc(t,function(t,e){return t.fold((function(){return xc("absolute",A.some(e.x),A.some(e.y),A.none(),A.none())}),(function(t,n,o,r){return kc("absolute",e,t,n,o,r)}),(function(t,n,o,r){return kc("fixed",e,t,n,o,r)}))}(n.origin,e))},Rc=function(t,e){!function(t,e){var n=ka.max(t,e,["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"]);Ji(t,"max-height",n+"px")}(t,Math.floor(e))},Ic=p((function(t,e){Rc(t,e),Zi(t,{"overflow-x":"hidden","overflow-y":"auto"})})),Nc=p((function(t,e){Rc(t,e)})),Lc=function(t,e,n){return void 0===t[e]?n:t[e]},Fc=function(t,e,n,o){var r=Hc(t,e,n,o);Bc(e,r,o),function(t,e){var n=e.classes;Wi(t,n.off),Ui(t,n.on)}(e,r),function(t,e,n){(0,n.maxHeightFunction)(t,e.maxHeight)}(e,r,o),function(t,e,n){(0,n.maxWidthFunction)(t,e.maxWidth)}(e,r,o)},Vc=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right"],jc=function(t,e,n){var o=function(t){return Mt(n,t).getOr([])},r=function(t,e,n){var r=J(Vc,n);return{offset:Sa(t,e),classesOn:Y(n,o),classesOff:Y(r,o)}};return{southeast:function(){return r(-t,e,["top","alignLeft"])},southwest:function(){return r(t,e,["top","alignRight"])},south:function(){return r(-t/2,e,["top","alignCentre"])},northeast:function(){return r(-t,-e,["bottom","alignLeft"])},northwest:function(){return r(t,-e,["bottom","alignRight"])},north:function(){return r(-t/2,-e,["bottom","alignCentre"])},east:function(){return r(t,-e/2,["valignCentre","left"])},west:function(){return r(-t,-e/2,["valignCentre","right"])},innerNorthwest:function(){return r(-t,e,["top","alignRight"])},innerNortheast:function(){return r(t,e,["top","alignLeft"])},innerNorth:function(){return r(-t/2,e,["top","alignCentre"])},innerSouthwest:function(){return r(-t,-e,["bottom","alignRight"])},innerSoutheast:function(){return r(t,-e,["bottom","alignLeft"])},innerSouth:function(){return r(-t/2,-e,["bottom","alignCentre"])},innerWest:function(){return r(t,-e/2,["valignCentre","right"])},innerEast:function(){return r(-t,-e/2,["valignCentre","left"])}}},Uc=function(){return jc(0,0,{})},Wc=function(t,e){return function(n){return"rtl"===qc(n)?e:t}},qc=function(t){return"rtl"===ta(t,"direction")?"rtl":"ltr"};!function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"}(Oc||(Oc={}));var $c="data-alloy-vertical-dir",Gc=function(t){return Ja(t,(function(t){return xr(t)&&Jr(t,"data-alloy-vertical-dir")===Oc.BottomToTop}))},Yc=function(){return Ze("layouts",[Ne("onLtr"),Ne("onRtl"),Ge("onBottomLtr"),Ge("onBottomRtl")])},Xc=function(t,e,n,o,r,i,a){var u=a.map(Gc).getOr(!1),c=e.layouts.map((function(e){return e.onLtr(t)})),l=e.layouts.map((function(e){return e.onRtl(t)})),s=u?e.layouts.bind((function(e){return e.onBottomLtr.map((function(e){return e(t)}))})).or(c).getOr(r):c.getOr(n),f=u?e.layouts.bind((function(e){return e.onBottomRtl.map((function(e){return e(t)}))})).or(l).getOr(i):l.getOr(o);return Wc(s,f)(t)},Kc=[Ne("hotspot"),Ge("bubble"),Qe("overrides",{}),Yc(),wu("placement",(function(t,e,n){var o=e.hotspot,r=_c(n,o.element),i=Xc(t.element,e,Qu(),tc(),Ju(),Zu(),A.some(e.hotspot.element));return A.some({anchorBox:r,bubble:e.bubble.getOr(Uc()),overrides:e.overrides,layouts:i,placer:A.none()})}))],Jc=[Ne("x"),Ne("y"),Qe("height",0),Qe("width",0),Qe("bubble",Uc()),Qe("overrides",{}),Yc(),wu("placement",(function(t,e,n){var o=Sc(n,e.x,e.y),r=Ua(o.left,o.top,e.width,e.height),i=Xc(t.element,e,Xu(),Ku(),Xu(),Ku(),A.none());return A.some({anchorBox:r,bubble:e.bubble,overrides:e.overrides,layouts:i,placer:A.none()})}))],Zc=Et([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),Qc=function(t){return t.fold(h,(function(t,e,n){return t.translate(-e,-n)}))},tl=function(t){return t.fold(h,h)},el=function(t){return W(t,(function(t,e){return t.translate(e.left,e.top)}),Sa(0,0))},nl=function(t){var e=L(t,tl);return el(e)},ol=Zc.screen,rl=Zc.absolute,il=function(t,e,n){var o=_r(t.element),r=Ba(o),i=function(t,e,n){var o=Or(n.root).dom;return A.from(o.frameElement).map(dn.fromDom).filter((function(e){var n=_r(e),o=_r(t.element);return Yn(n,o)})).map(za)}(t,0,n).getOr(r);return rl(i,r.left,r.top)},al=function(t,e,n,o){var r=t,i=e,a=n,u=o;t<0&&(r=0,a=n+t),e<0&&(i=0,u=o+e);var c=ol(Sa(r,i));return A.some(function(t,e,n){return{point:t,width:e,height:n}}(c,a,u))},ul=function(t,e,n,o,r){return t.map((function(t){var i,a,u,c=[e,t.point],l=(i=function(){return nl(c)},a=function(){return nl(c)},u=function(){return function(t){var e=L(t,Qc);return el(e)}(c)},o.fold(i,a,u)),s=function(t,e,n,o){return{x:t,y:e,width:n,height:o}}(l.left,l.top,t.width,t.height),f=n.showAbove?Ju():Qu(),d=n.showAbove?Zu():tc(),m=Xc(r,n,f,d,f,d,A.none());return{anchorBox:s,bubble:n.bubble.getOr(Uc()),overrides:n.overrides,layouts:m,placer:A.none()}}))},cl=[Ne("node"),Ne("root"),Ge("bubble"),Yc(),Qe("overrides",{}),Qe("showAbove",!1),wu("placement",(function(t,e,n){var o=il(t,0,e);return e.node.filter($i).bind((function(r){var i=r.dom.getBoundingClientRect(),a=al(i.left,i.top,i.width,i.height),u=e.node.getOr(t.element);return ul(a,o,e,n,u)}))}))],ll=function(t,e,n,o){return{start:t,soffset:e,finish:n,foffset:o}},sl=Et([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),fl=(sl.before,sl.on,sl.after,function(t){return t.fold(h,h,h)}),dl=Et([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),ml={domRange:dl.domRange,relative:dl.relative,exact:dl.exact,exactFromRange:function(t){return dl.exact(t.start,t.soffset,t.finish,t.foffset)},getWin:function(t){var e=function(t){return t.match({domRange:function(t){return dn.fromDom(t.startContainer)},relative:function(t,e){return fl(t)},exact:function(t,e,n,o){return t}})}(t);return Or(e)},range:ll},gl=function(t,e,n){var o,r=t.document.createRange();return o=r,e.fold((function(t){o.setStartBefore(t.dom)}),(function(t,e){o.setStart(t.dom,e)}),(function(t){o.setStartAfter(t.dom)})),function(t,e){e.fold((function(e){t.setEndBefore(e.dom)}),(function(e,n){t.setEnd(e.dom,n)}),(function(e){t.setEndAfter(e.dom)}))}(r,n),r},pl=function(t,e,n,o,r){var i=t.document.createRange();return i.setStart(e.dom,n),i.setEnd(o.dom,r),i},hl=function(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}},vl=Et([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),bl=function(t,e,n){return e(dn.fromDom(n.startContainer),n.startOffset,dn.fromDom(n.endContainer),n.endOffset)},xl=function(t,e){var n=function(t,e){return e.match({domRange:function(t){return{ltr:p(t),rtl:A.none}},relative:function(e,n){return{ltr:It((function(){return gl(t,e,n)})),rtl:It((function(){return A.some(gl(t,n,e))}))}},exact:function(e,n,o,r){return{ltr:It((function(){return pl(t,e,n,o,r)})),rtl:It((function(){return A.some(pl(t,o,r,e,n))}))}}})}(t,e);return function(t,e){var n=e.ltr();return n.collapsed?e.rtl().filter((function(t){return!1===t.collapsed})).map((function(t){return vl.rtl(dn.fromDom(t.endContainer),t.endOffset,dn.fromDom(t.startContainer),t.startOffset)})).getOrThunk((function(){return bl(0,vl.ltr,n)})):bl(0,vl.ltr,n)}(0,n)};vl.ltr,vl.rtl;var yl,wl=function(t,e){var n=function(e){return t(e)?A.from(e.dom.nodeValue):A.none()};return{get:function(o){if(!t(o))throw new Error("Can only get "+e+" value of a "+e+" node");return n(o).getOr("")},getOption:n,set:function(n,o){if(!t(n))throw new Error("Can only set raw "+e+" value of a "+e+" node");n.dom.nodeValue=o}}}(yr,"text"),kl=function(t){return wl.getOption(t)},_l=["img","br"],Cl=function(t){var e=kl(t).filter((function(t){return 0!==t.trim().length||t.indexOf("")>-1})).isSome();return e||B(_l,vr(t))},Sl=function(t,e){return function t(n){for(var o=Mr(n),r=o.length-1;r>=0;r--){var i=o[r];if(e(i))return A.some(i);var a=t(i);if(a.isSome())return a}return A.none()}(t)},Ol=function(t,e){return function(t,e){var n=void 0===e?document:e.dom;return Gn(n)?[]:L(n.querySelectorAll(t),dn.fromDom)}(e,t)},zl=function(t,e,n,o){var r=function(t,e,n,o){var r=_r(t).dom.createRange();return r.setStart(t.dom,e),r.setEnd(n.dom,o),r}(t,e,n,o),i=Yn(t,n)&&e===o;return r.collapsed&&!i},Tl=function(t){if(t.rangeCount>0){var e=t.getRangeAt(0),n=t.getRangeAt(t.rangeCount-1);return A.some(ll(dn.fromDom(e.startContainer),e.startOffset,dn.fromDom(n.endContainer),n.endOffset))}return A.none()},Ml=function(t){if(null===t.anchorNode||null===t.focusNode)return Tl(t);var e=dn.fromDom(t.anchorNode),n=dn.fromDom(t.focusNode);return zl(e,t.anchorOffset,n,t.focusOffset)?A.some(ll(e,t.anchorOffset,n,t.focusOffset)):Tl(t)},Al=function(t){return function(t){return A.from(t.getSelection())}(t).filter((function(t){return t.rangeCount>0})).bind(Ml)},Dl=function(t,e){var n=function(t,e){return xl(t,e).match({ltr:function(e,n,o,r){var i=t.document.createRange();return i.setStart(e.dom,n),i.setEnd(o.dom,r),i},rtl:function(e,n,o,r){var i=t.document.createRange();return i.setStart(o.dom,r),i.setEnd(e.dom,n),i}})}(t,e);return function(t){var e=t.getClientRects(),n=e.length>0?e[0]:t.getBoundingClientRect();return n.width>0||n.height>0?A.some(n).map(hl):A.none()}(n)},El=function(t,e){return{element:t,offset:e}},Pl=function(t,e){var n=Mr(t);if(0===n.length)return El(t,e);if(e<n.length)return El(n[e],0);var o=n[n.length-1],r=yr(o)?function(t){return wl.get(t)}(o).length:Mr(o).length;return El(o,r)},Hl=function(t,e){return yr(t)?El(t,e):Pl(t,e)},Bl=function(t,e){return e.getSelection.getOrThunk((function(){return function(){return Al(t)}}))().map((function(t){var e=Hl(t.start,t.soffset),n=Hl(t.finish,t.foffset);return ml.range(e.element,e.offset,n.element,n.offset)}))},Rl=[Ge("getSelection"),Ne("root"),Ge("bubble"),Yc(),Qe("overrides",{}),Qe("showAbove",!1),wu("placement",(function(t,e,n){var o=Or(e.root).dom,r=il(t,0,e),i=Bl(o,e).bind((function(t){var e=Dl(o,ml.exactFromRange(t)).orThunk((function(){var e=dn.fromText("\ufeff");return Lr(t.start,e),Dl(o,ml.exact(e,0,e,1)).map((function(t){return qr(e),t}))}));return e.bind((function(t){return al(t.left,t.top,t.width,t.height)}))})),a=Bl(o,e).bind((function(t){return xr(t.start)?A.some(t.start):function(t){return zr(t)}(t.start)})),u=a.getOr(t.element);return ul(i,r,e,n,u)}))],Il=function(t){return t.x+t.width},Nl=function(t,e){return t.x-e.width},Ll=function(t,e){return t.y-e.height+t.height},Fl=function(t){return t.y},Vl=function(t,e,n){return Cu(Il(t),Fl(t),n.southeast(),Ou(),Hu(t,{left:0,top:2}),"link-layout-se")},jl=function(t,e,n){return Cu(Nl(t,e),Fl(t),n.southwest(),zu(),Hu(t,{right:1,top:2}),"link-layout-sw")},Ul=function(t,e,n){return Cu(Il(t),Ll(t,e),n.northeast(),Tu(),Hu(t,{left:0,bottom:3}),"link-layout-ne")},Wl=function(t,e,n){return Cu(Nl(t,e),Ll(t,e),n.northwest(),Mu(),Hu(t,{right:1,bottom:3}),"link-layout-nw")},ql=function(){return[Vl,jl,Ul,Wl]},$l=function(){return[jl,Vl,Wl,Ul]},Gl=[Ne("item"),Yc(),Qe("overrides",{}),wu("placement",(function(t,e,n){var o=_c(n,e.item.element),r=Xc(t.element,e,ql(),$l(),ql(),$l(),A.none());return A.some({anchorBox:o,bubble:Uc(),overrides:e.overrides,layouts:r,placer:A.none()})}))],Yl=Te("anchor",{selection:Rl,node:cl,hotspot:Kc,submenu:Gl,makeshift:Jc}),Xl=function(t,e,n,o,r){!function(t,e,n,o,r,i){var a=Lc(i,"maxHeightFunction",Ic()),u=Lc(i,"maxWidthFunction",m),c=t.anchorBox,l=t.origin,s={bounds:Cc(l,r),origin:l,preference:o,maxHeightFunction:a,maxWidthFunction:u};Fc(c,e,n,s)}(Mc(n.anchorBox,e),r.element,n.bubble,n.layouts,o,n.overrides)},Kl=function(t,e,n,o,r,i){var a=i.map(Wa);return Jl(t,e,n,o,r,a)},Jl=function(t,e,n,o,r,i){var a=Se("positioning anchor.info",Yl,o);bc((function(){Ji(r.element,"position","fixed");var n=na(r.element,"visibility");Ji(r.element,"visibility","hidden");var o,u=e.useFixed()?(o=document.documentElement,Tc(0,0,o.clientWidth,o.clientHeight)):function(t){var e=za(t.element),n=t.element.dom.getBoundingClientRect();return zc(e.left,e.top,n.width,n.height)}(t),c=a.placement,l=i.map(p).or(e.getBounds);c(t,a,u).each((function(e){e.placer.getOr(Xl)(t,u,e,l,r)})),n.fold((function(){ia(r.element,"visibility")}),(function(t){Ji(r.element,"visibility",t)})),na(r.element,"left").isNone()&&na(r.element,"top").isNone()&&na(r.element,"right").isNone()&&na(r.element,"bottom").isNone()&&na(r.element,"position").is("fixed")&&ia(r.element,"position")}),r.element)},Zl=Object.freeze({__proto__:null,position:function(t,e,n,o,r){Kl(t,e,n,o,r,A.none())},positionWithin:Kl,positionWithinBounds:Jl,getMode:function(t,e,n){return e.useFixed()?"fixed":"absolute"}}),Ql=[Qe("useFixed",y),Ge("getBounds")],ts=lc({fields:Ql,name:"positioning",active:gc,apis:Zl}),es=function t(e){Ko(e,Vo());var n=e.components();F(n,t)},ns=function t(e){var n=e.components();F(n,t),Ko(e,Fo())},os=function(t,e){jr(t.element,e.element)},rs=function(t,e){var n=t.components();!function(t){F(t.components(),(function(t){return qr(t.element)})),Wr(t.element),t.syncComponents()}(t);var o=J(n,e);F(o,(function(e){es(e),t.getSystem().removeFromWorld(e)})),F(e,(function(e){e.getSystem().isConnected()?os(t,e):(t.getSystem().addToWorld(e),os(t,e),$i(t.element)&&ns(e)),t.syncComponents()}))},is=function(t,e){as(t,e,jr)},as=function(t,e,n){t.getSystem().addToWorld(e),n(t.element,e.element),$i(t.element)&&ns(e),t.syncComponents()},us=function(t){es(t),qr(t.element),t.getSystem().removeFromWorld(t)},cs=function(t){var e=zr(t.element).bind((function(e){return t.getSystem().getByDom(e).toOptional()}));us(t),e.each((function(t){t.syncComponents()}))},ls=function(t){var e=t.components();F(e,us),Wr(t.element),t.syncComponents()},ss=function(t,e){fs(t,e,jr)},fs=function(t,e,n){n(t,e.element);var o=Mr(e.element);F(o,(function(t){e.getByDom(t).each(ns)}))},ds=function(t){var e=Mr(t.element);F(e,(function(e){t.getByDom(e).each(es)})),qr(t.element)},ms=function(t,e,n,o){n.get().each((function(e){ls(t)}));var r=e.getAttachPoint(t);is(r,t);var i=t.getSystem().build(o);return is(t,i),n.set(i),i},gs=function(t,e,n,o){var r=ms(t,e,n,o);return e.onOpen(t,r),r},ps=function(t,e,n){n.get().each((function(o){ls(t),cs(t),e.onClose(t,o),n.clear()}))},hs=function(t,e,n){return n.isOpen()},vs=function(t,e,n){var o=e.getAttachPoint(t);Ji(t.element,"position",ts.getMode(o)),function(t,e,n,o){na(t.element,e).fold((function(){ti(t.element,n)}),(function(e){Kr(t.element,n,e)})),Ji(t.element,e,o)}(t,"visibility",e.cloakVisibilityAttr,"hidden")},bs=function(t,e,n){(function(t){return R(["top","left","right","bottom"],(function(e){return na(t,e).isSome()}))})(t.element)||ia(t.element,"position"),function(t,e,n){Zr(t.element,n).fold((function(){return ia(t.element,e)}),(function(n){return Ji(t.element,e,n)}))}(t,"visibility",e.cloakVisibilityAttr)},xs=Object.freeze({__proto__:null,cloak:vs,decloak:bs,open:gs,openWhileCloaked:function(t,e,n,o,r){vs(t,e),gs(t,e,n,o),r(),bs(t,e)},close:ps,isOpen:hs,isPartOf:function(t,e,n,o){return hs(0,0,n)&&n.get().exists((function(n){return e.isPartOf(t,n,o)}))},getState:function(t,e,n){return n.get()},setContent:function(t,e,n,o){return n.get().map((function(){return ms(t,e,n,o)}))}}),ys=Object.freeze({__proto__:null,events:function(t,e){return nr([ir(Po(),(function(n,o){ps(n,t,e)}))])}}),ws=[vu("onOpen"),vu("onClose"),Ne("isPartOf"),Ne("getAttachPoint"),Qe("cloakVisibilityAttr","data-precloak-visibility")],ks=Object.freeze({__proto__:null,init:function(){var t=sn(A.none()),e=p("not-implemented");return Ci({readState:e,isOpen:function(){return t.get().isSome()},clear:function(){t.set(A.none())},set:function(e){t.set(A.some(e))},get:function(){return t.get()}})}}),_s=lc({fields:ws,name:"sandboxing",active:ys,apis:xs,state:ks}),Cs=p("dismiss.popups"),Ss=p("reposition.popups"),Os=p("mouse.released"),zs=ue([Qe("isExtraPart",y),Ze("fireEventInstead",[Qe("event",jo())])]),Ts=function(t){var e,n=Se("Dismissal",zs,t);return(e={})[Cs()]={schema:ue([Ne("target")]),onReceive:function(t,e){_s.isOpen(t)&&(_s.isPartOf(t,e.target)||n.isExtraPart(t,e.target)||n.fireEventInstead.fold((function(){return _s.close(t)}),(function(e){return Ko(t,e.event)})))}},e},Ms=ue([Ze("fireEventInstead",[Qe("event",Uo())]),Ue("doReposition")]),As=function(t){var e,n=Se("Reposition",Ms,t);return(e={})[Ss()]={onReceive:function(t){_s.isOpen(t)&&n.fireEventInstead.fold((function(){return n.doReposition(t)}),(function(e){return Ko(t,e.event)}))}},e},Ds=function(t,e,n){e.store.manager.onLoad(t,e,n)},Es=function(t,e,n){e.store.manager.onUnload(t,e,n)},Ps=Object.freeze({__proto__:null,onLoad:Ds,onUnload:Es,setValue:function(t,e,n,o){e.store.manager.setValue(t,e,n,o)},getValue:function(t,e,n){return e.store.manager.getValue(t,e,n)},getState:function(t,e,n){return n}}),Hs=Object.freeze({__proto__:null,events:function(t,e){var n=t.resetOnDom?[mr((function(n,o){Ds(n,t,e)})),gr((function(n,o){Es(n,t,e)}))]:[oc(t,e,Ds)];return nr(n)}}),Bs=function(){var t=sn(null);return Ci({set:t.set,get:t.get,isNotSet:function(){return null===t.get()},clear:function(){t.set(null)},readState:function(){return{mode:"memory",value:t.get()}}})},Rs=function(){var t=sn({}),e=sn({});return Ci({readState:function(){return{mode:"dataset",dataByValue:t.get(),dataByText:e.get()}},lookup:function(n){return Mt(t.get(),n).orThunk((function(){return Mt(e.get(),n)}))},update:function(n){var o=t.get(),r=e.get(),i={},a={};F(n,(function(t){i[t.value]=t,Mt(t,"meta").each((function(e){Mt(e,"text").each((function(e){a[e]=t}))}))})),t.set(_(_({},o),i)),e.set(_(_({},r),a))},clear:function(){t.set({}),e.set({})}})},Is=Object.freeze({__proto__:null,memory:Bs,dataset:Rs,manual:function(){return Ci({readState:m})},init:function(t){return t.store.manager.state(t)}}),Ns=function(t,e,n,o){var r=e.store;n.update([o]),r.setValue(t,o),e.onSetValue(t,o)},Ls=[Ge("initialValue"),Ne("getFallbackEntry"),Ne("getDataKey"),Ne("setValue"),wu("manager",{setValue:Ns,getValue:function(t,e,n){var o=e.store,r=o.getDataKey(t);return n.lookup(r).fold((function(){return o.getFallbackEntry(r)}),(function(t){return t}))},onLoad:function(t,e,n){e.store.initialValue.each((function(o){Ns(t,e,n,o)}))},onUnload:function(t,e,n){n.clear()},state:Rs})],Fs=[Ne("getValue"),Qe("setValue",m),Ge("initialValue"),wu("manager",{setValue:function(t,e,n,o){e.store.setValue(t,o),e.onSetValue(t,o)},getValue:function(t,e,n){return e.store.getValue(t)},onLoad:function(t,e,n){e.store.initialValue.each((function(n){e.store.setValue(t,n)}))},onUnload:m,state:_i.init})],Vs=[Ge("initialValue"),wu("manager",{setValue:function(t,e,n,o){n.set(o),e.onSetValue(t,o)},getValue:function(t,e,n){return n.get()},onLoad:function(t,e,n){e.store.initialValue.each((function(t){n.isNotSet()&&n.set(t)}))},onUnload:function(t,e,n){n.clear()},state:Bs})],js=[tn("store",{mode:"memory"},Te("mode",{memory:Vs,manual:Fs,dataset:Ls})),vu("onSetValue"),Qe("resetOnDom",!1)],Us=lc({fields:js,name:"representing",active:Hs,apis:Ps,extra:{setValueFrom:function(t,e){var n=Us.getValue(e);Us.setValue(t,n)}},state:Is}),Ws=function(t,e){return cn(t,{},L(e,(function(e){return n=e.name(),o="Cannot configure "+e.name()+" for "+t,pe(n,n,jt(),ie((function(t){return pt("The field: "+n+" is forbidden. "+o)})));var n,o})).concat([ln("dump",h)]))},qs=function(t){return t.dump},$s=function(t,e){return _(_({},t.dump),uc(e))},Gs=Ws,Ys=$s,Xs="placeholder",Ks=Et([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),Js=function(t){return At(t,"uiType")},Zs=function(t,e,n,o){return Js(n)&&n.uiType===Xs?function(t,e,n,o){return t.exists((function(t){return t!==n.owner}))?Ks.single(!0,p(n)):Mt(o,n.name).fold((function(){throw new Error("Unknown placeholder component: "+n.name+"\nKnown: ["+yt(o)+"]\nNamespace: "+t.getOr("none")+"\nSpec: "+JSON.stringify(n,null,2))}),(function(t){return t.replace()}))}(t,0,n,o):Ks.single(!1,p(n))},Qs=function t(e,n,o,r){return Zs(e,0,o,r).fold((function(i,a){var u=Js(o)?a(n,o.config,o.validated):a(n),c=Mt(u,"components").getOr([]),l=Y(c,(function(o){return t(e,n,o,r)}));return[_(_({},u),{components:l})]}),(function(t,e){if(Js(o)){var r=e(n,o.config,o.validated);return o.validated.preprocess.getOr(h)(r)}return e(n)}))},tf=function(t,e,n,o){return Y(n,(function(n){return Qs(t,e,n,o)}))},ef=function(t,e,n,o){var r=_t(o,(function(t,e){return o=t,r=!1,{name:p(n=e),required:function(){return o.fold((function(t,e){return t}),(function(t,e){return t}))},used:function(){return r},replace:function(){if(r)throw new Error("Trying to use the same placeholder more than once: "+n);return r=!0,o}};var n,o,r})),i=tf(t,e,n,r);return kt(r,(function(n){if(!1===n.used()&&n.required())throw new Error("Placeholder: "+n.name()+" was not found in components list\nNamespace: "+t.getOr("none")+"\nComponents: "+JSON.stringify(e.components,null,2))})),i},nf=Ks.single,of=Ks.multiple,rf=p(Xs),af=Et([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),uf=Qe("factory",{sketch:h}),cf=Qe("schema",[]),lf=Ne("name"),sf=pe("pname","pname",Ut((function(t){return"<alloy."+ui(t.name)+">"})),Me()),ff=ln("schema",(function(){return[Ge("preprocess")]})),df=Qe("defaults",p({})),mf=Qe("overrides",p({})),gf=ce([uf,cf,lf,sf,df,mf]),pf=ce([uf,cf,lf,df,mf]),hf=ce([uf,cf,lf,sf,df,mf]),vf=ce([uf,ff,lf,Ne("unit"),sf,df,mf]),bf=function(t){return t.fold(A.some,A.none,A.some,A.some)},xf=function(t){var e=function(t){return t.name};return t.fold(e,e,e,e)},yf=function(t,e){return function(n){var o=Se("Converting part type",e,n);return t(o)}},wf=yf(af.required,gf),kf=yf(af.external,pf),_f=yf(af.optional,hf),Cf=yf(af.group,vf),Sf=p("entirety"),Of=Object.freeze({__proto__:null,required:wf,external:kf,optional:_f,group:Cf,asNamedPart:bf,name:xf,asCommon:function(t){return t.fold(h,h,h,h)},original:Sf}),zf=function(t,e,n,o){return Bt(e.defaults(t,n,o),n,{uid:t.partUids[e.name]},e.overrides(t,n,o))},Tf=function(t,e){var n={};return F(e,(function(e){bf(e).each((function(e){var o=Mf(t,e.pname);n[e.name]=function(n){var r=Se("Part: "+e.name+" in "+t,ce(e.schema),n);return _(_({},o),{config:n,validated:r})}}))})),n},Mf=function(t,e){return{uiType:rf(),owner:t,name:e}},Af=function(t,e,n){return{uiType:rf(),owner:t,name:e,config:n,validated:{}}},Df=function(t){return Y(t,(function(t){return t.fold(A.none,A.some,A.none,A.none).map((function(t){return We(t.name,t.schema.concat([ku(Sf())]))})).toArray()}))},Ef=function(t){return L(t,xf)},Pf=function(t,e,n){return function(t,e,n){var o={},r={};return F(n,(function(t){t.fold((function(t){o[t.pname]=nf(!0,(function(e,n,o){return t.factory.sketch(zf(e,t,n,o))}))}),(function(t){var n=e.parts[t.name];r[t.name]=p(t.factory.sketch(zf(e,t,n[Sf()]),n))}),(function(t){o[t.pname]=nf(!1,(function(e,n,o){return t.factory.sketch(zf(e,t,n,o))}))}),(function(t){o[t.pname]=of(!0,(function(e,n,o){var r=e[t.name];return L(r,(function(n){return t.factory.sketch(Bt(t.defaults(e,n,o),n,t.overrides(e,n)))}))}))}))})),{internals:p(o),externals:p(r)}}(0,e,n)},Hf=function(t,e,n){return ef(A.some(t),e,e.components,n)},Bf=function(t,e,n){var o=e.partUids[n];return t.getSystem().getByUid(o).toOptional()},Rf=function(t,e,n){return Bf(t,e,n).getOrDie("Could not find part: "+n)},If=function(t,e,n){var o={},r=e.partUids,i=t.getSystem();return F(n,(function(t){o[t]=p(i.getByUid(r[t]))})),o},Nf=function(t,e){var n=t.getSystem();return _t(e.partUids,(function(t,e){return p(n.getByUid(t))}))},Lf=function(t){return yt(t.partUids)},Ff=function(t,e,n){var o={},r=e.partUids,i=t.getSystem();return F(n,(function(t){o[t]=p(i.getByUid(r[t]).getOrDie())})),o},Vf=function(t,e){var n=Ef(e);return Yt(L(n,(function(e){return{key:e,value:t+"-"+e}})))},jf=function(t){return pe("partUids","partUids",Wt((function(e){return Vf(e.uid,t)})),Me())},Uf=Object.freeze({__proto__:null,generate:Tf,generateOne:Af,schemas:Df,names:Ef,substitutes:Pf,components:Hf,defaultUids:Vf,defaultUidsSchema:jf,getAllParts:Nf,getAllPartNames:Lf,getPart:Bf,getPartOrDie:Rf,getParts:If,getPartsOrDie:Ff}),Wf=function(t,e,n,o,r){var i=function(t,e){return(t.length>0?[We("parts",t)]:[]).concat([Ne("uid"),Qe("dom",{}),Qe("components",[]),ku("originalSpec"),Qe("debug.sketcher",{})]).concat(e)}(o,r);return Se(t+" [SpecSchema]",ue(i.concat(e)),n)},qf=function(t,e,n,o,r){var i=$f(r),a=Df(n),u=jf(n),c=Wf(t,e,i,a,[u]),l=Pf(0,c,n);return o(c,Hf(t,c,l.internals()),i,l.externals())},$f=function(t){return function(t){return At(t,"uid")}(t)?t:_(_({},t),{uid:gi("uid")})},Gf=ue([Ne("name"),Ne("factory"),Ne("configFields"),Qe("apis",{}),Qe("extraApis",{})]),Yf=ue([Ne("name"),Ne("factory"),Ne("configFields"),Ne("partFields"),Qe("apis",{}),Qe("extraApis",{})]),Xf=function(t){var e=Se("Sketcher for "+t.name,Gf,t),n=_t(e.apis,ki),o=_t(e.extraApis,(function(t,e){return xi(t,e)}));return _(_({name:e.name,configFields:e.configFields,sketch:function(t){return function(t,e,n,o){var r=$f(o);return n(Wf(t,e,r,[],[]),r)}(e.name,e.configFields,e.factory,t)}},n),o)},Kf=function(t){var e=Se("Sketcher for "+t.name,Yf,t),n=Tf(e.name,e.partFields),o=_t(e.apis,ki),r=_t(e.extraApis,(function(t,e){return xi(t,e)}));return _(_({name:e.name,partFields:e.partFields,configFields:e.configFields,sketch:function(t){return qf(e.name,e.configFields,e.partFields,e.factory,t)},parts:n},o),r)},Jf=function(t){for(var e=[],n=function(t){e.push(t)},o=0;o<t.length;o++)t[o].each(n);return e},Zf=function(t,e){return t?A.some(e):A.none()},Qf=function(t){return"input"===vr(t)&&"radio"!==Jr(t,"type")||"textarea"===vr(t)},td=Object.freeze({__proto__:null,getCurrent:function(t,e,n){return e.find(t)}}),ed=[Ne("find")],nd=lc({fields:ed,name:"composing",apis:td}),od=function(t,e,n,o){var r=Ol(t.element,"."+e.highlightClass);F(r,(function(n){R(o,(function(t){return t.element===n}))||(Vi(n,e.highlightClass),t.getSystem().getByDom(n).each((function(n){e.onDehighlight(t,n),Ko(n,Xo())})))}))},rd=function(t,e,n,o){od(t,e,0,[o]),id(t,e,n,o)||(Li(o.element,e.highlightClass),e.onHighlight(t,o),Ko(o,Yo()))},id=function(t,e,n,o){return ji(o.element,e.highlightClass)},ad=function(t,e,n,o){var r=Ol(t.element,"."+e.itemClass);return A.from(r[o]).fold((function(){return ut(new Error("No element found with index "+o))}),t.getSystem().getByDom)},ud=function(t,e,n){return Qa(t.element,"."+e.itemClass).bind((function(e){return t.getSystem().getByDom(e).toOptional()}))},cd=function(t,e,n){var o=Ol(t.element,"."+e.itemClass);return(o.length>0?A.some(o[o.length-1]):A.none()).bind((function(e){return t.getSystem().getByDom(e).toOptional()}))},ld=function(t,e,n,o){var r=Ol(t.element,"."+e.itemClass),i=$(r,(function(t){return ji(t,e.highlightClass)}));return i.bind((function(e){var n=Ac(e,o,0,r.length-1);return t.getSystem().getByDom(r[n]).toOptional()}))},sd=function(t,e,n){var o=Ol(t.element,"."+e.itemClass);return Jf(L(o,(function(e){return t.getSystem().getByDom(e).toOptional()})))},fd=Object.freeze({__proto__:null,dehighlightAll:function(t,e,n){return od(t,e,0,[])},dehighlight:function(t,e,n,o){id(t,e,n,o)&&(Vi(o.element,e.highlightClass),e.onDehighlight(t,o),Ko(o,Xo()))},highlight:rd,highlightFirst:function(t,e,n){ud(t,e).each((function(o){rd(t,e,n,o)}))},highlightLast:function(t,e,n){cd(t,e).each((function(o){rd(t,e,n,o)}))},highlightAt:function(t,e,n,o){ad(t,e,n,o).fold((function(t){throw t}),(function(o){rd(t,e,n,o)}))},highlightBy:function(t,e,n,o){var r=sd(t,e);q(r,o).each((function(o){rd(t,e,n,o)}))},isHighlighted:id,getHighlighted:function(t,e,n){return Qa(t.element,"."+e.highlightClass).bind((function(e){return t.getSystem().getByDom(e).toOptional()}))},getFirst:ud,getLast:cd,getPrevious:function(t,e,n){return ld(t,e,0,-1)},getNext:function(t,e,n){return ld(t,e,0,1)},getCandidates:sd}),dd=[Ne("highlightClass"),Ne("itemClass"),vu("onHighlight"),vu("onDehighlight")],md=lc({fields:dd,name:"highlighting",apis:fd}),gd=[8],pd=[9],hd=[13],vd=[27],bd=[32],xd=[37],yd=[38],wd=[39],kd=[40],_d=function(t,e,n){var o=K(t.slice(0,e)),r=K(t.slice(e+1));return q(o.concat(r),n)},Cd=function(t,e,n){var o=K(t.slice(0,e));return q(o,n)},Sd=function(t,e,n){var o=t.slice(0,e),r=t.slice(e+1);return q(r.concat(o),n)},Od=function(t,e,n){var o=t.slice(e+1);return q(o,n)},zd=function(t){return function(e){var n=e.raw;return B(t,n.which)}},Td=function(t){return function(e){return X(t,(function(t){return t(e)}))}},Md=function(t){return!0===t.raw.shiftKey},Ad=function(t){return!0===t.raw.ctrlKey},Dd=b(Md),Ed=function(t,e){return{matches:t,classification:e}},Pd=function(t,e,n){e.exists((function(t){return n.exists((function(e){return Yn(e,t)}))}))||Jo(t,Wo(),{prevFocus:e,newFocus:n})},Hd=function(){var t=function(t){return vc(t.element)};return{get:t,set:function(e,n){var o=t(e);e.getSystem().triggerFocus(n,e.element);var r=t(e);Pd(e,o,r)}}},Bd=function(){var t=function(t){return md.getHighlighted(t).map((function(t){return t.element}))};return{get:t,set:function(e,n){var o=t(e);e.getSystem().getByDom(n).fold(m,(function(t){md.highlight(e,t)}));var r=t(e);Pd(e,o,r)}}};!function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"}(yl||(yl={}));var Rd,Id=function(t,e,n,o,r){var i=function(t,e,n,o,r){var i,a,u,c=n(t,e,o,r);return(i=c,a=e.event,u=q(i,(function(t){return t.matches(a)})),u.map((function(t){return t.classification}))).bind((function(n){return n(t,e,o,r)}))},a={schema:function(){return t.concat([Qe("focusManager",Hd()),tn("focusInside","onFocus",we((function(t){return B(["onFocus","onEnterOrSpace","onApi"],t)?at(t):ut("Invalid value for focusInside")}))),wu("handler",a),wu("state",e),wu("sendFocusIn",r)])},processKey:i,toEvents:function(t,e){var a=t.focusInside!==yl.OnFocusMode?A.none():r(t).map((function(n){return ir(So(),(function(o,r){n(o,t,e),r.stop()}))})),u=[ir(ho(),(function(o,a){i(o,a,n,t,e).fold((function(){!function(n,o){var i=zd(bd.concat(hd))(o.event);t.focusInside===yl.OnEnterOrSpaceMode&&i&&to(n,o)&&r(t).each((function(r){r(n,t,e),o.stop()}))}(o,a)}),(function(t){a.stop()}))})),ir(vo(),(function(n,r){i(n,r,o,t,e).each((function(t){r.stop()}))}))];return nr(a.toArray().concat(u))}};return a},Nd=function(t){var e=[Ge("onEscape"),Ge("onEnter"),Qe("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),Qe("firstTabstop",0),Qe("useTabstopAt",w),Ge("visibilitySelector")].concat([t]),n=function(t,e){var n=t.visibilitySelector.bind((function(t){return tu(e,t)})).getOr(e);return _a(n)>0},o=function(t,e,o){(function(t,e){var o=Ol(t.element,e.selector),r=j(o,(function(t){return n(e,t)}));return A.from(r[e.firstTabstop])})(t,e).each((function(n){e.focusManager.set(t,n)}))},r=function(t,e,o,r,i){return i(e,o,(function(t){return function(t,e){return n(t,e)&&t.useTabstopAt(e)}(r,t)})).fold((function(){return r.cyclic?A.some(!0):A.none()}),(function(e){return r.focusManager.set(t,e),A.some(!0)}))},i=function(t,e,n,o){var i=Ol(t.element,n.selector);return function(t,e){return e.focusManager.get(t).bind((function(t){return tu(t,e.selector)}))}(t,n).bind((function(e){return $(i,v(Yn,e)).bind((function(e){return r(t,i,e,n,o)}))}))},a=p([Ed(Td([Md,zd(pd)]),(function(t,e,n){var o=n.cyclic?_d:Cd;return i(t,0,n,o)})),Ed(zd(pd),(function(t,e,n){var o=n.cyclic?Sd:Od;return i(t,0,n,o)})),Ed(zd(vd),(function(t,e,n){return n.onEscape.bind((function(n){return n(t,e)}))})),Ed(Td([Dd,zd(hd)]),(function(t,e,n){return n.onEnter.bind((function(n){return n(t,e)}))}))]),u=p([]);return Id(e,_i.init,a,u,(function(){return A.some(o)}))},Ld=Nd(ln("cyclic",y)),Fd=Nd(ln("cyclic",w)),Vd=function(t,e,n){return Qf(n)&&zd(bd)(e.event)?A.none():function(t,e,n){return Qo(t,n,Mo()),A.some(!0)}(t,0,n)},jd=function(t,e){return A.some(!0)},Ud=[Qe("execute",Vd),Qe("useSpace",!1),Qe("useEnter",!0),Qe("useControlEnter",!1),Qe("useDown",!1)],Wd=function(t,e,n){return n.execute(t,e,t.element)},qd=Id(Ud,_i.init,(function(t,e,n,o){var r=n.useSpace&&!Qf(t.element)?bd:[],i=n.useEnter?hd:[],a=n.useDown?kd:[],u=r.concat(i).concat(a);return[Ed(zd(u),Wd)].concat(n.useControlEnter?[Ed(Td([Ad,zd(hd)]),Wd)]:[])}),(function(t,e,n,o){return n.useSpace&&!Qf(t.element)?[Ed(zd(bd),jd)]:[]}),(function(){return A.none()})),$d=function(){var t=sn(A.none());return Ci({readState:function(){return t.get().map((function(t){return{numRows:String(t.numRows),numColumns:String(t.numColumns)}})).getOr({numRows:"?",numColumns:"?"})},setGridSize:function(e,n){t.set(A.some({numRows:e,numColumns:n}))},getNumRows:function(){return t.get().map((function(t){return t.numRows}))},getNumColumns:function(){return t.get().map((function(t){return t.numColumns}))}})},Gd=Object.freeze({__proto__:null,flatgrid:$d,init:function(t){return t.state(t)}}),Yd=function(t){return function(e,n,o,r){var i=t(e.element);return Zd(i,e,n,o,r)}},Xd=function(t,e){var n=Wc(t,e);return Yd(n)},Kd=function(t,e){var n=Wc(e,t);return Yd(n)},Jd=function(t){return function(e,n,o,r){return Zd(t,e,n,o,r)}},Zd=function(t,e,n,o,r){return o.focusManager.get(e).bind((function(n){return t(e.element,n,o,r)})).map((function(t){return o.focusManager.set(e,t),!0}))},Qd=Jd,tm=Jd,em=Jd,nm=function(t){return!function(t){return t.offsetWidth<=0&&t.offsetHeight<=0}(t.dom)},om=function(t,e,n){var o=Ol(t,n);return function(t,e){return $(t,e).map((function(e){return{index:e,candidates:t}}))}(j(o,nm),(function(t){return Yn(t,e)}))},rm=function(t,e){return $(t,(function(t){return Yn(e,t)}))},im=function(t,e,n,o){return o(Math.floor(e/n),e%n).bind((function(e){var o=e.row*n+e.column;return o>=0&&o<t.length?A.some(t[o]):A.none()}))},am=function(t,e,n,o,r){return im(t,e,o,(function(e,i){var a=e===n-1?t.length-e*o:o,u=Ac(i,r,0,a-1);return A.some({row:e,column:u})}))},um=function(t,e,n,o,r){return im(t,e,o,(function(e,i){var a=Ac(e,r,0,n-1),u=a===n-1?t.length-a*o:o,c=Dc(i,0,u-1);return A.some({row:a,column:c})}))},cm=[Ne("selector"),Qe("execute",Vd),bu("onEscape"),Qe("captureTab",!1),_u()],lm=function(t,e,n){Qa(t.element,e.selector).each((function(n){e.focusManager.set(t,n)}))},sm=function(t){return function(e,n,o,r){return om(e,n,o.selector).bind((function(e){return t(e.candidates,e.index,r.getNumRows().getOr(o.initSize.numRows),r.getNumColumns().getOr(o.initSize.numColumns))}))}},fm=function(t,e,n){return n.captureTab?A.some(!0):A.none()},dm=sm((function(t,e,n,o){return am(t,e,n,o,-1)})),mm=sm((function(t,e,n,o){return am(t,e,n,o,1)})),gm=sm((function(t,e,n,o){return um(t,e,n,o,-1)})),pm=sm((function(t,e,n,o){return um(t,e,n,o,1)})),hm=p([Ed(zd(xd),Xd(dm,mm)),Ed(zd(wd),Kd(dm,mm)),Ed(zd(yd),Qd(gm)),Ed(zd(kd),tm(pm)),Ed(Td([Md,zd(pd)]),fm),Ed(Td([Dd,zd(pd)]),fm),Ed(zd(vd),(function(t,e,n){return n.onEscape(t,e)})),Ed(zd(bd.concat(hd)),(function(t,e,n,o){return function(t,e){return e.focusManager.get(t).bind((function(t){return tu(t,e.selector)}))}(t,n).bind((function(o){return n.execute(t,e,o)}))}))]),vm=p([Ed(zd(bd),jd)]),bm=Id(cm,$d,hm,vm,(function(){return A.some(lm)})),xm=function(t,e,n,o){var r=function t(e,n,r){var i,a=Ac(n,o,0,r.length-1);return a===e?A.none():(i=r[a],"button"===vr(i)&&"disabled"===Jr(i,"disabled")?t(e,a,r):A.from(r[a]))};return om(t,n,e).bind((function(t){var e=t.index,n=t.candidates;return r(e,e,n)}))},ym=[Ne("selector"),Qe("getInitial",A.none),Qe("execute",Vd),bu("onEscape"),Qe("executeOnMove",!1),Qe("allowVertical",!0)],wm=function(t,e,n){return function(t,e){return e.focusManager.get(t).bind((function(t){return tu(t,e.selector)}))}(t,n).bind((function(o){return n.execute(t,e,o)}))},km=function(t,e,n){e.getInitial(t).orThunk((function(){return Qa(t.element,e.selector)})).each((function(n){e.focusManager.set(t,n)}))},_m=function(t,e,n){return xm(t,n.selector,e,-1)},Cm=function(t,e,n){return xm(t,n.selector,e,1)},Sm=function(t){return function(e,n,o,r){return t(e,n,o,r).bind((function(){return o.executeOnMove?wm(e,n,o):A.some(!0)}))}},Om=function(t,e,n){return n.onEscape(t,e)},zm=p([Ed(zd(bd),jd)]),Tm=Id(ym,_i.init,(function(t,e,n,o){var r=xd.concat(n.allowVertical?yd:[]),i=wd.concat(n.allowVertical?kd:[]);return[Ed(zd(r),Sm(Xd(_m,Cm))),Ed(zd(i),Sm(Kd(_m,Cm))),Ed(zd(hd),wm),Ed(zd(bd),wm),Ed(zd(vd),Om)]}),zm,(function(){return A.some(km)})),Mm=function(t,e,n){return A.from(t[e]).bind((function(t){return A.from(t[n]).map((function(t){return{rowIndex:e,columnIndex:n,cell:t}}))}))},Am=function(t,e,n,o){var r=t[e].length,i=Ac(n,o,0,r-1);return Mm(t,e,i)},Dm=function(t,e,n,o){var r=Ac(n,o,0,t.length-1),i=t[r].length,a=Dc(e,0,i-1);return Mm(t,r,a)},Em=function(t,e,n,o){var r=t[e].length,i=Dc(n+o,0,r-1);return Mm(t,e,i)},Pm=function(t,e,n,o){var r=Dc(n+o,0,t.length-1),i=t[r].length,a=Dc(e,0,i-1);return Mm(t,r,a)},Hm=[We("selectors",[Ne("row"),Ne("cell")]),Qe("cycles",!0),Qe("previousSelector",A.none),Qe("execute",Vd)],Bm=function(t,e,n){e.previousSelector(t).orThunk((function(){var n=e.selectors;return Qa(t.element,n.cell)})).each((function(n){e.focusManager.set(t,n)}))},Rm=function(t,e){return function(n,o,r){var i=r.cycles?t:e;return tu(o,r.selectors.row).bind((function(t){var e=Ol(t,r.selectors.cell);return rm(e,o).bind((function(e){var o=Ol(n,r.selectors.row);return rm(o,t).bind((function(t){var n=function(t,e){return L(t,(function(t){return Ol(t,e.selectors.cell)}))}(o,r);return i(n,t,e).map((function(t){return t.cell}))}))}))}))}},Im=Rm((function(t,e,n){return Am(t,e,n,-1)}),(function(t,e,n){return Em(t,e,n,-1)})),Nm=Rm((function(t,e,n){return Am(t,e,n,1)}),(function(t,e,n){return Em(t,e,n,1)})),Lm=Rm((function(t,e,n){return Dm(t,n,e,-1)}),(function(t,e,n){return Pm(t,n,e,-1)})),Fm=Rm((function(t,e,n){return Dm(t,n,e,1)}),(function(t,e,n){return Pm(t,n,e,1)})),Vm=p([Ed(zd(xd),Xd(Im,Nm)),Ed(zd(wd),Kd(Im,Nm)),Ed(zd(yd),Qd(Lm)),Ed(zd(kd),tm(Fm)),Ed(zd(bd.concat(hd)),(function(t,e,n){return vc(t.element).bind((function(o){return n.execute(t,e,o)}))}))]),jm=p([Ed(zd(bd),jd)]),Um=Id(Hm,_i.init,Vm,jm,(function(){return A.some(Bm)})),Wm=[Ne("selector"),Qe("execute",Vd),Qe("moveOnTab",!1)],qm=function(t,e,n){return n.focusManager.get(t).bind((function(o){return n.execute(t,e,o)}))},$m=function(t,e,n){Qa(t.element,e.selector).each((function(n){e.focusManager.set(t,n)}))},Gm=function(t,e,n){return xm(t,n.selector,e,-1)},Ym=function(t,e,n){return xm(t,n.selector,e,1)},Xm=p([Ed(zd(yd),em(Gm)),Ed(zd(kd),em(Ym)),Ed(Td([Md,zd(pd)]),(function(t,e,n,o){return n.moveOnTab?em(Gm)(t,e,n,o):A.none()})),Ed(Td([Dd,zd(pd)]),(function(t,e,n,o){return n.moveOnTab?em(Ym)(t,e,n,o):A.none()})),Ed(zd(hd),qm),Ed(zd(bd),qm)]),Km=p([Ed(zd(bd),jd)]),Jm=Id(Wm,_i.init,Xm,Km,(function(){return A.some($m)})),Zm=[bu("onSpace"),bu("onEnter"),bu("onShiftEnter"),bu("onLeft"),bu("onRight"),bu("onTab"),bu("onShiftTab"),bu("onUp"),bu("onDown"),bu("onEscape"),Qe("stopSpaceKeyup",!1),Ge("focusIn")],Qm=Id(Zm,_i.init,(function(t,e,n){return[Ed(zd(bd),n.onSpace),Ed(Td([Dd,zd(hd)]),n.onEnter),Ed(Td([Md,zd(hd)]),n.onShiftEnter),Ed(Td([Md,zd(pd)]),n.onShiftTab),Ed(Td([Dd,zd(pd)]),n.onTab),Ed(zd(yd),n.onUp),Ed(zd(kd),n.onDown),Ed(zd(xd),n.onLeft),Ed(zd(wd),n.onRight),Ed(zd(bd),n.onSpace),Ed(zd(vd),n.onEscape)]}),(function(t,e,n){return n.stopSpaceKeyup?[Ed(zd(bd),jd)]:[]}),(function(t){return t.focusIn})),tg=Ld.schema(),eg=Fd.schema(),ng=Tm.schema(),og=bm.schema(),rg=Um.schema(),ig=qd.schema(),ag=Jm.schema(),ug=Qm.schema(),cg=fc({branchKey:"mode",branches:Object.freeze({__proto__:null,acyclic:tg,cyclic:eg,flow:ng,flatgrid:og,matrix:rg,execution:ig,menu:ag,special:ug}),name:"keying",active:{events:function(t,e){return t.handler.toEvents(t,e)}},apis:{focusIn:function(t,e,n){e.sendFocusIn(e).fold((function(){t.getSystem().triggerFocus(t.element,t.element)}),(function(o){o(t,e,n)}))},setGridSize:function(t,e,n,o,r){!function(t){return Dt(t,"setGridSize")}(n)?console.error("Layout does not support setGridSize"):n.setGridSize(o,r)}},state:Gd}),lg=function(t,e,n,o){var r=t.getSystem().build(o);as(t,r,n)},sg=function(t,e,n,o){var r=fg(t),i=q(r,(function(t){return Yn(o.element,t.element)}));i.each(cs)},fg=function(t,e){return t.components()},dg=function(t,e,n,o,r){var i=fg(t);return A.from(i[o]).map((function(e){return sg(t,0,0,e),r.each((function(e){lg(t,0,(function(t,e){!function(t,e,n){Ar(t,n).fold((function(){jr(t,e)}),(function(t){Lr(t,e)}))}(t,e,o)}),e)})),e}))},mg=Object.freeze({__proto__:null,append:function(t,e,n,o){lg(t,0,jr,o)},prepend:function(t,e,n,o){lg(t,0,Vr,o)},remove:sg,replaceAt:dg,replaceBy:function(t,e,n,o,r){var i=fg(t);return $(i,o).bind((function(e){return dg(t,0,0,e,r)}))},set:function(t,e,n,o){bc((function(){var e=L(o,t.getSystem().build);rs(t,e)}),t.element)},contents:fg}),gg=lc({fields:[],name:"replacing",apis:mg}),pg=function(t,e){var n=function(t,e){var n=nr(e);return lc({fields:[Ne("enabled")],name:t,active:{events:p(n)}})}(t,e);return{key:t,value:{config:{},me:n,configAsRaw:p({}),initialConfig:{},state:_i}}},hg=function(t,e){e.ignore||(pc(t.element),e.onFocus(t))},vg=Object.freeze({__proto__:null,focus:hg,blur:function(t,e){e.ignore||function(t){t.dom.blur()}(t.element)},isFocused:function(t){return function(t){var e=Hr(t).dom;return t.dom===e.activeElement}(t.element)}}),bg=Object.freeze({__proto__:null,exhibit:function(t,e){var n=e.ignore?{}:{attributes:{tabindex:"-1"}};return Oi(n)},events:function(t){return nr([ir(So(),(function(e,n){hg(e,t),n.stop()}))].concat(t.stopMousedown?[ir(co(),(function(t,e){e.event.prevent()}))]:[]))}}),xg=[vu("onFocus"),Qe("stopMousedown",!1),Qe("ignore",!1)],yg=lc({fields:xg,name:"focusing",active:bg,apis:vg}),wg=function(t,e,n){var o=e.aria;o.update(t,o,n.get())},kg=function(t,e,n){e.toggleClass.each((function(e){n.get()?Li(t.element,e):Vi(t.element,e)}))},_g=function(t,e,n){Og(t,e,n,!n.get())},Cg=function(t,e,n){n.set(!0),kg(t,e,n),wg(t,e,n)},Sg=function(t,e,n){n.set(!1),kg(t,e,n),wg(t,e,n)},Og=function(t,e,n,o){(o?Cg:Sg)(t,e,n)},zg=function(t,e,n){Og(t,e,n,e.selected)},Tg=Object.freeze({__proto__:null,onLoad:zg,toggle:_g,isOn:function(t,e,n){return n.get()},on:Cg,off:Sg,set:Og}),Mg=Object.freeze({__proto__:null,exhibit:function(){return Oi({})},events:function(t,e){var n,o,r,i=(n=t,o=e,r=_g,hr((function(t){r(t,n,o)}))),a=oc(t,e,zg);return nr(G([t.toggleOnExecute?[i]:[],[a]]))}}),Ag=function(t,e,n){Kr(t.element,"aria-expanded",n)},Dg=[Qe("selected",!1),Ge("toggleClass"),Qe("toggleOnExecute",!0),tn("aria",{mode:"none"},Te("mode",{pressed:[Qe("syncWithExpanded",!1),wu("update",(function(t,e,n){Kr(t.element,"aria-pressed",n),e.syncWithExpanded&&Ag(t,e,n)}))],checked:[wu("update",(function(t,e,n){Kr(t.element,"aria-checked",n)}))],expanded:[wu("update",Ag)],selected:[wu("update",(function(t,e,n){Kr(t.element,"aria-selected",n)}))],none:[wu("update",m)]}))],Eg=lc({fields:Dg,name:"toggling",active:Mg,apis:Tg,state:(Rd=!1,{init:function(){var t=sn(Rd);return{get:function(){return t.get()},set:function(e){return t.set(e)},clear:function(){return t.set(Rd)},readState:function(){return t.get()}}}})}),Pg=function(){var t=function(t,e){e.stop(),Zo(t)};return[ir(yo(),t),ir(Do(),t),sr(ro()),sr(co())]},Hg=function(t){return nr(G([t.map((function(t){return hr((function(e,n){t(e),n.stop()}))})).toArray(),Pg()]))},Bg="alloy.item-hover",Rg="alloy.item-focus",Ig=function(t){(vc(t.element).isNone()||yg.isFocused(t))&&(yg.isFocused(t)||yg.focus(t),Jo(t,Bg,{item:t}))},Ng=function(t){Jo(t,Rg,{item:t})},Lg=p(Bg),Fg=p(Rg),Vg=[Ne("data"),Ne("components"),Ne("dom"),Qe("hasSubmenu",!1),Ge("toggling"),Gs("itemBehaviours",[Eg,yg,cg,Us]),Qe("ignoreFocus",!1),Qe("domModification",{}),wu("builder",(function(t){return{dom:t.dom,domModification:_(_({},t.domModification),{attributes:_(_(_({role:t.toggling.isSome()?"menuitemcheckbox":"menuitem"},t.domModification.attributes),{"aria-haspopup":t.hasSubmenu}),t.hasSubmenu?{"aria-expanded":!1}:{})}),behaviours:Ys(t.itemBehaviours,[t.toggling.fold(Eg.revoke,(function(t){return Eg.config(_({aria:{mode:"checked"}},t))})),yg.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:function(t){Ng(t)}}),cg.config({mode:"execution"}),Us.config({store:{mode:"memory",initialValue:t.data}}),pg("item-type-events",S(Pg(),[ir(mo(),Ig),ir(Ao(),yg.focus)]))]),components:t.components,eventOrder:t.eventOrder}})),Qe("eventOrder",{})],jg=[Ne("dom"),Ne("components"),wu("builder",(function(t){return{dom:t.dom,components:t.components,events:nr([fr(Ao())])}}))],Ug=p("item-widget"),Wg=p([wf({name:"widget",overrides:function(t){return{behaviours:uc([Us.config({store:{mode:"manual",getValue:function(e){return t.data},setValue:m}})])}}})]),qg=[Ne("uid"),Ne("data"),Ne("components"),Ne("dom"),Qe("autofocus",!1),Qe("ignoreFocus",!1),Gs("widgetBehaviours",[Us,yg,cg]),Qe("domModification",{}),jf(Wg()),wu("builder",(function(t){var e=Pf(Ug(),t,Wg()),n=Hf(Ug(),t,e.internals()),o=function(e){return Bf(e,t,"widget").map((function(t){return cg.focusIn(t),t}))},r=function(e,n){return Qf(n.event.target)?A.none():t.autofocus?(n.setSource(e.element),A.none()):A.none()};return{dom:t.dom,components:n,domModification:t.domModification,events:nr([hr((function(t,e){o(t).each((function(t){e.stop()}))})),ir(mo(),Ig),ir(Ao(),(function(e,n){t.autofocus?o(e):yg.focus(e)}))]),behaviours:Ys(t.widgetBehaviours,[Us.config({store:{mode:"memory",initialValue:t.data}}),yg.config({ignore:t.ignoreFocus,onFocus:function(t){Ng(t)}}),cg.config({mode:"special",focusIn:t.autofocus?function(t){o(t)}:dc(),onLeft:r,onRight:r,onEscape:function(e,n){return yg.isFocused(e)||t.autofocus?t.autofocus?(n.setSource(e.element),A.none()):A.none():(yg.focus(e),A.some(!0))}})])}}))],$g=Te("type",{widget:qg,item:Vg,separator:jg}),Gg=p([Cf({factory:{sketch:function(t){var e=Se("menu.spec item",$g,t);return e.builder(e)}},name:"items",unit:"item",defaults:function(t,e){return e.hasOwnProperty("uid")?e:_(_({},e),{uid:gi("item")})},overrides:function(t,e){return{type:e.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}}}})]),Yg=p([Ne("value"),Ne("items"),Ne("dom"),Ne("components"),Qe("eventOrder",{}),Ws("menuBehaviours",[md,Us,nd,cg]),tn("movement",{mode:"menu",moveOnTab:!0},Te("mode",{grid:[_u(),wu("config",(function(t,e){return{mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:e.initSize.numColumns,numRows:e.initSize.numRows},focusManager:t.focusManager}}))],matrix:[wu("config",(function(t,e){return{mode:"matrix",selectors:{row:e.rowSelector,cell:"."+t.markers.item},focusManager:t.focusManager}})),Ne("rowSelector")],menu:[Qe("moveOnTab",!0),wu("config",(function(t,e){return{mode:"menu",selector:"."+t.markers.item,moveOnTab:e.moveOnTab,focusManager:t.focusManager}}))]})),Le("markers",du()),Qe("fakeFocus",!1),Qe("focusManager",Hd()),vu("onHighlight")]),Xg=p("alloy.menu-focus"),Kg=Kf({name:"Menu",configFields:Yg(),partFields:Gg(),factory:function(t,e,n,o){return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:$s(t.menuBehaviours,[md.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight}),Us.config({store:{mode:"memory",initialValue:t.value}}),nd.config({find:A.some}),cg.config(t.movement.config(t,t.movement))]),events:nr([ir(Fg(),(function(t,e){var n=e.event;t.getSystem().getByDom(n.target).each((function(n){md.highlight(t,n),e.stop(),Jo(t,Xg(),{menu:t,item:n})}))})),ir(Lg(),(function(t,e){var n=e.event.item;md.highlight(t,n)}))]),components:e,eventOrder:t.eventOrder,domModification:{attributes:{role:"menu"}}}}}),Jg=function t(e,n,o,r){return Mt(o,r).bind((function(r){return Mt(e,r).bind((function(r){var i=t(e,n,o,r);return A.some([r].concat(i))}))})).getOr([])},Zg=function(t,e){var n={};kt(t,(function(t,e){F(t,(function(t){n[t]=e}))}));var o=e,r=Ct(e,(function(t,e){return{k:t,v:e}})),i=_t(r,(function(t,e){return[e].concat(Jg(n,o,r,e))}));return _t(n,(function(t){return Mt(i,t).getOr([t])}))},Qg=function(t){return"prepared"===t.type?A.some(t.menu):A.none()},tp={init:function(){var t=sn({}),e=sn({}),n=sn({}),o=sn(A.none()),r=sn({}),i=function(e,n,o){return a(e).bind((function(r){return function(e){return zt(t.get(),(function(t,n){return t===e}))}(e).bind((function(t){return n(t).map((function(t){return{triggeredMenu:r,triggeringItem:t,triggeringPath:o}}))}))}))},a=function(t){return u(t).bind(Qg)},u=function(t){return Mt(e.get(),t)},c=function(e){return Mt(t.get(),e)};return{setMenuBuilt:function(t,n){var o;e.set(_(_({},e.get()),((o={})[t]={type:"prepared",menu:n},o)))},setContents:function(i,a,u,c){o.set(A.some(i)),t.set(u),e.set(a),r.set(c);var l=Zg(c,u);n.set(l)},expand:function(e){return Mt(t.get(),e).map((function(t){var o=Mt(n.get(),e).getOr([]);return[t].concat(o)}))},refresh:function(t){return Mt(n.get(),t)},collapse:function(t){return Mt(n.get(),t).bind((function(t){return t.length>1?A.some(t.slice(1)):A.none()}))},lookupMenu:u,lookupItem:c,otherMenus:function(t){var e=r.get();return J(yt(e),t)},getPrimary:function(){return o.get().bind(a)},getMenus:function(){return e.get()},clear:function(){t.set({}),e.set({}),n.set({}),o.set(A.none())},isClear:function(){return o.get().isNone()},getTriggeringPath:function(t,e){var r=j(c(t).toArray(),(function(t){return a(t).isSome()}));return Mt(n.get(),t).bind((function(t){var n=K(r.concat(t));return function(t){for(var e=[],n=0;n<t.length;n++){var o=t[n];if(!o.isSome())return A.none();e.push(o.getOrDie())}return A.some(e)}(Y(n,(function(t,r){return i(t,e,n.slice(0,r+1)).fold((function(){return o.get().is(t)?[]:[A.none()]}),(function(t){return[A.some(t)]}))})))}))}}},extractPreparedMenu:Qg},ep=p("collapse-item"),np=Xf({name:"TieredMenu",configFields:[yu("onExecute"),yu("onEscape"),xu("onOpenMenu"),xu("onOpenSubmenu"),vu("onRepositionMenu"),vu("onCollapseMenu"),Qe("highlightImmediately",!0),We("data",[Ne("primary"),Ne("menus"),Ne("expansions")]),Qe("fakeFocus",!1),vu("onHighlight"),vu("onHover"),gu(),Ne("dom"),Qe("navigateOnHover",!0),Qe("stayInDom",!1),Ws("tmenuBehaviours",[cg,md,nd,gg]),Qe("eventOrder",{})],apis:{collapseMenu:function(t,e){t.collapseMenu(e)},highlightPrimary:function(t,e){t.highlightPrimary(e)},repositionMenus:function(t,e){t.repositionMenus(e)}},factory:function(t,e){var n,o=sn(A.none()),r=tp.init(),i=function(e){var n=function(e,n,o){return _t(o,(function(o,r){var i=function(){return Kg.sketch(_(_({},o),{value:r,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:t.onHighlight,focusManager:t.fakeFocus?Bd():Hd()}))};return r===n?{type:"prepared",menu:e.getSystem().build(i())}:{type:"notbuilt",nbMenu:i}}))}(e,t.data.primary,t.data.menus),o=u();return r.setContents(t.data.primary,n,t.data.expansions,o),r.getPrimary()},a=function(t){return Us.getValue(t).value},u=function(e){return _t(t.data.menus,(function(t,e){return Y(t.items,(function(t){return"separator"===t.type?[]:[t.data.value]}))}))},c=function(t,e){md.highlight(t,e),md.getHighlighted(e).orThunk((function(){return md.getFirst(e)})).each((function(e){Qo(t,e.element,Ao())}))},l=function(t,e){return Jf(L(e,(function(e){return t.lookupMenu(e).bind((function(t){return"prepared"===t.type?A.some(t.menu):A.none()}))})))},s=function(e,n,o){var r=l(n,n.otherMenus(o));F(r,(function(n){Wi(n.element,[t.markers.backgroundMenu]),t.stayInDom||gg.remove(e,n)}))},f=function(e,n){var r=function(e){return o.get().getOrThunk((function(){var n={},r=Ol(e.element,"."+t.markers.item),i=j(r,(function(t){return"true"===Jr(t,"aria-haspopup")}));return F(i,(function(t){e.getSystem().getByDom(t).each((function(t){var e=a(t);n[e]=t}))})),o.set(A.some(n)),n}))}(e);kt(r,(function(t,e){var o=B(n,e);Kr(t.element,"aria-expanded",o)}))},d=function(e,n,o){return A.from(o[0]).bind((function(r){return n.lookupMenu(r).bind((function(r){if("notbuilt"===r.type)return A.none();var i=r.menu,a=l(n,o.slice(1));return F(a,(function(e){Li(e.element,t.markers.backgroundMenu)})),$i(i.element)||gg.append(e,ya(i)),Wi(i.element,[t.markers.backgroundMenu]),c(e,i),s(e,n,o),A.some(i)}))}))};!function(t){t[t.HighlightSubmenu=0]="HighlightSubmenu",t[t.HighlightParent=1]="HighlightParent"}(n||(n={}));var g=function(e,o,i){void 0===i&&(i=n.HighlightSubmenu);var u=a(o);return r.expand(u).bind((function(a){return f(e,a),A.from(a[0]).bind((function(u){return r.lookupMenu(u).bind((function(c){var l=function(t,e,n){if("notbuilt"===n.type){var o=t.getSystem().build(n.nbMenu());return r.setMenuBuilt(e,o),o}return n.menu}(e,u,c);return $i(l.element)||gg.append(e,ya(l)),t.onOpenSubmenu(e,o,l,K(a)),i===n.HighlightSubmenu?(md.highlightFirst(l),d(e,r,a)):(md.dehighlightAll(l),A.some(o))}))}))}))},p=function(e,n){var o=a(n);return r.collapse(o).bind((function(o){return f(e,o),d(e,r,o).map((function(o){return t.onCollapseMenu(e,n,o),o}))}))},h=function(e){return function(n,o){return tu(o.getSource(),"."+t.markers.item).bind((function(t){return n.getSystem().getByDom(t).toOptional().bind((function(t){return e(n,t).map(w)}))}))}},v=nr([ir(Xg(),(function(t,e){var n=e.event.item;r.lookupItem(a(n)).each((function(){var n=e.event.menu;md.highlight(t,n);var o=a(e.event.item);r.refresh(o).each((function(e){return s(t,r,e)}))}))})),hr((function(e,o){var r=o.event.target;e.getSystem().getByDom(r).each((function(o){0===a(o).indexOf("collapse-item")&&p(e,o),g(e,o,n.HighlightSubmenu).fold((function(){t.onExecute(e,o)}),m)}))})),mr((function(e,n){i(e).each((function(n){gg.append(e,ya(n)),t.onOpenMenu(e,n),t.highlightImmediately&&c(e,n)}))}))].concat(t.navigateOnHover?[ir(Lg(),(function(e,o){var i=o.event.item;!function(t,e){var n=a(e);r.refresh(n).bind((function(e){return f(t,e),d(t,r,e)}))}(e,i),g(e,i,n.HighlightParent),t.onHover(e,i)}))]:[])),b=function(t){return md.getHighlighted(t).bind(md.getHighlighted)},x={collapseMenu:function(t){b(t).each((function(e){p(t,e)}))},highlightPrimary:function(t){r.getPrimary().each((function(e){c(t,e)}))},repositionMenus:function(e){var n=r.getPrimary().bind((function(t){return b(e).bind((function(t){var e=a(t),n=Tt(r.getMenus()),o=Jf(L(n,tp.extractPreparedMenu));return r.getTriggeringPath(e,(function(t){return function(t,e,n){return ot(e,(function(t){if(!t.getSystem().isConnected())return A.none();var e=md.getCandidates(t);return q(e,(function(t){return a(t)===n}))}))}(0,o,t)}))})).map((function(e){return{primary:t,triggeringPath:e}}))}));n.fold((function(){(function(t){return A.from(t.components()[0]).filter((function(t){return"menu"===Jr(t.element,"role")}))})(e).each((function(n){t.onRepositionMenu(e,n,[])}))}),(function(n){var o=n.primary,r=n.triggeringPath;t.onRepositionMenu(e,o,r)}))}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:$s(t.tmenuBehaviours,[cg.config({mode:"special",onRight:h((function(t,e){return Qf(e.element)?A.none():g(t,e,n.HighlightSubmenu)})),onLeft:h((function(t,e){return Qf(e.element)?A.none():p(t,e)})),onEscape:h((function(e,n){return p(e,n).orThunk((function(){return t.onEscape(e,n).map((function(){return e}))}))})),focusIn:function(t,e){r.getPrimary().each((function(e){Qo(t,e.element,Ao())}))}}),md.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),nd.config({find:function(t){return md.getHighlighted(t)}}),gg.config({})]),eventOrder:t.eventOrder,apis:x,events:v}},extraApis:{tieredData:function(t,e,n){return{primary:t,menus:e,expansions:n}},singleData:function(t,e){return{primary:t,menus:Gt(t,e),expansions:{}}},collapseItem:function(t){return{value:ui(ep()),meta:{text:t}}}}}),op=Xf({name:"InlineView",configFields:[Ne("lazySink"),vu("onShow"),vu("onHide"),Je("onEscape"),Ws("inlineBehaviours",[_s,Us,mc]),Ze("fireDismissalEventInstead",[Qe("event",jo())]),Ze("fireRepositionEventInstead",[Qe("event",Uo())]),Qe("getRelated",A.none),Qe("isExtraPart",y),Qe("eventOrder",A.none)],factory:function(t,e){var n=function(t,e,n,r){o(t,e,n,(function(){return r.map((function(t){return Wa(t)}))}))},o=function(e,n,o,r){var i=t.lazySink(e).getOrDie();_s.openWhileCloaked(e,o,(function(){return ts.positionWithinBounds(i,n,e,r())})),Us.setValue(e,A.some({mode:"position",anchor:n,getBounds:r}))},r=function(e,n,o,r){var i=function(t,e,n,o,r){var i=function(){return t.lazySink(e)},a="horizontal"===o.type?{layouts:{onLtr:function(){return Qu()},onRtl:function(){return tc()}}}:{},u=function(t){return function(t){return 2===t.length}(t)?a:{}};return np.sketch({dom:{tag:"div"},data:o.data,markers:o.menu.markers,highlightImmediately:o.menu.highlightImmediately,onEscape:function(){return _s.close(e),t.onEscape.map((function(t){return t(e)})),A.some(!0)},onExecute:function(){return A.some(!0)},onOpenMenu:function(t,e){ts.positionWithinBounds(i().getOrDie(),n,e,r())},onOpenSubmenu:function(t,e,n,o){var r=i().getOrDie();ts.position(r,_({anchor:"submenu",item:e},u(o)),n)},onRepositionMenu:function(t,e,o){var a=i().getOrDie();ts.positionWithinBounds(a,n,e,r()),F(o,(function(t){var e=u(t.triggeringPath);ts.position(a,_({anchor:"submenu",item:t.triggeringItem},e),t.triggeredMenu)}))}})}(t,e,n,o,r);_s.open(e,i),Us.setValue(e,A.some({mode:"menu",menu:i}))},i=function(e){_s.isOpen(e)&&Us.getValue(e).each((function(n){switch(n.mode){case"menu":_s.getState(e).each((function(t){np.repositionMenus(t)}));break;case"position":var o=t.lazySink(e).getOrDie();ts.positionWithinBounds(o,n.anchor,e,n.getBounds())}}))},a={setContent:function(t,e){_s.setContent(t,e)},showAt:function(t,e,o){n(t,e,o,A.none())},showWithin:n,showWithinBounds:o,showMenuAt:function(t,e,n){r(t,e,n,(function(){return A.none()}))},showMenuWithinBounds:r,hide:function(t){_s.isOpen(t)&&(Us.setValue(t,A.none()),_s.close(t))},getContent:function(t){return _s.getState(t)},reposition:i,isOpen:_s.isOpen};return{uid:t.uid,dom:t.dom,behaviours:$s(t.inlineBehaviours,[_s.config({isPartOf:function(e,n,o){return ou(n,o)||function(e,n){return t.getRelated(e).exists((function(t){return ou(t,n)}))}(e,o)},getAttachPoint:function(e){return t.lazySink(e).getOrDie()},onOpen:function(e){t.onShow(e)},onClose:function(e){t.onHide(e)}}),Us.config({store:{mode:"memory",initialValue:A.none()}}),mc.config({channels:_(_({},Ts(_({isExtraPart:e.isExtraPart},t.fireDismissalEventInstead.map((function(t){return{fireEventInstead:{event:t.event}}})).getOr({})))),As(_(_({},t.fireRepositionEventInstead.map((function(t){return{fireEventInstead:{event:t.event}}})).getOr({})),{doReposition:i})))})]),eventOrder:t.eventOrder,apis:a}},apis:{showAt:function(t,e,n,o){t.showAt(e,n,o)},showWithin:function(t,e,n,o,r){t.showWithin(e,n,o,r)},showWithinBounds:function(t,e,n,o,r){t.showWithinBounds(e,n,o,r)},showMenuAt:function(t,e,n,o){t.showMenuAt(e,n,o)},showMenuWithinBounds:function(t,e,n,o,r){t.showMenuWithinBounds(e,n,o,r)},hide:function(t,e){t.hide(e)},isOpen:function(t,e){return t.isOpen(e)},getContent:function(t,e){return t.getContent(e)},setContent:function(t,e,n){t.setContent(e,n)},reposition:function(t,e){t.reposition(e)}}}),rp=function(t){return t.x},ip=function(t,e){return t.x+t.width/2-e.width/2},ap=function(t,e){return t.x+t.width-e.width},up=function(t){return t.y},cp=function(t,e){return t.y+t.height-e.height},lp=function(t,e,n){return Cu(ap(t,e),cp(t,e),n.innerSoutheast(),Mu(),Hu(t,{right:0,bottom:3}),"layout-inner-se")},sp=function(t,e,n){return Cu(rp(t),cp(t,e),n.innerSouthwest(),Tu(),Hu(t,{left:1,bottom:3}),"layout-inner-sw")},fp=function(t,e,n){return Cu(ap(t,e),up(t),n.innerNortheast(),zu(),Hu(t,{right:0,top:2}),"layout-inner-ne")},dp=function(t,e,n){return Cu(rp(t),up(t),n.innerNorthwest(),Ou(),Hu(t,{left:1,top:2}),"layout-inner-nw")},mp=function(t,e,n){return Cu(ip(t,e),up(t),n.innerNorth(),Au(),Hu(t,{top:2}),"layout-inner-n")},gp=function(t,e,n){return Cu(ip(t,e),cp(t,e),n.innerSouth(),Du(),Hu(t,{bottom:3}),"layout-inner-s")},pp=tinymce.util.Tools.resolve("tinymce.util.Delay"),hp=Xf({name:"Button",factory:function(t){var e=Hg(t.action),n=t.dom.tag,o=function(e){return Mt(t.dom,"attributes").bind((function(t){return Mt(t,e)}))};return{uid:t.uid,dom:t.dom,components:t.components,events:e,behaviours:Ys(t.buttonBehaviours,[yg.config({}),cg.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:function(){if("button"===n){var t=o("type").getOr("button"),e=o("role").map((function(t){return{role:t}})).getOr({});return _({type:t},e)}return{role:o("role").getOr("button")}}()},eventOrder:t.eventOrder}},configFields:[Qe("uid",void 0),Ne("dom"),Qe("components",[]),Gs("buttonBehaviours",[yg,cg]),Ge("action"),Ge("role"),Qe("eventOrder",{})]}),vp=function(t){var e=function(t){return void 0!==t.uid}(t)&&Dt(t,"uid")?t.uid:gi("memento");return{get:function(t){return t.getSystem().getByUid(e).getOrDie()},getOpt:function(t){return t.getSystem().getByUid(e).toOptional()},asSpec:function(){return _(_({},t),{uid:e})}}},bp=function(t){return A.from(t()["temporary-placeholder"]).getOr("!not found!")},xp=function(t,e){return A.from(e()[t.toLowerCase()]).getOrThunk((function(){return bp(e)}))},yp=function(t,e){return ot(t,(function(t){return A.from(e()[t.toLowerCase()])})).getOrThunk((function(){return bp(e)}))},wp={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},kp=Xf({name:"Notification",factory:function(t){var e=vp({dom:{tag:"p",innerHtml:t.translationProvider(t.text)},behaviours:uc([gg.config({})])}),n=function(t){return{dom:{tag:"div",classes:["tox-bar"],attributes:{style:"width: "+t+"%"}}}},o=function(t){return{dom:{tag:"div",classes:["tox-text"],innerHtml:t+"%"}}},r=vp({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[n(0)]},o(0)],behaviours:uc([gg.config({})])}),i={updateProgress:function(t,e){t.getSystem().isConnected()&&r.getOpt(t).each((function(t){gg.set(t,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[n(e)]},o(e)])}))},updateText:function(t,n){if(t.getSystem().isConnected()){var o=e.get(t);gg.set(o,[ha(n)])}}},a=G([t.icon.toArray(),t.level.toArray(),t.level.bind((function(t){return A.from(wp[t])})).toArray()]),u=vp(hp.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[{dom:{tag:"div",classes:["tox-icon"],innerHtml:xp("close",t.iconProvider),attributes:{"aria-label":t.translationProvider("Close")}}}],action:function(e){t.onAction(e)}})),c=[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:yp(a,t.iconProvider)}},{dom:{tag:"div",classes:["tox-notification__body"]},components:[e.asSpec()],behaviours:uc([gg.config({})])}];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert"},classes:t.level.map((function(t){return["tox-notification","tox-notification--in","tox-notification--"+t]})).getOr(["tox-notification","tox-notification--in"])},behaviours:uc([yg.config({}),pg("notification-events",[ir(go(),(function(t){u.getOpt(t).each(yg.focus)}))])]),components:c.concat(t.progress?[r.asSpec()]:[]).concat(t.closeButton?[u.asSpec()]:[]),apis:i}},configFields:[Ge("level"),Ne("progress"),Ne("icon"),Ne("onAction"),Ne("text"),Ne("iconProvider"),Ne("translationProvider"),rn("closeButton",!0)],apis:{updateProgress:function(t,e,n){t.updateProgress(e,n)},updateText:function(t,e,n){t.updateText(e,n)}}});function _p(t,e,n){var o=e.backstage;return{open:function(t,r){var i=!t.closeButton&&t.timeout&&(t.timeout>0||t.timeout<0),a=function(){r(),op.hide(c)},u=xa(kp.sketch({text:t.text,level:B(["success","error","warning","warn","info"],t.type)?t.type:void 0,progress:!0===t.progressBar,icon:A.from(t.icon),closeButton:!i,onAction:a,iconProvider:o.shared.providers.icons,translationProvider:o.shared.providers.translate})),c=xa(op.sketch(_({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:e.backstage.shared.getSink,fireDismissalEventInstead:{}},o.shared.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}})));return n.add(c),t.timeout>0&&pp.setTimeout((function(){a()}),t.timeout),{close:a,moveTo:function(t,e){op.showAt(c,{anchor:"makeshift",x:t,y:e},ya(u))},moveRel:function(t,n){if("banner"!==n){var o=function(t){switch(t){case"bc-bc":return gp;case"tc-tc":return mp;case"tc-bc":return qu;default:return $u}}(n),r={anchor:"node",root:Gi(),node:A.some(dn.fromDom(t)),layouts:{onRtl:function(){return[o]},onLtr:function(){return[o]}}};op.showAt(c,r,ya(u))}else op.showAt(c,e.backstage.shared.anchors.banner(),ya(u))},text:function(t){kp.updateText(u,t)},settings:t,getEl:function(){return u.element.dom},progressBar:{value:function(t){kp.updateProgress(u,t)}}}},close:function(t){t.close()},reposition:function(t){!function(t){F(t,(function(t){return t.moveTo(0,0)}))}(t),function(t){t.length>0&&(tt(t).each((function(t){return t.moveRel(null,"banner")})),F(t,(function(e,n){n>0&&e.moveRel(t[n-1].getEl(),"bc-tc")})))}(t)},getArgs:function(t){return t.settings}}}var Cp,Sp=function(t,e){var n=null;return{cancel:function(){null!==n&&(clearTimeout(n),n=null)},throttle:function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];null!==n&&clearTimeout(n),n=setTimeout((function(){t.apply(null,o),n=null}),e)}}},Op=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker"),zp=function(t,e,n,o,r){var i=Op(t,(function(e){return function(t,e){return t.isBlock(e)||B(["BR","IMG","HR","INPUT"],e.nodeName)||"false"===t.getContentEditable(e)}(t,e)}));return A.from(i.backwards(e,n,o,r))},Tp=function(t,e){return Mp(dn.fromDom(t.selection.getNode())).getOrThunk((function(){var n=dn.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',t.getDoc());return jr(n,dn.fromDom(e.extractContents())),e.insertNode(n.dom),zr(n).each((function(t){return t.dom.normalize()})),function(t){return Sl(t,Cl)}(n).map((function(e){t.selection.setCursorLocation(e.dom,function(t){return"img"===vr(t)?1:kl(t).fold((function(){return Mr(t).length}),(function(t){return t.length}))}(e))})),n}))},Mp=function(t){return tu(t,"[data-mce-autocompleter]")},Ap=function(t){return t.toString().replace(/\u00A0/g," ").replace(/\uFEFF/g,"")},Dp=function(t){return""!==t&&-1!==" \f\n\r\t\v".indexOf(t)},Ep=function(t,e){return t.substring(e.length)},Pp=function(t,e,n,o){if(void 0===o&&(o=0),!(r=e).collapsed||3!==r.startContainer.nodeType)return A.none();var r,i=t.getParent(e.startContainer,t.isBlock)||t.getRoot();return zp(t,e.startContainer,e.startOffset,(function(t,e,o){return function(t,e,n){var o;for(o=e-1;o>=0;o--){var r=t.charAt(o);if(Dp(r))return A.none();if(r===n)break}return A.some(o)}(o,e,n).getOr(e)}),i).bind((function(t){var r=e.cloneRange();if(r.setStart(t.container,t.offset),r.setEnd(e.endContainer,e.endOffset),r.collapsed)return A.none();var i=Ap(r);return 0!==i.lastIndexOf(n)||Ep(i,n).length<o?A.none():A.some({text:Ep(i,n),range:r,triggerChar:n})}))},Hp=function(t,e,n,o){return void 0===o&&(o=0),Mp(dn.fromDom(e.startContainer)).fold((function(){return Pp(t,e,n,o)}),(function(e){var o=t.createRng();o.selectNode(e.dom);var r=Ap(o);return A.some({range:o,text:Ep(r,n),triggerChar:n})}))},Bp=function(t,e){e.on("keypress compositionend",t.onKeypress.throttle),e.on("remove",t.onKeypress.cancel);var n=function(t,e){Jo(t,ho(),{raw:e})};e.on("keydown",(function(e){var o=function(){return t.getView().bind(md.getHighlighted)};8===e.which&&t.onKeypress.throttle(e),t.isActive()&&(27===e.which&&t.cancelIfNecessary(),t.isMenuOpen()?13===e.which?(o().each(Zo),e.preventDefault()):40===e.which?(o().fold((function(){t.getView().each(md.highlightFirst)}),(function(t){n(t,e)})),e.preventDefault(),e.stopImmediatePropagation()):37!==e.which&&38!==e.which&&39!==e.which||o().each((function(t){n(t,e),e.preventDefault(),e.stopImmediatePropagation()})):13!==e.which&&38!==e.which&&40!==e.which||t.cancelIfNecessary())})),e.on("NodeChange",(function(e){t.isActive()&&!t.isProcessingAction()&&Mp(dn.fromDom(e.element)).isNone()&&t.cancelIfNecessary()}))},Rp=tinymce.util.Tools.resolve("tinymce.util.Promise"),Ip=function(t,e){return{container:t,offset:e}},Np=function t(e){if(function(t){return 3===t.nodeType}(e))return Ip(e,e.data.length);var n=e.childNodes;return n.length>0?t(n[n.length-1]):Ip(e,n.length)},Lp=function t(e,n){var o=e.childNodes;return o.length>0&&n<o.length?t(o[n],0):o.length>0&&function(t){return 1===t.nodeType}(e)&&o.length===n?Np(o[o.length-1]):Ip(e,n)},Fp=function(t){return function(e){var n=Lp(e.startContainer,e.startOffset);return!function(t,e){return zp(t,e.container,e.offset,(function(t,e){return 0===e?-1:e}),t.getRoot()).filter((function(t){var e=t.container.data.charAt(t.offset-1);return!Dp(e)})).isSome()}(t,n)}},Vp=function(t,e){var n=e(),o=t.selection.getRng();return function(t,e,n){return ot(n.triggerChars,(function(n){return Hp(t,e,n)}))}(t.dom,o,n).bind((function(n){return jp(t,e,n)}))},jp=function(t,e,n,o){void 0===o&&(o={});var r=e(),i=t.selection.getRng().startContainer.nodeValue,a=j(r.lookupByChar(n.triggerChar),(function(e){return n.text.length>=e.minChars&&e.matches.getOrThunk((function(){return Fp(t.dom)}))(n.range,i,n.text)}));if(0===a.length)return A.none();var u=Rp.all(L(a,(function(t){return t.fetch(n.text,t.maxResults,o).then((function(e){return{matchText:n.text,items:e,columns:t.columns,onAction:t.onAction,highlightOn:t.highlightOn}}))})));return A.some({lookupData:u,context:n})},Up=ce([Ve("type"),Ke("text")]),Wp=ce([Qe("type","autocompleteitem"),Qe("active",!1),Qe("disabled",!1),Qe("meta",{}),Ve("value"),Ke("text"),Ke("icon")]),qp=ce([Ve("type"),Ve("ch"),en("minChars",1),Qe("columns",1),en("maxResults",10),Je("matches"),Ue("fetch"),Ue("onAction"),un("highlightOn",[],Ee)]),$p=[rn("disabled",!1),Ke("tooltip"),Ke("icon"),Ke("text"),an("onSetup",(function(){return m}))],Gp=ce([Ve("type"),Ue("onAction")].concat($p)),Yp=function(t){return _e("toolbarbutton",Gp,t)},Xp=[rn("active",!1)].concat($p),Kp=ce(Xp.concat([Ve("type"),Ue("onAction")])),Jp=function(t){return _e("ToggleButton",Kp,t)},Zp=[an("predicate",y),on("scope","node",["node","editor"]),on("position","selection",["node","selection","line"])],Qp=$p.concat([Qe("type","contextformbutton"),Qe("primary",!1),Ue("onAction"),ln("original",h)]),th=Xp.concat([Qe("type","contextformbutton"),Qe("primary",!1),Ue("onAction"),ln("original",h)]),eh=$p.concat([Qe("type","contextformbutton")]),nh=Xp.concat([Qe("type","contextformtogglebutton")]),oh=Te("type",{contextformbutton:Qp,contextformtogglebutton:th}),rh=ce([Qe("type","contextform"),an("initValue",(function(){return""})),Ke("label"),$e("commands",oh),Ye("launch",Te("type",{contextformbutton:eh,contextformtogglebutton:nh}))].concat(Zp)),ih=ce([Qe("type","contexttoolbar"),Ve("items")].concat(Zp)),ah=function(t){var e=t.ui.registry.getAll().popups,n=_t(e,(function(t){return(e=t,_e("Autocompleter",qp,e)).fold((function(t){throw new Error(Oe(t))}),(function(t){return t}));var e})),o=function(t){var e={};return F(t,(function(t){e[t]={}})),yt(e)}(Ot(n,(function(t){return t.ch}))),r=Tt(n);return{dataset:n,triggerChars:o,lookupByChar:function(t){return j(r,(function(e){return e.ch===t}))}}};!function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"}(Cp||(Cp={}));var uh,ch=Cp,lh="tox-menu-nav__js",sh="tox-collection__item",fh="tox-swatch",dh={normal:lh,color:fh},mh="tox-collection__item--enabled",gh="tox-collection__item-label",ph="tox-collection__item-caret",hh="tox-collection__item--active",vh="tox-collection__item-container",bh="tox-collection__item-container--row",xh=function(t){return Mt(dh,t).getOr(lh)},yh=function(t){return"color"===t?"tox-swatches":"tox-menu"},wh=function(t){return{backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:yh(t),tieredMenu:"tox-tiered-menu"}},kh=function(t){var e=wh(t);return{backgroundMenu:e.backgroundMenu,selectedMenu:e.selectedMenu,menu:e.menu,selectedItem:e.selectedItem,item:xh(t)}},_h=function(t,e,n){var o=wh(n);return{tag:"div",classes:G([[o.menu,"tox-menu-"+e+"-column"],t?[o.hasIcons]:[]])}},Ch=[Kg.parts.items({})],Sh=function(t,e,n){var o=wh(n);return{dom:{tag:"div",classes:G([[o.tieredMenu]])},markers:kh(n)}},Oh=function(t,e){return function(n){var o=N(n,e);return L(o,(function(e){return{dom:t,components:e}}))}},zh=function(t,e){var n=[],o=[];return F(t,(function(t,r){e(t,r)?(o.length>0&&n.push(o),o=[],At(t.dom,"innerHtml")&&o.push(t)):o.push(t)})),o.length>0&&n.push(o),L(n,(function(t){return{dom:{tag:"div",classes:["tox-collection__group"]},components:t}}))},Th=function(t,e,n){return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===t?["tox-collection--list"]:["tox-collection--grid"])},components:[Kg.parts.items({preprocess:function(n){return"auto"!==t&&t>1?Oh({tag:"div",classes:["tox-collection__group"]},t)(n):zh(n,(function(t,n){return"separator"===e[n].type}))}})]}},Mh=function(t){return R(t,(function(t){return"icon"in t&&void 0!==t.icon}))},Ah=function(t){return console.error(Oe(t)),console.log(t),A.none()},Dh=function(t,e,n,o,r){var i,a=(i=n,{dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[Kg.parts.items({preprocess:function(t){return zh(t,(function(t,e){return"separator"===i[e].type}))}})]});return{value:t,dom:a.dom,components:a.components,items:n}},Eh=function(t,e,n,o,r){if("color"===r){var i=function(t){return{dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Kg.parts.items({preprocess:"auto"!==t?Oh({tag:"div",classes:["tox-swatches__row"]},t):h})]}]}}(o);return{value:t,dom:i.dom,components:i.components,items:n}}if("normal"===r&&"auto"===o)return{value:t,dom:(i=Th(o,n)).dom,components:i.components,items:n};if("normal"===r&&1===o)return{value:t,dom:(i=Th(1,n)).dom,components:i.components,items:n};if("normal"===r)return{value:t,dom:(i=Th(o,n)).dom,components:i.components,items:n};if("listpreview"===r&&"auto"!==o){i=function(t){return{dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Kg.parts.items({preprocess:Oh({tag:"div",classes:["tox-collection__group"]},t)})]}}(o);return{value:t,dom:i.dom,components:i.components,items:n}}return{value:t,dom:_h(e,o,r),components:Ch,items:n}},Ph=[Ve("type"),Ve("src"),Ke("alt"),un("classes",[],Ee)],Hh=ce(Ph),Bh=[Ve("type"),Ve("text"),Ke("name"),un("classes",["tox-collection__item-label"],Ee)],Rh=ce(Bh),Ih=ye((function(){return ze("type",{cardimage:Hh,cardtext:Rh,cardcontainer:Nh})})),Nh=ce([Ve("type"),nn("direction","horizontal"),nn("align","left"),nn("valign","middle"),$e("items",Ih)]),Lh=[rn("disabled",!1),Ke("text"),Ke("shortcut"),pe("value","value",Ut((function(){return ui("menuitem-value")})),Me()),Qe("meta",{})],Fh=ce([Ve("type"),Ke("label"),$e("items",Ih),an("onSetup",(function(){return m})),an("onAction",m)].concat(Lh)),Vh=ce([Ve("type"),rn("active",!1),Ke("icon")].concat(Lh)),jh=ce([Ve("type"),je("fancytype",["inserttable","colorswatch"]),an("onAction",m)]),Uh=ce([Ve("type"),an("onSetup",(function(){return m})),an("onAction",m),Ke("icon")].concat(Lh)),Wh=ce([Ve("type"),Ue("getSubmenuItems"),an("onSetup",(function(){return m})),Ke("icon")].concat(Lh)),qh=ce([Ve("type"),Ke("icon"),rn("active",!1),an("onSetup",(function(){return m})),Ue("onAction")].concat(Lh)),$h=function(t,e,n){var o=Ol(t.element,"."+n);if(o.length>0){var r=$(o,(function(t){var n=t.dom.getBoundingClientRect().top,r=o[0].dom.getBoundingClientRect().top;return Math.abs(n-r)>e})).getOr(o.length);return A.some({numColumns:r,numRows:Math.ceil(o.length/r)})}return A.none()},Gh=function(t,e){return uc([pg(t,e)])},Yh=function(t){return Gh(ui("unnamed-events"),t)},Xh=ui("tooltip.exclusive"),Kh=ui("tooltip.show"),Jh=ui("tooltip.hide"),Zh=function(t,e,n){t.getSystem().broadcastOn([Xh],{})},Qh=Object.freeze({__proto__:null,hideAllExclusive:Zh,setComponents:function(t,e,n,o){n.getTooltip().each((function(t){t.getSystem().isConnected()&&gg.set(t,o)}))}}),tv=Object.freeze({__proto__:null,events:function(t,e){var n=function(n){e.getTooltip().each((function(o){cs(o),t.onHide(n,o),e.clearTooltip()})),e.clearTimer()};return nr(G([[ir(Kh,(function(n){e.resetTimer((function(){!function(n){if(!e.isShowing()){Zh(n);var o=t.lazySink(n).getOrDie(),r=n.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:nr("normal"===t.mode?[ir(mo(),(function(t){Ko(n,Kh)})),ir(so(),(function(t){Ko(n,Jh)}))]:[]),behaviours:uc([gg.config({})])});e.setTooltip(r),is(o,r),t.onShow(n,r),ts.position(o,t.anchor(n),r)}}(n)}),t.delay)})),ir(Jh,(function(o){e.resetTimer((function(){n(o)}),t.delay)})),ir(To(),(function(t,e){var o=e;o.universal||B(o.channels,Xh)&&n(t)})),gr((function(t){n(t)}))],"normal"===t.mode?[ir(go(),(function(t){Ko(t,Kh)})),ir(Oo(),(function(t){Ko(t,Jh)})),ir(mo(),(function(t){Ko(t,Kh)})),ir(so(),(function(t){Ko(t,Jh)}))]:[ir(Yo(),(function(t,e){Ko(t,Kh)})),ir(Xo(),(function(t){Ko(t,Jh)}))]]))}}),ev=[Ne("lazySink"),Ne("tooltipDom"),Qe("exclusive",!0),Qe("tooltipComponents",[]),Qe("delay",300),on("mode","normal",["normal","follow-highlight"]),Qe("anchor",(function(t){return{anchor:"hotspot",hotspot:t,layouts:{onLtr:p([$u,qu,Vu,Uu,ju,Wu]),onRtl:p([$u,qu,Vu,Uu,ju,Wu])}}})),vu("onHide"),vu("onShow")],nv=Object.freeze({__proto__:null,init:function(){var t=sn(A.none()),e=sn(A.none()),n=function(){t.get().each((function(t){clearTimeout(t)}))},o=p("not-implemented");return Ci({getTooltip:function(){return e.get()},isShowing:function(){return e.get().isSome()},setTooltip:function(t){e.set(A.some(t))},clearTooltip:function(){e.set(A.none())},clearTimer:n,resetTimer:function(e,o){n(),t.set(A.some(setTimeout((function(){e()}),o)))},readState:o})}}),ov=lc({fields:ev,name:"tooltipping",active:tv,state:nv,apis:Qh}),rv=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),iv=tinymce.util.Tools.resolve("tinymce.util.I18n"),av=["input","button","textarea","select"],uv=function(t,e,n){(e.disabled()?mv:gv)(t,e)},cv=function(t,e){return!0===e.useNative&&B(av,vr(t.element))},lv=function(t){Kr(t.element,"disabled","disabled")},sv=function(t){ti(t.element,"disabled")},fv=function(t){Kr(t.element,"aria-disabled","true")},dv=function(t){Kr(t.element,"aria-disabled","false")},mv=function(t,e,n){e.disableClass.each((function(e){Li(t.element,e)})),(cv(t,e)?lv:fv)(t),e.onDisabled(t)},gv=function(t,e,n){e.disableClass.each((function(e){Vi(t.element,e)})),(cv(t,e)?sv:dv)(t),e.onEnabled(t)},pv=function(t,e){return cv(t,e)?function(t){return Qr(t.element,"disabled")}(t):function(t){return"true"===Jr(t.element,"aria-disabled")}(t)},hv=Object.freeze({__proto__:null,enable:gv,disable:mv,isDisabled:pv,onLoad:uv,set:function(t,e,n,o){(o?mv:gv)(t,e)}}),vv=Object.freeze({__proto__:null,exhibit:function(t,e){return Oi({classes:e.disabled()?e.disableClass.toArray():[]})},events:function(t,e){return nr([or(Mo(),(function(e,n){return pv(e,t)})),oc(t,e,uv)])}}),bv=[an("disabled",y),Qe("useNative",!0),Ge("disableClass"),vu("onDisabled"),vu("onEnabled")],xv=lc({fields:bv,name:"disabling",active:vv,apis:hv}),yv=tinymce.util.Tools.resolve("tinymce.EditorManager"),wv=function(t){return t.getParam("height",Math.max(t.getElement().offsetHeight,200))},kv=function(t){return t.getParam("width",rv.DOM.getStyle(t.getElement(),"width"))},_v=function(t){return A.from(t.getParam("min_width")).filter(f)},Cv=function(t){return A.from(t.getParam("min_height")).filter(f)},Sv=function(t){return A.from(t.getParam("max_width")).filter(f)},Ov=function(t){return A.from(t.getParam("max_height")).filter(f)},zv=function(t){return!1!==t.getParam("menubar",!0,"boolean")},Tv=function(t){var e=t.getParam("toolbar",!0),n=!0===e,o=r(e),i=a(e)&&e.length>0;return!Av(t)&&(i||o||n)},Mv=function(t){var e=I(9,(function(e){return t.getParam("toolbar"+(e+1),!1,"string")})),n=j(e,(function(t){return"string"==typeof t}));return n.length>0?A.some(n):A.none()},Av=function(t){return Mv(t).fold((function(){return t.getParam("toolbar",[],"string[]").length>0}),w)};!function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"}(uh||(uh={}));var Dv,Ev=function(t){return t.getParam("toolbar_mode","","string")};!function(t){t.auto="auto",t.top="top",t.bottom="bottom"}(Dv||(Dv={}));var Pv,Hv,Bv=function(t){return t.getParam("toolbar_location",Dv.auto,"string")},Rv=function(t){return Bv(t)===Dv.bottom},Iv=function(t){if(!t.inline)return A.none();var e=function(t){return t.getParam("fixed_toolbar_container","","string")}(t);if(e.length>0)return Qa(Gi(),e);var n=function(t){return t.getParam("fixed_toolbar_container_target")}(t);return l(n)?A.some(dn.fromDom(n)):A.none()},Nv=function(t){return t.inline&&Iv(t).isSome()},Lv=function(t){return Iv(t).getOrThunk((function(){return Br(Hr(dn.fromDom(t.getElement())))}))},Fv=function(t){return t.inline&&!zv(t)&&!Tv(t)&&!Av(t)},Vv=function(t){var e=t.getParam("toolbar_sticky",!1,"boolean");return(e||t.inline)&&!Nv(t)&&!Fv(t)},jv=function(t){var e=t.getParam("menu");return e?_t(e,(function(t){return _(_({},t),{items:t.items})})):{}},Uv=function(t){return t.getParam("menubar")},Wv=function(t){return t.getParam("anchor_top","#top")},qv=function(t){return t.getParam("anchor_bottom","#bottom")},$v="silver.readonly",Gv=ce([(Pv="readonly",Le(Pv,Pe))]),Yv=function(t,e){var n=t.outerContainer.element;e&&(t.mothership.broadcastOn([Cs()],{target:n}),t.uiMothership.broadcastOn([Cs()],{target:n})),t.mothership.broadcastOn([$v],{readonly:e}),t.uiMothership.broadcastOn([$v],{readonly:e})},Xv=function(t,e){t.on("init",(function(){t.mode.isReadOnly()&&Yv(e,!0)})),t.on("SwitchMode",(function(){return Yv(e,t.mode.isReadOnly())})),function(t){return t.getParam("readonly",!1,"boolean")}(t)&&t.setMode("readonly")},Kv=function(){var t;return mc.config({channels:(t={},t[$v]={schema:Gv,onReceive:function(t,e){xv.set(t,e.readonly)}},t)})},Jv=function(t){return xv.config({disabled:t,disableClass:"tox-collection__item--state-disabled"})},Zv=function(t){return xv.config({disabled:t})},Qv=function(t){return xv.config({disabled:t,disableClass:"tox-tbtn--disabled"})},tb=function(t){return xv.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},eb=function(t,e){var n=t.getApi(e);return function(t){t(n)}},nb=function(t,e){return mr((function(n){eb(t,n)((function(n){var o=t.onSetup(n);s(o)&&e.set(o)}))}))},ob=function(t,e){return gr((function(n){return eb(t,n)(e.get())}))},rb=function(t,e){return hr((function(n,o){eb(t,n)(t.onAction),t.triggersSubmenu||e!==ch.CLOSE_ON_EXECUTE||(n.getSystem().isConnected()&&Ko(n,Po()),o.stop())}))},ib=((Hv={})[Mo()]=["disabling","alloy.base.behaviour","toggling","item-events"],Hv),ab=function(t){return Y(t,(function(t){return t.toArray()}))},ub=function(t,e,n,o){var r=sn(m);return{type:"item",dom:e.dom,components:ab(e.optComponents),data:t.data,eventOrder:ib,hasSubmenu:t.triggersSubmenu,itemBehaviours:uc([pg("item-events",[rb(t,n),nb(t,r),ob(t,r)]),Jv((function(){return t.disabled||o.isDisabled()})),Kv(),gg.config({})].concat(t.itemBehaviours))}},cb=function(t){return{value:t.value,meta:_({text:t.text.getOr("")},t.meta)}},lb=tinymce.util.Tools.resolve("tinymce.Env"),sb=function(t){var e=lb.mac?{alt:"&#x2325;",ctrl:"&#x2303;",shift:"&#x21E7;",meta:"&#x2318;",access:"&#x2303;&#x2325;"}:{meta:"Ctrl",access:"Shift+Alt"},n=t.split("+"),o=L(n,(function(t){var n=t.toLowerCase().trim();return At(e,n)?e[n]:t}));return lb.mac?o.join(""):o.join("+")},fb=function(t){return{dom:{tag:"div",classes:["tox-collection__item-icon"],innerHtml:t}}},db=function(t){return{dom:{tag:"div",classes:[gh]},components:[ha(iv.translate(t))]}},mb=function(t,e){return{dom:{tag:"div",classes:e,innerHtml:t}}},gb=function(t,e){return{dom:{tag:"div",classes:[gh]},components:[{dom:{tag:t.tag,styles:t.styles},components:[ha(iv.translate(e))]}]}},pb=function(t){return{dom:{tag:"div",classes:["tox-collection__item-accessory"],innerHtml:sb(t)}}},hb=function(t){return{dom:{tag:"div",classes:["tox-collection__item-checkmark"],innerHtml:xp("checkmark",t)}}},vb=function(t,e){var n=e.map((function(t){return{attributes:{title:iv.translate(t)}}})).getOr({});return _({tag:"div",classes:[lh,sh].concat(t?["tox-collection__item-icon-rtl"]:[])},n)},bb=["list-num-default","list-num-lower-alpha","list-num-lower-greek","list-num-lower-roman","list-num-upper-alpha","list-num-upper-roman"],xb=["list-bull-circle","list-bull-default","list-bull-square"],yb=function(t,e,n,o){void 0===o&&(o=A.none());var r,i=iv.isRtl()&&t.iconContent.exists((function(t){return B(xb,t)})),a=(r=t.iconContent,r.map((function(t){return iv.isRtl()&&B(bb,t)?t+"-rtl":t}))).map((function(t){return function(t,e,n){return A.from(e()[t.toLowerCase()]).or(n).getOrThunk((function(){return bp(e)}))}(t,e.icons,o)})),u=A.from(t.meta).fold((function(){return db}),(function(t){return At(t,"style")?v(gb,t.style):db}));return"color"===t.presets?function(t,e,n,o){var r,i,a;return{dom:(r=n.getOr(""),i=t.map((function(t){return{title:o.translate(t)}})).getOr({}),a={tag:"div",attributes:i,classes:["tox-swatch"]},_(_({},a),"custom"===e?{tag:"button",classes:S(a.classes,["tox-swatches__picker-btn"]),innerHtml:r}:"remove"===e?{classes:S(a.classes,["tox-swatch--remove"]),innerHtml:r}:{attributes:_(_({},a.attributes),{"data-mce-color":e}),styles:{"background-color":e}})),optComponents:[]}}(t.ariaLabel,t.value,a,e):function(t,e,n,o,r){var i=n?e.or(A.some("")).map(fb):A.none(),a=t.checkMark,u=t.htmlContent.fold((function(){return t.textContent.map(o)}),(function(t){return A.some(mb(t,[gh]))}));return{dom:vb(r,t.ariaLabel),optComponents:[i,u,t.shortcutContent.map(pb),a,t.caret]}}(t,a,n,u,i)},wb=function(t,e){return Mt(t,"tooltipWorker").map((function(t){return[ov.config({lazySink:e.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:function(t){return{anchor:"submenu",item:t,overrides:{maxHeightFunction:Nc}}},mode:"follow-highlight",onShow:function(e,n){t((function(t){ov.setComponents(e,[va({element:dn.fromDom(t)})])}))}})]})).getOr([])},kb=function(t,e){var n=function(t){return rv.DOM.encode(t)}(iv.translate(t));if(e.length>0){var o=new RegExp(function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(e),"gi");return n.replace(o,(function(t){return'<span class="tox-autocompleter-highlight">'+t+"</span>"}))}return n},_b=function t(e,n){return L(e,(function(e){switch(e.type){case"cardcontainer":return function(t,e){var n="vertical"===t.direction?"tox-collection__item-container--column":bh,o="left"===t.align?"tox-collection__item-container--align-left":"tox-collection__item-container--align-right";return{dom:{tag:"div",classes:[vh,n,o,function(){switch(t.valign){case"top":return"tox-collection__item-container--valign-top";case"middle":return"tox-collection__item-container--valign-middle";case"bottom":return"tox-collection__item-container--valign-bottom"}}()]},components:e}}(e,t(e.items,n));case"cardimage":return function(t,e,n){return{dom:{tag:"img",classes:e,attributes:{src:t,alt:n.getOr("")}}}}(e.src,e.classes,e.alt);case"cardtext":var o=e.name.exists((function(t){return B(n.cardText.highlightOn,t)})),r=o?A.from(n.cardText.matchText).getOr(""):"";return mb(kb(e.text,r),e.classes)}}))},Cb=Tf(Ug(),Wg()),Sb=function(t){return{value:t}},Ob=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,zb=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Tb=function(t){return Ob.test(t)||zb.test(t)},Mb=function(t){var e=function(t){var e=t.value.replace(Ob,(function(t,e,n,o){return e+e+n+n+o+o}));return{value:e}}(t),n=zb.exec(e.value);return null===n?["FFFFFF","FF","FF","FF"]:n},Ab=function(t){var e=t.toString(16);return(1===e.length?"0"+e:e).toUpperCase()},Db=function(t){var e=Ab(t.red)+Ab(t.green)+Ab(t.blue);return Sb(e)},Eb=Math.min,Pb=Math.max,Hb=Math.round,Bb=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,Rb=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,Ib=function(t,e,n,o){return{red:t,green:e,blue:n,alpha:o}},Nb=function(t){var e=parseInt(t,10);return e.toString()===t&&e>=0&&e<=255},Lb=function(t){var e,n,o,r=(t.hue||0)%360,i=t.saturation/100,a=t.value/100;if(i=Pb(0,Eb(i,1)),a=Pb(0,Eb(a,1)),0===i)return e=n=o=Hb(255*a),Ib(e,n,o,1);var u=r/60,c=a*i,l=c*(1-Math.abs(u%2-1)),s=a-c;switch(Math.floor(u)){case 0:e=c,n=l,o=0;break;case 1:e=l,n=c,o=0;break;case 2:e=0,n=c,o=l;break;case 3:e=0,n=l,o=c;break;case 4:e=l,n=0,o=c;break;case 5:e=c,n=0,o=l;break;default:e=n=o=0}return e=Hb(255*(e+s)),n=Hb(255*(n+s)),o=Hb(255*(o+s)),Ib(e,n,o,1)},Fb=function(t){var e=Mb(t),n=parseInt(e[1],16),o=parseInt(e[2],16),r=parseInt(e[3],16);return Ib(n,o,r,1)},Vb=function(t,e,n,o){var r=parseInt(t,10),i=parseInt(e,10),a=parseInt(n,10),u=parseFloat(o);return Ib(r,i,a,u)},jb=function(t){return"rgba("+t.red+","+t.green+","+t.blue+","+t.alpha+")"},Ub=Ib(255,0,0,1),Wb=function(t,e){return t.fire("ResizeContent",e)},qb=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),$b="tinymce-custom-colors";var Gb,Yb="choiceitem",Xb=[{type:Yb,text:"Light Green",value:"#BFEDD2"},{type:Yb,text:"Light Yellow",value:"#FBEEB8"},{type:Yb,text:"Light Red",value:"#F8CAC6"},{type:Yb,text:"Light Purple",value:"#ECCAFA"},{type:Yb,text:"Light Blue",value:"#C2E0F4"},{type:Yb,text:"Green",value:"#2DC26B"},{type:Yb,text:"Yellow",value:"#F1C40F"},{type:Yb,text:"Red",value:"#E03E2D"},{type:Yb,text:"Purple",value:"#B96AD9"},{type:Yb,text:"Blue",value:"#3598DB"},{type:Yb,text:"Dark Turquoise",value:"#169179"},{type:Yb,text:"Orange",value:"#E67E23"},{type:Yb,text:"Dark Red",value:"#BA372A"},{type:Yb,text:"Dark Purple",value:"#843FA1"},{type:Yb,text:"Dark Blue",value:"#236FA1"},{type:Yb,text:"Light Gray",value:"#ECF0F1"},{type:Yb,text:"Medium Gray",value:"#CED4D9"},{type:Yb,text:"Gray",value:"#95A5A6"},{type:Yb,text:"Dark Gray",value:"#7E8C8D"},{type:Yb,text:"Navy Blue",value:"#34495E"},{type:Yb,text:"Black",value:"#000000"},{type:Yb,text:"White",value:"#ffffff"}],Kb=function(t){void 0===t&&(t=10);var e,n=qb.getItem($b),o=r(n)?JSON.parse(n):[],i=t-(e=o).length<0?e.slice(0,t):e,a=function(t){i.splice(t,1)};return{add:function(e){(function(t,e){var n=H(t,e);return-1===n?A.none():A.some(n)})(i,e).each(a),i.unshift(e),i.length>t&&i.pop(),qb.setItem($b,JSON.stringify(i))},state:function(){return i.slice(0)}}}(10),Jb=function(t){return!1!==t.getParam("custom_colors")},Zb=function(t){var e=function(t){return t.getParam("color_map")}(t);return void 0!==e?function(t){var e=[],n=document.createElement("canvas");n.height=1,n.width=1;for(var o=n.getContext("2d"),r=function(t,e){var n=e/255;return("0"+Math.round(t*n+255*(1-n)).toString(16)).slice(-2).toUpperCase()},i=function(t){if(/^[0-9A-Fa-f]{6}$/.test(t))return"#"+t.toUpperCase();o.clearRect(0,0,n.width,n.height),o.fillStyle="#FFFFFF",o.fillStyle=t,o.fillRect(0,0,1,1);var e=o.getImageData(0,0,1,1).data,i=e[0],a=e[1],u=e[2],c=e[3];return"#"+r(i,c)+r(a,c)+r(u,c)},a=0;a<t.length;a+=2)e.push({text:t[a+1],value:i(t[a]),type:"choiceitem"});return e}(e):Xb},Qb=function(t){Kb.add(t)},tx=function(t){var e=function(t){return Math.max(5,Math.ceil(Math.sqrt(t)))}(Zb(t).length);return function(t,e){return t.getParam("color_cols",e,"number")}(t,e)},ex=function(t,e,n,o){"custom"===n?ux(t)((function(n){n.each((function(n){Qb(n),t.execCommand("mceApplyTextcolor",e,n),o(n)}))}),"#000000"):"remove"===n?(o(""),t.execCommand("mceRemoveTextcolor",e)):(o(n),t.execCommand("mceApplyTextcolor",e,n))},nx=function(t,e){return t.concat(L(Kb.state(),(function(t){return{type:Yb,text:t,value:t}})).concat(function(t){var e="choiceitem",n={type:e,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[n,{type:e,text:"Custom color",icon:"color-picker",value:"custom"}]:[n]}(e)))},ox=function(t,e){return function(n){n(nx(t,e))}},rx=function(t,e,n){var o="forecolor"===e?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(o,n)},ix=function(t,e,n,o,r){t.ui.registry.addSplitButton(e,{tooltip:o,presets:"color",icon:"forecolor"===e?"text-color":"highlight-bg-color",select:function(e){var o=A.from(function(t,e){var n;return t.dom.getParents(t.selection.getStart(),(function(t){var o;(o=t.style["forecolor"===e?"color":"background-color"])&&(n=n||o)})),n}(t,n));return o.bind((function(t){return function(t){if("transparent"===t)return A.some(Ib(0,0,0,0));var e=Bb.exec(t);if(null!==e)return A.some(Vb(e[1],e[2],e[3],"1"));var n=Rb.exec(t);return null!==n?A.some(Vb(n[1],n[2],n[3],n[4])):A.none()}(t).map((function(t){var n=Db(t).value;return xn(e.toLowerCase(),n)}))})).getOr(!1)},columns:tx(t),fetch:ox(Zb(t),Jb(t)),onAction:function(e){null!==r.get()&&ex(t,n,r.get(),m)},onItemAction:function(o,i){ex(t,n,i,(function(n){r.set(n),function(t,e){t.fire("TextColorChange",e)}(t,{name:e,color:n})}))},onSetup:function(n){null!==r.get()&&rx(n,e,r.get());var o=function(t){t.name===e&&rx(n,t.name,t.color)};return t.on("TextColorChange",o),function(){t.off("TextColorChange",o)}}})},ax=function(t,e,n,o){t.ui.registry.addNestedMenuItem(e,{text:o,icon:"forecolor"===e?"text-color":"highlight-bg-color",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"colorswatch",onAction:function(e){ex(t,n,e.value,m)}}]}})},ux=function(t){return function(e,n){var o=!1,r={colorpicker:n};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:r,onAction:function(t,e){"hex-valid"===e.name&&(o=e.value)},onSubmit:function(n){var r=n.getData().colorpicker;o?(e(A.from(r)),n.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",r]))},onClose:m,onCancel:function(){e(A.none())}})}},cx=function(t,e,n,o,r,i,a,u){var c=Mh(e),l=lx(e,n,o,"color"!==r?"normal":"color",i,a,u);return Eh(t,c,l,o,r)},lx=function(t,e,n,o,r,i,a){return Jf(L(t,(function(u){return"choiceitem"===u.type?(c=u,_e("choicemenuitem",Vh,c)).fold(Ah,(function(c){return A.some(function(t,e,n,o,r,i,a,u){void 0===u&&(u=!0);var c=yb({presets:n,textContent:e?t.text:A.none(),htmlContent:A.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:e?t.shortcut:A.none(),checkMark:e?A.some(hb(a.icons)):A.none(),caret:A.none(),value:t.value},a,u);return Bt(ub({data:cb(t),disabled:t.disabled,getApi:function(t){return{setActive:function(e){Eg.set(t,e)},isActive:function(){return Eg.isOn(t)},isDisabled:function(){return xv.isDisabled(t)},setDisabled:function(e){return xv.set(t,e)}}},onAction:function(e){return o(t.value)},onSetup:function(t){return t.setActive(r),m},triggersSubmenu:!1,itemBehaviours:[]},c,i,a),{toggling:{toggleClass:mh,toggleOnExecute:!1,selected:t.active}})}(c,1===n,o,e,i(u.value),r,a,Mh(t)))})):A.none();var c})))},sx=function(t,e){var n=kh(e);return 1===t?{mode:"menu",moveOnTab:!0}:"auto"===t?{mode:"grid",selector:"."+n.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+("color"===e?"tox-swatches__row":"tox-collection__group")}},fx=ui("cell-over"),dx=ui("cell-execute"),mx=function(t,e,n){var o,r=function(n){return Jo(n,dx,{row:t,col:e})},i=function(t,e){e.stop(),r(t)};return xa({dom:{tag:"div",attributes:(o={role:"button"},o["aria-labelledby"]=n,o)},behaviours:uc([pg("insert-table-picker-cell",[ir(mo(),yg.focus),ir(Mo(),r),ir(yo(),i),ir(Do(),i)]),Eg.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),yg.config({onFocus:function(n){return Jo(n,fx,{row:t,col:e})}})])})},gx=function(t){return Y(t,(function(t){return L(t,ya)}))},px=function(t,e){return ha(e+1+"x"+(t+1))},hx={inserttable:function(t){var e=ui("size-label"),n=function(t,e,n){for(var o=[],r=0;r<e;r++){for(var i=[],a=0;a<n;a++)i.push(mx(r,a,t));o.push(i)}return o}(e,10,10),o=vp({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:e}},components:[ha("0x0")],behaviours:uc([gg.config({})])});return{type:"widget",data:{value:ui("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[Cb.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:gx(n).concat(o.asSpec()),behaviours:uc([pg("insert-table-picker",[lr(fx,(function(t,e,r){var i=r.event.row,a=r.event.col;!function(t,e,n,o,r){for(var i=0;i<o;i++)for(var a=0;a<r;a++)Eg.set(t[i][a],i<=e&&a<=n)}(n,i,a,10,10),gg.set(o.get(t),[px(i,a)])})),lr(dx,(function(e,n,o){t.onAction({numRows:o.event.row+1,numColumns:o.event.col+1}),Ko(e,Po())}))]),cg.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:function(t,e){var n=nx(e.colorinput.getColors(),e.colorinput.hasCustomColors()),o=e.colorinput.getColorCols(),r="color",i=cx(ui("menu-value"),n,(function(e){t.onAction({value:e})}),o,r,ch.CLOSE_ON_EXECUTE,y,e.shared.providers),a=_(_({},i),{markers:kh(r),movement:sx(o,r)});return{type:"widget",data:{value:ui("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[Cb.widget(Kg.sketch(a))]}}},vx=function(t,e,n,o,r,i,a,u){void 0===u&&(u=!0);var c=yb({presets:o,textContent:A.none(),htmlContent:n?t.text.map((function(t){return kb(t,e)})):A.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:A.none(),checkMark:A.none(),caret:A.none(),value:t.value},a.providers,u,t.icon);return ub({data:cb(t),disabled:t.disabled,getApi:p({}),onAction:function(e){return r(t.value,t.meta)},onSetup:p(m),triggersSubmenu:!1,itemBehaviours:wb(t.meta,a)},c,i,a.providers)},bx=function(t){var e=t.text.fold((function(){return{}}),(function(t){return{innerHtml:t}}));return{type:"separator",dom:_({tag:"div",classes:[sh,"tox-collection__group-heading"]},e),components:[]}},xx=function(t,e,n,o){void 0===o&&(o=!0);var r=yb({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:A.none(),ariaLabel:t.text,caret:A.none(),checkMark:A.none(),shortcutContent:t.shortcut},n,o);return ub({data:cb(t),getApi:function(t){return{isDisabled:function(){return xv.isDisabled(t)},setDisabled:function(e){return xv.set(t,e)}}},disabled:t.disabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},r,e,n)},yx=function(t,e,n,o,r){void 0===o&&(o=!0),void 0===r&&(r=!1);var i,a=r?(i=n.icons,{dom:{tag:"div",classes:[ph],innerHtml:xp("chevron-down",i)}}):function(t){return{dom:{tag:"div",classes:[ph],innerHtml:xp("chevron-right",t)}}}(n.icons),u=yb({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:A.none(),ariaLabel:t.text,caret:A.some(a),checkMark:A.none(),shortcutContent:t.shortcut},n,o);return ub({data:cb(t),getApi:function(t){return{isDisabled:function(){return xv.isDisabled(t)},setDisabled:function(e){return xv.set(t,e)}}},disabled:t.disabled,onAction:m,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},u,e,n)},wx=function(t,e,n,o){void 0===o&&(o=!0);var r=yb({iconContent:t.icon,textContent:t.text,htmlContent:A.none(),ariaLabel:t.text,checkMark:A.some(hb(n.icons)),caret:A.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},n,o);return Bt(ub({data:cb(t),disabled:t.disabled,getApi:function(t){return{setActive:function(e){Eg.set(t,e)},isActive:function(){return Eg.isOn(t)},isDisabled:function(){return xv.isDisabled(t)},setDisabled:function(e){return xv.set(t,e)}}},onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},r,e,n),{toggling:{toggleClass:mh,toggleOnExecute:!1,selected:t.active}})},kx=function(t,e){return function(t,e){return Object.prototype.hasOwnProperty.call(t,e)?A.some(t[e]):A.none()}(hx,t.fancytype).map((function(n){return n(t,e)}))},_x=function(t,e,n,o){var r={dom:vb(!1,t.label),optComponents:[A.some({dom:{tag:"div",classes:[vh,bh]},components:_b(t.items,o)})]};return ub({data:cb(_({text:A.none()},t)),disabled:t.disabled,getApi:function(t){return{isDisabled:function(){return xv.isDisabled(t)},setDisabled:function(e){xv.set(t,e),F(Ol(t.element,"*"),(function(n){t.getSystem().getByDom(n).each((function(t){t.hasConfigured(xv)&&xv.set(t,e)}))}))}}},onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:A.from(o.itemBehaviours).getOr([])},r,e,n.providers)};!function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"}(Gb||(Gb={}));var Cx=function(t,e,n,o,r){var i,a=n.shared.providers,u=function(t){return r?_(_({},t),{shortcut:A.none(),icon:t.text.isSome()?A.none():t.icon}):t};switch(t.type){case"menuitem":return(i=t,_e("menuitem",Uh,i)).fold(Ah,(function(t){return A.some(xx(u(t),e,a,o))}));case"nestedmenuitem":return function(t){return _e("nestedmenuitem",Wh,t)}(t).fold(Ah,(function(t){return A.some(yx(u(t),e,a,o,r))}));case"togglemenuitem":return function(t){return _e("togglemenuitem",qh,t)}(t).fold(Ah,(function(t){return A.some(wx(u(t),e,a,o))}));case"separator":return function(t){return _e("separatormenuitem",Up,t)}(t).fold(Ah,(function(t){return A.some(bx(t))}));case"fancymenuitem":return function(t){return _e("fancymenuitem",jh,t)}(t).fold(Ah,(function(t){return kx(u(t),n)}));default:return console.error("Unknown item in general menu",t),A.none()}},Sx=function(t,e,n,o,r,i,a){var u=1===o,c=!u||Mh(t);return Jf(L(t,(function(t){switch(t.type){case"separator":return(o=t,_e("Autocompleter.Separator",Up,o)).fold(Ah,(function(t){return A.some(bx(t))}));case"cardmenuitem":return function(t){return _e("cardmenuitem",Fh,t)}(t).fold(Ah,(function(t){return A.some(_x(_(_({},t),{onAction:function(e){t.onAction(e),n(t.value,t.meta)}}),r,i,{itemBehaviours:wb(t.meta,i),cardText:{matchText:e,highlightOn:a}}))}));default:return function(t){return _e("Autocompleter.Item",Wp,t)}(t).fold(Ah,(function(t){return A.some(vx(t,e,u,"normal",n,r,i,c))}))}var o})))},Ox=function(t,e,n,o,r){var i=Mh(e),a=Jf(L(e,(function(t){var e=function(t){return Cx(t,n,o,function(t){return r?!t.hasOwnProperty("text"):i}(t),r)};return"nestedmenuitem"===t.type&&t.getSubmenuItems().length<=0?e(_(_({},t),{disabled:!0})):e(t)})));return(r?Dh:Eh)(t,i,a,1,"normal")},zx=function(t){return np.singleData(t.value,t)},Tx=function(t,e){var n=sn(A.none()),o=sn(!1),r=xa(op.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:uc([pg("dismissAutocompleter",[ir(jo(),(function(){return u()}))])]),lazySink:e.getSink})),i=function(){return n.get().isSome()},a=function(){i()&&op.hide(r)},u=function(){if(i()){var e=n.get().map((function(t){return t.element}));Mp(e.getOr(dn.fromDom(t.selection.getNode()))).each($r),a(),n.set(A.none()),o.set(!1)}},c=It((function(){return ah(t)})),l=function(n,r){var i=ot(r,(function(t){return A.from(t.columns)})).getOr(1);return Y(r,(function(r){var c=r.items;return Sx(c,r.matchText,(function(e,i){var c=t.selection.getRng();Hp(t.dom,c,n).fold((function(){return console.error("Lost context. Cursor probably moved")}),(function(t){var n=t.range,c={hide:function(){u()},reload:function(t){a(),f(t)}};o.set(!0),r.onAction(c,n,e,i),o.set(!1)}))}),i,ch.BUBBLE_TO_SANDBOX,e,r.highlightOn)}))},s=function(e,n,o,i){e.matchLength=n.text.length;var a=ot(o,(function(t){return A.from(t.columns)})).getOr(1);op.showAt(r,{anchor:"node",root:dn.fromDom(t.getBody()),node:A.from(e.element)},Kg.sketch(function(t,e,n,o){var r=n===Gb.ContentFocus?Bd():Hd(),i=sx(e,o),a=kh(o);return{dom:t.dom,components:t.components,items:t.items,value:t.value,markers:{selectedItem:a.selectedItem,item:a.item},movement:i,fakeFocus:n===Gb.ContentFocus,focusManager:r,menuBehaviours:Yh("auto"!==e?[]:[mr((function(t,e){$h(t,4,a.item).each((function(e){var n=e.numColumns,o=e.numRows;cg.setGridSize(t,o,n)}))}))])}}(Eh("autocompleter-value",!0,i,a,"normal"),a,Gb.ContentFocus,"normal"))),op.getContent(r).each(md.highlightFirst)},f=function(e){(function(e){return n.get().map((function(n){return Hp(t.dom,t.selection.getRng(),n.triggerChar).bind((function(n){return jp(t,c,n,e)}))})).getOrThunk((function(){return Vp(t,c)}))})(e).fold(u,(function(e){!function(e){if(!i()){var r=Tp(t,e.range);n.set(A.some({triggerChar:e.triggerChar,element:r,matchLength:e.text.length})),o.set(!1)}}(e.context),e.lookupData.then((function(t){n.get().map((function(n){var o=e.context;if(n.triggerChar===o.triggerChar){var r=l(o.triggerChar,t);r.length>0?s(n,o,t,r):o.text.length-n.matchLength>=10?u():a()}}))}))}))},d={onKeypress:Sp((function(t){27!==t.which&&f()}),50),cancelIfNecessary:u,isMenuOpen:function(){return op.isOpen(r)},isActive:i,isProcessingAction:o.get,getView:function(){return op.getContent(r)}};!1===t.hasPlugin("rtc")&&Bp(d,t)},Mx=w,Ax=function(t,e,n){return function(t,e,n,o){return Pa(t,e,n,o,!1)}(t,e,Mx,n)},Dx=function(t,e,n){return function(t,e,n,o){return Pa(t,e,n,o,!0)}(t,e,Mx,n)},Ex=Ea,Px=function(t,e,n){return tu(t,e,n).isSome()},Hx=function(t,e){var n=null;return{cancel:function(){null!==n&&(clearTimeout(n),n=null)},schedule:function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];n=setTimeout((function(){t.apply(null,o),n=null}),e)}}},Bx=function(t){var e=t.raw;return void 0===e.touches||1!==e.touches.length?A.none():A.some(e.touches[0])},Rx=function(t){var e=sn(A.none()),n=sn(!1),o=Hx((function(e){t.triggerEvent(Eo(),e),n.set(!0)}),400),r=Yt([{key:ro(),value:function(t){return Bx(t).each((function(r){o.cancel();var i={x:r.clientX,y:r.clientY,target:t.target};o.schedule(t),n.set(!1),e.set(A.some(i))})),A.none()}},{key:io(),value:function(t){return o.cancel(),Bx(t).each((function(t){e.get().each((function(n){(function(t,e){var n=Math.abs(t.clientX-e.x),o=Math.abs(t.clientY-e.y);return n>5||o>5})(t,n)&&e.set(A.none())}))})),A.none()}},{key:ao(),value:function(r){o.cancel();return e.get().filter((function(t){return Yn(t.target,r.target)})).map((function(e){return n.get()?(r.prevent(),!1):t.triggerEvent(Do(),r)}))}}]);return{fireIfReady:function(t,e){return Mt(r,e).bind((function(e){return e(t)}))}}},Ix=function(){return qn().browser.isFirefox()},Nx=ue([Ue("triggerEvent"),Qe("stopBackspace",!0)]),Lx=function(t,e){var n=Se("Getting GUI events settings",Nx,e),o=Rx(n),r=L(["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"].concat(["selectstart","input","contextmenu","change","transitionend","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),(function(e){return Ax(t,e,(function(t){o.fireIfReady(t,e).each((function(e){e&&t.kill()})),n.triggerEvent(e,t)&&t.kill()}))})),i=sn(A.none()),a=Ax(t,"paste",(function(t){o.fireIfReady(t,"paste").each((function(e){e&&t.kill()})),n.triggerEvent("paste",t)&&t.kill(),i.set(A.some(setTimeout((function(){n.triggerEvent(zo(),t)}),0)))})),u=Ax(t,"keydown",(function(t){n.triggerEvent("keydown",t)?t.kill():!0===n.stopBackspace&&function(t){return t.raw.which===gd[0]&&!B(["input","textarea"],vr(t.target))&&!Px(t.target,'[contenteditable="true"]')}(t)&&t.prevent()})),c=function(t,e){return Ix()?Dx(t,"focus",e):Ax(t,"focusin",e)}(t,(function(t){n.triggerEvent("focusin",t)&&t.kill()})),l=sn(A.none()),s=function(t,e){return Ix()?Dx(t,"blur",e):Ax(t,"focusout",e)}(t,(function(t){n.triggerEvent("focusout",t)&&t.kill(),l.set(A.some(setTimeout((function(){n.triggerEvent(Oo(),t)}),0)))}));return{unbind:function(){F(r,(function(t){t.unbind()})),u.unbind(),c.unbind(),s.unbind(),a.unbind(),i.get().each(clearTimeout),l.get().each(clearTimeout)}}},Fx=function(t,e){var n=Mt(t,"target").getOr(e);return sn(n)},Vx=Et([{stopped:[]},{resume:["element"]},{complete:[]}]),jx=function(t,e,n,o,r,i){var a=t(e,o),u=function(t,e){var n=sn(!1),o=sn(!1);return{stop:function(){n.set(!0)},cut:function(){o.set(!0)},isStopped:n.get,isCut:o.get,event:t,setSource:e.set,getSource:e.get}}(n,r);return a.fold((function(){return i.logEventNoHandlers(e,o),Vx.complete()}),(function(t){var n=t.descHandler;return zi(n)(u),u.isStopped()?(i.logEventStopped(e,t.element,n.purpose),Vx.stopped()):u.isCut()?(i.logEventCut(e,t.element,n.purpose),Vx.complete()):zr(t.element).fold((function(){return i.logNoParent(e,t.element,n.purpose),Vx.complete()}),(function(o){return i.logEventResponse(e,t.element,n.purpose),Vx.resume(o)}))}))},Ux=function t(e,n,o,r,i,a){return jx(e,n,o,r,i,a).fold(w,(function(r){return t(e,n,o,r,i,a)}),y)},Wx=function(t,e,n){var o=function(t){var e=sn(!1);return{stop:function(){e.set(!0)},cut:m,isStopped:e.get,isCut:y,event:t,setSource:x("Cannot set source of a broadcasted event"),getSource:x("Cannot get source of a broadcasted event")}}(e);return F(t,(function(t){var e=t.descHandler;zi(e)(o)})),o.isStopped()},qx=function(t,e,n,o,r){var i=Fx(n,o);return Ux(t,e,n,o,i,r)},$x=function(){var t={};return{registerId:function(e,n,o){kt(o,(function(o,r){var i=void 0!==t[r]?t[r]:{};i[n]=function(t,e){return n=v.apply(void 0,[t.handler].concat(e)),o=t.purpose,{cHandler:n,purpose:o};var n,o}(o,e),t[r]=i}))},unregisterId:function(e){kt(t,(function(t,n){t.hasOwnProperty(e)&&delete t[e]}))},filterByType:function(e){return Mt(t,e).map((function(t){return Ot(t,(function(t,e){return function(t,e){return{id:t,descHandler:e}}(e,t)}))})).getOr([])},find:function(e,n,o){var r=Mt(t,n);return Qn(o,(function(t){return function(t,e){return mi(e).fold((function(){return A.none()}),(function(n){return t.bind((function(t){return Mt(t,n)})).map((function(t){return function(t,e){return{element:t,descHandler:e}}(e,t)}))}))}(r,t)}),e)}}},Gx=function(){var t=$x(),e={},n=function(t){var e=t.element;return mi(e).fold((function(){return function(t,e){var n=ui(si+t);return di(e,n),n}("uid-",t.element)}),(function(t){return t}))},o=function(n){mi(n.element).each((function(n){delete e[n],t.unregisterId(n)}))};return{find:function(e,n,o){return t.find(e,n,o)},filter:function(e){return t.filterByType(e)},register:function(r){var i=n(r);Dt(e,i)&&function(t,n){var r=e[n];if(r!==t)throw new Error('The tagId "'+n+'" is already used by: '+oi(r.element)+"\nCannot use it for: "+oi(t.element)+"\nThe conflicting element is"+($i(r.element)?" ":" not ")+"already in the DOM");o(t)}(r,i);var a=[r];t.registerId(a,i,r.events),e[i]=r},unregister:o,getById:function(t){return Mt(e,t)}}},Yx=Xf({name:"Container",factory:function(t){var e=t.dom,n=e.attributes,o=C(e,["attributes"]);return{uid:t.uid,dom:_({tag:"div",attributes:_({role:"presentation"},n)},o),components:t.components,behaviours:qs(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[Qe("components",[]),Ws("containerBehaviours",[]),Qe("events",{}),Qe("domModification",{}),Qe("eventOrder",{})]}),Xx=function(t){var e=function(e){return zr(t.element).fold(w,(function(t){return Yn(e,t)}))},n=Gx(),o=function(t,o){return n.find(e,t,o)},r=Lx(t.element,{triggerEvent:function(t,e){return cu(t,e.target,(function(n){return function(t,e,n,o){return qx(t,e,n,n.target,o)}(o,t,e,n)}))}}),i={debugInfo:p("real"),triggerEvent:function(t,e,n){cu(t,e,(function(r){return qx(o,t,n,e,r)}))},triggerFocus:function(t,e){mi(t).fold((function(){pc(t)}),(function(n){cu(So(),t,(function(n){return function(t,e,n,o,r){var i=Fx(n,o);jx(t,e,n,o,i,r)}(o,So(),{originator:e,kill:m,prevent:m,target:t},t,n),!1}))}))},triggerEscape:function(t,e){i.triggerEvent("keydown",t.element,e.event)},getByUid:function(t){return h(t)},getByDom:function(t){return v(t)},build:xa,addToGui:function(t){c(t)},removeFromGui:function(t){l(t)},addToWorld:function(t){a(t)},removeFromWorld:function(t){u(t)},broadcast:function(t){f(t)},broadcastOn:function(t,e){d(t,e)},broadcastEvent:function(t,e){g(t,e)},isConnected:w},a=function t(e){e.connect(i),yr(e.element)||(n.register(e),F(e.components(),t),i.triggerEvent(Bo(),e.element,{target:e.element}))},u=function t(e){yr(e.element)||(F(e.components(),t),n.unregister(e)),e.disconnect()},c=function(e){is(t,e)},l=function(t){cs(t)},s=function(t){var e=n.filter(To());F(e,(function(e){var n=e.descHandler;zi(n)(t)}))},f=function(t){s({universal:!0,data:t})},d=function(t,e){s({universal:!1,channels:t,data:e})},g=function(t,e){var o=n.filter(t);return Wx(o,e)},h=function(t){return n.getById(t).fold((function(){return ut(new Error('Could not find component with uid: "'+t+'" in system.'))}),at)},v=function(t){var e=mi(t).getOr("not found");return h(e)};return a(t),{root:t,element:t.element,destroy:function(){r.unbind(),qr(t.element)},add:c,remove:l,getByUid:h,getByDom:v,addToWorld:a,removeFromWorld:u,broadcast:f,broadcastOn:d,broadcastEvent:g}},Kx=p([Qe("prefix","form-field"),Ws("fieldBehaviours",[nd,Us])]),Jx=p([_f({schema:[Ne("dom")],name:"label"}),_f({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}}}},schema:[Ne("text")],name:"aria-descriptor"}),wf({factory:{sketch:function(t){var e=$t(t,["factory"]);return t.factory.sketch(e)}},schema:[Ne("factory")],name:"field"})]),Zx=Kf({name:"FormField",configFields:Kx(),partFields:Jx(),factory:function(t,e,n,o){var r=$s(t.fieldBehaviours,[nd.config({find:function(e){return Bf(e,t,"field")}}),Us.config({store:{mode:"manual",getValue:function(t){return nd.getCurrent(t).bind(Us.getValue)},setValue:function(t,e){nd.getCurrent(t).each((function(t){Us.setValue(t,e)}))}}})]),i=nr([mr((function(e,n){var o=If(e,t,["label","field","aria-descriptor"]);o.field().each((function(e){var n=ui(t.prefix);o.label().each((function(t){Kr(t.element,"for",n),Kr(e.element,"id",n)})),o["aria-descriptor"]().each((function(n){var o=ui(t.prefix);Kr(n.element,"id",o),Kr(e.element,"aria-describedby",o)}))}))}))]),a={getField:function(e){return Bf(e,t,"field")},getLabel:function(e){return Bf(e,t,"label")}};return{uid:t.uid,dom:t.dom,components:e,behaviours:r,events:i,apis:a}},apis:{getField:function(t,e){return t.getField(e)},getLabel:function(t,e){return t.getLabel(e)}}}),Qx=Object.freeze({__proto__:null,exhibit:function(t,e){return Oi({attributes:Yt([{key:e.tabAttr,value:"true"}])})}}),ty=[Qe("tabAttr","data-alloy-tabstop")],ey=lc({fields:ty,name:"tabstopping",active:Qx}),ny=tinymce.util.Tools.resolve("tinymce.html.Entities"),oy=function(t,e,n,o){var r=ry(t,e,n,o);return Zx.sketch(r)},ry=function(t,e,n,o){return{dom:iy(n),components:t.toArray().concat([e]),fieldBehaviours:uc(o)}},iy=function(t){return{tag:"div",classes:["tox-form__group"].concat(t)}},ay=function(t,e){return Zx.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:e.translate(t)}})},uy=ui("form-component-change"),cy=ui("form-close"),ly=ui("form-cancel"),sy=ui("form-action"),fy=ui("form-submit"),dy=ui("form-block"),my=ui("form-unblock"),gy=ui("form-tabchange"),py=ui("form-resize"),hy=function(t,e){var n,o,r,i=t.label.map((function(t){return ay(t,e)})),a=function(t){return function(e,n){tu(n.event.target,"[data-collection-item-value]").each((function(o){t(e,n,o,Jr(o,"data-collection-item-value"))}))}},u=a((function(n,o,r,i){o.stop(),e.isDisabled()||Jo(n,sy,{name:t.name,value:i})})),c=[ir(mo(),a((function(t,e,n){pc(n)}))),ir(yo(),u),ir(Do(),u),ir(go(),a((function(t,e,n){Qa(t.element,"."+hh).each((function(t){Vi(t,hh)})),Li(n,hh)}))),ir(po(),a((function(t){Qa(t.element,"."+hh).each((function(t){Vi(t,hh)}))}))),hr(a((function(e,n,o,r){Jo(e,sy,{name:t.name,value:r})})))],l=function(t,e){return L(Ol(t.element,".tox-collection__item"),e)},s=Zx.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(1!==t.columns?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:h},behaviours:uc([xv.config({disabled:e.isDisabled,onDisabled:function(t){l(t,(function(t){Li(t,"tox-collection__item--state-disabled"),Kr(t,"aria-disabled",!0)}))},onEnabled:function(t){l(t,(function(t){Vi(t,"tox-collection__item--state-disabled"),ti(t,"aria-disabled")}))}}),Kv(),gg.config({}),Us.config({store:{mode:"memory",initialValue:[]},onSetValue:function(n,o){!function(n,o){var r=L(o,(function(n){var o=iv.translate(n.text),r=1===t.columns?'<div class="tox-collection__item-label">'+o+"</div>":"",i='<div class="tox-collection__item-icon">'+n.icon+"</div>",a={_:" "," - ":" ","-":" "},u=o.replace(/\_| \- |\-/g,(function(t){return a[t]}));return'<div class="tox-collection__item'+(e.isDisabled()?" tox-collection__item--state-disabled":"")+'" tabindex="-1" data-collection-item-value="'+ny.encodeAllRaw(n.value)+'" title="'+u+'" aria-label="'+u+'">'+i+r+"</div>"})),i="auto"!==t.columns&&t.columns>1?N(r,t.columns):[r],a=L(i,(function(t){return'<div class="tox-collection__group">'+t.join("")+"</div>"}));Yr(n.element,a.join(""))}(n,o),"auto"===t.columns&&$h(n,5,"tox-collection__item").each((function(t){var e=t.numRows,o=t.numColumns;cg.setGridSize(n,e,o)})),Ko(n,py)}}),ey.config({}),cg.config((o=t.columns,r="normal",1===o?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:"auto"===o?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:"color"===r?".tox-swatches__row":".tox-collection__group",cell:"color"===r?".tox-swatch":"."+sh}})),pg("collection-events",c)]),eventOrder:(n={},n[Mo()]=["disabling","alloy.base.behaviour","collection-events"],n)});return oy(i,s,["tox-form__group--collection"],[])},vy=p([Ge("data"),Qe("inputAttributes",{}),Qe("inputStyles",{}),Qe("tag","input"),Qe("inputClasses",[]),vu("onSetValue"),Qe("styles",{}),Qe("eventOrder",{}),Ws("inputBehaviours",[Us,yg]),Qe("selectOnFocus",!0)]),by=function(t){return uc([yg.config({onFocus:t.selectOnFocus?function(t){var e=t.element,n=ua(e);e.dom.setSelectionRange(0,n.length)}:m})])},xy=function(t){return _(_({},by(t)),$s(t.inputBehaviours,[Us.config({store:_(_({mode:"manual"},t.data.map((function(t){return{initialValue:t}})).getOr({})),{getValue:function(t){return ua(t.element)},setValue:function(t,e){ua(t.element)!==e&&ca(t.element,e)}}),onSetValue:t.onSetValue})]))},yy=function(t){return{tag:t.tag,attributes:_({type:"text"},t.inputAttributes),styles:t.inputStyles,classes:t.inputClasses}},wy=Xf({name:"Input",configFields:vy(),factory:function(t,e){return{uid:t.uid,dom:yy(t),components:[],behaviours:xy(t),eventOrder:t.eventOrder}}}),ky={},_y={exports:ky};!function(e,n,r,i){!function(i){if("object"===t(n)&&void 0!==r)r.exports=i();else if("function"==typeof e&&e.amd)e([],i);else{("undefined"!=typeof window?window:void 0!==o?o:"undefined"!=typeof self?self:this).EphoxContactWrapper=i()}}((function(){return function t(e,n,o){function r(u,c){if(!n[u]){if(!e[u]){var l="function"==typeof i&&i;if(!c&&l)return l(u,!0);if(a)return a(u,!0);var s=new Error("Cannot find module '"+u+"'");throw s.code="MODULE_NOT_FOUND",s}var f=n[u]={exports:{}};e[u][0].call(f.exports,(function(t){return r(e[u][1][t]||t)}),f,f.exports,t,e,n,o)}return n[u].exports}for(var a="function"==typeof i&&i,u=0;u<o.length;u++)r(o[u]);return r}({1:[function(t,e,n){var o,r,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function c(t){if(o===setTimeout)return setTimeout(t,0);if((o===a||!o)&&setTimeout)return o=setTimeout,setTimeout(t,0);try{return o(t,0)}catch(e){try{return o.call(null,t,0)}catch(e){return o.call(this,t,0)}}}!function(){try{o="function"==typeof setTimeout?setTimeout:a}catch(t){o=a}try{r="function"==typeof clearTimeout?clearTimeout:u}catch(t){r=u}}();var l,s=[],f=!1,d=-1;function m(){f&&l&&(f=!1,l.length?s=l.concat(s):d=-1,s.length&&g())}function g(){if(!f){var t=c(m);f=!0;for(var e=s.length;e;){for(l=s,s=[];++d<e;)l&&l[d].run();d=-1,e=s.length}l=null,f=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===u||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function h(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new p(t,e)),1!==s.length||f||c(g)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=h,i.addListener=h,i.once=h,i.off=h,i.removeListener=h,i.removeAllListeners=h,i.emit=h,i.prependListener=h,i.prependOnceListener=h,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],2:[function(e,n,o){(function(e){!function(o){var r=setTimeout;function i(){}function a(e){if("object"!==t(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(e,this)}function u(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,a._immediateFn((function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var o;try{o=n(t._value)}catch(r){return void l(e.promise,r)}c(e.promise,o)}else(1===t._state?c:l)(e.promise,t._value)}))):t._deferreds.push(e)}function c(e,n){try{if(n===e)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"===t(n)||"function"==typeof n)){var o=n.then;if(n instanceof a)return e._state=3,e._value=n,void s(e);if("function"==typeof o)return void d((r=o,i=n,function(){r.apply(i,arguments)}),e)}e._state=1,e._value=n,s(e)}catch(u){l(e,u)}var r,i}function l(t,e){t._state=2,t._value=e,s(t)}function s(t){2===t._state&&0===t._deferreds.length&&a._immediateFn((function(){t._handled||a._unhandledRejectionFn(t._value)}));for(var e=0,n=t._deferreds.length;e<n;e++)u(t,t._deferreds[e]);t._deferreds=null}function f(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function d(t,e){var n=!1;try{t((function(t){n||(n=!0,c(e,t))}),(function(t){n||(n=!0,l(e,t))}))}catch(o){if(n)return;n=!0,l(e,o)}}a.prototype.catch=function(t){return this.then(null,t)},a.prototype.then=function(t,e){var n=new this.constructor(i);return u(this,new f(t,e,n)),n},a.all=function(e){var n=Array.prototype.slice.call(e);return new a((function(e,o){if(0===n.length)return e([]);var r=n.length;function i(a,u){try{if(u&&("object"===t(u)||"function"==typeof u)){var c=u.then;if("function"==typeof c)return void c.call(u,(function(t){i(a,t)}),o)}n[a]=u,0==--r&&e(n)}catch(l){o(l)}}for(var a=0;a<n.length;a++)i(a,n[a])}))},a.resolve=function(e){return e&&"object"===t(e)&&e.constructor===a?e:new a((function(t){t(e)}))},a.reject=function(t){return new a((function(e,n){n(t)}))},a.race=function(t){return new a((function(e,n){for(var o=0,r=t.length;o<r;o++)t[o].then(e,n)}))},a._immediateFn="function"==typeof e?function(t){e(t)}:function(t){r(t,0)},a._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},a._setImmediateFn=function(t){a._immediateFn=t},a._setUnhandledRejectionFn=function(t){a._unhandledRejectionFn=t},void 0!==n&&n.exports?n.exports=a:o.Promise||(o.Promise=a)}(this)}).call(this,e("timers").setImmediate)},{timers:3}],3:[function(t,e,n){(function(e,o){var r=t("process/browser.js").nextTick,i=Function.prototype.apply,a=Array.prototype.slice,u={},c=0;function l(t,e){this._id=t,this._clearFn=e}n.setTimeout=function(){return new l(i.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new l(i.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(t){t.close()},l.prototype.unref=l.prototype.ref=function(){},l.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},n.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},n._unrefActive=n.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n.setImmediate="function"==typeof e?e:function(t){var e=c++,o=!(arguments.length<2)&&a.call(arguments,1);return u[e]=!0,r((function(){u[e]&&(o?t.apply(null,o):t.call(null),n.clearImmediate(e))})),e},n.clearImmediate="function"==typeof o?o:function(t){delete u[t]}}).call(this,t("timers").setImmediate,t("timers").clearImmediate)},{"process/browser.js":1,timers:3}],4:[function(t,e,n){var o=t("promise-polyfill"),r="undefined"!=typeof window?window:Function("return this;")();e.exports={boltExport:r.Promise||o}},{"promise-polyfill":2}]},{},[4])(4)}))}(void 0,ky,_y,void 0);var Cy,Sy=_y.exports.boltExport,Oy=function t(e){var n=A.none(),o=[],r=function(t){i()?u(t):o.push(t)},i=function(){return n.isSome()},a=function(t){F(t,u)},u=function(t){n.each((function(e){setTimeout((function(){t(e)}),0)}))};return e((function(t){i()||(n=A.some(t),a(o),o=[])})),{get:r,map:function(e){return t((function(t){r((function(n){t(e(n))}))}))},isReady:i}},zy=Oy,Ty=function(t){setTimeout((function(){throw t}),0)},My=function t(e){var n=function(t){e().then(t,Ty)};return{map:function(n){return t((function(){return e().then(n)}))},bind:function(n){return t((function(){return e().then((function(t){return n(t).toPromise()}))}))},anonBind:function(n){return t((function(){return e().then((function(){return n.toPromise()}))}))},toLazy:function(){return zy(n)},toCached:function(){var n=null;return t((function(){return null===n&&(n=e()),n}))},toPromise:e,get:n}},Ay=function(t){return My((function(){return new Sy(t)}))},Dy=function(t){return My((function(){return Sy.resolve(t)}))},Ey=["input","textarea"],Py=function(t){var e=vr(t);return B(Ey,e)},Hy=function(t,e){var n=e.getRoot(t).getOr(t.element);Vi(n,e.invalidClass),e.notify.each((function(e){Py(t.element)&&Kr(t.element,"aria-invalid",!1),e.getContainer(t).each((function(t){Yr(t,e.validHtml)})),e.onValid(t)}))},By=function(t,e,n,o){var r=e.getRoot(t).getOr(t.element);Li(r,e.invalidClass),e.notify.each((function(e){Py(t.element)&&Kr(t.element,"aria-invalid",!0),e.getContainer(t).each((function(t){Yr(t,o)})),e.onInvalid(t,o)}))},Ry=function(t,e,n){return e.validator.fold((function(){return Dy(at(!0))}),(function(e){return e.validate(t)}))},Iy=function(t,e,n){return e.notify.each((function(e){e.onValidate(t)})),Ry(t,e).map((function(n){return t.getSystem().isConnected()?n.fold((function(n){return By(t,e,0,n),ut(n)}),(function(n){return Hy(t,e),at(n)})):ut("No longer in system")}))},Ny=Object.freeze({__proto__:null,markValid:Hy,markInvalid:By,query:Ry,run:Iy,isInvalid:function(t,e){var n=e.getRoot(t).getOr(t.element);return ji(n,e.invalidClass)}}),Ly=Object.freeze({__proto__:null,events:function(t,e){return t.validator.map((function(e){return nr([ir(e.onEvent,(function(e){Iy(e,t).get(h)}))].concat(e.validateOnLoad?[mr((function(e){Iy(e,t).get(m)}))]:[]))})).getOr({})}}),Fy=[Ne("invalidClass"),Qe("getRoot",A.none),Ze("notify",[Qe("aria","alert"),Qe("getContainer",A.none),Qe("validHtml",""),vu("onValid"),vu("onInvalid"),vu("onValidate")]),Ze("validator",[Ne("validate"),Qe("onEvent","input"),Qe("validateOnLoad",!0)])],Vy=lc({fields:Fy,name:"invalidating",active:Ly,apis:Ny,extra:{validation:function(t){return function(e){var n=Us.getValue(e);return Dy(t(n))}}}}),jy=Object.freeze({__proto__:null,getCoupled:function(t,e,n,o){return n.getOrCreate(t,e,o)}}),Uy=[Le("others",ke(at,Me()))],Wy=Object.freeze({__proto__:null,init:function(){var t={},e=p({});return Ci({readState:e,getOrCreate:function(e,n,o){var r=yt(n.others);if(r)return Mt(t,o).getOrThunk((function(){var r=Mt(n.others,o).getOrDie("No information found for coupled component: "+o)(e),i=e.getSystem().build(r);return t[o]=i,i}));throw new Error("Cannot find coupled component: "+o+". Known coupled components: "+JSON.stringify(r,null,2))}})}}),qy=lc({fields:Uy,name:"coupling",apis:jy,state:Wy}),$y=p("sink"),Gy=p(_f({name:$y(),overrides:p({dom:{tag:"div"},behaviours:uc([ts.config({useFixed:w})]),events:nr([sr(ho()),sr(co()),sr(yo())])})}));!function(t){t[t.HighlightFirst=0]="HighlightFirst",t[t.HighlightNone=1]="HighlightNone"}(Cy||(Cy={}));var Yy,Xy,Ky,Jy=function(t,e){var n=t.getHotspot(e).getOr(e),o="hotspot",r=t.getAnchorOverrides();return t.layouts.fold((function(){return{anchor:o,hotspot:n,overrides:r}}),(function(t){return{anchor:o,hotspot:n,overrides:r,layouts:t}}))},Zy=function(t,e,n,o,r,i,a){var u=function(t,e,n,o,r,i,a){var u=function(t,e,n){return(0,t.fetch)(n).map(e)}(t,e,o),c=nw(o,t);return u.map((function(t){return t.bind((function(t){return A.from(np.sketch(_(_({},i.menu()),{uid:gi(""),data:t,highlightImmediately:a===Cy.HighlightFirst,onOpenMenu:function(t,e){var o=c().getOrDie();ts.position(o,n,e),_s.decloak(r)},onOpenSubmenu:function(t,e,n){var o=c().getOrDie();ts.position(o,{anchor:"submenu",item:e},n),_s.decloak(r)},onRepositionMenu:function(t,e,o){var r=c().getOrDie();ts.position(r,n,e),F(o,(function(t){ts.position(r,{anchor:"submenu",item:t.triggeringItem},t.triggeredMenu)}))},onEscape:function(){return yg.focus(o),_s.close(r),A.some(!0)}})))}))}))}(t,e,Jy(t,n),n,o,r,a);return u.map((function(t){return t.fold((function(){_s.isOpen(o)&&_s.close(o)}),(function(t){_s.cloak(o),_s.open(o,t),i(o)})),o}))},Qy=function(t,e,n,o,r,i,a){return _s.close(o),Dy(o)},tw=function(t,e,n,o,r,i){var a=qy.getCoupled(n,"sandbox");return(_s.isOpen(a)?Qy:Zy)(t,e,n,a,o,r,i)},ew=function(t,e,n){var o=nd.getCurrent(e).getOr(e),r=Aa(t.element);n?Ji(o.element,"min-width",r+"px"):function(t,e){Ma.set(t,e)}(o.element,r)},nw=function(t,e){return t.getSystem().getByUid(e.uid+"-"+$y()).map((function(t){return function(){return at(t)}})).getOrThunk((function(){return e.lazySink.fold((function(){return function(){return ut(new Error("No internal sink is specified, nor could an external sink be found"))}}),(function(e){return function(){return e(t)}}))}))},ow=function(t){_s.getState(t).each((function(t){np.repositionMenus(t)}))},rw=function(t,e,n){var o=eu(),r=nw(e,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:o.id,role:"listbox"}},behaviours:Ys(t.sandboxBehaviours,[Us.config({store:{mode:"memory",initialValue:e}}),_s.config({onOpen:function(r,i){var a=Jy(t,e);o.link(e.element),t.matchWidth&&ew(a.hotspot,i,t.useMinWidth),t.onOpen(a,r,i),void 0!==n&&void 0!==n.onOpen&&n.onOpen(r,i)},onClose:function(t,r){o.unlink(e.element),void 0!==n&&void 0!==n.onClose&&n.onClose(t,r)},isPartOf:function(t,n,o){return ou(n,o)||ou(e,o)},getAttachPoint:function(){return r().getOrDie()}}),nd.config({find:function(t){return _s.getState(t).bind((function(t){return nd.getCurrent(t)}))}}),mc.config({channels:_(_({},Ts({isExtraPart:y})),As({doReposition:ow}))})])}},iw=function(t){var e=qy.getCoupled(t,"sandbox");ow(e)},aw=function(){return[Qe("sandboxClasses",[]),Gs("sandboxBehaviours",[nd,mc,_s,Us])]},uw=p([Ne("dom"),Ne("fetch"),vu("onOpen"),bu("onExecute"),Qe("getHotspot",A.some),Qe("getAnchorOverrides",p({})),Yc(),Ws("dropdownBehaviours",[Eg,qy,cg,yg]),Ne("toggleClass"),Qe("eventOrder",{}),Ge("lazySink"),Qe("matchWidth",!1),Qe("useMinWidth",!1),Ge("role")].concat(aw())),cw=p([kf({schema:[gu()],name:"menu",defaults:function(t){return{onExecute:t.onExecute}}}),Gy()]),lw=Kf({name:"Dropdown",configFields:uw(),partFields:cw(),factory:function(t,e,n,o){var r,i,a=function(t){_s.getState(t).each((function(t){np.highlightPrimary(t)}))},u={expand:function(e){Eg.isOn(e)||tw(t,(function(t){return t}),e,o,m,Cy.HighlightNone).get(m)},open:function(e){Eg.isOn(e)||tw(t,(function(t){return t}),e,o,m,Cy.HighlightFirst).get(m)},isOpen:Eg.isOn,close:function(e){Eg.isOn(e)&&tw(t,(function(t){return t}),e,o,m,Cy.HighlightFirst).get(m)},repositionMenus:function(t){Eg.isOn(t)&&iw(t)}},c=function(t,e){return Zo(t),A.some(!0)};return{uid:t.uid,dom:t.dom,components:e,behaviours:$s(t.dropdownBehaviours,[Eg.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),qy.config({others:{sandbox:function(e){return rw(t,e,{onOpen:function(){return Eg.on(e)},onClose:function(){return Eg.off(e)}})}}}),cg.config({mode:"special",onSpace:c,onEnter:c,onDown:function(t,e){if(lw.isOpen(t)){var n=qy.getCoupled(t,"sandbox");a(n)}else lw.open(t);return A.some(!0)},onEscape:function(t,e){return lw.isOpen(t)?(lw.close(t),A.some(!0)):A.none()}}),yg.config({})]),events:Hg(A.some((function(e){tw(t,(function(t){return t}),e,o,a,Cy.HighlightFirst).get(m)}))),eventOrder:_(_({},t.eventOrder),(r={},r[Mo()]=["disabling","toggling","alloy.base.behaviour"],r)),apis:u,domModification:{attributes:_(_({"aria-haspopup":"true"},t.role.fold((function(){return{}}),(function(t){return{role:t}}))),"button"===t.dom.tag?{type:(i="type",Mt(t.dom,"attributes").bind((function(t){return Mt(t,i)}))).getOr("button")}:{})}}},apis:{open:function(t,e){return t.open(e)},expand:function(t,e){return t.expand(e)},close:function(t,e){return t.close(e)},isOpen:function(t,e){return t.isOpen(e)},repositionMenus:function(t,e){return t.repositionMenus(e)}}}),sw=Object.freeze({__proto__:null,events:function(){return nr([or(ko(),w)])},exhibit:function(){return Oi({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})}}),fw=lc({fields:[],name:"unselecting",active:sw}),dw=ui("color-input-change"),mw=ui("color-swatch-change"),gw=ui("color-picker-cancel"),pw=function(t,e,n){var o=Zx.parts.field({factory:wy,inputClasses:["tox-textfield"],onSetValue:function(t){return Vy.run(t).get(m)},inputBehaviours:uc([xv.config({disabled:e.providers.isDisabled}),Kv(),ey.config({}),Vy.config({invalidClass:"tox-textbox-field-invalid",getRoot:function(t){return zr(t.element)},notify:{onValid:function(t){var e=Us.getValue(t);Jo(t,dw,{color:e})}},validator:{validateOnLoad:!1,validate:function(t){var e=Us.getValue(t);if(0===e.length)return Dy(at(!0));var n=dn.fromTag("span");Ji(n,"background-color",e);var o=na(n,"background-color").fold((function(){return ut("blah")}),(function(t){return at(e)}));return Dy(o)}}})]),selectOnFocus:!1}),r=t.label.map((function(t){return ay(t,e.providers)})),i=function(t,e){Jo(t,mw,{value:e})},a=vp(function(t,e){return lw.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:uc([Zv(e.providers.isDisabled),Kv(),fw.config({}),ey.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:e.getSink,fetch:function(n){return Ay((function(e){return t.fetch(e)})).map((function(o){return A.from(zx(Bt(cx(ui("menu-value"),o,(function(e){t.onItemAction(n,e)}),t.columns,t.presets,ch.CLOSE_ON_EXECUTE,y,e.providers),{movement:sx(t.columns,t.presets)})))}))},parts:{menu:Sh(0,0,t.presets)}})}({dom:{tag:"span",attributes:{"aria-label":e.providers.translate("Color swatch")}},layouts:{onRtl:function(){return[ju,Vu,$u]},onLtr:function(){return[Vu,ju,$u]}},components:[],fetch:ox(n.getColors(),n.hasCustomColors()),columns:n.getColorCols(),presets:"color",onItemAction:function(t,e){a.getOpt(t).each((function(t){"custom"===e?n.colorPicker((function(e){e.fold((function(){return Ko(t,gw)}),(function(e){i(t,e),Qb(e)}))}),"#ffffff"):i(t,"remove"===e?"":e)}))}},e));return Zx.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:r.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[o,a.asSpec()]}]),fieldBehaviours:uc([pg("form-field-events",[ir(dw,(function(e,n){a.getOpt(e).each((function(t){Ji(t.element,"background-color",n.event.color)})),Jo(e,uy,{name:t.name})})),ir(mw,(function(t,e){Zx.getField(t).each((function(n){Us.setValue(n,e.event.value),nd.getCurrent(t).each(yg.focus)}))})),ir(gw,(function(t,e){Zx.getField(t).each((function(e){nd.getCurrent(t).each(yg.focus)}))}))])])})},hw=_f({schema:[Ne("dom")],name:"label"}),vw=function(t){return _f({name:t+"-edge",overrides:function(e){return e.model.manager.edgeActions[t].fold((function(){return{}}),(function(t){return{events:nr([ar(ro(),(function(e,n,o){return t(e,o)}),[e]),ar(co(),(function(e,n,o){return t(e,o)}),[e]),ar(lo(),(function(e,n,o){o.mouseIsDown.get()&&t(e,o)}),[e])])}}))}})},bw=vw("top-left"),xw=vw("top"),yw=vw("top-right"),ww=vw("right"),kw=vw("bottom-right"),_w=vw("bottom"),Cw=vw("bottom-left"),Sw=vw("left"),Ow=wf({name:"thumb",defaults:p({dom:{styles:{position:"absolute"}}}),overrides:function(t){return{events:nr([cr(ro(),t,"spectrum"),cr(io(),t,"spectrum"),cr(ao(),t,"spectrum"),cr(co(),t,"spectrum"),cr(lo(),t,"spectrum"),cr(fo(),t,"spectrum")])}}}),zw=wf({schema:[ln("mouseIsDown",(function(){return sn(!1)}))],name:"spectrum",overrides:function(t){var e=t.model.manager,n=function(n,o){return e.getValueFromEvent(o).map((function(o){return e.setValueFrom(n,t,o)}))};return{behaviours:uc([cg.config({mode:"special",onLeft:function(n){return e.onLeft(n,t)},onRight:function(n){return e.onRight(n,t)},onUp:function(n){return e.onUp(n,t)},onDown:function(n){return e.onDown(n,t)}}),yg.config({})]),events:nr([ir(ro(),n),ir(io(),n),ir(co(),n),ir(lo(),(function(e,o){t.mouseIsDown.get()&&n(e,o)}))])}}}),Tw=[hw,Sw,ww,xw,_w,bw,yw,Cw,kw,Ow,zw],Mw=p("slider.change.value"),Aw=function(t){var e=t.event.raw;if(function(t){return-1!==t.type.indexOf("touch")}(e)){var n=e;return void 0!==n.touches&&1===n.touches.length?A.some(n.touches[0]).map((function(t){return Sa(t.clientX,t.clientY)})):A.none()}var o=e;return void 0!==o.clientX?A.some(o).map((function(t){return Sa(t.clientX,t.clientY)})):A.none()},Dw=function(t){return t.model.minX},Ew=function(t){return t.model.minY},Pw=function(t){return t.model.minX-1},Hw=function(t){return t.model.minY-1},Bw=function(t){return t.model.maxX},Rw=function(t){return t.model.maxY},Iw=function(t){return t.model.maxX+1},Nw=function(t){return t.model.maxY+1},Lw=function(t,e,n){return e(t)-n(t)},Fw=function(t){return Lw(t,Bw,Dw)},Vw=function(t){return Lw(t,Rw,Ew)},jw=function(t){return Fw(t)/2},Uw=function(t){return Vw(t)/2},Ww=function(t){return t.stepSize},qw=function(t){return t.snapToGrid},$w=function(t){return t.snapStart},Gw=function(t){return t.rounded},Yw=function(t,e){return void 0!==t[e+"-edge"]},Xw=function(t){return Yw(t,"left")},Kw=function(t){return Yw(t,"right")},Jw=function(t){return Yw(t,"top")},Zw=function(t){return Yw(t,"bottom")},Qw=function(t){return t.model.value.get()},tk=function(t){return{x:t}},ek=function(t){return{y:t}},nk=function(t,e){return{x:t,y:e}},ok=function(t,e){Jo(t,Mw(),{value:e})},rk=function(t,e,n,o){return t<e?t:t>n?n:t===e?e-1:Math.max(e,t-o)},ik=function(t,e,n,o){return t>n?t:t<e?e:t===n?n+1:Math.min(n,t+o)},ak=function(t,e,n){return Math.max(e,Math.min(n,t))},uk=function(t){var e=t.min,n=t.max,o=t.range,r=t.value,i=t.step,a=t.snap,u=t.snapStart,c=t.rounded,l=t.hasMinEdge,s=t.hasMaxEdge,f=t.minBound,d=t.maxBound,m=t.screenRange,g=l?e-1:e,p=s?n+1:n;if(r<f)return g;if(r>d)return p;var h=function(t,e,n){return Math.min(n,Math.max(t,e))-e}(r,f,d),v=ak(h/m*o+e,g,p);return a&&v>=e&&v<=n?function(t,e,n,o,r){return r.fold((function(){var r=t-e,i=Math.round(r/o)*o;return ak(e+i,e-1,n+1)}),(function(e){var r=(t-e)%o,i=Math.round(r/o),a=Math.floor((t-e)/o),u=Math.floor((n-e)/o),c=e+Math.min(u,a+i)*o;return Math.max(e,c)}))}(v,e,n,i,u):c?Math.round(v):v},ck=function(t){var e=t.min,n=t.max,o=t.range,r=t.value,i=t.hasMinEdge,a=t.hasMaxEdge,u=t.maxBound,c=t.maxOffset,l=t.centerMinEdge,s=t.centerMaxEdge;return r<e?i?0:l:r>n?a?u:s:(r-e)/o*c},lk="top",sk="right",fk="bottom",dk="left",mk=function(t){return t.element.dom.getBoundingClientRect()},gk=function(t,e){return t[e]},pk=function(t){var e=mk(t);return gk(e,dk)},hk=function(t){var e=mk(t);return gk(e,sk)},vk=function(t){var e=mk(t);return gk(e,lk)},bk=function(t){var e=mk(t);return gk(e,fk)},xk=function(t){var e=mk(t);return gk(e,"width")},yk=function(t){var e=mk(t);return gk(e,"height")},wk=function(t,e,n){return(t+e)/2-n},kk=function(t,e){var n=mk(t),o=mk(e),r=gk(n,dk),i=gk(n,sk),a=gk(o,dk);return wk(r,i,a)},_k=function(t,e){var n=mk(t),o=mk(e),r=gk(n,lk),i=gk(n,fk),a=gk(o,lk);return wk(r,i,a)},Ck=function(t,e){Jo(t,Mw(),{value:e})},Sk=function(t){return{x:t}},Ok=function(t,e,n){var o={min:Dw(e),max:Bw(e),range:Fw(e),value:n,step:Ww(e),snap:qw(e),snapStart:$w(e),rounded:Gw(e),hasMinEdge:Xw(e),hasMaxEdge:Kw(e),minBound:pk(t),maxBound:hk(t),screenRange:xk(t)};return uk(o)},zk=function(t){return function(e,n){return function(t,e,n){var o=(t>0?ik:rk)(Qw(n).x,Dw(n),Bw(n),Ww(n));return Ck(e,Sk(o)),A.some(o)}(t,e,n).map(w)}},Tk=function(t,e,n,o,r,i){var a=function(t,e,n,o,r){var i=xk(t),a=o.bind((function(e){return A.some(kk(e,t))})).getOr(0),u=r.bind((function(e){return A.some(kk(e,t))})).getOr(i),c={min:Dw(e),max:Bw(e),range:Fw(e),value:n,hasMinEdge:Xw(e),hasMaxEdge:Kw(e),minBound:pk(t),minOffset:0,maxBound:hk(t),maxOffset:i,centerMinEdge:a,centerMaxEdge:u};return ck(c)}(e,i,n,o,r);return pk(e)-pk(t)+a},Mk=zk(-1),Ak=zk(1),Dk=A.none,Ek=A.none,Pk={"top-left":A.none(),top:A.none(),"top-right":A.none(),right:A.some((function(t,e){ok(t,tk(Iw(e)))})),"bottom-right":A.none(),bottom:A.none(),"bottom-left":A.none(),left:A.some((function(t,e){ok(t,tk(Pw(e)))}))},Hk=Object.freeze({__proto__:null,setValueFrom:function(t,e,n){var o=Ok(t,e,n),r=Sk(o);return Ck(t,r),o},setToMin:function(t,e){var n=Dw(e);Ck(t,Sk(n))},setToMax:function(t,e){var n=Bw(e);Ck(t,Sk(n))},findValueOfOffset:Ok,getValueFromEvent:function(t){return Aw(t).map((function(t){return t.left}))},findPositionOfValue:Tk,setPositionFromValue:function(t,e,n,o){var r=Qw(n),i=Tk(t,o.getSpectrum(t),r.x,o.getLeftEdge(t),o.getRightEdge(t),n),a=Aa(e.element)/2;Ji(e.element,"left",i-a+"px")},onLeft:Mk,onRight:Ak,onUp:Dk,onDown:Ek,edgeActions:Pk}),Bk=function(t,e){Jo(t,Mw(),{value:e})},Rk=function(t){return{y:t}},Ik=function(t,e,n){var o={min:Ew(e),max:Rw(e),range:Vw(e),value:n,step:Ww(e),snap:qw(e),snapStart:$w(e),rounded:Gw(e),hasMinEdge:Jw(e),hasMaxEdge:Zw(e),minBound:vk(t),maxBound:bk(t),screenRange:yk(t)};return uk(o)},Nk=function(t){return function(e,n){return function(t,e,n){var o=(t>0?ik:rk)(Qw(n).y,Ew(n),Rw(n),Ww(n));return Bk(e,Rk(o)),A.some(o)}(t,e,n).map(w)}},Lk=function(t,e,n,o,r,i){var a=function(t,e,n,o,r){var i=yk(t),a=o.bind((function(e){return A.some(_k(e,t))})).getOr(0),u=r.bind((function(e){return A.some(_k(e,t))})).getOr(i),c={min:Ew(e),max:Rw(e),range:Vw(e),value:n,hasMinEdge:Jw(e),hasMaxEdge:Zw(e),minBound:vk(t),minOffset:0,maxBound:bk(t),maxOffset:i,centerMinEdge:a,centerMaxEdge:u};return ck(c)}(e,i,n,o,r);return vk(e)-vk(t)+a},Fk=A.none,Vk=A.none,jk=Nk(-1),Uk=Nk(1),Wk={"top-left":A.none(),top:A.some((function(t,e){ok(t,ek(Hw(e)))})),"top-right":A.none(),right:A.none(),"bottom-right":A.none(),bottom:A.some((function(t,e){ok(t,ek(Nw(e)))})),"bottom-left":A.none(),left:A.none()},qk=Object.freeze({__proto__:null,setValueFrom:function(t,e,n){var o=Ik(t,e,n),r=Rk(o);return Bk(t,r),o},setToMin:function(t,e){var n=Ew(e);Bk(t,Rk(n))},setToMax:function(t,e){var n=Rw(e);Bk(t,Rk(n))},findValueOfOffset:Ik,getValueFromEvent:function(t){return Aw(t).map((function(t){return t.top}))},findPositionOfValue:Lk,setPositionFromValue:function(t,e,n,o){var r=Qw(n),i=Lk(t,o.getSpectrum(t),r.y,o.getTopEdge(t),o.getBottomEdge(t),n),a=_a(e.element)/2;Ji(e.element,"top",i-a+"px")},onLeft:Fk,onRight:Vk,onUp:jk,onDown:Uk,edgeActions:Wk}),$k=function(t,e){Jo(t,Mw(),{value:e})},Gk=function(t,e){return{x:t,y:e}},Yk=function(t,e){return function(n,o){return function(t,e,n,o){var r=t>0?ik:rk,i=e?Qw(o).x:r(Qw(o).x,Dw(o),Bw(o),Ww(o)),a=e?r(Qw(o).y,Ew(o),Rw(o),Ww(o)):Qw(o).y;return $k(n,Gk(i,a)),A.some(i)}(t,e,n,o).map(w)}},Xk=Yk(-1,!1),Kk=Yk(1,!1),Jk=Yk(-1,!0),Zk=Yk(1,!0),Qk={"top-left":A.some((function(t,e){ok(t,nk(Pw(e),Hw(e)))})),top:A.some((function(t,e){ok(t,nk(jw(e),Hw(e)))})),"top-right":A.some((function(t,e){ok(t,nk(Iw(e),Hw(e)))})),right:A.some((function(t,e){ok(t,nk(Iw(e),Uw(e)))})),"bottom-right":A.some((function(t,e){ok(t,nk(Iw(e),Nw(e)))})),bottom:A.some((function(t,e){ok(t,nk(jw(e),Nw(e)))})),"bottom-left":A.some((function(t,e){ok(t,nk(Pw(e),Nw(e)))})),left:A.some((function(t,e){ok(t,nk(Pw(e),Uw(e)))}))},t_=Object.freeze({__proto__:null,setValueFrom:function(t,e,n){var o=Ok(t,e,n.left),r=Ik(t,e,n.top),i=Gk(o,r);return $k(t,i),i},setToMin:function(t,e){var n=Dw(e),o=Ew(e);$k(t,Gk(n,o))},setToMax:function(t,e){var n=Bw(e),o=Rw(e);$k(t,Gk(n,o))},getValueFromEvent:function(t){return Aw(t)},setPositionFromValue:function(t,e,n,o){var r=Qw(n),i=Tk(t,o.getSpectrum(t),r.x,o.getLeftEdge(t),o.getRightEdge(t),n),a=Lk(t,o.getSpectrum(t),r.y,o.getTopEdge(t),o.getBottomEdge(t),n),u=Aa(e.element)/2,c=_a(e.element)/2;Ji(e.element,"left",i-u+"px"),Ji(e.element,"top",a-c+"px")},onLeft:Xk,onRight:Kk,onUp:Jk,onDown:Zk,edgeActions:Qk}),e_=Kf({name:"Slider",configFields:[Qe("stepSize",1),Qe("onChange",m),Qe("onChoose",m),Qe("onInit",m),Qe("onDragStart",m),Qe("onDragEnd",m),Qe("snapToGrid",!1),Qe("rounded",!0),Ge("snapStart"),Le("model",Te("mode",{x:[Qe("minX",0),Qe("maxX",100),ln("value",(function(t){return sn(t.mode.minX)})),Ne("getInitialValue"),wu("manager",Hk)],y:[Qe("minY",0),Qe("maxY",100),ln("value",(function(t){return sn(t.mode.minY)})),Ne("getInitialValue"),wu("manager",qk)],xy:[Qe("minX",0),Qe("maxX",100),Qe("minY",0),Qe("maxY",100),ln("value",(function(t){return sn({x:t.mode.minX,y:t.mode.minY})})),Ne("getInitialValue"),wu("manager",t_)]})),Ws("sliderBehaviours",[cg,Us]),ln("mouseIsDown",(function(){return sn(!1)}))],partFields:Tw,factory:function(t,e,n,o){var r,i=function(e){return Rf(e,t,"thumb")},a=function(e){return Rf(e,t,"spectrum")},u=function(e){return Bf(e,t,"left-edge")},c=function(e){return Bf(e,t,"right-edge")},l=function(e){return Bf(e,t,"top-edge")},s=function(e){return Bf(e,t,"bottom-edge")},f=t.model,d=f.manager,m=function(e,n){d.setPositionFromValue(e,n,t,{getLeftEdge:u,getRightEdge:c,getTopEdge:l,getBottomEdge:s,getSpectrum:a})},g=function(t,e){f.value.set(e);var n=i(t);m(t,n)},p=function(e){var n=t.mouseIsDown.get();t.mouseIsDown.set(!1),n&&Bf(e,t,"thumb").each((function(n){var o=f.value.get();t.onChoose(e,n,o)}))},h=function(e,n){n.stop(),t.mouseIsDown.set(!0),t.onDragStart(e,i(e))},v=function(e,n){n.stop(),t.onDragEnd(e,i(e)),p(e)};return{uid:t.uid,dom:t.dom,components:e,behaviours:$s(t.sliderBehaviours,[cg.config({mode:"special",focusIn:function(e){return Bf(e,t,"spectrum").map(cg.focusIn).map(w)}}),Us.config({store:{mode:"manual",getValue:function(t){return f.value.get()}}}),mc.config({channels:(r={},r[Os()]={onReceive:p},r)})]),events:nr([ir(Mw(),(function(e,n){!function(e,n){g(e,n);var o=i(e);t.onChange(e,o,n),A.some(!0)}(e,n.event.value)})),mr((function(e,n){var o=f.getInitialValue();f.value.set(o);var r=i(e);m(e,r);var u=a(e);t.onInit(e,r,u,f.value.get())})),ir(ro(),h),ir(ao(),v),ir(co(),h),ir(fo(),v)]),apis:{resetToMin:function(e){d.setToMin(e,t)},resetToMax:function(e){d.setToMax(e,t)},setValue:g,refresh:m},domModification:{styles:{position:"relative"}}}},apis:{setValue:function(t,e,n){t.setValue(e,n)},resetToMin:function(t,e){t.resetToMin(e)},resetToMax:function(t,e){t.resetToMax(e)},refresh:function(t,e){t.refresh(e)}}}),n_=function(t,e,n){return{hue:t,saturation:e,value:n}},o_=function(t){var e,n=0,o=0,r=t.red/255,i=t.green/255,a=t.blue/255,u=Math.min(r,Math.min(i,a)),c=Math.max(r,Math.max(i,a));return u===c?n_(0,0,100*(o=u)):(n=60*((n=r===u?3:a===u?1:5)-(r===u?i-a:a===u?r-i:a-r)/(c-u)),e=(c-u)/c,o=c,n_(Math.round(n),Math.round(100*e),Math.round(100*o)))},r_=function(t){return Db(Lb(t))},i_=ui("rgb-hex-update"),a_=ui("slider-update"),u_=ui("palette-update"),c_="form",l_=[Ws("formBehaviours",[Us])],s_=function(t){return"<alloy.field."+t+">"},f_=function(t,e){return{uid:t.uid,dom:t.dom,components:e,behaviours:$s(t.formBehaviours,[Us.config({store:{mode:"manual",getValue:function(e){var n=Nf(e,t);return _t(n,(function(t,e){return t().bind((function(t){var n,o,r=nd.getCurrent(t);return n=r,o=new Error("Cannot find a current component to extract the value from for form part '"+e+"': "+oi(t.element)),n.fold((function(){return ut(o)}),at)})).map(Us.getValue)}))},setValue:function(e,n){kt(n,(function(n,o){Bf(e,t,o).each((function(t){nd.getCurrent(t).each((function(t){Us.setValue(t,n)}))}))}))}}})]),apis:{getField:function(e,n){return Bf(e,t,n).bind(nd.getCurrent)}}}},d_={getField:ki((function(t,e,n){return t.getField(e,n)})),sketch:function(t){var e,n=(e=[],{field:function(t,n){return e.push(t),Af(c_,s_(t),n)},record:function(){return e}}),o=t(n),r=n.record(),i=L(r,(function(t){return wf({name:t,pname:s_(t)})}));return qf(c_,l_,i,f_,o)}},m_=ui("valid-input"),g_=ui("invalid-input"),p_=ui("validating-input"),h_="colorcustom.rgb.",v_=function(t,e,n,o){var r=function(n,o){return Vy.config({invalidClass:e("invalid"),notify:{onValidate:function(t){Jo(t,p_,{type:n})},onValid:function(t){Jo(t,m_,{type:n,value:Us.getValue(t)})},onInvalid:function(t){Jo(t,g_,{type:n,value:Us.getValue(t)})}},validator:{validate:function(e){var n=Us.getValue(e),r=o(n)?at(!0):ut(t("aria.input.invalid"));return Dy(r)},validateOnLoad:!1}})},i=function(n,o,i,a,u){var c=t("colorcustom.rgb.range"),l=Zx.parts.label({dom:{tag:"label",innerHtml:i,attributes:{"aria-label":a}}}),s=Zx.parts.field({data:u,factory:wy,inputAttributes:_({type:"text"},"hex"===o?{"aria-live":"polite"}:{}),inputClasses:[e("textfield")],inputBehaviours:uc([r(o,n),ey.config({})]),onSetValue:function(t){Vy.isInvalid(t)&&Vy.run(t).get(m)}}),f=[l,s],d="hex"!==o?[Zx.parts["aria-descriptor"]({text:c})]:[];return{dom:{tag:"div",attributes:{role:"presentation"}},components:f.concat(d)}},a=function(t,e){var n=e.red,o=e.green,r=e.blue;Us.setValue(t,{red:n,green:o,blue:r})},u=vp({dom:{tag:"div",classes:[e("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),c=function(t,e){u.getOpt(t).each((function(t){Ji(t.element,"background-color","#"+e.value)}))},l=Xf({factory:function(){var r={red:sn(A.some(255)),green:sn(A.some(255)),blue:sn(A.some(255)),hex:sn(A.some("ffffff"))},l=function(t){return r[t].get()},s=function(t,e){r[t].set(e)},f=function(t){var e=t.red,n=t.green,o=t.blue;s("red",A.some(e)),s("green",A.some(n)),s("blue",A.some(o))},d=function(t,e){var n=e.event;"hex"!==n.type?s(n.type,A.none()):o(t)},m=function(t,e,n){var o=parseInt(n,10);s(e,A.some(o)),l("red").bind((function(t){return l("green").bind((function(e){return l("blue").map((function(n){return Ib(t,e,n,1)}))}))})).each((function(e){var n=function(t,e){var n=Db(e);return d_.getField(t,"hex").each((function(e){yg.isFocused(e)||Us.setValue(t,{hex:n.value})})),n}(t,e);Jo(t,i_,{hex:n}),c(t,n)}))},g=function(t,e){var o=e.event;!function(t){return"hex"===t.type}(o)?m(t,o.type,o.value):function(t,e){n(t);var o=Sb(e);s("hex",A.some(e));var r=Fb(o);a(t,r),f(r),Jo(t,i_,{hex:o}),c(t,o)}(t,o.value)},p=function(e){return{label:t(h_+e+".label"),description:t(h_+e+".description")}},h=p("red"),v=p("green"),b=p("blue"),x=p("hex");return Bt(d_.sketch((function(n){return{dom:{tag:"form",classes:[e("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[n.field("red",Zx.sketch(i(Nb,"red",h.label,h.description,255))),n.field("green",Zx.sketch(i(Nb,"green",v.label,v.description,255))),n.field("blue",Zx.sketch(i(Nb,"blue",b.label,b.description,255))),n.field("hex",Zx.sketch(i(Tb,"hex",x.label,x.description,"ffffff"))),u.asSpec()],formBehaviours:uc([Vy.config({invalidClass:e("form-invalid")}),pg("rgb-form-events",[ir(m_,g),ir(g_,d),ir(p_,d)])])}})),{apis:{updateHex:function(t,e){Us.setValue(t,{hex:e.value}),function(t,e){var n=Fb(e);a(t,n),f(n)}(t,e),c(t,e)}}})},name:"RgbForm",configFields:[],apis:{updateHex:function(t,e,n){t.updateHex(e,n)}},extraApis:{}});return l},b_=function(t,e){var n=e_.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[e("sv-palette-spectrum")]}}),o=e_.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[e("sv-palette-thumb")],innerHtml:"<div class="+e("sv-palette-inner-thumb")+' role="presentation"></div>'}}),r=function(t,e){var n=t.width,o=t.height,r=t.getContext("2d");if(null!==r){r.fillStyle=e,r.fillRect(0,0,n,o);var i=r.createLinearGradient(0,0,n,0);i.addColorStop(0,"rgba(255,255,255,1)"),i.addColorStop(1,"rgba(255,255,255,0)"),r.fillStyle=i,r.fillRect(0,0,n,o);var a=r.createLinearGradient(0,0,0,o);a.addColorStop(0,"rgba(0,0,0,0)"),a.addColorStop(1,"rgba(0,0,0,1)"),r.fillStyle=a,r.fillRect(0,0,n,o)}},i=Xf({factory:function(t){var i=p({x:0,y:0}),a=uc([nd.config({find:A.some}),yg.config({})]);return e_.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[e("sv-palette")]},model:{mode:"xy",getInitialValue:i},rounded:!1,components:[n,o],onChange:function(t,e,n){Jo(t,u_,{value:n})},onInit:function(t,e,n,o){r(n.element.dom,jb(Ub))},sliderBehaviours:a})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:function(t,e,n){!function(t,e){var n=t.components()[0].element.dom,o=n_(e,100,100),i=Lb(o);r(n,jb(i))}(e,n)},setThumb:function(t,e,n){!function(t,e){var n=o_(Fb(e));e_.setValue(t,{x:n.saturation,y:100-n.value})}(e,n)}},extraApis:{}});return i},x_=function(t,e){var n=Xf({name:"ColourPicker",configFields:[Ne("dom"),Qe("onValidHex",m),Qe("onInvalidHex",m)],factory:function(n){var o,r=v_(t,e,n.onValidHex,n.onInvalidHex),i=b_(0,e),a=function(t){return 100-t/360*100},u={paletteRgba:sn(Ub),paletteHue:sn(0)},c=vp(function(t,e){var n=e_.parts.spectrum({dom:{tag:"div",classes:[e("hue-slider-spectrum")],attributes:{role:"presentation"}}}),o=e_.parts.thumb({dom:{tag:"div",classes:[e("hue-slider-thumb")],attributes:{role:"presentation"}}});return e_.sketch({dom:{tag:"div",classes:[e("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:p({y:0})},components:[n,o],sliderBehaviours:uc([yg.config({})]),onChange:function(t,e,n){Jo(t,a_,{value:n})}})}(0,e)),l=vp(i.sketch({})),s=vp(r.sketch({})),f=function(t,e,n){l.getOpt(t).each((function(t){i.setHue(t,n)}))},d=function(t,e){s.getOpt(t).each((function(t){r.updateHex(t,e)}))},m=function(t,e,n){c.getOpt(t).each((function(t){e_.setValue(t,{y:a(n)})}))},g=function(t,e){l.getOpt(t).each((function(t){i.setThumb(t,e)}))},h=function(t,e,n,o){!function(t,e){var n=Fb(t);u.paletteRgba.set(n),u.paletteHue.set(e)}(e,n),F(o,(function(o){o(t,e,n)}))};return{uid:n.uid,dom:n.dom,components:[l.asSpec(),c.asSpec(),s.asSpec()],behaviours:uc([pg("colour-picker-events",[ir(i_,(o=[f,m,g],function(t,e){var n=e.event.hex,r=function(t){return o_(Fb(t))}(n);h(t,n,r.hue,o)})),ir(u_,function(){var t=[d];return function(e,n){var o=n.event.value,r=u.paletteHue.get(),i=n_(r,o.x,100-o.y),a=r_(i);h(e,a,r,t)}}()),ir(a_,function(){var t=[f,d];return function(e,n){var o=function(t){return(100-t)/100*360}(n.event.value.y),r=u.paletteRgba.get(),i=o_(r),a=n_(o,i.saturation,i.value),c=r_(a);h(e,c,o,t)}}())]),nd.config({find:function(t){return s.getOpt(t)}}),cg.config({mode:"acyclic"})])}}});return n},y_=function(){return nd.config({find:A.some})},w_=function(t){return nd.config({find:t.getOpt})},k_=function(t){return nd.config({find:function(e){return Ar(e.element,t).bind((function(t){return e.getSystem().getByDom(t).toOptional()}))}})},__={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.sb.saturation":"Saturation","colorcustom.sb.brightness":"Brightness","colorcustom.sb.picker":"Saturation and Brightness Picker","colorcustom.sb.palette":"Saturation and Brightness Palette","colorcustom.sb.instructions":"Use arrow keys to select saturation and brightness, on x and y axes","colorcustom.hue.hue":"Hue","colorcustom.hue.slider":"Hue Slider","colorcustom.hue.palette":"Hue Palette","colorcustom.hue.instructions":"Use arrow keys to select a hue","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},C_=function(t){return function(t){return __[t]}(t)},S_=tinymce.util.Tools.resolve("tinymce.Resource"),O_=tinymce.util.Tools.resolve("tinymce.util.Tools"),z_=ce([Qe("preprocess",h),Qe("postprocess",h)]),T_=function(t,e,n){return Us.config(Bt({store:{mode:"manual",getValue:e,setValue:n}},t.map((function(t){return{store:{initialValue:t}}})).getOr({})))},M_=function(t,e,n){return T_(t,(function(t){return e(t.element)}),(function(t,e){return n(t.element,e)}))},A_=function(t,e){var n=Se("RepresentingConfigs.memento processors",z_,e);return Us.config({store:{mode:"manual",getValue:function(e){var o=t.get(e),r=Us.getValue(o);return n.postprocess(r)},setValue:function(e,o){var r=n.preprocess(o),i=t.get(e);Us.setValue(i,r)}}})},D_=T_,E_=function(t){return M_(t,Gr,Yr)},P_=function(t){return Us.config({store:{mode:"memory",initialValue:t}})},H_=function(t,e){var n=function(t,e){e.stop()},o=function(t){return function(e,n){F(t,(function(t){t(e,n)}))}},r=function(t,e){if(!xv.isDisabled(t)){var n=e.event.raw;a(t,n.dataTransfer.files)}},i=function(t,e){var n=e.event.raw.target;a(t,n.files)},a=function(n,o){Us.setValue(n,function(t,e){var n=O_.explode(e.getSetting("images_file_types","jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp","string"));return j(nt(t),(function(t){return R(n,(function(e){return yn(t.name.toLowerCase(),"."+e.toLowerCase())}))}))}(o,e)),Jo(n,uy,{name:t.name})},u=vp({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:uc([pg("input-file-events",[sr(yo()),sr(Do())])])}),c=t.label.map((function(t){return ay(t,e)})),l=Zx.parts.field({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:uc([P_([]),y_(),xv.config({}),Eg.config({toggleClass:"dragenter",toggleOnExecute:!1}),pg("dropzone-events",[ir("dragenter",o([n,Eg.toggle])),ir("dragleave",o([n,Eg.toggle])),ir("dragover",n),ir("drop",o([n,r])),ir(xo(),i)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p",innerHtml:e.translate("Drop an image here")}},hp.sketch({dom:{tag:"button",innerHtml:e.translate("Browse for an image"),styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[u.asSpec()],action:function(t){u.get(t).element.dom.click()},buttonBehaviours:uc([ey.config({}),Zv(e.isDisabled),Kv()])})]}]}}}});return oy(c,l,["tox-form__group--stretched"],[])},B_=ui("alloy-fake-before-tabstop"),R_=ui("alloy-fake-after-tabstop"),I_=function(t){return{dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:uc([yg.config({ignore:!0}),ey.config({})])}},N_=function(t){return{dom:{tag:"div",classes:["tox-navobj"]},components:[I_([B_]),t,I_([R_])],behaviours:uc([k_(1)])}},L_=function(t,e){Jo(t,ho(),{raw:{which:9,shiftKey:e}})},F_=function(t,e){var n=e.element;ji(n,B_)?L_(t,!0):ji(n,R_)&&L_(t,!1)},V_=function(t){return Px(t,["."+B_,"."+R_].join(","),y)},j_=!(qn().browser.isIE()||qn().browser.isEdge()),U_=function(t,e){var n=j_&&t.sandboxed,o=_(_({},t.label.map((function(t){return{title:t}})).getOr({})),n?{sandbox:"allow-scripts allow-same-origin"}:{}),r=function(t){var e=sn("");return{getValue:function(t){return e.get()},setValue:function(n,o){if(t)Kr(n.element,"srcdoc",o);else{Kr(n.element,"src","javascript:''");var r=n.element.dom.contentWindow.document;r.open(),r.write(o),r.close()}e.set(o)}}}(n),i=t.label.map((function(t){return ay(t,e)})),a=Zx.parts.field({factory:{sketch:function(t){return N_({uid:t.uid,dom:{tag:"iframe",attributes:o},behaviours:uc([ey.config({}),yg.config({}),D_(A.none(),r.getValue,r.setValue)])})}}});return oy(i,a,["tox-form__group--stretched"],[])},W_=function(t,e){return G_(document.createElement("canvas"),t,e)},q_=function(t){var e=W_(t.width,t.height);return $_(e).drawImage(t,0,0),e},$_=function(t){return t.getContext("2d")},G_=function(t,e,n){return t.width=e,t.height=n,t},Y_=function(t){return t.naturalWidth||t.width},X_=function(t){return t.naturalHeight||t.height},K_=window.Promise?window.Promise:function(){var e=function(e){if("object"!==t(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],f(e,r(u,this),r(c,this))},n=window,o=e.immediateFn||"function"==typeof n.setImmediate&&n.setImmediate||function(t){return setTimeout(t,1)},r=function(t,e){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return t.apply(e,n)}},i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function a(t){var e=this;null!==this._state?o((function(){var n=e._state?t.onFulfilled:t.onRejected;if(null!==n){var o;try{o=n(e._value)}catch(r){return void t.reject(r)}t.resolve(o)}else(e._state?t.resolve:t.reject)(e._value)})):this._deferreds.push(t)}function u(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===t(e)||"function"==typeof e)){var n=e.then;if("function"==typeof n)return void f(r(n,e),r(u,this),r(c,this))}this._state=!0,this._value=e,l.call(this)}catch(o){c.call(this,o)}}function c(t){this._state=!1,this._value=t,l.call(this)}function l(){for(var t=0,e=this._deferreds;t<e.length;t++){var n=e[t];a.call(this,n)}this._deferreds=[]}function s(t,e,n,o){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=o}var f=function(t,e,n){var o=!1;try{t((function(t){o||(o=!0,e(t))}),(function(t){o||(o=!0,n(t))}))}catch(r){if(o)return;o=!0,n(r)}};return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.then=function(t,n){var o=this;return new e((function(e,r){a.call(o,new s(t,n,e,r))}))},e.all=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var r=Array.prototype.slice.call(1===n.length&&i(n[0])?n[0]:n);return new e((function(e,n){if(0===r.length)return e([]);for(var o=r.length,i=function i(a,u){try{if(u&&("object"===t(u)||"function"==typeof u)){var c=u.then;if("function"==typeof c)return void c.call(u,(function(t){i(a,t)}),n)}r[a]=u,0==--o&&e(r)}catch(l){n(l)}},a=0;a<r.length;a++)i(a,r[a])}))},e.resolve=function(n){return n&&"object"===t(n)&&n.constructor===e?n:new e((function(t){t(n)}))},e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var o=0,r=t;o<r.length;o++){r[o].then(e,n)}}))},e}(),J_=function(t){return new K_((function(e,n){(function(t){var e=t.split(","),n=/data:([^;]+)/.exec(e[0]);if(!n)return A.none();for(var o=n[1],r=e[1],i=1024,a=atob(r),u=a.length,c=Math.ceil(u/i),l=new Array(c),s=0;s<c;++s){for(var f=s*i,d=Math.min(f+i,u),m=new Array(d-f),g=f,p=0;g<d;++p,++g)m[p]=a[g].charCodeAt(0);l[s]=new Uint8Array(m)}return A.some(new Blob(l,{type:o}))})(t).fold((function(){n("uri is not base64: "+t)}),e)}))},Z_=function(t,e,n){return e=e||"image/png",s(HTMLCanvasElement.prototype.toBlob)?new K_((function(o,r){t.toBlob((function(t){t?o(t):r()}),e,n)})):J_(t.toDataURL(e,n))},Q_=function(t){return function(t){return new K_((function(e,n){var o=URL.createObjectURL(t),r=new Image,i=function(){r.removeEventListener("load",a),r.removeEventListener("error",u)},a=function(){i(),e(r)},u=function(){i(),n("Unable to load data of type "+t.type+": "+o)};r.addEventListener("load",a),r.addEventListener("error",u),r.src=o,r.complete&&setTimeout(a,0)}))}(t).then((function(t){tC(t);var e=W_(Y_(t),X_(t));return $_(e).drawImage(t,0,0),e}))},tC=function(t){URL.revokeObjectURL(t.src)},eC=function(t,e,n){var o=e.type,r=p(o),i=p(n),a=function(e,n){return t.then((function(t){return function(t,e,n){return e=e||"image/png",t.toDataURL(e,n)}(t,e,n)}))};return{getType:r,toBlob:function(){return K_.resolve(e)},toDataURL:i,toBase64:function(){return n.split(",")[1]},toAdjustedBlob:function(e,n){return t.then((function(t){return Z_(t,e,n)}))},toAdjustedDataURL:a,toAdjustedBase64:function(t,e){return a(t,e).then((function(t){return t.split(",")[1]}))},toCanvas:function(){return t.then(q_)}}},nC=function(t){return function(t){return new K_((function(e){var n=new FileReader;n.onloadend=function(){e(n.result)},n.readAsDataURL(t)}))}(t).then((function(e){return eC(Q_(t),t,e)}))},oC=function(t,e){return Z_(t,e).then((function(e){return eC(K_.resolve(t),e,t.toDataURL())}))},rC=function(t,e,n){var o="string"==typeof t?parseFloat(t):t;return o>n?o=n:o<e&&(o=e),o},iC=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],aC=function(t,e){for(var n,o=[],r=new Array(25),i=0;i<5;i++){for(var a=0;a<5;a++)o[a]=e[a+5*i];for(a=0;a<5;a++){n=0;for(var u=0;u<5;u++)n+=t[a+5*u]*o[u];r[a+5*i]=n}}return r},uC=function(t,e){return t.toCanvas().then((function(n){return cC(n,t.getType(),e)}))},cC=function(t,e,n){var o=$_(t),r=function(t,e){for(var n,o,r,i,a=t.data,u=e[0],c=e[1],l=e[2],s=e[3],f=e[4],d=e[5],m=e[6],g=e[7],p=e[8],h=e[9],v=e[10],b=e[11],x=e[12],y=e[13],w=e[14],k=e[15],_=e[16],C=e[17],S=e[18],O=e[19],z=0;z<a.length;z+=4)n=a[z],o=a[z+1],r=a[z+2],i=a[z+3],a[z]=n*u+o*c+r*l+i*s+f,a[z+1]=n*d+o*m+r*g+i*p+h,a[z+2]=n*v+o*b+r*x+i*y+w,a[z+3]=n*k+o*_+r*C+i*S+O;return t}(o.getImageData(0,0,t.width,t.height),n);return o.putImageData(r,0,0),oC(t,e)},lC=function(t,e,n){var o=$_(t),r=o.getImageData(0,0,t.width,t.height),i=o.getImageData(0,0,t.width,t.height);return i=function(t,e,n){for(var o=function(t,e,n){return t>n?t=n:t<e&&(t=e),t},r=Math.round(Math.sqrt(n.length)),i=Math.floor(r/2),a=t.data,u=e.data,c=t.width,l=t.height,s=0;s<l;s++)for(var f=0;f<c;f++){for(var d=0,m=0,g=0,p=0;p<r;p++)for(var h=0;h<r;h++){var v=o(f+h-i,0,c-1),b=4*(o(s+p-i,0,l-1)*c+v),x=n[p*r+h];d+=a[b]*x,m+=a[b+1]*x,g+=a[b+2]*x}var y=4*(s*c+f);u[y]=o(d,0,255),u[y+1]=o(m,0,255),u[y+2]=o(g,0,255)}return e}(r,i,n),o.putImageData(i,0,0),oC(t,e)},sC=function(t){return function(e,n){return uC(e,t([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],n))}},fC=function(t){return function(e){return uC(e,t)}}([-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0,0,0,0,0,1]),dC=sC((function(t,e){return e=rC(255*e,-255,255),aC(t,[1,0,0,0,e,0,1,0,0,e,0,0,1,0,e,0,0,0,1,0,0,0,0,0,1])})),mC=sC((function(t,e){var n;return e=rC(e,-1,1),n=(e*=100)<0?127+e/100*127:127*(n=0===(n=e%1)?iC[e]:iC[Math.floor(e)]*(1-n)+iC[Math.floor(e)+1]*n)+127,aC(t,[n/127,0,0,0,.5*(127-n),0,n/127,0,0,.5*(127-n),0,0,n/127,0,.5*(127-n),0,0,0,1,0,0,0,0,0,1])})),gC=function(t,e,n,o){return uC(t,function(t,e,n,o){return e=rC(e,0,2),n=rC(n,0,2),o=rC(o,0,2),aC(t,[e,0,0,0,0,0,n,0,0,0,0,0,o,0,0,0,0,0,1,0,0,0,0,0,1])}([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],e,n,o))},pC=(Yy=[0,-1,0,-1,5,-1,0,-1,0],function(t){return function(t,e){return t.toCanvas().then((function(n){return lC(n,t.getType(),e)}))}(t,Yy)}),hC=(Xy=function(t,e){return 255*Math.pow(t/255,1-e)},function(t,e){return t.toCanvas().then((function(n){return function(t,e,n){for(var o=$_(t),r=new Array(256),i=0;i<r.length;i++)r[i]=Xy(i,n);var a=function(t,e){for(var n=t.data,o=0;o<n.length;o+=4)n[o]=e[n[o]],n[o+1]=e[n[o+1]],n[o+2]=e[n[o+2]];return t}(o.getImageData(0,0,t.width,t.height),r);return o.putImageData(a,0,0),oC(t,e)}(n,t.getType(),e)}))}),vC=function t(e,n,o){var r=Y_(e),i=X_(e),a=n/r,u=o/i,c=!1;(a<.5||a>2)&&(a=a<.5?.5:2,c=!0),(u<.5||u>2)&&(u=u<.5?.5:2,c=!0);var l=bC(e,a,u);return c?l.then((function(e){return t(e,n,o)})):l},bC=function(t,e,n){return new K_((function(o){var r=Y_(t),i=X_(t),a=Math.floor(r*e),u=Math.floor(i*n),c=W_(a,u);$_(c).drawImage(t,0,0,r,i,0,0,a,u),o(c)}))},xC=function(t,e){void 0===e&&(e=2);var n=Math.pow(10,e),o=Math.round(t*n);return Math.ceil(o/n)},yC=function(t,e,n){var o=(n<0?360+n:n)*Math.PI/180,r=t.width,i=t.height,a=Math.sin(o),u=Math.cos(o),c=xC(Math.abs(r*u)+Math.abs(i*a)),l=xC(Math.abs(r*a)+Math.abs(i*u)),s=W_(c,l),f=$_(s);return f.translate(c/2,l/2),f.rotate(o),f.drawImage(t,-r/2,-i/2),oC(s,e)},wC=function(t,e,n){var o=W_(t.width,t.height),r=$_(o);return"v"===n?(r.scale(1,-1),r.drawImage(t,0,-o.height)):(r.scale(-1,1),r.drawImage(t,-o.width,0)),oC(o,e)},kC=function(t,e,n,o,r,i){var a=W_(r,i);return $_(a).drawImage(t,-n,-o),oC(a,e)},_C=function(t,e,n){return t.toCanvas().then((function(o){return vC(o,e,n).then((function(e){return oC(e,t.getType())}))}))},CC=function(t){return fC(t)},SC=function(t){return pC(t)},OC=function(t,e){return hC(t,e)},zC=function(t,e){return dC(t,e)},TC=function(t,e){return mC(t,e)},MC=function(t,e){return function(t,e){return t.toCanvas().then((function(n){return wC(n,t.getType(),e)}))}(t,e)},AC=function(t,e,n,o,r){return function(t,e,n,o,r){return t.toCanvas().then((function(i){return kC(i,t.getType(),e,n,o,r)}))}(t,e,n,o,r)},DC=function(t,e){return function(t,e){return t.toCanvas().then((function(n){return yC(n,t.getType(),e)}))}(t,e)},EC=function(t,e){return _({dom:{tag:"span",innerHtml:t,classes:["tox-icon","tox-tbtn__icon-wrap"]}},e)},PC=function(t,e){return EC(xp(t,e),{})},HC=function(t,e){return EC(xp(t,e),{behaviours:uc([gg.config({})])})},BC=function(t,e,n){return{dom:{tag:"span",innerHtml:n.translate(t),classes:[e+"__select-label"]},behaviours:uc([gg.config({})])}},RC=ui("toolbar.button.execute"),IC=((Ky={})[Mo()]=["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],Ky),NC=ui("update-menu-text"),LC=ui("update-menu-icon"),FC=function(t,e,n){var o=sn(m),r=t.text.map((function(t){return vp(BC(t,e,n.providers))})),i=t.icon.map((function(t){return vp(HC(t,n.providers.icons))})),a=function(t,e){var n=Us.getValue(t);return yg.focus(n),Jo(n,"keydown",{raw:e.event.raw}),lw.close(n),A.some(!0)},u=t.role.fold((function(){return{}}),(function(t){return{role:t}})),c=t.tooltip.fold((function(){return{}}),(function(t){var e=n.providers.translate(t);return{title:e,"aria-label":e}}));return vp(lw.sketch(_(_(_({},t.uid?{uid:t.uid}:{}),u),{dom:{tag:"button",classes:[e,e+"--select"].concat(L(t.classes,(function(t){return e+"--"+t}))),attributes:_({},c)},components:ab([i.map((function(t){return t.asSpec()})),r.map((function(t){return t.asSpec()})),A.some({dom:{tag:"div",classes:[e+"__select-chevron"],innerHtml:xp("chevron-down",n.providers.icons)}})]),matchWidth:!0,useMinWidth:!0,dropdownBehaviours:uc(S(t.dropdownBehaviours,[Zv((function(){return t.disabled||n.providers.isDisabled()})),Kv(),fw.config({}),gg.config({}),pg("dropdown-events",[nb(t,o),ob(t,o)]),pg("menubutton-update-display-text",[ir(NC,(function(t,e){r.bind((function(e){return e.getOpt(t)})).each((function(t){gg.set(t,[ha(n.providers.translate(e.event.text))])}))})),ir(LC,(function(t,e){i.bind((function(e){return e.getOpt(t)})).each((function(t){gg.set(t,[HC(e.event.icon,n.providers.icons)])}))}))])])),eventOrder:Bt(IC,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"]}),sandboxBehaviours:uc([cg.config({mode:"special",onLeft:a,onRight:a})]),lazySink:n.getSink,toggleClass:e+"--active",parts:{menu:Sh(0,t.columns,t.presets)},fetch:function(e){return Ay(v(t.fetch,e))}}))).asSpec()},VC=function(t){return"separator"===t.type},jC={type:"separator"},UC=function(t,e){var n=W(t,(function(t,n){return function(t){return r(t)}(n)?""===n?t:"|"===n?t.length>0&&!VC(t[t.length-1])?t.concat([jC]):t:At(e,n.toLowerCase())?t.concat([e[n.toLowerCase()]]):t:t.concat([n])}),[]);return n.length>0&&VC(n[n.length-1])&&n.pop(),n},WC=function(t,e){return function(t){return At(t,"getSubmenuItems")}(t)?function(t,e){var n=t.getSubmenuItems(),o=qC(n,e);return{item:t,menus:Bt(o.menus,Gt(t.value,o.items)),expansions:Bt(o.expansions,Gt(t.value,t.value))}}(t,e):{item:t,menus:{},expansions:{}}},qC=function(t,e){var n=UC(r(t)?t.split(" "):t,e);return U(n,(function(t,n){var o=function(t){if(VC(t))return t;var e=Mt(t,"value").getOrThunk((function(){return ui("generated-menu-item")}));return Bt({value:e},t)}(n),r=WC(o,e);return{menus:Bt(t.menus,r.menus),items:[r.item].concat(t.items),expansions:Bt(t.expansions,r.expansions)}}),{menus:{},expansions:{},items:[]})},$C=function(t,e,n,o){var r=ui("primary-menu"),i=qC(t,n.shared.providers.menuItems());if(0===i.items.length)return A.none();var a=Ox(r,i.items,e,n,o),u=_t(i.menus,(function(t,o){return Ox(o,t,e,n,!1)})),c=Bt(u,Gt(r,a));return A.from(np.tieredData(r,c,i.expansions))},GC=function(t){return{isDisabled:function(){return xv.isDisabled(t)},setDisabled:function(e){return xv.set(t,e)},setActive:function(e){var n=t.element;e?(Li(n,"tox-tbtn--enabled"),Kr(n,"aria-pressed",!0)):(Vi(n,"tox-tbtn--enabled"),ti(n,"aria-pressed"))},isActive:function(){return ji(t.element,"tox-tbtn--enabled")}}},YC=function(t,e,n,o){return FC({text:t.text,icon:t.icon,tooltip:t.tooltip,role:o,fetch:function(e,o){t.fetch((function(t){o($C(t,ch.CLOSE_ON_EXECUTE,n,!1))}))},onSetup:t.onSetup,getApi:GC,columns:1,presets:"normal",classes:[],dropdownBehaviours:[ey.config({})]},e,n.shared)},XC=function(t,e,n){var o=function(t){return function(o){var r=!o.isActive();o.setActive(r),t.storage.set(r),n.shared.getSink().each((function(n){e().getOpt(n).each((function(e){pc(e.element),Jo(e,sy,{name:t.name,value:t.storage.get()})}))}))}},r=function(t){return function(e){e.setActive(t.storage.get())}};return function(e){e(L(t,(function(t){var e=t.text.fold((function(){return{}}),(function(t){return{text:t}}));return _(_({type:t.type,active:!1},e),{onAction:o(t),onSetup:r(t)})})))}},KC=function(t,e,n,o,r,i){void 0===n&&(n=[]);var a=e.fold((function(){return{}}),(function(t){return{action:t}})),u=_({buttonBehaviours:uc([Zv((function(){return t.disabled||i.isDisabled()})),Kv(),ey.config({}),pg("button press",[rr("click"),rr("mousedown")])].concat(n)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]}},a),c=Bt(u,{dom:o});return Bt(c,{components:r})},JC=function(t,e,n,o){void 0===o&&(o=[]);var r={tag:"button",classes:["tox-tbtn"],attributes:t.tooltip.map((function(t){return{"aria-label":n.translate(t),title:n.translate(t)}})).getOr({})},i=t.icon.map((function(t){return PC(t,n.icons)})),a=ab([i]);return KC(t,e,o,r,a,n)},ZC=function(t,e,n,o){void 0===o&&(o=[]);var r=JC(t,A.some(e),n,o);return hp.sketch(r)},QC=function(t,e,n,o,r){void 0===o&&(o=[]),void 0===r&&(r=[]);var i=n.translate(t.text),a=t.icon?t.icon.map((function(t){return PC(t,n.icons)})):A.none(),u=a.isSome()?ab([a]):[],c=a.isSome()?{}:{innerHtml:i},l=S(t.primary||t.borderless?["tox-button"]:["tox-button","tox-button--secondary"],a.isSome()?["tox-button--icon"]:[],t.borderless?["tox-button--naked"]:[],r),s=_(_({tag:"button",classes:l},c),{attributes:{title:i}});return KC(t,e,o,s,u,n)},tS=function(t,e,n,o,r){void 0===o&&(o=[]),void 0===r&&(r=[]);var i=QC(t,A.some(e),n,o,r);return hp.sketch(i)},eS=function(t,e){return function(n){"custom"===e?Jo(n,sy,{name:t,value:{}}):"submit"===e?Ko(n,fy):"cancel"===e?Ko(n,ly):console.error("Unknown button type: ",e)}},nS=function(t,e,n){if(function(t,e){return"menu"===e}(0,e)){var o=t,r=_(_({},t),{onSetup:function(e){return e.setDisabled(t.disabled),m},fetch:XC(o.items,(function(){return i}),n)}),i=vp(YC(r,"tox-tbtn",n,A.none()));return i.asSpec()}if(function(t,e){return"custom"===e||"cancel"===e||"submit"===e}(0,e)){var a=eS(t.name,e),u=_(_({},t),{borderless:!1});return tS(u,a,n.shared.providers,[])}console.error("Unknown footer button type: ",e)},oS=function(t,e){var n,o,r=eS(t.name,"custom");return n=A.none(),o=Zx.parts.field(_({factory:hp},QC(t,A.some(r),e,[P_(""),y_()]))),oy(n,o,[],[])},rS=p([Qe("field1Name","field1"),Qe("field2Name","field2"),xu("onLockedChange"),pu(["lockClass"]),Qe("locked",!1),Gs("coupledFieldBehaviours",[nd,Us])]),iS=function(t,e){return wf({factory:Zx,name:t,overrides:function(t){return{fieldBehaviours:uc([pg("coupled-input-behaviour",[ir(bo(),(function(n){(function(t,e,n){return Bf(t,e,n).bind(nd.getCurrent)})(n,t,e).each((function(e){Bf(n,t,"lock").each((function(o){Eg.isOn(o)&&t.onLockedChange(n,e,o)}))}))}))])])}}})},aS=p([iS("field1","field2"),iS("field2","field1"),wf({factory:hp,schema:[Ne("dom")],name:"lock",overrides:function(t){return{buttonBehaviours:uc([Eg.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])}}})]),uS=Kf({name:"FormCoupledInputs",configFields:rS(),partFields:aS(),factory:function(t,e,n,o){return{uid:t.uid,dom:t.dom,components:e,behaviours:Ys(t.coupledFieldBehaviours,[nd.config({find:A.some}),Us.config({store:{mode:"manual",getValue:function(e){var n,o=Ff(e,t,["field1","field2"]);return(n={})[t.field1Name]=Us.getValue(o.field1()),n[t.field2Name]=Us.getValue(o.field2()),n},setValue:function(e,n){var o=Ff(e,t,["field1","field2"]);Dt(n,t.field1Name)&&Us.setValue(o.field1(),n[t.field1Name]),Dt(n,t.field2Name)&&Us.setValue(o.field2(),n[t.field2Name])}}})]),apis:{getField1:function(e){return Bf(e,t,"field1")},getField2:function(e){return Bf(e,t,"field2")},getLock:function(e){return Bf(e,t,"lock")}}}},apis:{getField1:function(t,e){return t.getField1(e)},getField2:function(t,e){return t.getField2(e)},getLock:function(t,e){return t.getLock(e)}}}),cS=function(t){var e=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(null!==e){var n=parseFloat(e[1]),o=e[2];return at({value:n,unit:o})}return ut(t)},lS=function(t,e){var n={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},o=function(t){return Object.prototype.hasOwnProperty.call(n,t)};return t.unit===e?A.some(t.value):o(t.unit)&&o(e)?n[t.unit]===n[e]?A.some(t.value):A.some(t.value/n[t.unit]*n[e]):A.none()},sS=function(t){return A.none()},fS=function(t,e){var n,o,r,i=cS(t).toOptional(),a=cS(e).toOptional();return(n=i,o=a,r=function(t,e){return lS(t,e.unit).map((function(t){return e.value/t})).map((function(t){return function(t,e){return function(n){return lS(n,e).map((function(n){return{value:n*t,unit:e}}))}}(t,e.unit)})).getOr(sS)},n.isSome()&&o.isSome()?A.some(r(n.getOrDie(),o.getOrDie())):A.none()).getOr(sS)},dS=function(t,e){var n=sS,o=ui("ratio-event"),r=uS.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:e.translate(t.label.getOr("Constrain proportions"))}},components:[{dom:{tag:"span",classes:["tox-icon","tox-lock-icon__lock"],innerHtml:xp("lock",e.icons)}},{dom:{tag:"span",classes:["tox-icon","tox-lock-icon__unlock"],innerHtml:xp("unlock",e.icons)}}],buttonBehaviours:uc([xv.config({disabled:function(){return t.disabled||e.isDisabled()}}),Kv(),ey.config({})])}),i=function(t){return{dom:{tag:"div",classes:["tox-form__group"]},components:t}},a=function(n){return Zx.parts.field({factory:wy,inputClasses:["tox-textfield"],inputBehaviours:uc([xv.config({disabled:function(){return t.disabled||e.isDisabled()}}),Kv(),ey.config({}),pg("size-input-events",[ir(go(),(function(t,e){Jo(t,o,{isField1:n})})),ir(xo(),(function(e,n){Jo(e,uy,{name:t.name})}))])]),selectOnFocus:!1})},u=function(t){return{dom:{tag:"label",classes:["tox-label"],innerHtml:e.translate(t)}}},c=uS.parts.field1(i([Zx.parts.label(u("Width")),a(!0)])),l=uS.parts.field2(i([Zx.parts.label(u("Height")),a(!1)]));return uS.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[c,l,i([u("&nbsp;"),r])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:function(t,e,o){cS(Us.getValue(t)).each((function(t){n(t).each((function(t){Us.setValue(e,function(t){var e,n={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},o=t.value.toFixed((e=t.unit)in n?n[e]:1);return-1!==o.indexOf(".")&&(o=o.replace(/\.?0*$/,"")),o+t.unit}(t))}))}))},coupledFieldBehaviours:uc([xv.config({disabled:function(){return t.disabled||e.isDisabled()},onDisabled:function(t){uS.getField1(t).bind(Zx.getField).each(xv.disable),uS.getField2(t).bind(Zx.getField).each(xv.disable),uS.getLock(t).each(xv.disable)},onEnabled:function(t){uS.getField1(t).bind(Zx.getField).each(xv.enable),uS.getField2(t).bind(Zx.getField).each(xv.enable),uS.getLock(t).each(xv.enable)}}),Kv(),pg("size-input-events2",[ir(o,(function(t,e){var o=e.event.isField1,r=o?uS.getField1(t):uS.getField2(t),i=o?uS.getField2(t):uS.getField1(t),a=r.map(Us.getValue).getOr(""),u=i.map(Us.getValue).getOr("");n=fS(a,u)}))])])})},mS={undo:p(ui("undo")),redo:p(ui("redo")),zoom:p(ui("zoom")),back:p(ui("back")),apply:p(ui("apply")),swap:p(ui("swap")),transform:p(ui("transform")),tempTransform:p(ui("temp-transform")),transformApply:p(ui("transform-apply"))},gS=p("save-state"),pS=p("disable"),hS=p("enable"),vS={formActionEvent:sy,saveState:gS,disable:pS,enable:hS},bS=function(t,e){var n=function(t,n,o,r){return vp(tS({name:t,text:t,disabled:o,primary:r,icon:A.none(),borderless:!1},n,e))},o=function(t,n,o,r){return vp(ZC({name:t,icon:A.some(t),tooltip:A.some(n),disabled:r,primary:!1,borderless:!1},o,e))},r=function(t,e){t.map((function(t){var n=t.get(e);n.hasConfigured(xv)&&xv.disable(n)}))},i=function(t,e){t.map((function(t){var n=t.get(e);n.hasConfigured(xv)&&xv.enable(n)}))},a={tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools-edit-panel"]},u=m,c=function(t,e,n){Jo(t,e,n)},l=function(t){return Ko(t,vS.disable())},s=function(t){return Ko(t,vS.enable())},f=function(t,e){l(t),c(t,mS.transform(),{transform:e}),s(t)},d=function(t){return function(){et.getOpt(t).each((function(t){gg.set(t,[Q])}))}},g=function(t,e){l(t),c(t,mS.transformApply(),{transform:e,swap:d(t)}),s(t)},h=function(){return n("Back",(function(t){return c(t,mS.back(),{swap:d(t)})}),!1,!1)},v=function(){return vp({dom:{tag:"div",classes:["tox-spacer"]},behaviours:uc([xv.config({})])})},b=function(){return n("Apply",(function(t){return c(t,mS.apply(),{swap:d(t)})}),!0,!0)},x=[h(),v(),n("Apply",(function(e){var n=function(e){var n=t.getRect();return AC(e,n.x,n.y,n.w,n.h)};g(e,n),t.hideCrop()}),!1,!0)],y=Yx.sketch({dom:a,components:x.map((function(t){return t.asSpec()})),containerBehaviours:uc([pg("image-tools-crop-buttons-events",[ir(vS.disable(),(function(t,e){r(x,t)})),ir(vS.enable(),(function(t,e){i(x,t)}))])])}),w=vp(dS({name:"size",label:A.none(),constrain:!0,disabled:!1},e)),k=function(t,e){return function(n){return function(t,e,n){return _C(t,e,n)}(n,t,e)}},_=[h(),v(),w,v(),n("Apply",(function(t){w.getOpt(t).each((function(e){var n=Us.getValue(e),o=parseInt(n.width,10),r=parseInt(n.height,10),i=k(o,r);g(t,i)}))}),!1,!0)],C=Yx.sketch({dom:a,components:_.map((function(t){return t.asSpec()})),containerBehaviours:uc([pg("image-tools-resize-buttons-events",[ir(vS.disable(),(function(t,e){r(_,t)})),ir(vS.enable(),(function(t,e){i(_,t)}))])])}),S=function(t,e){return function(n){return t(n,e)}},O=S(MC,"h"),z=S(MC,"v"),T=S(DC,-90),M=S(DC,90),D=function(t,e){!function(t,e){l(t),c(t,mS.tempTransform(),{transform:e}),s(t)}(t,e)},E=[h(),v(),o("flip-horizontally","Flip horizontally",(function(t){D(t,O)}),!1),o("flip-vertically","Flip vertically",(function(t){D(t,z)}),!1),o("rotate-left","Rotate counterclockwise",(function(t){D(t,T)}),!1),o("rotate-right","Rotate clockwise",(function(t){D(t,M)}),!1),v(),b()],P=Yx.sketch({dom:a,components:E.map((function(t){return t.asSpec()})),containerBehaviours:uc([pg("image-tools-fliprotate-buttons-events",[ir(vS.disable(),(function(t,e){r(E,t)})),ir(vS.enable(),(function(t,e){i(E,t)}))])])}),H=function(t,n,o,r,i){var a=e_.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:e.translate(t)}}),u=e_.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),c=e_.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return vp(e_.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:o,maxX:i,getInitialValue:p({x:r})},components:[a,u,c],sliderBehaviours:uc([yg.config({})]),onChoose:n}))},B=function(t,e,n,o,r){return H(t,(function(t,n,o){var r=S(e,o.x/100);f(t,r)}),n,o,r)},R=function(t,e,n,o,u){var c=function(t,e,n,o,r){return[h(),B(t,e,n,o,r),b()]}(t,e,n,o,u);return Yx.sketch({dom:a,components:c.map((function(t){return t.asSpec()})),containerBehaviours:uc([pg("image-tools-filter-panel-buttons-events",[ir(vS.disable(),(function(t,e){r(c,t)})),ir(vS.enable(),(function(t,e){i(c,t)}))])])})},I=[h(),v(),b()],N=Yx.sketch({dom:a,components:I.map((function(t){return t.asSpec()}))}),L=R("Brightness",zC,-100,0,100),F=R("Contrast",TC,-100,0,100),V=R("Gamma",OC,-100,0,100),j=function(t,e,n){return function(o){return function(t,e,n,o){return gC(t,e,n,o)}(o,t,e,n)}},U=function(t){return H(t,(function(t,e,n){var o=W.getOpt(t),r=$.getOpt(t),i=q.getOpt(t);o.each((function(e){r.each((function(n){i.each((function(o){var r=Us.getValue(e).x/100,i=Us.getValue(o).x/100,a=Us.getValue(n).x/100,u=j(r,i,a);f(t,u)}))}))}))}),0,100,200)},W=U("R"),q=U("G"),$=U("B"),G=[h(),W,q,$,b()],Y=Yx.sketch({dom:a,components:G.map((function(t){return t.asSpec()}))}),X=function(t,e,n){return function(o){c(o,mS.swap(),{transform:e,swap:function(){et.getOpt(o).each((function(e){gg.set(e,[t]),n(e)}))}})}},K=A.some(SC),J=A.some(CC),Z=[o("crop","Crop",X(y,A.none(),(function(e){t.showCrop()})),!1),o("resize","Resize",X(C,A.none(),(function(e){w.getOpt(e).each((function(e){var n=t.getMeasurements(),o=n.width,r=n.height;Us.setValue(e,{width:o,height:r})}))})),!1),o("orientation","Orientation",X(P,A.none(),u),!1),o("brightness","Brightness",X(L,A.none(),u),!1),o("sharpen","Sharpen",X(N,K,u),!1),o("contrast","Contrast",X(F,A.none(),u),!1),o("color-levels","Color levels",X(Y,A.none(),u),!1),o("gamma","Gamma",X(V,A.none(),u),!1),o("invert","Invert",X(N,J,u),!1)],Q=Yx.sketch({dom:a,components:Z.map((function(t){return t.asSpec()}))}),tt=Yx.sketch({dom:{tag:"div"},components:[Q],containerBehaviours:uc([gg.config({})])}),et=vp(tt);return{memContainer:et,getApplyButton:function(t){return et.getOpt(t).map((function(t){var e=t.components()[0];return e.components()[e.components().length-1]}))}}},xS=tinymce.util.Tools.resolve("tinymce.geom.Rect"),yS=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),wS=tinymce.util.Tools.resolve("tinymce.util.Observable"),kS=tinymce.util.Tools.resolve("tinymce.util.VK"),_S=function(t){var e,n;if(t.changedTouches)for(e="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<e.length;n++)t[e[n]]=t.changedTouches[0][e[n]]};function CS(t,e){var n,o,r,i,a=e.document||document,u=a.getElementById(e.handle||t),c=function(t){if(_S(t),t.button!==o)return l(t);t.deltaX=t.screenX-r,t.deltaY=t.screenY-i,t.preventDefault(),e.drag(t)},l=function t(o){_S(o),yS(a).off("mousemove touchmove",c).off("mouseup touchend",t),n.remove(),e.stop&&e.stop(o)};return yS(u).on("mousedown touchstart",(function(t){var s,f=function(t){var e=Math.max,n=t.documentElement,o=t.body,r=e(n.scrollWidth,o.scrollWidth),i=e(n.clientWidth,o.clientWidth),a=e(n.offsetWidth,o.offsetWidth),u=e(n.scrollHeight,o.scrollHeight),c=e(n.clientHeight,o.clientHeight);return{width:r<a?i:r,height:u<e(n.offsetHeight,o.offsetHeight)?c:u}}(a);_S(t),t.preventDefault(),o=t.button;var d=u;r=t.screenX,i=t.screenY,s=window.getComputedStyle?window.getComputedStyle(d,null).getPropertyValue("cursor"):d.runtimeStyle.cursor,n=yS("<div></div>").css({position:"absolute",top:0,left:0,width:f.width,height:f.height,zIndex:2147483647,opacity:1e-4,cursor:s}).appendTo(a.body),yS(a).on("mousemove touchmove",c).on("mouseup touchend",l),e.start(t)})),{destroy:function(){yS(u).off()}}}var SS=0,OS=function(t,e,n,o,r){var i,a="tox-crid-"+SS++,u=[{name:"move",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:0,deltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,deltaX:0,deltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}],c=["top","right","bottom","left"],l=function(t,e){return{x:e.x-t.x,y:e.y-t.y,w:e.w,h:e.h}},s=function(e,o,r,i){var a,u,c,s,f;a=o.x,u=o.y,c=o.w,s=o.h,a+=r*e.deltaX,u+=i*e.deltaY,(c+=r*e.deltaW)<20&&(c=20),(s+=i*e.deltaH)<20&&(s=20),f=t=xS.clamp({x:a,y:u,w:c,h:s},n,"move"===e.name),f=l(n,f),g.fire("updateRect",{rect:f}),m(f)},f=function(t){var n=function(t,e){e.h<0&&(e.h=0),e.w<0&&(e.w=0),yS("#"+a+"-"+t,o).css({left:e.x,top:e.y,width:e.w,height:e.h})};O_.each(u,(function(e){yS("#"+a+"-"+e.name,o).css({left:t.w*e.xMul+t.x,top:t.h*e.yMul+t.y})})),n("top",{x:e.x,y:e.y,w:e.w,h:t.y-e.y}),n("right",{x:t.x+t.w,y:t.y,w:e.w-t.x-t.w+e.x,h:t.h}),n("bottom",{x:e.x,y:t.y+t.h,w:e.w,h:e.h-t.y-t.h+e.y}),n("left",{x:e.x,y:t.y,w:t.x-e.x,h:t.h}),n("move",t)},d=function(e){f(t=e)},m=function(t){var e,o;d((e=n,{x:(o=t).x+e.x,y:o.y+e.y,w:o.w,h:o.h}))};yS('<div id="'+a+'" class="tox-croprect-container" role="grid" aria-dropeffect="execute">').appendTo(o),O_.each(c,(function(t){yS("#"+a,o).append('<div id="'+a+"-"+t+'"class="tox-croprect-block" style="display: none" data-mce-bogus="all">')})),O_.each(u,(function(t){yS("#"+a,o).append('<div id="'+a+"-"+t.name+'" class="tox-croprect-handle tox-croprect-handle-'+t.name+'"style="display: none" data-mce-bogus="all" role="gridcell" tabindex="-1" aria-label="'+t.label+'" aria-grabbed="false" title="'+t.label+'">')})),i=O_.map(u,(function(e){var n;return CS(a,{document:o.ownerDocument,handle:a+"-"+e.name,start:function(){n=t},drag:function(t){s(e,n,t.deltaX,t.deltaY)}})})),f(t),yS(o).on("focusin focusout",(function(t){yS(t.target).attr("aria-grabbed","focus"===t.type?"true":"false")})),yS(o).on("keydown",(function(e){var n;O_.each(u,(function(t){if(e.target.id===a+"-"+t.name)return n=t,!1}));var o=function(t,e,o,r,i){t.stopPropagation(),t.preventDefault(),s(n,o,r,i)};switch(e.keyCode){case kS.LEFT:o(e,0,t,-10,0);break;case kS.RIGHT:o(e,0,t,10,0);break;case kS.UP:o(e,0,t,0,-10);break;case kS.DOWN:o(e,0,t,0,10);break;case kS.ENTER:case kS.SPACEBAR:e.preventDefault(),r()}}));var g=O_.extend({toggleVisibility:function(t){var e=O_.map(u,(function(t){return"#"+a+"-"+t.name})).concat(O_.map(c,(function(t){return"#"+a+"-"+t}))).join(",");t?yS(e,o).show():yS(e,o).hide()},setClampRect:function(e){n=e,f(t)},setRect:d,getInnerRect:function(){return l(n,t)},setInnerRect:m,setViewPortRect:function(n){e=n,f(t)},destroy:function(){O_.each(i,(function(t){t.destroy()})),i=[]}},wS);return g},zS=function(t){var e=vp({dom:{tag:"div",classes:["tox-image-tools__image-bg"],attributes:{role:"presentation"}}}),n=sn(1),o=sn(A.none()),r=sn({x:0,y:0,w:1,h:1}),i=sn({x:0,y:0,w:1,h:1}),a=function(t,i){l.getOpt(t).each((function(t){var a=n.get(),u=Aa(t.element),c=_a(t.element),l=i.dom.naturalWidth*a,s=i.dom.naturalHeight*a,f=Math.max(0,u/2-l/2),d=Math.max(0,c/2-s/2),m={left:f.toString()+"px",top:d.toString()+"px",width:l.toString()+"px",height:s.toString()+"px",position:"absolute"};Zi(i,m),e.getOpt(t).each((function(t){Zi(t.element,m)})),o.get().each((function(t){var e=r.get();t.setRect({x:e.x*a+f,y:e.y*a+d,w:e.w*a,h:e.h*a}),t.setClampRect({x:f,y:d,w:l,h:s}),t.setViewPortRect({x:0,y:0,w:u,h:c})}))}))},u=function(t,e){var o,u=dn.fromTag("img");return Kr(u,"src",e),(o=u.dom,new Rp((function(t){o.complete?t(o):o.addEventListener("load",(function e(){o.removeEventListener("load",e),t(o)}))}))).then((function(){return l.getOpt(t).map((function(t){var e=va({element:u});gg.replaceAt(t,1,A.some(e));var o=i.get(),c={x:0,y:0,w:u.dom.naturalWidth,h:u.dom.naturalHeight};i.set(c);var s=xS.inflate(c,-20,-20);return r.set(s),o.w===c.w&&o.h===c.h||function(t,e){l.getOpt(t).each((function(t){var o=Aa(t.element),r=_a(t.element),i=e.dom.naturalWidth,a=e.dom.naturalHeight,u=Math.min(o/i,r/a);u>=1?n.set(1):n.set(u)}))}(t,u),a(t,u),u}))}))},c=Yx.sketch({dom:{tag:"div",classes:["tox-image-tools__image"]},components:[e.asSpec(),{dom:{tag:"img",attributes:{src:t}}},{dom:{tag:"div"},behaviours:uc([pg("image-panel-crop-events",[mr((function(t){l.getOpt(t).each((function(t){var e=t.element.dom,i=OS({x:10,y:10,w:100,h:100},{x:0,y:0,w:200,h:200},{x:0,y:0,w:200,h:200},e,m);i.toggleVisibility(!1),i.on("updateRect",(function(t){var e=t.rect,o=n.get(),i={x:Math.round(e.x/o),y:Math.round(e.y/o),w:Math.round(e.w/o),h:Math.round(e.h/o)};r.set(i)})),o.set(A.some(i))}))}))])])}],containerBehaviours:uc([gg.config({}),pg("image-panel-events",[mr((function(e){u(e,t)}))])])}),l=vp(c);return{memContainer:l,updateSrc:u,zoom:function(t,e){var o=n.get(),r=e>0?Math.min(2,o+.1):Math.max(.1,o-.1);n.set(r),l.getOpt(t).each((function(t){var e=t.components()[1].element;a(t,e)}))},showCrop:function(){o.get().each((function(t){t.toggleVisibility(!0)}))},hideCrop:function(){o.get().each((function(t){t.toggleVisibility(!1)}))},getRect:function(){return r.get()},getMeasurements:function(){var t=i.get();return{width:t.w,height:t.h}}}},TS=function(t,e,n,o,r){return ZC({name:t,icon:A.some(e),disabled:n,tooltip:A.some(t),primary:!1,borderless:!1},o,r)},MS=function(t,e){e?xv.enable(t):xv.disable(t)};var AS,DS=function(t){var e,n,o,r,i=sn(t),a=sn(A.none()),u=(n=-1,{data:e=[],add:function(t){var o=e.splice(++n);return e.push(t),{state:t,removed:o}},undo:function(){if(o())return e[--n]},redo:function(){if(r())return e[++n]},canUndo:o=function(){return n>0},canRedo:r=function(){return-1!==n&&n<e.length-1}});u.add(t);var c=function(t){i.set(t)},l=function(t){return{blob:t,url:URL.createObjectURL(t)}},s=function(t){URL.revokeObjectURL(t.url)},f=function(){a.get().each(s),a.set(A.none())},d=function(t){var e=l(t);c(e);var n,o=u.add(e).removed;return n=o,O_.each(n,s),e.url};return{getBlobState:function(){return i.get()},setBlobState:c,addBlobState:d,getTempState:function(){return a.get().fold((function(){return i.get()}),(function(t){return t}))},updateTempState:function(t){var e=l(t);return f(),a.set(A.some(e)),e.url},addTempState:function(t){var e=l(t);return a.set(A.some(e)),e.url},applyTempState:function(t){return a.get().fold(m,(function(e){d(e.blob),t()}))},destroyTempState:f,undo:function(){var t=u.undo();return c(t),t.url},redo:function(){var t=u.redo();return c(t),t.url},getHistoryStates:function(){return{undoEnabled:u.canUndo(),redoEnabled:u.canRedo()}}}},ES=function(t,e){var n=DS(t.currentState),o=function(t){var e=n.getHistoryStates();d.updateButtonUndoStates(t,e.undoEnabled,e.redoEnabled),Jo(t,vS.formActionEvent,{name:vS.saveState(),value:e.undoEnabled})},r=function(t){return t.toBlob()},i=function(t){Jo(t,vS.formActionEvent,{name:vS.disable(),value:{}})},a=function(t){g.getApplyButton(t).each((function(t){xv.enable(t)})),Jo(t,vS.formActionEvent,{name:vS.enable(),value:{}})},u=function(t,e){return i(t),f.updateSrc(t,e)},c=function(t,e,n,c,l){return i(t),function(t){return nC(t)}(e).then(n).then(r).then(c).then((function(e){return u(t,e).then((function(e){return o(t),l(),a(t),e}))})).catch((function(e){return console.log(e),a(t),e}))},l=function(t,e,o){var r=n.getBlobState().blob;c(t,r,e,(function(t){return n.updateTempState(t)}),o)},s=function(t){var e=n.getBlobState().url;return n.destroyTempState(),o(t),e},f=zS(t.currentState.url),d=function(t){var e=vp(TS("Undo","undo",!0,(function(t){Jo(t,mS.undo(),{direction:1})}),t)),n=vp(TS("Redo","redo",!0,(function(t){Jo(t,mS.redo(),{direction:1})}),t)),o=Yx.sketch({dom:{tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools__sidebar"]},components:[e.asSpec(),n.asSpec(),TS("Zoom in","zoom-in",!1,(function(t){Jo(t,mS.zoom(),{direction:1})}),t),TS("Zoom out","zoom-out",!1,(function(t){Jo(t,mS.zoom(),{direction:-1})}),t)]});return{container:o,updateButtonUndoStates:function(t,o,r){e.getOpt(t).each((function(t){MS(t,o)})),n.getOpt(t).each((function(t){MS(t,r)}))}}}(e),g=bS(f,e);return{dom:{tag:"div",attributes:{role:"presentation"}},components:[g.memContainer.asSpec(),f.memContainer.asSpec(),d.container],behaviours:uc([Us.config({store:{mode:"manual",getValue:function(){return n.getBlobState()}}}),pg("image-tools-events",[ir(mS.undo(),(function(t,e){var r=n.undo();u(t,r).then((function(e){a(t),o(t)}))})),ir(mS.redo(),(function(t,e){var r=n.redo();u(t,r).then((function(e){a(t),o(t)}))})),ir(mS.zoom(),(function(t,e){var n=e.event.direction;f.zoom(t,n)})),ir(mS.back(),(function(t,e){!function(t){var e=s(t);u(t,e).then((function(e){a(t)}))}(t),(0,e.event.swap)(),f.hideCrop()})),ir(mS.apply(),(function(t,e){n.applyTempState((function(){s(t),(0,e.event.swap)()}))})),ir(mS.transform(),(function(t,e){return l(t,e.event.transform,m)})),ir(mS.tempTransform(),(function(t,e){return function(t,e){var o=n.getTempState().blob;c(t,o,e,(function(t){return n.addTempState(t)}),m)}(t,e.event.transform)})),ir(mS.transformApply(),(function(t,e){return function(t,e,o){var r=n.getBlobState().blob;c(t,r,e,(function(e){var o=n.addBlobState(e);return s(t),o}),o)}(t,e.event.transform,e.event.swap)})),ir(mS.swap(),(function(t,e){!function(t){d.updateButtonUndoStates(t,!1,!1)}(t);var n=e.event.transform,o=e.event.swap;n.fold((function(){o()}),(function(e){l(t,e,o)}))}))]),y_()])}},PS=function(t){return!At(t,"items")},HS="data-value",BS=function t(e,n,o,r){return L(o,(function(o){return PS(o)?{type:"togglemenuitem",text:o.text,value:o.value,active:o.value===r,onAction:function(){Us.setValue(e,o.value),Jo(e,uy,{name:n}),yg.focus(e)}}:{type:"nestedmenuitem",text:o.text,getSubmenuItems:function(){return t(e,n,o.items,r)}}}))},RS=function t(e,n){return ot(e,(function(e){return PS(e)?Zf(e.value===n,e):t(e.items,n)}))},IS=function(t,e){var n=e.shared.providers,o=tt(t.items).filter(PS),r=t.label.map((function(t){return ay(t,n)})),i=Zx.parts.field({dom:{},factory:{sketch:function(n){return FC({uid:n.uid,text:o.map((function(t){return t.text})),icon:A.none(),tooltip:t.label,role:A.none(),fetch:function(n,o){var r=BS(n,t.name,t.items,Us.getValue(n));o($C(r,ch.CLOSE_ON_EXECUTE,e,!1))},onSetup:p(m),getApi:p({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[ey.config({}),Us.config({store:{mode:"manual",initialValue:o.map((function(t){return t.value})).getOr(""),getValue:function(t){return Jr(t.element,HS)},setValue:function(e,n){RS(t.items,n).each((function(t){Kr(e.element,HS,t.value),Jo(e,NC,{text:t.text})}))}}})]},"tox-listbox",e.shared)}}}),a={dom:{tag:"div",classes:["tox-listboxfield"]},components:[i]};return Zx.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:G([r.toArray(),[a]]),fieldBehaviours:uc([xv.config({disabled:p(t.disabled),onDisabled:function(t){Zx.getField(t).each(xv.disable)},onEnabled:function(t){Zx.getField(t).each(xv.enable)}})])})},NS=Xf({name:"HtmlSelect",configFields:[Ne("options"),Ws("selectBehaviours",[yg,Us]),Qe("selectClasses",[]),Qe("selectAttributes",{}),Ge("data")],factory:function(t,e){var n=L(t.options,(function(t){return{dom:{tag:"option",value:t.value,innerHtml:t.text}}})),o=t.data.map((function(t){return Gt("initialValue",t)})).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:n,behaviours:$s(t.selectBehaviours,[yg.config({}),Us.config({store:_({mode:"manual",getValue:function(t){return ua(t.element)},setValue:function(e,n){q(t.options,(function(t){return t.value===n})).isSome()&&ca(e.element,n)}},o)})])}}}),LS=function(t,e){var n=t.label.map((function(t){return ay(t,e)})),o=[xv.config({disabled:function(){return t.disabled||e.isDisabled()}}),Kv(),cg.config({mode:"execution",useEnter:!0!==t.multiline,useControlEnter:!0===t.multiline,execute:function(t){return Ko(t,fy),A.some(!0)}}),pg("textfield-change",[ir(bo(),(function(e,n){Jo(e,uy,{name:t.name})})),ir(zo(),(function(e,n){Jo(e,uy,{name:t.name})}))]),ey.config({})],r=t.validation.map((function(t){return Vy.config({getRoot:function(t){return zr(t.element)},invalidClass:"tox-invalid",validator:{validate:function(e){var n=Us.getValue(e),o=t.validator(n);return Dy(!0===o?at(n):ut(o))},validateOnLoad:t.validateOnLoad}})})).toArray(),i=t.placeholder.fold(p({}),(function(t){return{placeholder:e.translate(t)}})),a=t.inputMode.fold(p({}),(function(t){return{inputmode:t}})),u=_(_({},i),a),c=Zx.parts.field({tag:!0===t.multiline?"textarea":"input",inputAttributes:u,inputClasses:[t.classname],inputBehaviours:uc(G([o,r])),selectOnFocus:!1,factory:wy}),l=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),s=[xv.config({disabled:function(){return t.disabled||e.isDisabled()},onDisabled:function(t){Zx.getField(t).each(xv.disable)},onEnabled:function(t){Zx.getField(t).each(xv.enable)}}),Kv()];return oy(n,c,l,s)},FS=Object.freeze({__proto__:null,events:function(t,e){var n=t.stream.streams.setup(t,e);return nr([ir(t.event,n),gr((function(){return e.cancel()}))].concat(t.cancelEvent.map((function(t){return[ir(t,(function(){return e.cancel()}))]})).getOr([])))}}),VS=function(t){var e=sn(null);return Ci({readState:function(){return{timer:null!==e.get()?"set":"unset"}},setTimer:function(t){e.set(t)},cancel:function(){var t=e.get();null!==t&&t.cancel()}})},jS=Object.freeze({__proto__:null,throttle:VS,init:function(t){return t.stream.streams.state(t)}}),US=[Le("stream",Te("mode",{throttle:[Ne("delay"),Qe("stopEvent",!0),wu("streams",{setup:function(t,e){var n=t.stream,o=Sp(t.onStream,n.delay);return e.setTimer(o),function(t,e){o.throttle(t,e),n.stopEvent&&e.stop()}},state:VS})]})),Qe("event","input"),Ge("cancelEvent"),xu("onStream")],WS=lc({fields:US,name:"streaming",active:FS,state:jS}),qS=function(t,e,n){var o=Us.getValue(n);Us.setValue(e,o),GS(e)},$S=function(t,e){var n=t.element,o=ua(n),r=n.dom;"number"!==Jr(n,"type")&&e(r,o)},GS=function(t){$S(t,(function(t,e){return t.setSelectionRange(e.length,e.length)}))},YS=function(t,e,n){if(t.selectsOver){var o=Us.getValue(e),r=t.getDisplayText(o),i=Us.getValue(n);return 0===t.getDisplayText(i).indexOf(r)?A.some((function(){qS(0,e,n),function(t,e){$S(t,(function(t,n){return t.setSelectionRange(e,n.length)}))}(e,r.length)})):A.none()}return A.none()},XS=p("alloy.typeahead.itemexecute"),KS=p([Ge("lazySink"),Ne("fetch"),Qe("minChars",5),Qe("responseTime",1e3),vu("onOpen"),Qe("getHotspot",A.some),Qe("getAnchorOverrides",p({})),Qe("layouts",A.none()),Qe("eventOrder",{}),cn("model",{},[Qe("getDisplayText",(function(t){return void 0!==t.meta&&void 0!==t.meta.text?t.meta.text:t.value})),Qe("selectsOver",!0),Qe("populateFromBrowse",!0)]),vu("onSetValue"),bu("onExecute"),vu("onItemExecute"),Qe("inputClasses",[]),Qe("inputAttributes",{}),Qe("inputStyles",{}),Qe("matchWidth",!0),Qe("useMinWidth",!1),Qe("dismissOnBlur",!0),pu(["openClass"]),Ge("initialData"),Ws("typeaheadBehaviours",[yg,Us,WS,cg,Eg,qy]),ln("previewing",(function(){return sn(!0)}))].concat(vy()).concat(aw())),JS=p([kf({schema:[gu()],name:"menu",overrides:function(t){return{fakeFocus:!0,onHighlight:function(e,n){t.previewing.get()?e.getSystem().getByUid(t.uid).each((function(o){YS(t.model,o,n).fold((function(){return md.dehighlight(e,n)}),(function(t){return t()}))})):e.getSystem().getByUid(t.uid).each((function(e){t.model.populateFromBrowse&&qS(t.model,e,n)})),t.previewing.set(!1)},onExecute:function(e,n){return e.getSystem().getByUid(t.uid).toOptional().map((function(t){return Jo(t,XS(),{item:n}),!0}))},onHover:function(e,n){t.previewing.set(!1),e.getSystem().getByUid(t.uid).each((function(e){t.model.populateFromBrowse&&qS(t.model,e,n)}))}}}})]),ZS=Kf({name:"Typeahead",configFields:KS(),partFields:JS(),factory:function(t,e,n,o){var r=function(e,n,r){t.previewing.set(!1);var i=qy.getCoupled(e,"sandbox");if(_s.isOpen(i))nd.getCurrent(i).each((function(t){md.getHighlighted(t).fold((function(){r(t)}),(function(){er(i,t.element,"keydown",n)}))}));else{Zy(t,a(e),e,i,o,(function(t){nd.getCurrent(t).each(r)}),Cy.HighlightFirst).get(m)}},i=by(t),a=function(t){return function(e){return e.map((function(e){var n=Tt(e.menus),o=Y(n,(function(t){return j(t.items,(function(t){return"item"===t.type}))}));return Us.getState(t).update(L(o,(function(t){return t.data}))),e}))}},u=[yg.config({}),Us.config({onSetValue:t.onSetValue,store:_({mode:"dataset",getDataKey:function(t){return ua(t.element)},getFallbackEntry:function(t){return{value:t,meta:{}}},setValue:function(e,n){ca(e.element,t.model.getDisplayText(n))}},t.initialData.map((function(t){return Gt("initialValue",t)})).getOr({}))}),WS.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:function(e,n){var r=qy.getCoupled(e,"sandbox");if(yg.isFocused(e)&&ua(e.element).length>=t.minChars){var i=nd.getCurrent(r).bind((function(t){return md.getHighlighted(t).map(Us.getValue)}));t.previewing.set(!0);Zy(t,a(e),e,r,o,(function(e){nd.getCurrent(r).each((function(e){i.fold((function(){t.model.selectsOver&&md.highlightFirst(e)}),(function(t){md.highlightBy(e,(function(e){return Us.getValue(e).value===t.value})),md.getHighlighted(e).orThunk((function(){return md.highlightFirst(e),A.none()}))}))}))}),Cy.HighlightFirst).get(m)}},cancelEvent:Ho()}),cg.config({mode:"special",onDown:function(t,e){return r(t,e,md.highlightFirst),A.some(!0)},onEscape:function(t){var e=qy.getCoupled(t,"sandbox");return _s.isOpen(e)?(_s.close(e),A.some(!0)):A.none()},onUp:function(t,e){return r(t,e,md.highlightLast),A.some(!0)},onEnter:function(e){var n=qy.getCoupled(e,"sandbox"),o=_s.isOpen(n);if(o&&!t.previewing.get())return nd.getCurrent(n).bind((function(t){return md.getHighlighted(t)})).map((function(t){return Jo(e,XS(),{item:t}),!0}));var r=Us.getValue(e);return Ko(e,Ho()),t.onExecute(n,e,r),o&&_s.close(n),A.some(!0)}}),Eg.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),qy.config({others:{sandbox:function(e){return rw(t,e,{onOpen:function(){return Eg.on(e)},onClose:function(){return Eg.off(e)}})}}}),pg("typeaheadevents",[hr((function(e){var n=m;tw(t,a(e),e,o,n,Cy.HighlightFirst).get(m)})),ir(XS(),(function(e,n){var o=qy.getCoupled(e,"sandbox");qS(t.model,e,n.event.item),Ko(e,Ho()),t.onItemExecute(e,o,n.event.item,Us.getValue(e)),_s.close(o),GS(e)}))].concat(t.dismissOnBlur?[ir(Oo(),(function(t){var e=qy.getCoupled(t,"sandbox");vc(e.element).isNone()&&_s.close(e)}))]:[]))];return{uid:t.uid,dom:yy(Bt(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:_(_({},i),$s(t.typeaheadBehaviours,u)),eventOrder:t.eventOrder}}}),QS=function t(e){return _(_({},e),{toCached:function(){return t(e.toCached())},bindFuture:function(n){return t(e.bind((function(t){return t.fold((function(t){return Dy(ut(t))}),(function(t){return n(t)}))})))},bindResult:function(n){return t(e.map((function(t){return t.bind(n)})))},mapResult:function(n){return t(e.map((function(t){return t.map(n)})))},mapError:function(n){return t(e.map((function(t){return t.mapError(n)})))},foldResult:function(t,n){return e.map((function(e){return e.fold(t,n)}))},withTimeout:function(n,o){return t(Ay((function(t){var r=!1,i=setTimeout((function(){r=!0,t(ut(o()))}),n);e.get((function(e){r||(clearTimeout(i),t(e))}))})))}})},tO=function(t){return QS(Ay(t))},eO=tO,nO={type:"separator"},oO=function(t){return{type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:m}},rO=function(t,e){return{type:"menuitem",value:e,text:t,meta:{attach:void 0},onAction:m}},iO=function(t,e){return function(t){return L(t,oO)}(function(t,e){return j(e,(function(e){return e.type===t}))}(t,e))},aO=function(t){return iO("header",t.targets)},uO=function(t){return iO("anchor",t.targets)},cO=function(t){return A.from(t.anchorTop).map((function(t){return rO("<top>",t)})).toArray()},lO=function(t){return A.from(t.anchorBottom).map((function(t){return rO("<bottom>",t)})).toArray()},sO=function(t,e){var n=t.toLowerCase();return j(e,(function(t){var e=void 0!==t.meta&&void 0!==t.meta.text?t.meta.text:t.text;return xn(e.toLowerCase(),n)||xn(t.value.toLowerCase(),n)}))},fO=function(t,e,n){var o=Us.getValue(e),r=void 0!==o.meta.text?o.meta.text:o.value;return n.getLinkInformation().fold((function(){return[]}),(function(e){var o,i=sO(r,function(t){return L(t,(function(t){return rO(t,t)}))}(n.getHistory(t)));return"file"===t?(o=[i,sO(r,aO(e)),sO(r,G([cO(e),uO(e),lO(e)]))],W(o,(function(t,e){return 0===t.length||0===e.length?t.concat(e):t.concat(nO,e)}),[])):i}))},dO=ui("aria-invalid"),mO=function(t){return function(e,n,o){return Mt(n,"name").fold((function(){return t(n,o)}),(function(r){return e.field(r,t(n,o))}))}},gO={bar:mO((function(t,e){return function(t,e){return{dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:L(t.items,e.interpreter)}}(t,e.shared)})),collection:mO((function(t,e){return hy(t,e.shared.providers)})),alertbanner:mO((function(t,e){return function(t,e){return Yx.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in","tox-notification--"+t.level]},components:[{dom:{tag:"div",classes:["tox-notification__icon"]},components:[hp.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:xp(t.icon,e.icons),attributes:{title:e.translate(t.iconTooltip)}},action:function(e){Jo(e,sy,{name:"alert-banner",value:t.url})}})]},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:e.translate(t.text)}}]})}(t,e.shared.providers)})),input:mO((function(t,e){return function(t,e){return LS({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:t.disabled,classname:"tox-textfield",validation:A.none(),maximized:t.maximized},e)}(t,e.shared.providers)})),textarea:mO((function(t,e){return function(t,e){return LS({name:t.name,multiline:!0,label:t.label,inputMode:A.none(),placeholder:t.placeholder,flex:!0,disabled:t.disabled,classname:"tox-textarea",validation:A.none(),maximized:t.maximized},e)}(t,e.shared.providers)})),label:mO((function(t,e){return function(t,e){var n={dom:{tag:"label",innerHtml:e.providers.translate(t.label),classes:["tox-label"]}},o=L(t.items,e.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[n].concat(o),behaviours:uc([y_(),gg.config({}),E_(A.none()),cg.config({mode:"acyclic"})])}}(t,e.shared)})),iframe:function(t){return function(e,n,o){var r=Bt(n,{source:"dynamic"});return mO(t)(e,r,o)}}((function(t,e){return U_(t,e.shared.providers)})),button:mO((function(t,e){return oS(t,e.shared.providers)})),checkbox:mO((function(t,e){return function(t,e){var n=Us.config({store:{mode:"manual",getValue:function(t){return t.element.dom.checked},setValue:function(t,e){t.element.dom.checked=e}}}),o=function(t){return t.element.dom.click(),A.some(!0)},r=Zx.parts.field({factory:{sketch:h},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:uc([y_(),xv.config({disabled:function(){return t.disabled||e.isDisabled()}}),ey.config({}),yg.config({}),n,cg.config({mode:"special",onEnter:o,onSpace:o,stopSpaceKeyup:!0}),pg("checkbox-events",[ir(xo(),(function(e,n){Jo(e,uy,{name:t.name})}))])])}),i=Zx.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"],innerHtml:e.translate(t.label)},behaviours:uc([fw.config({})])}),a=function(t){return{dom:{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+t],innerHtml:xp("checked"===t?"selected":"unselected",e.icons)}}},u=vp({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[a("checked"),a("unchecked")]});return Zx.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[r,u.asSpec(),i],fieldBehaviours:uc([xv.config({disabled:function(){return t.disabled||e.isDisabled()},disableClass:"tox-checkbox--disabled",onDisabled:function(t){Zx.getField(t).each(xv.disable)},onEnabled:function(t){Zx.getField(t).each(xv.enable)}}),Kv()])})}(t,e.shared.providers)})),colorinput:mO((function(t,e){return pw(t,e.shared,e.colorinput)})),colorpicker:mO((function(t){var e=function(t){return"tox-"+t},n=x_(C_,e),o=vp(n.sketch({dom:{tag:"div",classes:[e("color-picker-container")],attributes:{role:"presentation"}},onValidHex:function(t){Jo(t,sy,{name:"hex-valid",value:!0})},onInvalidHex:function(t){Jo(t,sy,{name:"hex-valid",value:!1})}}));return{dom:{tag:"div"},components:[o.asSpec()],behaviours:uc([Us.config({store:{mode:"manual",getValue:function(t){var e=o.get(t);return nd.getCurrent(e).bind((function(t){return Us.getValue(t).hex})).map((function(t){return"#"+t})).getOr("")},setValue:function(t,e){var n=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/.exec(e),r=o.get(t);nd.getCurrent(r).fold((function(){console.log("Can not find form")}),(function(t){Us.setValue(t,{hex:A.from(n[1]).getOr("")}),d_.getField(t,"hex").each((function(t){Ko(t,bo())}))}))}}}),y_()])}})),dropzone:mO((function(t,e){return H_(t,e.shared.providers)})),grid:mO((function(t,e){return function(t,e){return{dom:{tag:"div",classes:["tox-form__grid","tox-form__grid--"+t.columns+"col"]},components:L(t.items,e.interpreter)}}(t,e.shared)})),listbox:mO((function(t,e){return IS(t,e)})),selectbox:mO((function(t,e){return function(t,e){var n=L(t.items,(function(t){return{text:e.translate(t.text),value:t.value}})),o=t.label.map((function(t){return ay(t,e)})),r=Zx.parts.field({dom:{},selectAttributes:{size:t.size},options:n,factory:NS,selectBehaviours:uc([xv.config({disabled:function(){return t.disabled||e.isDisabled()}}),ey.config({}),pg("selectbox-change",[ir(xo(),(function(e,n){Jo(e,uy,{name:t.name})}))])])}),i=t.size>1?A.none():A.some({dom:{tag:"div",classes:["tox-selectfield__icon-js"],innerHtml:xp("chevron-down",e.icons)}}),a={dom:{tag:"div",classes:["tox-selectfield"]},components:G([[r],i.toArray()])};return Zx.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:G([o.toArray(),[a]]),fieldBehaviours:uc([xv.config({disabled:function(){return t.disabled||e.isDisabled()},onDisabled:function(t){Zx.getField(t).each(xv.disable)},onEnabled:function(t){Zx.getField(t).each(xv.enable)}}),Kv()])})}(t,e.shared.providers)})),sizeinput:mO((function(t,e){return dS(t,e.shared.providers)})),urlinput:mO((function(t,e){return function(t,e,n){var o,r=e.shared.providers,i=function(e){var o=Us.getValue(e);n.addToHistory(o.value,t.filetype)},a=Zx.parts.field({factory:ZS,dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":dO,type:"url"},minChars:0,responseTime:0,fetch:function(o){var r=fO(t.filetype,o,n),i=$C(r,ch.BUBBLE_TO_SANDBOX,e,!1);return Dy(i)},getHotspot:function(t){return d.getOpt(t)},onSetValue:function(t,e){t.hasConfigured(Vy)&&Vy.run(t).get(m)},typeaheadBehaviours:uc(G([n.getValidationHandler().map((function(e){return Vy.config({getRoot:function(t){return zr(t.element)},invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:function(t,e){c.getOpt(t).each((function(t){Kr(t.element,"title",r.translate(e))}))}},validator:{validate:function(n){var o=Us.getValue(n);return eO((function(n){e({type:t.filetype,url:o.value},(function(t){if("invalid"===t.status){var e=ut(t.message);n(e)}else{var o=at(t.message);n(o)}}))}))},validateOnLoad:!1}})})).toArray(),[xv.config({disabled:function(){return t.disabled||r.isDisabled()}}),ey.config({}),pg("urlinput-events",G(["file"===t.filetype?[ir(bo(),(function(e){Jo(e,uy,{name:t.name})}))]:[],[ir(xo(),(function(e){Jo(e,uy,{name:t.name}),i(e)})),ir(zo(),(function(e){Jo(e,uy,{name:t.name}),i(e)}))]]))]])),eventOrder:(o={},o[bo()]=["streaming","urlinput-events","invalidating"],o),model:{getDisplayText:function(t){return t.value},selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:e.shared.getSink,parts:{menu:Sh(0,0,"normal")},onExecute:function(t,e,n){Jo(e,fy,{})},onItemExecute:function(e,n,o,r){i(e),Jo(e,uy,{name:t.name})}}),u=t.label.map((function(t){return ay(t,r)})),c=vp(function(t,e,n,o){return void 0===n&&(n=t),void 0===o&&(o=t),{dom:{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+t],innerHtml:xp(n,r.icons),attributes:_({title:r.translate(o),"aria-live":"polite"},e.fold((function(){return{}}),(function(t){return{id:t}})))}}}("invalid",A.some(dO),"warning")),l=vp({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[c.asSpec()]}),s=n.getUrlPicker(t.filetype),f=ui("browser.url.event"),d=vp({dom:{tag:"div",classes:["tox-control-wrap"]},components:[a,l.asSpec()],behaviours:uc([xv.config({disabled:function(){return t.disabled||r.isDisabled()}})])}),g=vp(tS({name:t.name,icon:A.some("browse"),text:t.label.getOr(""),disabled:t.disabled,primary:!1,borderless:!0},(function(t){return Ko(t,f)}),r,[],["tox-browse-url"]));return Zx.sketch({dom:iy([]),components:u.toArray().concat([{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:G([[d.asSpec()],s.map((function(){return g.asSpec()})).toArray()])}]),fieldBehaviours:uc([xv.config({disabled:function(){return t.disabled||r.isDisabled()},onDisabled:function(t){Zx.getField(t).each(xv.disable),g.getOpt(t).each(xv.disable)},onEnabled:function(t){Zx.getField(t).each(xv.enable),g.getOpt(t).each(xv.enable)}}),Kv(),pg("url-input-events",[ir(f,(function(e){nd.getCurrent(e).each((function(n){var o=Us.getValue(n),r=_({fieldname:t.name},o);s.each((function(o){o(r).get((function(o){Us.setValue(n,o),Jo(e,uy,{name:t.name})}))}))}))}))])])})}(t,e,e.urlinput)})),customeditor:mO((function(t){var e=sn(A.none()),n=vp({dom:{tag:t.tag}}),o=sn(A.none());return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:uc([pg("custom-editor-events",[mr((function(r){n.getOpt(r).each((function(n){(!function(t){return Object.prototype.hasOwnProperty.call(t,"init")}(t)?S_.load(t.scriptId,t.scriptUrl).then((function(e){return e(n.element.dom,t.settings)})):t.init(n.element.dom)).then((function(t){o.get().each((function(e){t.setValue(e)})),o.set(A.none()),e.set(A.some(t))}))}))}))]),Us.config({store:{mode:"manual",getValue:function(){return e.get().fold((function(){return o.get().getOr("")}),(function(t){return t.getValue()}))},setValue:function(t,n){e.get().fold((function(){o.set(A.some(n))}),(function(t){return t.setValue(n)}))}}}),y_()]),components:[n.asSpec()]}})),htmlpanel:mO((function(t){return"presentation"===t.presets?Yx.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html}}):Yx.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:uc([ey.config({}),yg.config({})])})})),imagetools:mO((function(t,e){return ES(t,e.shared.providers)})),table:mO((function(t,e){return function(t,e){var n,o,r=function(t){return{dom:{tag:"th",innerHtml:e.translate(t)}}},i=function(t){return{dom:{tag:"td",innerHtml:e.translate(t)}}},a=function(t){return{dom:{tag:"tr"},components:L(t,i)}};return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[(o=t.header,{dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:L(o,r)}]}),(n=t.cells,{dom:{tag:"tbody"},components:L(n,a)})],behaviours:uc([ey.config({}),yg.config({})])}}(t,e.shared.providers)})),panel:mO((function(t,e){return function(t,e){return{dom:{tag:"div",classes:t.classes},components:L(t.items,e.shared.interpreter)}}(t,e)}))},pO={field:function(t,e){return e}},hO=function(t,e,n){var o=Bt(n,{shared:{interpreter:function(e){return vO(t,e,o)}}});return vO(t,e,o)},vO=function(t,e,n){return Mt(gO,e.type).fold((function(){return console.error('Unknown factory type "'+e.type+'", defaulting to container: ',e),e}),(function(o){return o(t,e,n)}))},bO={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},xO=function(t,e,n){var o=jc(-12,12,bO),r={maxHeightFunction:Nc()};return function(){return n()?{anchor:"node",root:Br(t()),node:A.from(t()),bubble:o,layouts:{onRtl:function(){return[dp]},onLtr:function(){return[fp]}},overrides:r}:{anchor:"hotspot",hotspot:e(),bubble:o,layouts:{onRtl:function(){return[Vu]},onLtr:function(){return[ju]}},overrides:r}}},yO=function(t,e,n){return function(){return n()?{anchor:"node",root:Br(t()),node:A.from(t()),layouts:{onRtl:function(){return[mp]},onLtr:function(){return[mp]}}}:{anchor:"hotspot",hotspot:e(),layouts:{onRtl:function(){return[$u]},onLtr:function(){return[$u]}}}}},wO=function(t,e){return function(){return{anchor:"selection",root:e(),getSelection:function(){var e=t.selection.getRng();return A.some(ml.range(dn.fromDom(e.startContainer),e.startOffset,dn.fromDom(e.endContainer),e.endOffset))}}}},kO=function(t){return function(e){return{anchor:"node",root:t(),node:e}}},_O=function(t,e,n){var o=Nv(t),r=function(){return dn.fromDom(t.getBody())},i=function(){return dn.fromDom(t.getContentAreaContainer())},a=function(){return o||!n()};return{inlineDialog:xO(i,e,a),banner:yO(i,e,a),cursor:wO(t,r),node:kO(r)}},CO=function(t){return function(e,n){ux(t)(e,n)}},SO=function(t){return function(){return Jb(t)}},OO=function(t){return function(){return Zb(t)}},zO=function(t){return function(){return tx(t)}},TO=function(t){return{colorPicker:CO(t),hasCustomColors:SO(t),getColors:OO(t),getColorCols:zO(t)}},MO=function(t){return function(){return function(t){return t.getParam("draggable_modal",!1,"boolean")}(t)}},AO=function(t){return{isDraggableModal:MO(t)}},DO=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],EO=function t(e){return W(e,(function(e,n){if(At(n,"items")){var o=t(n.items);return{customFormats:e.customFormats.concat(o.customFormats),formats:e.formats.concat([{title:n.title,items:o.formats}])}}if(function(t){return At(t,"inline")}(n)||function(t){return At(t,"block")}(n)||function(t){return At(t,"selector")}(n)){var i="custom-"+(r(n.name)?n.name:n.title.toLowerCase());return{customFormats:e.customFormats.concat([{name:i,format:n}]),formats:e.formats.concat([{title:n.title,format:i,icon:n.icon}])}}return _(_({},e),{formats:e.formats.concat(n)})}),{customFormats:[],formats:[]})},PO=function(t){return function(t){return A.from(t.getParam("style_formats")).filter(a)}(t).map((function(e){var n=function(t,e){var n=EO(e),o=function(e){F(e,(function(e){t.formatter.has(e.name)||t.formatter.register(e.name,e.format)}))};return t.formatter?o(n.customFormats):t.on("init",(function(){o(n.customFormats)})),n.formats}(t,e);return function(t){return t.getParam("style_formats_merge",!1,"boolean")}(t)?DO.concat(n):n})).getOr(DO)},HO=function(t,e,n){var o={type:"formatter",isSelected:e(t.format),getStylePreview:n(t.format)};return Bt(t,o)},BO=function(t,e,n,o){return function e(i){return L(i,(function(i){var a=yt(i);if(Dt(i,"items")){var u=e(i.items);return Bt(function(t){return Bt(t,{type:"submenu"})}(i),{getStyleItems:function(){return u}})}return Dt(i,"format")?function(t){return HO(t,n,o)}(i):1===a.length&&B(a,"title")?Bt(i,{type:"separator"}):function(e){var i=r(e.name)?e.name:ui(e.title),a="custom-"+i,u={type:"formatter",format:a,isSelected:n(a),getStylePreview:o(a)},c=Bt(e,u);return t.formatter.register(i,c),c}(i)}))}(e)},RO=function(t){var e=function(e){return function(){return t.formatter.match(e)}},n=function(e){return function(){var n=t.formatter.get(e);return void 0!==n?A.some({tag:n.length>0&&(n[0].inline||n[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(e))}):A.none()}},o=function t(e){var n=e.items;return void 0!==n&&n.length>0?Y(n,t):[e.format]},r=sn([]),i=sn([]),a=sn([]),u=sn([]),c=sn(!1);t.on("PreInit",(function(a){var u=PO(t),c=BO(t,u,e,n);r.set(c),i.set(Y(c,o))})),t.on("addStyleModifications",(function(r){var i=BO(t,r.items,e,n);a.set(i),c.set(r.replace),u.set(Y(i,o))}));return{getData:function(){var t=c.get()?[]:r.get(),e=a.get();return t.concat(e)},getFlattenedKeys:function(){var t=c.get()?[]:i.get(),e=u.get();return t.concat(e)}}},IO=O_.trim,NO=function(t){return function(e){if(function(t){return l(t)&&1===t.nodeType}(e)){if(e.contentEditable===t)return!0;if(e.getAttribute("data-mce-contenteditable")===t)return!0}return!1}},LO=NO("true"),FO=NO("false"),VO=function(t,e,n,o,r){return{type:t,title:e,url:n,level:o,attach:r}},jO=function(t){return t.innerText||t.textContent},UO=function(t){return function(t){return t&&"A"===t.nodeName&&void 0!==(t.id||t.name)}(t)&&qO(t)},WO=function(t){return t&&/^(H[1-6])$/.test(t.nodeName)},qO=function(t){return function(t){for(;t=t.parentNode;){var e=t.contentEditable;if(e&&"inherit"!==e)return LO(t)}return!1}(t)&&!FO(t)},$O=function(t){return WO(t)&&qO(t)},GO=function(t){var e=function(t){return t.id?t.id:ui("h")}(t);return VO("header",jO(t),"#"+e,function(t){return WO(t)?parseInt(t.nodeName.substr(1),10):0}(t),(function(){t.id=e}))},YO=function(t){var e=t.id||t.name,n=jO(t);return VO("anchor",n||"#"+e,"#"+e,0,m)},XO=function(t){var e,n,o=(e="h1,h2,h3,h4,h5,h6,a:not([href])",n=t,L(Ol(dn.fromDom(n),e),(function(t){return t.dom})));return o},KO=function(t){return IO(t.title).length>0},JO=function(t){var e=XO(t);return j(function(t){return L(j(t,$O),GO)}(e).concat(function(t){return L(j(t,UO),YO)}(e)),KO)},ZO="tinymce-url-history",QO=function(t){return r(t)&&/^https?/.test(t)},tz=function(t){return i(t)&&zt(t,(function(t){return!(a(e=t)&&e.length<=5&&X(e,QO));var e})).isNone()},ez=function(){var t,e=qb.getItem(ZO);if(null===e)return{};try{t=JSON.parse(e)}catch(n){if(n instanceof SyntaxError)return console.log("Local storage "+ZO+" was not valid JSON",n),{};throw n}return tz(t)?t:(console.log("Local storage "+ZO+" was not valid format",t),{})},nz=function(t){var e=ez();return Object.prototype.hasOwnProperty.call(e,t)?e[t]:[]},oz=function(t,e){if(QO(t)){var n=ez(),o=Object.prototype.hasOwnProperty.call(n,e)?n[e]:[],r=j(o,(function(e){return e!==t}));n[e]=[t].concat(r).slice(0,5),function(t){if(!tz(t))throw new Error("Bad format for history:\n"+JSON.stringify(t));qb.setItem(ZO,JSON.stringify(t))}(n)}},rz=function(t){return!!t},iz=function(t){return _t(O_.makeMap(t,/[, ]/),rz)},az=function(t){return A.from(function(t){return t.getParam("file_picker_callback")}(t)).filter(s)},uz=function(t,e){var n=function(t){var e=A.some(function(t){return t.getParam("file_picker_types")}(t)).filter(rz),n=A.some(function(t){return t.getParam("file_browser_callback_types")}(t)).filter(rz),o=e.or(n).map(iz);return az(t).fold(y,(function(t){return o.fold(w,(function(t){return yt(t).length>0&&t}))}))}(t);return u(n)?n?az(t):A.none():n[e]?az(t):A.none()},cz=function(t){return A.from(t).filter(r).getOrUndefined()},lz=function(t){return{getHistory:nz,addToHistory:oz,getLinkInformation:function(){return function(t){return function(t){return!1===t.getParam("typeahead_urls")}(t)?A.none():A.some({targets:JO(t.getBody()),anchorTop:cz(Wv(t)),anchorBottom:cz(qv(t))})}(t)},getValidationHandler:function(){return function(t){return A.from(function(t){var e=t.getParam("file_picker_validator_handler",void 0,"function");return void 0===e?t.getParam("filepicker_validator_handler",void 0,"function"):e}(t))}(t)},getUrlPicker:function(e){return function(t,e){return uz(t,e).map((function(n){return function(o){return Ay((function(a){var u=_({filetype:e,fieldname:o.fieldname},A.from(o.meta).getOr({}));n.call(t,(function(t,e){if(!r(t))throw new Error("Expected value to be string");if(void 0!==e&&!i(e))throw new Error("Expected meta to be a object");a({value:t,meta:e})}),o.value,u)}))}}))}(t,e)}}},sz=function(t,e,n){var o=sn(!1),r=function(t){var e=sn(Rv(t)?"bottom":"top");return{isPositionedAtTop:function(){return"top"===e.get()},getDockingMode:e.get,setDockingMode:e.set}}(e),i={shared:{providers:{icons:function(){return e.ui.registry.getAll().icons},menuItems:function(){return e.ui.registry.getAll().menuItems},translate:iv.translate,isDisabled:function(){return e.mode.isReadOnly()||e.ui.isDisabled()},getSetting:e.getParam.bind(e)},interpreter:function(t){return function(t,e){return vO(pO,t,e)}(t,i)},anchors:_O(e,n,r.isPositionedAtTop),header:r,getSink:function(){return at(t)}},urlinput:lz(e),styleselect:RO(e),colorinput:TO(e),dialog:AO(e),isContextMenuOpen:function(){return o.get()},setContextMenuState:function(t){return o.set(t)}};return i},fz=p((function(t,e){!function(t,e){var n=Ma.max(t,e,["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"]);Ji(t,"max-width",n+"px")}(t,Math.floor(e))})),dz="contexttoolbar-hide",mz=p([Ne("dom"),Qe("shell",!0),Ws("toolbarBehaviours",[gg])]),gz=p([_f({name:"groups",overrides:function(){return{behaviours:uc([gg.config({})])}}})]),pz=Kf({name:"Toolbar",configFields:mz(),partFields:gz(),factory:function(t,e,n,o){var r=function(e){return t.shell?A.some(e):Bf(e,t,"groups")},i=t.shell?{behaviours:[gg.config({})],components:[]}:{behaviours:[],components:e};return{uid:t.uid,dom:t.dom,components:i.components,behaviours:$s(t.toolbarBehaviours,i.behaviours),apis:{setGroups:function(t,e){r(t).fold((function(){throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")}),(function(t){gg.set(t,e)}))}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(t,e,n){t.setGroups(e,n)}}}),hz=function(t,e,n){return{within:t,extra:e,withinWidth:n}},vz=function(t,e,n){var o=function(t,e){var n=W(t,(function(t,n){return e(n,t.len).fold(p(t),(function(e){return{len:e.finish,list:t.list.concat([e])}}))}),{len:0,list:[]});return n.list}(t,(function(t,e){var o=n(t);return A.some({element:t,start:e,finish:e+o,width:o})})),r=j(o,(function(t){return t.finish<=e})),i=U(r,(function(t,e){return t+e.width}),0);return{within:r,extra:o.slice(r.length),withinWidth:i}},bz=function(t){return L(t,(function(t){return t.element}))},xz=function(t,e,n,o){var r=function(t,e,n){var o=vz(e,t,n);return 0===o.extra.length?A.some(o):A.none()}(t,e,n).getOrThunk((function(){return vz(e,t-n(o),n)})),i=r.within,a=r.extra,u=r.withinWidth;return 1===a.length&&a[0].width<=n(o)?function(t,e,n){var o=bz(t.concat(e));return hz(o,[],n)}(i,a,u):a.length>=1?function(t,e,n,o){var r=bz(t).concat([n]);return hz(r,bz(e),o)}(i,a,o,u):function(t,e,n){return hz(bz(t),[],n)}(i,0,u)},yz=function(t,e){var n=L(e,(function(t){return ya(t)}));pz.setGroups(t,n)},wz=function(t,e,n){var o=Rf(t,e,"primary"),r=qy.getCoupled(t,"overflowGroup");Ji(o.element,"visibility","hidden");var i=e.builtGroups.get().concat([r]),a=ot(i,(function(t){return vc(t.element).bind((function(e){return t.getSystem().getByDom(e).toOptional()}))}));n([]),yz(o,i);var u=Aa(o.element),c=xz(u,e.builtGroups.get(),(function(t){return Aa(t.element)}),r);0===c.extra.length?(gg.remove(o,r),n([])):(yz(o,c.within),n(c.extra)),ia(o.element,"visibility"),aa(o.element),a.each(yg.focus)},kz=p([Ws("splitToolbarBehaviours",[qy]),ln("builtGroups",(function(){return sn([])}))]),_z=p([pu(["overflowToggledClass"]),Je("getOverflowBounds"),Ne("lazySink"),ln("overflowGroups",(function(){return sn([])}))].concat(kz())),Cz=p([wf({factory:pz,schema:mz(),name:"primary"}),kf({schema:mz(),name:"overflow"}),kf({name:"overflow-button"}),kf({name:"overflow-group"})]),Sz=p([pu(["toggledClass"]),Ne("lazySink"),Ue("fetch"),Je("getBounds"),Ze("fireDismissalEventInstead",[Qe("event",jo())]),Yc()]),Oz=p([kf({name:"button",overrides:function(t){return{dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:uc([Eg.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])}}}),kf({factory:pz,schema:mz(),name:"toolbar",overrides:function(t){return{toolbarBehaviours:uc([cg.config({mode:"cyclic",onEscape:function(e){return Bf(e,t,"button").each(yg.focus),A.none()}})])}}})]),zz=function(t,e){var n=qy.getCoupled(t,"toolbarSandbox");_s.isOpen(n)?_s.close(n):_s.open(n,e.toolbar())},Tz=function(t,e,n,o){var r=n.getBounds.map((function(t){return t()})),i=n.lazySink(t).getOrDie();ts.positionWithinBounds(i,{anchor:"hotspot",hotspot:t,layouts:o,overrides:{maxWidthFunction:fz()}},e,r)},Mz=function(t,e,n,o,r){pz.setGroups(e,r),Tz(t,e,n,o),Eg.on(t)},Az=Kf({name:"FloatingToolbarButton",factory:function(t,e,n,o){return _(_({},hp.sketch(_(_({},o.button()),{action:function(t){zz(t,o)},buttonBehaviours:Ys({dump:o.button().buttonBehaviours},[qy.config({others:{toolbarSandbox:function(e){return function(t,e,n){var o=eu();return{dom:{tag:"div",attributes:{id:o.id}},behaviours:uc([cg.config({mode:"special",onEscape:function(t){return _s.close(t),A.some(!0)}}),_s.config({onOpen:function(r,i){n.fetch().get((function(r){Mz(t,i,n,e.layouts,r),o.link(t.element),cg.focusIn(i)}))},onClose:function(){Eg.off(t),yg.focus(t),o.unlink(t.element)},isPartOf:function(e,n,o){return ou(n,o)||ou(t,o)},getAttachPoint:function(){return n.lazySink(t).getOrDie()}}),mc.config({channels:_(_({},Ts(_({isExtraPart:y},n.fireDismissalEventInstead.map((function(t){return{fireEventInstead:{event:t.event}}})).getOr({})))),As({doReposition:function(){_s.getState(qy.getCoupled(t,"toolbarSandbox")).each((function(o){Tz(t,o,n,e.layouts)}))}}))})])}}(e,n,t)}}})])}))),{apis:{setGroups:function(e,o){_s.getState(qy.getCoupled(e,"toolbarSandbox")).each((function(r){Mz(e,r,t,n.layouts,o)}))},reposition:function(e){_s.getState(qy.getCoupled(e,"toolbarSandbox")).each((function(o){Tz(e,o,t,n.layouts)}))},toggle:function(t){zz(t,o)},getToolbar:function(t){return _s.getState(qy.getCoupled(t,"toolbarSandbox"))},isOpen:function(t){return _s.isOpen(qy.getCoupled(t,"toolbarSandbox"))}}})},configFields:Sz(),partFields:Oz(),apis:{setGroups:function(t,e,n){t.setGroups(e,n)},reposition:function(t,e){t.reposition(e)},toggle:function(t,e){t.toggle(e)},getToolbar:function(t,e){return t.getToolbar(e)},isOpen:function(t,e){return t.isOpen(e)}}}),Dz=p([Ne("items"),pu(["itemSelector"]),Ws("tgroupBehaviours",[cg])]),Ez=p([Cf({name:"items",unit:"item"})]),Pz=Kf({name:"ToolbarGroup",configFields:Dz(),partFields:Ez(),factory:function(t,e,n,o){return{uid:t.uid,dom:t.dom,components:e,behaviours:$s(t.tgroupBehaviours,[cg.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}}}),Hz=function(t){return L(t,(function(t){return ya(t)}))},Bz=function(t,e,n){wz(t,n,(function(o){n.overflowGroups.set(o),e.getOpt(t).each((function(t){Az.setGroups(t,Hz(o))}))}))},Rz=Kf({name:"SplitFloatingToolbar",configFields:_z(),partFields:Cz(),factory:function(t,e,n,o){var r=vp(Az.sketch({fetch:function(){return Ay((function(e){e(Hz(t.overflowGroups.get()))}))},layouts:{onLtr:function(){return[ju,Vu]},onRtl:function(){return[Vu,ju]},onBottomLtr:function(){return[Wu,Uu]},onBottomRtl:function(){return[Uu,Wu]}},getBounds:n.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:o["overflow-button"](),toolbar:o.overflow()}}));return{uid:t.uid,dom:t.dom,components:e,behaviours:$s(t.splitToolbarBehaviours,[qy.config({others:{overflowGroup:function(){return Pz.sketch(_(_({},o["overflow-group"]()),{items:[r.asSpec()]}))}}})]),apis:{setGroups:function(e,n){t.builtGroups.set(L(n,e.getSystem().build)),Bz(e,r,t)},refresh:function(e){return Bz(e,r,t)},toggle:function(t){r.getOpt(t).each((function(t){Az.toggle(t)}))},isOpen:function(t){return r.getOpt(t).map(Az.isOpen).getOr(!1)},reposition:function(t){r.getOpt(t).each((function(t){Az.reposition(t)}))},getOverflow:function(t){return r.getOpt(t).bind(Az.getToolbar)}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(t,e,n){t.setGroups(e,n)},refresh:function(t,e){t.refresh(e)},reposition:function(t,e){t.reposition(e)},toggle:function(t,e){t.toggle(e)},isOpen:function(t,e){return t.isOpen(e)},getOverflow:function(t,e){return t.getOverflow(e)}}}),Iz=function(t,e){return e.getAnimationRoot.fold((function(){return t.element}),(function(e){return e(t)}))},Nz=function(t){return t.dimension.property},Lz=function(t,e){return t.dimension.getDimension(e)},Fz=function(t,e){var n=Iz(t,e);Wi(n,[e.shrinkingClass,e.growingClass])},Vz=function(t,e){Vi(t.element,e.openClass),Li(t.element,e.closedClass),Ji(t.element,Nz(e),"0px"),aa(t.element)},jz=function(t,e){Vi(t.element,e.closedClass),Li(t.element,e.openClass),ia(t.element,Nz(e))},Uz=function(t,e,n,o){n.setCollapsed(),Ji(t.element,Nz(e),Lz(e,t.element)),aa(t.element),Fz(t,e),Vz(t,e),e.onStartShrink(t),e.onShrunk(t)},Wz=function(t,e,n,o){var r=o.getOrThunk((function(){return Lz(e,t.element)}));n.setCollapsed(),Ji(t.element,Nz(e),r),aa(t.element);var i=Iz(t,e);Vi(i,e.growingClass),Li(i,e.shrinkingClass),Vz(t,e),e.onStartShrink(t)},qz=function(t,e,n){var o=Lz(e,t.element);("0px"===o?Uz:Wz)(t,e,n,A.some(o))},$z=function(t,e,n){var o=Iz(t,e),r=ji(o,e.shrinkingClass),i=Lz(e,t.element);jz(t,e);var a=Lz(e,t.element);(r?function(){Ji(t.element,Nz(e),i),aa(t.element)}:function(){Vz(t,e)})(),Vi(o,e.shrinkingClass),Li(o,e.growingClass),jz(t,e),Ji(t.element,Nz(e),a),n.setExpanded(),e.onStartGrow(t)},Gz=function(t,e,n){var o=Iz(t,e);return!0===ji(o,e.growingClass)},Yz=function(t,e,n){var o=Iz(t,e);return!0===ji(o,e.shrinkingClass)},Xz=Object.freeze({__proto__:null,refresh:function(t,e,n){if(n.isExpanded()){ia(t.element,Nz(e));var o=Lz(e,t.element);Ji(t.element,Nz(e),o)}},grow:function(t,e,n){n.isExpanded()||$z(t,e,n)},shrink:function(t,e,n){n.isExpanded()&&qz(t,e,n)},immediateShrink:function(t,e,n){n.isExpanded()&&Uz(t,e,n)},hasGrown:function(t,e,n){return n.isExpanded()},hasShrunk:function(t,e,n){return n.isCollapsed()},isGrowing:Gz,isShrinking:Yz,isTransitioning:function(t,e,n){return Gz(t,e)||Yz(t,e)},toggleGrow:function(t,e,n){(n.isExpanded()?qz:$z)(t,e,n)},disableTransitions:Fz}),Kz=Object.freeze({__proto__:null,exhibit:function(t,e,n){var o=e.expanded;return Oi(o?{classes:[e.openClass],styles:{}}:{classes:[e.closedClass],styles:Gt(e.dimension.property,"0px")})},events:function(t,e){return nr([dr(wo(),(function(n,o){o.event.raw.propertyName===t.dimension.property&&(Fz(n,t),e.isExpanded()&&ia(n.element,t.dimension.property),(e.isExpanded()?t.onGrown:t.onShrunk)(n))}))])}}),Jz=[Ne("closedClass"),Ne("openClass"),Ne("shrinkingClass"),Ne("growingClass"),Ge("getAnimationRoot"),vu("onShrunk"),vu("onStartShrink"),vu("onGrown"),vu("onStartGrow"),Qe("expanded",!1),Le("dimension",Te("property",{width:[wu("property","width"),wu("getDimension",(function(t){return Aa(t)+"px"}))],height:[wu("property","height"),wu("getDimension",(function(t){return _a(t)+"px"}))]}))],Zz=Object.freeze({__proto__:null,init:function(t){var e=sn(t.expanded);return Ci({isExpanded:function(){return!0===e.get()},isCollapsed:function(){return!1===e.get()},setCollapsed:v(e.set,!1),setExpanded:v(e.set,!0),readState:function(){return"expanded: "+e.get()}})}}),Qz=lc({fields:Jz,name:"sliding",active:Kz,apis:Xz,state:Zz}),tT=p([pu(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),vu("onOpened"),vu("onClosed")].concat(kz())),eT=p([wf({factory:pz,schema:mz(),name:"primary"}),wf({factory:pz,schema:mz(),name:"overflow",overrides:function(t){return{toolbarBehaviours:uc([Qz.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:function(e){Bf(e,t,"overflow-button").each((function(t){Eg.off(t),yg.focus(t)})),t.onClosed(e)},onGrown:function(e){cg.focusIn(e),t.onOpened(e)},onStartGrow:function(e){Bf(e,t,"overflow-button").each(Eg.on)}}),cg.config({mode:"acyclic",onEscape:function(e){return Bf(e,t,"overflow-button").each(yg.focus),A.some(!0)}})])}}}),kf({name:"overflow-button",overrides:function(t){return{buttonBehaviours:uc([Eg.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])}}}),kf({name:"overflow-group"})]),nT=function(t,e){Bf(t,e,"overflow-button").bind((function(){return Bf(t,e,"overflow")})).each((function(n){oT(t,e),Qz.toggleGrow(n)}))},oT=function(t,e){Bf(t,e,"overflow").each((function(n){wz(t,e,(function(t){var e=L(t,(function(t){return ya(t)}));pz.setGroups(n,e)})),Bf(t,e,"overflow-button").each((function(t){Qz.hasGrown(n)&&Eg.on(t)})),Qz.refresh(n)}))},rT=Kf({name:"SplitSlidingToolbar",configFields:tT(),partFields:eT(),factory:function(t,e,n,o){var r="alloy.toolbar.toggle";return{uid:t.uid,dom:t.dom,components:e,behaviours:$s(t.splitToolbarBehaviours,[qy.config({others:{overflowGroup:function(t){return Pz.sketch(_(_({},o["overflow-group"]()),{items:[hp.sketch(_(_({},o["overflow-button"]()),{action:function(e){Ko(t,r)}}))]}))}}}),pg("toolbar-toggle-events",[ir(r,(function(e){nT(e,t)}))])]),apis:{setGroups:function(e,n){!function(e,n){var o=L(n,e.getSystem().build);t.builtGroups.set(o)}(e,n),oT(e,t)},refresh:function(e){return oT(e,t)},toggle:function(e){return nT(e,t)},isOpen:function(e){return function(t,e){return Bf(t,e,"overflow").map(Qz.hasGrown).getOr(!1)}(e,t)}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(t,e,n){t.setGroups(e,n)},refresh:function(t,e){t.refresh(e)},toggle:function(t,e){t.toggle(e)},isOpen:function(t,e){return t.isOpen(e)}}}),iT=p(ui("toolbar-height-change")),aT=function(t){var e=t.title.fold((function(){return{}}),(function(t){return{attributes:{title:t}}}));return{dom:_({tag:"div",classes:["tox-toolbar__group"]},e),components:[Pz.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled])"},tgroupBehaviours:uc([ey.config({}),yg.config({})])}},uT=function(t){return Pz.sketch(aT(t))},cT=function(t,e){var n=mr((function(e){var n=L(t.initGroups,uT);pz.setGroups(e,n)}));return uc([tb(t.providers.isDisabled),Kv(),cg.config({mode:e,onEscape:t.onEscape,selector:".tox-toolbar__group"}),pg("toolbar-events",[n])])},lT=function(t){var e=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":aT({title:A.none(),items:[]}),"overflow-button":JC({name:"more",icon:A.some("more-drawer"),disabled:!1,tooltip:A.some("More..."),primary:!1,borderless:!1},A.none(),t.providers)},splitToolbarBehaviours:cT(t,e)}},sT=function(t){var e=lT(t),n=Rz.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return Rz.sketch(_(_({},e),{lazySink:t.getSink,getOverflowBounds:function(){var e=t.moreDrawerData.lazyHeader().element,n=qa(e),o=Sr(e),r=qa(o),i=Math.max(o.dom.scrollHeight,r.height);return Ua(n.x+4,r.y,n.width-8,i)},parts:_(_({},e.parts),{overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}}),components:[n],markers:{overflowToggledClass:"tox-tbtn--enabled"}}))},fT=function(t){var e=rT.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),n=rT.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),o=lT(t);return rT.sketch(_(_({},o),{components:[e,n],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:function(t){t.getSystem().broadcastOn([iT()],{type:"opened"})},onClosed:function(t){t.getSystem().broadcastOn([iT()],{type:"closed"})}}))},dT=function(t){var e=t.cyclicKeying?"cyclic":"acyclic";return pz.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===uh.scrolling?["tox-toolbar--scrolling"]:[])},components:[pz.parts.groups({})],toolbarBehaviours:cT(t,e)})},mT=ce([Ve("type"),Le("items",se([xe([Ve("name"),$e("items",Ee)]),Ee]))].concat($p)),gT=[Ke("text"),Ke("tooltip"),Ke("icon"),Ue("fetch"),an("onSetup",(function(){return m}))],pT=ce(S([Ve("type")],gT)),hT=function(t){return _e("menubutton",pT,t)},vT=ce([Ve("type"),Ke("tooltip"),Ke("icon"),Ke("text"),Je("select"),Ue("fetch"),an("onSetup",(function(){return m})),on("presets","normal",["normal","color","listpreview"]),Qe("columns",1),Ue("onAction"),Ue("onItemAction")]),bT=Object.freeze({__proto__:null,events:function(t,e){var n=function(n,o){t.updateState.each((function(t){var r=t(n,o);e.set(r)})),t.renderComponents.each((function(t){var r=t(o,e.get()),i=L(r,n.getSystem().build);rs(n,i)}))};return nr([ir(To(),(function(e,o){var r=o;if(!r.universal){var i=t.channel;B(r.channels,i)&&n(e,r.data)}})),mr((function(e,o){t.initialData.each((function(t){n(e,t)}))}))])}}),xT=Object.freeze({__proto__:null,getState:function(t,e,n){return n}}),yT=[Ne("channel"),Ge("renderComponents"),Ge("updateState"),Ge("initialData")],wT=lc({fields:yT,name:"reflecting",active:bT,apis:xT,state:Object.freeze({__proto__:null,init:function(){var t=sn(A.none());return{readState:function(){return t.get().fold((function(){return"none"}),(function(t){return t}))},get:function(){return t.get()},set:function(e){return t.set(e)},clear:function(){return t.set(A.none())}}}})}),kT=p([Ne("toggleClass"),Ne("fetch"),xu("onExecute"),Qe("getHotspot",A.some),Qe("getAnchorOverrides",p({})),Yc(),xu("onItemExecute"),Ge("lazySink"),Ne("dom"),vu("onOpen"),Ws("splitDropdownBehaviours",[qy,cg,yg]),Qe("matchWidth",!1),Qe("useMinWidth",!1),Qe("eventOrder",{}),Ge("role")].concat(aw())),_T=wf({factory:hp,schema:[Ne("dom")],name:"arrow",defaults:function(){return{buttonBehaviours:uc([yg.revoke()])}},overrides:function(t){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(e){e.getSystem().getByUid(t.uid).each(Zo)},buttonBehaviours:uc([Eg.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])}}}),CT=wf({factory:hp,schema:[Ne("dom")],name:"button",defaults:function(){return{buttonBehaviours:uc([yg.revoke()])}},overrides:function(t){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(e){e.getSystem().getByUid(t.uid).each((function(n){t.onExecute(n,e)}))}}}}),ST=p([_T,CT,_f({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}}}},schema:[Ne("text")],name:"aria-descriptor"}),kf({schema:[gu()],name:"menu",defaults:function(t){return{onExecute:function(e,n){e.getSystem().getByUid(t.uid).each((function(o){t.onItemExecute(o,e,n)}))}}}}),Gy()]),OT=Kf({name:"SplitDropdown",configFields:kT(),partFields:ST(),factory:function(t,e,n,o){var r,i=function(t){nd.getCurrent(t).each((function(t){md.highlightFirst(t),cg.focusIn(t)}))},a=function(e){tw(t,(function(t){return t}),e,o,i,Cy.HighlightFirst).get(m)},u=function(e){var n=Rf(e,t,"button");return Zo(n),A.some(!0)},c=_(_({},nr([mr((function(e,n){Bf(e,t,"aria-descriptor").each((function(t){var n=ui("aria");Kr(t.element,"id",n),Kr(e.element,"aria-describedby",n)}))}))])),Hg(A.some(a))),l={repositionMenus:function(t){Eg.isOn(t)&&iw(t)}};return{uid:t.uid,dom:t.dom,components:e,apis:l,eventOrder:_(_({},t.eventOrder),(r={},r[Mo()]=["disabling","toggling","alloy.base.behaviour"],r)),events:c,behaviours:$s(t.splitDropdownBehaviours,[qy.config({others:{sandbox:function(e){var n=Rf(e,t,"arrow");return rw(t,e,{onOpen:function(){Eg.on(n),Eg.on(e)},onClose:function(){Eg.off(n),Eg.off(e)}})}}}),cg.config({mode:"special",onSpace:u,onEnter:u,onDown:function(t){return a(t),A.some(!0)}}),yg.config({}),Eg.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},apis:{repositionMenus:function(t,e){return t.repositionMenus(e)}}}),zT=function(t){return{isDisabled:function(){return xv.isDisabled(t)},setDisabled:function(e){return xv.set(t,e)}}},TT=function(t){return{setActive:function(e){Eg.set(t,e)},isActive:function(){return Eg.isOn(t)},isDisabled:function(){return xv.isDisabled(t)},setDisabled:function(e){return xv.set(t,e)}}},MT=function(t,e){return t.map((function(t){return{"aria-label":e.translate(t),title:e.translate(t)}})).getOr({})},AT=ui("focus-button"),DT=["checklist","ordered-list"],ET=["indent","outdent","table-insert-column-after","table-insert-column-before","unordered-list"],PT=function(t,e,n,o,r,i){var a,u=function(t){return iv.isRtl()&&B(DT,t)?t+"-rtl":t},c=iv.isRtl()&&t.exists((function(t){return B(ET,t)}));return{dom:{tag:"button",classes:["tox-tbtn"].concat(e.isSome()?["tox-tbtn--select"]:[]).concat(c?["tox-tbtn__icon-rtl"]:[]),attributes:MT(n,i)},components:ab([t.map((function(t){return PC(u(t),i.icons)})),e.map((function(t){return BC(t,"tox-tbtn",i)}))]),eventOrder:(a={},a[co()]=["focusing","alloy.base.behaviour","common-button-display-events"],a),buttonBehaviours:uc([tb(i.isDisabled),Kv(),pg("common-button-display-events",[ir(co(),(function(t,e){e.event.prevent(),Ko(t,AT)}))])].concat(o.map((function(n){return wT.config({channel:n,initialData:{icon:t,text:e},renderComponents:function(t,e){return ab([t.icon.map((function(t){return PC(u(t),i.icons)})),t.text.map((function(t){return BC(t,"tox-tbtn",i)}))])}})})).toArray()).concat(r.getOr([])))}},HT=function(t,e,n){var o,r=sn(m),i=PT(t.icon,t.text,t.tooltip,A.none(),A.none(),n);return hp.sketch({dom:i.dom,components:i.components,eventOrder:IC,buttonBehaviours:uc([pg("toolbar-button-events",[(o={onAction:t.onAction,getApi:e.getApi},hr((function(t,e){eb(o,t)((function(e){Jo(t,RC,{buttonApi:e}),o.onAction(e)}))}))),nb(e,r),ob(e,r)]),tb((function(){return t.disabled||n.isDisabled()})),Kv()].concat(e.toolbarButtonBehaviours))})},BT=function(t,e,n){return HT(t,{toolbarButtonBehaviours:[].concat(n.length>0?[pg("toolbarButtonWith",n)]:[]),getApi:zT,onSetup:t.onSetup},e)},RT=function(t,e,n){return Bt(HT(t,{toolbarButtonBehaviours:[gg.config({}),Eg.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(n.length>0?[pg("toolbarToggleButtonWith",n)]:[]),getApi:TT,onSetup:t.onSetup},e))},IT=function(t,e,n){return function(o){return Ay((function(t){return e.fetch(t)})).map((function(r){return A.from(zx(Bt(cx(ui("menu-value"),r,(function(n){e.onItemAction(t(o),n)}),e.columns,e.presets,ch.CLOSE_ON_EXECUTE,e.select.getOr(y),n),{movement:sx(e.columns,e.presets),menuBehaviours:Yh("auto"!==e.columns?[]:[mr((function(t,n){$h(t,4,xh(e.presets)).each((function(e){var n=e.numRows,o=e.numColumns;cg.setGridSize(t,n,o)}))}))])})))}))}},NT=function(t,e){return ir(RC,(function(n,o){var r=function(t){return{hide:function(){return Ko(t,Po())},getValue:function(){return Us.getValue(t)}}}(t.get(n));e.onAction(r,o.event.buttonApi)}))},LT=function(t,e,n){var o={backstage:{shared:{providers:n}}};return"contextformtogglebutton"===e.type?function(t,e,n){var o=e.original;o.primary;var r=C(o,["primary"]),i=Ce(Jp(_(_({},r),{type:"togglebutton",onAction:m})));return RT(i,n.backstage.shared.providers,[NT(t,e)])}(t,e,o):function(t,e,n){var o=e.original;o.primary;var r=C(o,["primary"]),i=Ce(Yp(_(_({},r),{type:"button",onAction:m})));return BT(i,n.backstage.shared.providers,[NT(t,e)])}(t,e,o)},FT=function(t,e){var n=t.label.fold((function(){return{}}),(function(t){return{"aria-label":t}})),o=vp(wy.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:n,selectOnFocus:!0,inputBehaviours:uc([cg.config({mode:"special",onEnter:function(t){return r.findPrimary(t).map((function(t){return Zo(t),!0}))},onLeft:function(t,e){return e.cut(),A.none()},onRight:function(t,e){return e.cut(),A.none()}})])})),r=function(t,e,n){var o=L(e,(function(e){return vp(LT(t,e,n))}));return{asSpecs:function(){return L(o,(function(t){return t.asSpec()}))},findPrimary:function(t){return ot(e,(function(e,n){return e.primary?A.from(o[n]).bind((function(e){return e.getOpt(t)})).filter(b(xv.isDisabled)):A.none()}))}}}(o,t.commands,e);return[{title:A.none(),items:[o.asSpec()]},{title:A.none(),items:r.asSpecs()}]},VT=FT,jT=function(t,e){var n=Na(window),o=Wa(dn.fromDom(t.getContentAreaContainer())),r=zv(t)||Tv(t)||Av(t),i=function(t,e){var n=Math.max(e.x,t.x),o=t.right-n,r=e.width-(n-e.x);return{x:n,width:Math.min(o,r)}}(o,n),a=i.x,u=i.width;if(t.inline&&!r)return Ua(a,n.y,u,n.height);var c=function(t,e,n,o){var r=dn.fromDom(t.getContainer()),i=Qa(r,".tox-editor-header").getOr(r),a=Wa(i),u=a.y>=e.bottom,c=o&&!u;if(t.inline&&c)return{y:Math.max(a.bottom,n.y),bottom:n.bottom};if(t.inline&&!c)return{y:n.y,bottom:Math.min(a.y,n.bottom)};var l=Wa(r);return c?{y:Math.max(a.bottom,n.y),bottom:Math.min(l.bottom,n.bottom)}:{y:Math.max(l.y,n.y),bottom:Math.min(a.y,n.bottom)}}(t,o,n,e.header.isPositionedAtTop()),l=c.y,s=c.bottom;return Ua(a,l,u,s-l)},UT=function(t,e){var n=j(e,(function(e){return e.predicate(t.dom)})),o=V(n,(function(t){return"contexttoolbar"===t.type}));return{contextToolbars:o.pass,contextForms:o.fail}},WT=function(t,e,n){var o=UT(t,e);if(o.contextForms.length>0)return A.some({elem:t,toolbars:[o.contextForms[0]]});var r=UT(t,n);if(r.contextForms.length>0)return A.some({elem:t,toolbars:[r.contextForms[0]]});if(o.contextToolbars.length>0||r.contextToolbars.length>0){var i=function(t){if(t.length<=1)return t;var e=function(e){return R(t,(function(t){return t.position===e}))},n=function(e){return j(t,(function(t){return t.position===e}))},o=e("selection"),r=e("node");if(o||r){if(r&&o){var i=n("node"),a=L(n("selection"),(function(t){return _(_({},t),{position:"node"})}));return i.concat(a)}return n(o?"selection":"node")}return n("line")}(o.contextToolbars.concat(r.contextToolbars));return A.some({elem:t,toolbars:i})}return A.none()},qT=function(t,e,n){return t(e)?A.none():Zn(e,(function(t){var e=UT(t,n.inNodeScope),o=e.contextToolbars,r=e.contextForms,i=r.length>0?r:function(t){if(t.length<=1)return t;var e=function(e){return q(t,(function(t){return t.position===e}))},n=e("selection").orThunk((function(){return e("node")})).orThunk((function(){return e("line")})).map((function(t){return t.position}));return n.fold((function(){return[]}),(function(e){return j(t,(function(t){return t.position===e}))}))}(o);return i.length>0?A.some({elem:t,toolbars:i}):A.none()}),t)},$T=function(t,e){var n={},o=[],r=[],i={},a={},u=function(t,u){var c=Ce(_e("ContextForm",rh,u));n[t]=c,c.launch.map((function(n){i["form:"+t]=_(_({},u.launch),{type:"contextformtogglebutton"===n.type?"togglebutton":"button",onAction:function(){e(c)}})})),"editor"===c.scope?r.push(c):o.push(c),a[t]=c},c=function(t,e){var n;(n=e,_e("ContextToolbar",ih,n)).each((function(n){"editor"===e.scope?r.push(n):o.push(n),a[t]=n}))},l=yt(t);return F(l,(function(e){var n=t[e];"contextform"===n.type?u(e,n):"contexttoolbar"===n.type&&c(e,n)})),{forms:n,inNodeScope:o,inEditorScope:r,lookupTable:a,formNavigators:i}},GT=ui("forward-slide"),YT=ui("backward-slide"),XT=ui("change-slide-event"),KT="tox-pop--resizing",JT=function(t,e,n){var o=function(t,o,i,a){var u=e.shared.providers.translate(t.title);if("separator"===t.type)return A.some({type:"separator",text:u});if("submenu"===t.type){var c=Y(t.getStyleItems(),(function(t){return r(t,o,a)}));return 0===o&&c.length<=0?A.none():A.some({type:"nestedmenuitem",text:u,disabled:c.length<=0,getSubmenuItems:function(){return Y(t.getStyleItems(),(function(t){return r(t,o,a)}))}})}return A.some(_({type:"togglemenuitem",text:u,icon:t.icon,active:t.isSelected(a),disabled:i,onAction:n.onAction(t)},t.getStylePreview().fold((function(){return{}}),(function(t){return{meta:{style:t}}}))))},r=function(t,e,r){var i="formatter"===t.type&&n.isInvalid(t);return 0===e?i?[]:o(t,e,!1,r).toArray():o(t,e,i,r).toArray()},i=function(t){var e=n.getCurrentValue(),o=n.shouldHide?0:1;return Y(t,(function(t){return r(t,o,e)}))};return{validateItems:i,getFetch:function(t,e){return function(n,o){var r=e(),a=i(r);o($C(a,ch.CLOSE_ON_EXECUTE,t,!1))}}}},ZT=function(t,e,n){var o=n.dataset,r="basic"===o.type?function(){return L(o.data,(function(t){return HO(t,n.isSelectedFor,n.getPreviewFor)}))}:o.getData;return{items:JT(0,e,n),getStyleItems:r}},QT=function(t,e,n){var o=ZT(0,e,n),r=o.items,i=o.getStyleItems;return FC({text:n.icon.isSome()?A.none():A.some(""),icon:n.icon,tooltip:A.from(n.tooltip),role:A.none(),fetch:r.getFetch(e,i),onSetup:function(e){var o=function(){var t=e.getComponent();t.getSystem().isConnected()&&n.updateText(t)};return o(),t.on("NodeChange",o),function(){t.off("NodeChange",o)}},getApi:function(t){return{getComponent:p(t)}},columns:1,presets:"normal",classes:n.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",e.shared)};!function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"}(AS||(AS={}));var tM,eM,nM,oM,rM,iM=function(t,e,n,o){var r=function(t){return L(t,(function(t){var e=t,n=t,o=t.split("=");return o.length>1&&(e=o[0],n=o[1]),{title:e,format:n}}))}(function(t,e){return e===AS.SemiColon?t.replace(/;$/,"").split(";"):t.split(" ")}(t.getParam(e,n,"string"),o));return{type:"basic",data:r}},aM=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],uM=function(t){var e={type:"basic",data:aM};return{tooltip:"Align",icon:A.some("align-left"),isSelectedFor:function(e){return function(){return t.formatter.match(e)}},getCurrentValue:A.none,getPreviewFor:function(t){return function(){return A.none()}},onAction:function(e){return function(){return q(aM,(function(t){return t.format===e.format})).each((function(e){return t.execCommand(e.command)}))}},updateText:function(e){var n=q(aM,(function(e){return t.formatter.match(e.format)})),o=n.fold((function(){return"left"}),(function(t){return t.title.toLowerCase()}));Jo(e,LC,{icon:"align-"+o})},dataset:e,shouldHide:!1,isInvalid:function(e){return!t.formatter.canApply(e.format)}}},cM=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],lM=function(t){var e=t.split(/\s*,\s*/);return L(e,(function(t){return t.replace(/^['"]+|['"]+$/g,"")}))},sM=function(t){var e=function(){var e=function(t){return t?lM(t)[0]:""},o=t.queryCommandValue("FontName"),r=n.data,i=o?o.toLowerCase():"",a=q(r,(function(t){var n=t.format;return n.toLowerCase()===i||e(n).toLowerCase()===e(i).toLowerCase()})).orThunk((function(){return function(t){var e;return 0===t.indexOf("-apple-system")&&(e=lM(t.toLowerCase()),X(cM,(function(t){return e.indexOf(t.toLowerCase())>-1})))}(i)?A.from({title:"System Font",format:i}):A.none()}));return{matchOpt:a,font:o}},n=iM(t,"font_formats","Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",AS.SemiColon);return{tooltip:"Fonts",icon:A.none(),isSelectedFor:function(t){return function(e){return e.exists((function(e){return e.format===t}))}},getCurrentValue:function(){return e().matchOpt},getPreviewFor:function(t){return function(){return A.some({tag:"div",styles:-1===t.indexOf("dings")?{"font-family":t}:{}})}},onAction:function(e){return function(){t.undoManager.transact((function(){t.focus(),t.execCommand("FontName",!1,e.format)}))}},updateText:function(t){var n=e(),o=n.matchOpt,r=n.font,i=o.fold((function(){return r}),(function(t){return t.title}));Jo(t,NC,{text:i})},dataset:n,shouldHide:!1,isInvalid:y}},fM={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},dM={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},mM=function(t,e){return/[0-9.]+px$/.test(t)?function(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}(72*parseInt(t,10)/96,e||0)+"pt":Mt(dM,t).getOr(t)},gM=function(t){var e=function(){var e=A.none(),n=o.data,r=t.queryCommandValue("FontSize");if(r)for(var i=function(t){var o=mM(r,t),i=function(t){return Mt(fM,t).getOr("")}(o);e=q(n,(function(t){return t.format===r||t.format===o||t.format===i}))},a=3;e.isNone()&&a>=0;a--)i(a);return{matchOpt:e,size:r}},n=p(A.none),o=iM(t,"fontsize_formats","8pt 10pt 12pt 14pt 18pt 24pt 36pt",AS.Space);return{tooltip:"Font sizes",icon:A.none(),isSelectedFor:function(t){return function(e){return e.exists((function(e){return e.format===t}))}},getPreviewFor:n,getCurrentValue:function(){return e().matchOpt},onAction:function(e){return function(){t.undoManager.transact((function(){t.focus(),t.execCommand("FontSize",!1,e.format)}))}},updateText:function(t){var n=e(),o=n.matchOpt,r=n.size,i=o.fold((function(){return r}),(function(t){return t.title}));Jo(t,NC,{text:i})},dataset:o,shouldHide:!1,isInvalid:y}},pM=function(t,e){var n=e(),o=L(n,(function(t){return t.format}));return A.from(t.formatter.closest(o)).bind((function(t){return q(n,(function(e){return e.format===t}))})).orThunk((function(){return Zf(t.formatter.match("p"),{title:"Paragraph",format:"p"})}))},hM=function(t){var e=sn(A.none()),n=function(){return e.get().each(t)};return{clear:function(){n(),e.set(A.none())},isSet:function(){return e.get().isSome()},set:function(t){n(),e.set(A.some(t))}}},vM=function(){return hM((function(t){return t.destroy()}))},bM=function(){return hM((function(t){return t.unbind()}))},xM=function(t,e){return function(n){var o=bM(),r=function(){n.setActive(t.formatter.match(e));var r=t.formatter.formatChanged(e,n.setActive);o.set(r)};return t.initialized?r():t.on("init",r),o.clear}},yM=function(t){return function(e){return function(){t.undoManager.transact((function(){t.focus(),t.execCommand("mceToggleFormat",!1,e.format)}))}}},wM=function(t){var e=iM(t,"block_formats","Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre",AS.SemiColon);return{tooltip:"Blocks",icon:A.none(),isSelectedFor:function(e){return function(){return t.formatter.match(e)}},getCurrentValue:A.none,getPreviewFor:function(e){return function(){var n=t.formatter.get(e);return A.some({tag:n.length>0&&(n[0].inline||n[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(e))})}},onAction:yM(t),updateText:function(n){var o=pM(t,(function(){return e.data})).fold((function(){return"Paragraph"}),(function(t){return t.title}));Jo(n,NC,{text:o})},dataset:e,shouldHide:!1,isInvalid:function(e){return!t.formatter.canApply(e.format)}}},kM=function(t,e){return{tooltip:"Formats",icon:A.none(),isSelectedFor:function(e){return function(){return t.formatter.match(e)}},getCurrentValue:A.none,getPreviewFor:function(e){return function(){var n=t.formatter.get(e);return void 0!==n?A.some({tag:n.length>0&&(n[0].inline||n[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(e))}):A.none()}},onAction:yM(t),updateText:function(e){var n=Y(PO(t),(function t(e){var n=e.items;return void 0!==n&&n.length>0?Y(n,t):[{title:e.title,format:e.format}]})),o=pM(t,(function(){return n})).fold((function(){return"Paragraph"}),(function(t){return t.title}));Jo(e,NC,{text:o})},shouldHide:t.getParam("style_formats_autohide",!1,"boolean"),isInvalid:function(e){return!t.formatter.canApply(e.format)},dataset:e}},_M=[{name:"history",items:["undo","redo"]},{name:"styles",items:["styleselect"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],CM=function(t,e){return function(n,o,r){var i=t(n).mapError((function(t){return Oe(t)})).getOrDie();return e(i,o,r)}},SM={button:CM(Yp,(function(t,e){return n=t,o=e.backstage.shared.providers,BT(n,o,[]);var n,o})),togglebutton:CM(Jp,(function(t,e){return n=t,o=e.backstage.shared.providers,RT(n,o,[]);var n,o})),menubutton:CM(hT,(function(t,e){return YC(t,"tox-tbtn",e.backstage,A.none())})),splitbutton:CM((function(t){return _e("SplitButton",vT,t)}),(function(t,e){return function(t,e){var n,o=ui("channel-update-split-dropdown-display"),r=function(t){return{isDisabled:function(){return xv.isDisabled(t)},setDisabled:function(e){return xv.set(t,e)},setIconFill:function(e,n){Qa(t.element,'svg path[id="'+e+'"], rect[id="'+e+'"]').each((function(t){Kr(t,"fill",n)}))},setIconStroke:function(e,n){Qa(t.element,'svg path[id="'+e+'"], rect[id="'+e+'"]').each((function(t){Kr(t,"stroke",n)}))},setActive:function(e){t.getSystem().isConnected()&&(Kr(t.element,"aria-pressed",e),Qa(t.element,"span").each((function(n){t.getSystem().getByDom(n).each((function(t){return Eg.set(t,e)}))})))},isActive:function(){return Qa(t.element,"span").exists((function(e){return!!t.getSystem().isConnected()&&t.getSystem().getByDom(e).exists(Eg.isOn)}))}}},i=sn(m),a={getApi:r,onSetup:t.onSetup};return OT.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:_({"aria-pressed":!1},MT(t.tooltip,e.providers))},onExecute:function(e){t.onAction(r(e))},onItemExecute:function(t,e,n){},splitDropdownBehaviours:uc([Qv(e.providers.isDisabled),Kv(),pg("split-dropdown-events",[ir(AT,yg.focus),nb(a,i),ob(a,i)]),fw.config({})]),eventOrder:(n={},n[Fo()]=["alloy.base.behaviour","split-dropdown-events"],n),toggleClass:"tox-tbtn--enabled",lazySink:e.getSink,fetch:IT(r,t,e.providers),parts:{menu:Sh(0,t.columns,t.presets)},components:[OT.parts.button(PT(t.icon,t.text,A.none(),A.some(o),A.some([Eg.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),e.providers)),OT.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:xp("chevron-down",e.providers.icons)},buttonBehaviours:uc([Qv(e.providers.isDisabled),Kv()])}),OT.parts["aria-descriptor"]({text:e.providers.translate("To open the popup, press Shift+Enter")})]})}(t,e.backstage.shared)})),grouptoolbarbutton:CM((function(t){return _e("GroupToolbarButton",mT,t)}),(function(t,e,n){var o,r=n.ui.registry.getAll().buttons,i=((o={})[$c]=e.backstage.shared.header.isPositionedAtTop()?Oc.TopToBottom:Oc.BottomToTop,o);if(Ev(n)===uh.floating)return function(t,e,n,o){var r=e.shared;return Az.sketch({lazySink:r.getSink,fetch:function(){return Ay((function(e){e(L(n(t.items),uT))}))},markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:PT(t.icon,t.text,t.tooltip,A.none(),A.none(),r.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:o}}}})}(t,e.backstage,(function(t){return MM(n,{buttons:r,toolbar:t,allowToolbarGroups:!1},e,A.none())}),i);throw new Error("Toolbar groups are only supported when using floating toolbar mode")})),styleSelectButton:function(t,e){return function(t,e){var n=_({type:"advanced"},e.styleselect);return QT(t,e,kM(t,n))}(t,e.backstage)},fontsizeSelectButton:function(t,e){return function(t,e){return QT(t,e,gM(t))}(t,e.backstage)},fontSelectButton:function(t,e){return function(t,e){return QT(t,e,sM(t))}(t,e.backstage)},formatButton:function(t,e){return function(t,e){return QT(t,e,wM(t))}(t,e.backstage)},alignMenuButton:function(t,e){return function(t,e){return QT(t,e,uM(t))}(t,e.backstage)}},OM={styleselect:SM.styleSelectButton,fontsizeselect:SM.fontsizeSelectButton,fontselect:SM.fontSelectButton,formatselect:SM.formatButton,align:SM.alignMenuButton},zM=function(t){var e,n=t.toolbar,o=t.buttons;return!1===n?[]:void 0===n||!0===n?function(t){var e=L(_M,(function(e){var n=j(e.items,(function(e){return At(t,e)||At(OM,e)}));return{name:e.name,items:n}}));return j(e,(function(t){return t.items.length>0}))}(o):r(n)?(e=n.split("|"),L(e,(function(t){return{items:t.trim().split(" ")}}))):function(t){return d(t,(function(t){return At(t,"name")&&At(t,"items")}))}(n)?n:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},TM=function(t,e,n,o,r,i){return Mt(e,n.toLowerCase()).orThunk((function(){return i.bind((function(t){return ot(t,(function(t){return Mt(e,t+n.toLowerCase())}))}))})).fold((function(){return Mt(OM,n.toLowerCase()).map((function(e){return e(t,r)})).orThunk((function(){return A.none()}))}),(function(e){return"grouptoolbarbutton"!==e.type||o?function(t,e,n){return Mt(SM,t.type).fold((function(){return console.error("skipping button defined by",t),A.none()}),(function(o){return A.some(o(t,e,n))}))}(e,r,t):(console.warn("Ignoring the '"+n+"' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested."),A.none())}))},MM=function(t,e,n,o){var r=zM(e),i=L(r,(function(r){var i=Y(r.items,(function(r){return 0===r.trim().length?[]:TM(t,e.buttons,r,e.allowToolbarGroups,n,o).toArray()}));return{title:A.from(t.translate(r.name)),items:i}}));return j(i,(function(t){return t.items.length>0}))},AM={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},DM={maxHeightFunction:Nc(),maxWidthFunction:fz()},EM={onLtr:function(){return[qu,$u,Uu,Vu,Wu,ju,mp,gp,fp,lp,dp,sp]},onRtl:function(){return[qu,$u,Wu,ju,Uu,Vu,mp,gp,dp,sp,fp,lp]}},PM={onLtr:function(){return[$u,Vu,ju,Uu,Wu,qu,mp,gp,fp,lp,dp,sp]},onRtl:function(){return[$u,ju,Vu,Wu,Uu,qu,mp,gp,dp,sp,fp,lp]}},HM=function(t,e,n,o){var r,i,a=qn().deviceType.isTouch,u=xa((r={sink:n,onEscape:function(){return t.focus(),A.some(!0)}},i=sn([]),op.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:function(t){i.set([]),op.getContent(t).each((function(t){ia(t.element,"visibility")})),Vi(t.element,KT),ia(t.element,"width")},inlineBehaviours:uc([pg("context-toolbar-events",[dr(wo(),(function(t,e){Vi(t.element,KT),ia(t.element,"width")})),ir(XT,(function(t,e){var n=t.element;ia(n,"width");var o=Aa(n);op.setContent(t,e.event.contents),Li(n,KT);var r=Aa(n);Ji(n,"width",o+"px"),op.getContent(t).each((function(t){e.event.focus.bind((function(t){return pc(t),vc(n)})).orThunk((function(){return cg.focusIn(t),hc(Hr(n))}))})),pp.setTimeout((function(){Ji(t.element,"width",r+"px")}),0)})),ir(GT,(function(t,e){op.getContent(t).each((function(e){i.set(i.get().concat([{bar:e,focus:hc(Hr(t.element))}]))})),Jo(t,XT,{contents:e.event.forwardContents,focus:A.none()})})),ir(YT,(function(t,e){et(i.get()).each((function(e){i.set(i.get().slice(0,i.get().length-1)),Jo(t,XT,{contents:ya(e.bar),focus:e.focus})}))}))]),cg.config({mode:"special",onEscape:function(t){return et(i.get()).fold((function(){return r.onEscape()}),(function(e){return Ko(t,YT),A.some(!0)}))}})]),lazySink:function(){return at(r.sink)}}))),c=function(){return jT(t,o.backstage.shared)},l=function(){if(a()&&o.backstage.isContextMenuOpen())return!0;var e,n,r,i,u,l,s=(e=p.get().filter((function(t){return $i(dn.fromDom(t))})).map((function(t){return t.getBoundingClientRect()})).getOrThunk((function(){return t.selection.getRng().getBoundingClientRect()})),n=t.inline?Ba().top:qa(dn.fromDom(t.getBody())).y,{y:e.top+n,bottom:e.bottom+n}),f=c();return r=s.y,i=s.bottom,u=f.y,l=f.bottom,!(Math.max(r,u)<=Math.min(i,l))},s=function(){g.set(A.none()),op.hide(u)},f=function(){op.hide(u)},d=function(){g.get().each((function(t){var e=u.element;ia(e,"display"),l()?Ji(e,"display","none"):ts.positionWithinBounds(n,t,u,A.some(c()))}))},g=sn(A.none()),p=sn(A.none()),h=sn(null),v=function(e){return{dom:{tag:"div",classes:["tox-pop__dialog"]},components:[e],behaviours:uc([cg.config({mode:"acyclic"}),pg("pop-dialog-wrap-events",[mr((function(e){t.shortcuts.add("ctrl+F9","focus statusbar",(function(){return cg.focusIn(e)}))})),gr((function(e){t.shortcuts.remove("ctrl+F9")}))])])}},b=It((function(){return $T(e,(function(t){var e=x([t]);Jo(u,GT,{forwardContents:v(e)})}))})),x=function(e){var n=t.ui.registry.getAll().buttons,r=b(),i=_(_({},n),r.formNavigators),a=Ev(t)===uh.scrolling?uh.scrolling:uh.default,u=G(L(e,(function(e){return"contexttoolbar"===e.type?function(e,n){return MM(t,{buttons:e,toolbar:n.items,allowToolbarGroups:!1},o,A.some(["form:"]))}(i,e):function(t,e){return VT(t,e)}(e,o.backstage.shared.providers)})));return dT({type:a,uid:ui("context-toolbar"),initGroups:u,onEscape:A.none,cyclicKeying:!0,providers:o.backstage.shared.providers})};t.on("contexttoolbar-show",(function(e){var n=b();Mt(n.lookupTable,e.toolbarKey).each((function(n){w([n],e.target===t?A.none():A.some(e)),op.getContent(u).each(cg.focusIn)}))}));var y=function(t,e){var n="node"===t?o.backstage.shared.anchors.node(e):o.backstage.shared.anchors.cursor();return Bt(n,function(t,e){return"line"===t?{bubble:jc(12,0,AM),layouts:{onLtr:function(){return[Gu]},onRtl:function(){return[Yu]}},overrides:DM}:{bubble:jc(0,12,AM),layouts:e?PM:EM,overrides:DM}}(t,a()))},w=function(t,e){if(C(),!a()||!o.backstage.isContextMenuOpen()){var n=x(t),r=e.map(dn.fromDom),i=y(t[0].position,r);g.set(A.some(i)),p.set(e);var s=u.element;ia(s,"display"),op.showWithinBounds(u,i,v(n),(function(){return A.some(c())})),l()&&Ji(s,"display","none")}},k=function(){t.hasFocus()&&function(t,e){var n=dn.fromDom(e.getBody()),o=function(t){return Yn(t,n)},r=dn.fromDom(e.selection.getNode());return function(t){return!o(t)&&!Kn(n,t)}(r)?A.none():WT(r,t.inNodeScope,t.inEditorScope).orThunk((function(){return qT(o,r,t)}))}(b(),t).fold(s,(function(t){w(t.toolbars,A.some(t.elem.dom))}))},C=function(){var t=h.get();null!==t&&(pp.clearTimeout(t),h.set(null))},S=function(){C(),h.set(pp.setEditorTimeout(t,k,0))};t.on("init",(function(){t.on(dz,f),t.on("ScrollContent ScrollWindow longpress",d),t.on("click keyup focus SetContent ObjectResized ResizeEditor",(function(){S()})),t.on("focusout",(function(e){pp.setEditorTimeout(t,(function(){vc(n.element).isNone()&&vc(u.element).isNone()&&s()}),0)})),t.on("SwitchMode",(function(){t.mode.isReadOnly()&&s()})),t.on("AfterProgressState",(function(e){e.state?s():t.hasFocus()&&S()})),t.on("NodeChange",(function(t){vc(u.element).fold(S,m)}))}))},BM=Uf,RM=Of,IM=p([Qe("shell",!1),Ne("makeItem"),Qe("setupItem",m),Gs("listBehaviours",[gg])]),NM=_f({name:"items",overrides:function(){return{behaviours:uc([gg.config({})])}}}),LM=p([NM]),FM=p("CustomList"),VM=Kf({name:FM(),configFields:IM(),partFields:LM(),factory:function(t,e,n,o){var r=t.shell?{behaviours:[gg.config({})],components:[]}:{behaviours:[],components:e},i=function(e){return t.shell?A.some(e):Bf(e,t,"items")};return{uid:t.uid,dom:t.dom,components:r.components,behaviours:$s(t.listBehaviours,r.behaviours),apis:{setItems:function(e,n){i(e).fold((function(){throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")}),(function(o){var r=gg.contents(o),i=n.length,a=i-r.length,u=a>0?I(a,(function(){return t.makeItem()})):[],c=r.slice(i);F(c,(function(t){return gg.remove(o,t)})),F(u,(function(t){return gg.append(o,t)}));var l=gg.contents(o);F(l,(function(o,r){t.setupItem(e,o,n[r],r)}))}))}}}},apis:{setItems:function(t,e,n){t.setItems(e,n)}}}),jM=m,UM=y,WM=p([]),qM=Object.freeze({__proto__:null,setup:jM,isDocked:UM,getBehaviours:WM}),$M=function(t){return(na(t,"position").is("fixed")?A.none():Tr(t)).orThunk((function(){var e=dn.fromTag("span");return zr(t).bind((function(t){jr(t,e);var n=Tr(e);return qr(e),n}))}))},GM=function(t){return $M(t).map(za).getOrThunk((function(){return Sa(0,0)}))},YM=Et([{static:[]},{absolute:["positionCss"]},{fixed:["positionCss"]}]),XM=function(t,e){var n=t.element;Li(n,e.transitionClass),Vi(n,e.fadeOutClass),Li(n,e.fadeInClass),e.onShow(t)},KM=function(t,e){var n=t.element;Li(n,e.transitionClass),Vi(n,e.fadeInClass),Li(n,e.fadeOutClass),e.onHide(t)},JM=function(t,e,n){return X(t,(function(t){switch(t){case"bottom":return function(t,e){return t.bottom<=e.bottom}(e,n);case"top":return function(t,e){return t.y>=e.y}(e,n)}}))},ZM=function(t,e){return e.getInitialPosition().map((function(e){return Ua(e.bounds.x,e.bounds.y,Aa(t),_a(t))}))},QM=function(t,e,n){return n.getInitialPosition().bind((function(o){switch(n.setInitialPosition(A.none()),o.position){case"static":return A.some(YM.static());case"absolute":var r=$M(t).map(Wa).getOrThunk((function(){return Wa(Gi())}));return A.some(YM.absolute(xc("absolute",Mt(o.style,"left").map((function(t){return e.x-r.x})),Mt(o.style,"top").map((function(t){return e.y-r.y})),Mt(o.style,"right").map((function(t){return r.right-e.right})),Mt(o.style,"bottom").map((function(t){return r.bottom-e.bottom})))));default:return A.none()}}))},tA=function(t,e,n){var o=Wa(t);if(JM(n.getModes(),o,e))return A.none();!function(t,e,n){n.setInitialPosition(A.some({style:oa(t),position:ta(t,"position")||"static",bounds:e}))}(t,o,n);var r=$a(),i=o.x-r.x,a=e.y-r.y,u=r.bottom-e.bottom,c=o.y<=e.y;return A.some(YM.fixed(xc("fixed",A.some(i),c?A.some(a):A.none(),A.none(),c?A.none():A.some(u))))},eA=function(t,e,n){var o=t.element;return na(o,"position").is("fixed")?function(t,e,n){return ZM(t,n).filter((function(t){return JM(n.getModes(),t,e)})).bind((function(e){return QM(t,e,n)}))}(o,e,n):tA(o,e,n)},nA=function(t,e){F(["left","right","top","bottom","position"],(function(e){return ia(t.element,e)})),e.onUndocked(t)},oA=function(t,e,n){yc(t.element,n),("fixed"===n.position?e.onDocked:e.onUndocked)(t)},rA=function(t,e,n,o,r){void 0===r&&(r=!1),e.contextual.each((function(e){e.lazyContext(t).each((function(i){var a=function(t,e){return t.y<e.bottom&&t.bottom>e.y}(i,o);a!==n.isVisible()&&(n.setVisible(a),r&&!a?(Ui(t.element,[e.fadeOutClass]),e.onHide(t)):(a?XM:KM)(t,e))}))}))},iA=function(t,e,n){var o=t.element;n.setDocked(!1),function(t,e){var n=t.element;return ZM(n,e).bind((function(t){return QM(n,t,e)}))}(t,n).each((function(n){n.fold((function(){return nA(t,e)}),(function(n){return oA(t,e,n)}),m)})),n.setVisible(!0),e.contextual.each((function(e){Wi(o,[e.fadeInClass,e.fadeOutClass,e.transitionClass]),e.onShow(t)})),aA(t,e,n)},aA=function(t,e,n){t.getSystem().isConnected()&&function(t,e,n){var o=e.lazyViewport(t),r=n.isDocked();r&&rA(t,e,n,o),eA(t,o,n).each((function(i){n.setDocked(!r),i.fold((function(){return nA(t,e)}),(function(n){return oA(t,e,n)}),(function(r){rA(t,e,n,o,!0),oA(t,e,r)}))}))}(t,e,n)},uA=function(t,e,n){n.isDocked()&&iA(t,e,n)},cA=Object.freeze({__proto__:null,refresh:aA,reset:uA,isDocked:function(t,e,n){return n.isDocked()},getModes:function(t,e,n){return n.getModes()},setModes:function(t,e,n,o){return n.setModes(o)}}),lA=Object.freeze({__proto__:null,events:function(t,e){return nr([dr(wo(),(function(n,o){t.contextual.each((function(t){ji(n.element,t.transitionClass)&&(Wi(n.element,[t.transitionClass,t.fadeInClass]),(e.isVisible()?t.onShown:t.onHidden)(n));o.stop()}))})),ir(No(),(function(n,o){aA(n,t,e)})),ir(Lo(),(function(n,o){uA(n,t,e)}))])}}),sA=[Ze("contextual",[Ve("fadeInClass"),Ve("fadeOutClass"),Ve("transitionClass"),Ue("lazyContext"),vu("onShow"),vu("onShown"),vu("onHide"),vu("onHidden")]),an("lazyViewport",$a),un("modes",["top","bottom"],Ee),vu("onDocked"),vu("onUndocked")],fA=Object.freeze({__proto__:null,init:function(t){var e=sn(!1),n=sn(!0),o=sn(A.none()),r=sn(t.modes);return Ci({isDocked:e.get,setDocked:e.set,getInitialPosition:o.get,setInitialPosition:o.set,isVisible:n.get,setVisible:n.set,getModes:r.get,setModes:r.set,readState:function(){return"docked:  "+e.get()+", visible: "+n.get()+", modes: "+r.get().join(",")}})}}),dA=lc({fields:sA,name:"docking",active:lA,apis:cA,state:fA}),mA={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},gA="tox-tinymce--toolbar-sticky-on",pA="tox-tinymce--toolbar-sticky-off",hA=function(t){var e=t.element;zr(e).each((function(n){var o="padding-"+dA.getModes(t)[0];if(dA.isDocked(t)){var r=Aa(n);Ji(e,"width",r+"px"),Ji(n,o,function(t){return Ca(t)+(parseInt(ta(t,"margin-top"),10)||0)+(parseInt(ta(t,"margin-bottom"),10)||0)}(e)+"px")}else ia(e,"width"),ia(n,o)}))},vA=function(t,e){e?(Vi(t,mA.fadeOutClass),Ui(t,[mA.transitionClass,mA.fadeInClass])):(Vi(t,mA.fadeInClass),Ui(t,[mA.fadeOutClass,mA.transitionClass]))},bA=function(t,e){var n=dn.fromDom(t.getContainer());e?(Li(n,gA),Vi(n,pA)):(Li(n,pA),Vi(n,gA))},xA=function(t,e){var n=sn(A.none()),o=e.getSink,r=function(t){o().each((function(e){return t(e.element)}))},i=function(e){t.inline||hA(e),bA(t,dA.isDocked(e)),e.getSystem().broadcastOn([Ss()],{}),o().each((function(t){return t.getSystem().broadcastOn([Ss()],{})}))},a=t.inline?[]:function(){var t;return[mc.config({channels:(t={},t[iT()]={onReceive:hA},t)})]}();return S([yg.config({}),dA.config({contextual:_({lazyContext:function(e){var n,o,r=Ca(e.element),i=t.inline?t.getContentAreaContainer():t.getContainer(),a=Wa(dn.fromDom(i)),u=a.height-r,c=a.y+(n=e,o="top",B(dA.getModes(n),o)?0:r);return A.some(Ua(a.x,c,a.width,u))},onShow:function(){r((function(t){return vA(t,!0)}))},onShown:function(t){r((function(t){return Wi(t,[mA.transitionClass,mA.fadeInClass])})),n.get().each((function(e){var o,r,i;o=t.element,i=_r(r=e),hc(i).filter((function(t){return!Yn(r,t)})).filter((function(t){return Yn(t,dn.fromDom(i.dom.body))||Kn(o,t)})).each((function(){return pc(r)})),n.set(A.none())}))},onHide:function(t){n.set(function(t,e){return vc(t).orThunk((function(){return e().toOptional().bind((function(t){return vc(t.element)}))}))}(t.element,o)),r((function(t){return vA(t,!1)}))},onHidden:function(){r((function(t){return Wi(t,[mA.transitionClass])}))}},mA),modes:[e.header.getDockingMode()],onDocked:i,onUndocked:i})],a)},yA=Object.freeze({__proto__:null,setup:function(t,e,n){t.inline||(e.header.isPositionedAtTop()||t.on("ResizeEditor",(function(){n().each(dA.reset)})),t.on("ResizeWindow ResizeEditor",(function(){n().each(hA)})),t.on("SkinLoaded",(function(){n().each((function(t){dA.isDocked(t)?dA.reset(t):dA.refresh(t)}))})),t.on("FullscreenStateChanged",(function(){n().each(dA.reset)}))),t.on("AfterScrollIntoView",(function(t){n().each((function(e){dA.refresh(e);var n=e.element;nm(n)&&function(t,e){var n=_r(e),o=n.dom.defaultView.innerHeight,r=Ba(n),i=dn.fromDom(t.elm),a=qa(i),u=_a(i),c=a.y,l=c+u,s=za(e),f=_a(e),d=s.top,m=d+f,g=Math.abs(d-r.top)<2,p=Math.abs(m-(r.top+o))<2;if(g&&c<m)Ra(r.left,c-f,n);else if(p&&l>d){var h=c-o+u+f;Ra(r.left,h,n)}}(t,n)}))})),t.on("PostRender",(function(){bA(t,!1)}))},isDocked:function(t){return t().map(dA.isDocked).getOr(!1)},getBehaviours:xA}),wA=Xf({factory:function(t,e){var n={focus:cg.focusIn,setMenus:function(t,n){var o=L(n,(function(t){var n={type:"menubutton",text:t.text,fetch:function(e){e(t.getItems())}},o=hT(n).mapError((function(t){return Oe(t)})).getOrDie();return YC(o,"tox-mbtn",e.backstage,A.some("menuitem"))}));gg.set(t,o)}};return{uid:t.uid,dom:t.dom,components:[],behaviours:uc([gg.config({}),pg("menubar-events",[mr((function(e){t.onSetup(e)})),ir(mo(),(function(t,e){Qa(t.element,".tox-mbtn--active").each((function(n){tu(e.event.target,".tox-mbtn").each((function(e){Yn(n,e)||t.getSystem().getByDom(n).each((function(n){t.getSystem().getByDom(e).each((function(t){lw.expand(t),lw.close(n),yg.focus(t)}))}))}))}))})),ir(Wo(),(function(t,e){e.event.prevFocus.bind((function(e){return t.getSystem().getByDom(e).toOptional()})).each((function(n){e.event.newFocus.bind((function(e){return t.getSystem().getByDom(e).toOptional()})).each((function(t){lw.isOpen(n)&&(lw.expand(t),lw.close(n))}))}))}))]),cg.config({mode:"flow",selector:".tox-mbtn",onEscape:function(e){return t.onEscape(e),A.some(!0)}}),ey.config({})]),apis:n,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[Ne("dom"),Ne("uid"),Ne("onEscape"),Ne("backstage"),Qe("onSetup",m)],apis:{focus:function(t,e){t.focus(e)},setMenus:function(t,e,n){t.setMenus(e,n)}}}),kA="container",_A=[Ws("slotBehaviours",[])],CA=function(t){return"<alloy.field."+t+">"},SA=function(t,e){var n,o=function(e){return Lf(t)},r=function(e,n){return function(o,r){return Bf(o,t,r).map((function(t){return e(t,r)})).getOr(n)}},i=function(t,e){return"true"!==Jr(t.element,"aria-hidden")},a=r(i,!1),u=r((function(t,e){if(i(t)){var n=t.element;Ji(n,"display","none"),Kr(n,"aria-hidden","true"),Jo(t,qo(),{name:e,visible:!1})}})),c=(n=u,function(t,e){F(e,(function(e){return n(t,e)}))}),l=r((function(t,e){if(!i(t)){var n=t.element;ia(n,"display"),ti(n,"aria-hidden"),Jo(t,qo(),{name:e,visible:!0})}})),s={getSlotNames:o,getSlot:function(e,n){return Bf(e,t,n)},isShowing:a,hideSlot:u,hideAllSlots:function(t){return c(t,o())},showSlot:l};return{uid:t.uid,dom:t.dom,components:e,behaviours:qs(t.slotBehaviours),apis:s}},OA=_t({getSlotNames:function(t,e){return t.getSlotNames(e)},getSlot:function(t,e,n){return t.getSlot(e,n)},isShowing:function(t,e,n){return t.isShowing(e,n)},hideSlot:function(t,e,n){return t.hideSlot(e,n)},hideAllSlots:function(t,e){return t.hideAllSlots(e)},showSlot:function(t,e,n){return t.showSlot(e,n)}},(function(t){return ki(t)})),zA=_(_({},OA),{sketch:function(t){var e,n=(e=[],{slot:function(t,n){return e.push(t),Af(kA,CA(t),n)},record:function(){return e}}),o=t(n),r=n.record(),i=L(r,(function(t){return wf({name:t,pname:CA(t)})}));return qf(kA,_A,i,SA,o)}}),TA=ce([Ke("icon"),Ke("tooltip"),an("onShow",m),an("onHide",m),an("onSetup",(function(){return m}))]),MA=function(t){return{element:function(){return t.element.dom}}},AA=function(t,e){var n=L(yt(e),(function(t){var n=e[t],o=Ce(function(t){return _e("sidebar",TA,t)}(n));return{name:t,getApi:MA,onSetup:o.onSetup,onShow:o.onShow,onHide:o.onHide}}));return L(n,(function(e){var o=sn(m);return t.slot(e.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:Yh([nb(e,o),ob(e,o),ir(qo(),(function(t,e){var o=e.event,r=q(n,(function(t){return t.name===o.name}));r.each((function(e){(o.visible?e.onShow:e.onHide)(e.getApi(t))}))}))])})}))},DA=function(t){return zA.sketch((function(e){return{dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:AA(e,t),slotBehaviours:Yh([mr((function(t){return zA.hideAllSlots(t)}))])}}))},EA=function(t){return nd.getCurrent(t).bind((function(t){return Qz.isGrowing(t)||Qz.hasGrown(t)?nd.getCurrent(t).bind((function(t){return q(zA.getSlotNames(t),(function(e){return zA.isShowing(t,e)}))})):A.none()}))},PA=ui("FixSizeEvent"),HA=ui("AutoSizeEvent"),BA=function(t){var e=dn.fromHtml(t),n=Mr(e),o=function(t){var e=void 0!==t.dom.attributes?t.dom.attributes:[];return W(e,(function(t,e){var n;return"class"===e.name?t:_(_({},t),((n={})[e.name]=e.value,n))}),{})}(e),r=function(t){return Array.prototype.slice.call(t.dom.classList,0)}(e),i=0===n.length?{}:{innerHtml:Gr(e)};return _({tag:vr(e),classes:r,attributes:o},i)},RA=function(t){return{dom:{tag:"div",attributes:{"aria-label":t.translate("Loading...")},classes:["tox-throbber__busy-spinner"]},components:[{dom:BA('<div class="tox-spinner"><div></div><div></div><div></div></div>')}],behaviours:uc([cg.config({mode:"special",onTab:function(){return A.some(!0)},onShiftTab:function(){return A.some(!0)}}),yg.config({})])}},IA=function(t,e,n){var o=sn(!1),r=sn(A.none()),i=function(r){r!==o.get()&&(!function(t,e,n){var o=t.element;!0===e?(gg.set(t,[RA(n)]),ia(o,"display"),ti(o,"aria-hidden")):(gg.set(t,[]),Ji(o,"display","none"),Kr(o,"aria-hidden","true"))}(e(),r,n.providers),o.set(r),t.fire("AfterProgressState",{state:r}))};t.on("ProgressState",(function(e){if(r.get().each(pp.clearTimeout),f(e.time)){var n=pp.setEditorTimeout(t,(function(){return i(e.state)}),e.time);r.set(A.some(n))}else i(e.state),r.set(A.none())}))},NA=RM.optional({factory:wA,name:"menubar",schema:[Ne("backstage")]}),LA=RM.optional({factory:{sketch:function(t){return VM.sketch({uid:t.uid,dom:t.dom,listBehaviours:uc([cg.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:function(){return dT({type:t.type,uid:ui("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:function(){return t.onEscape(),A.some(!0)}})},setupItem:function(t,e,n,o){pz.setGroups(e,n)},shell:!0})}},name:"multiple-toolbar",schema:[Ne("dom"),Ne("onEscape")]}),FA=RM.optional({factory:{sketch:function(t){var e=function(t){return t.type===uh.sliding?fT:t.type===uh.floating?sT:dT}(t);return e({type:t.type,uid:t.uid,onEscape:function(){return t.onEscape(),A.some(!0)},cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes})}},name:"toolbar",schema:[Ne("dom"),Ne("onEscape"),Ne("getSink")]}),VA=RM.optional({factory:{sketch:function(t){var e=t.editor,n=t.sticky?xA:WM;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:uc(n(e,t.sharedBackstage))}}},name:"header",schema:[Ne("dom")]}),jA=RM.optional({name:"socket",schema:[Ne("dom")]}),UA=RM.optional({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"complementary"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:uc([ey.config({}),yg.config({}),Qz.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:function(t){nd.getCurrent(t).each(zA.hideAllSlots),Ko(t,HA)},onGrown:function(t){Ko(t,HA)},onStartGrow:function(t){Jo(t,PA,{width:na(t.element,"width").getOr("")})},onStartShrink:function(t){Jo(t,PA,{width:Aa(t.element)+"px"})}}),gg.config({}),nd.config({find:function(t){var e=gg.contents(t);return tt(e)}})])}],behaviours:uc([k_(0),pg("sidebar-sliding-events",[ir(PA,(function(t,e){Ji(t.element,"width",e.event.width)})),ir(HA,(function(t,e){ia(t.element,"width")}))])])}}},name:"sidebar",schema:[Ne("dom")]}),WA=RM.optional({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:uc([gg.config({})]),components:[]}}},name:"throbber",schema:[Ne("dom")]}),qA=Kf({name:"OuterContainer",factory:function(t,e,n){var o={getSocket:function(e){return BM.getPart(e,t,"socket")},setSidebar:function(e,n){BM.getPart(e,t,"sidebar").each((function(t){return function(t,e){nd.getCurrent(t).each((function(t){return gg.set(t,[DA(e)])}))}(t,n)}))},toggleSidebar:function(e,n){BM.getPart(e,t,"sidebar").each((function(t){return function(t,e){nd.getCurrent(t).each((function(t){nd.getCurrent(t).each((function(n){Qz.hasGrown(t)?zA.isShowing(n,e)?Qz.shrink(t):(zA.hideAllSlots(n),zA.showSlot(n,e)):(zA.hideAllSlots(n),zA.showSlot(n,e),Qz.grow(t))}))}))}(t,n)}))},whichSidebar:function(e){return BM.getPart(e,t,"sidebar").bind(EA).getOrNull()},getHeader:function(e){return BM.getPart(e,t,"header")},getToolbar:function(e){return BM.getPart(e,t,"toolbar")},setToolbar:function(e,n){BM.getPart(e,t,"toolbar").each((function(t){t.getApis().setGroups(t,n)}))},setToolbars:function(e,n){BM.getPart(e,t,"multiple-toolbar").each((function(t){VM.setItems(t,n)}))},refreshToolbar:function(e){BM.getPart(e,t,"toolbar").each((function(t){return t.getApis().refresh(t)}))},toggleToolbarDrawer:function(e){BM.getPart(e,t,"toolbar").each((function(t){var e,n;e=t.getApis().toggle,n=function(e){return e(t)},null!=e?A.some(n(e)):A.none()}))},isToolbarDrawerToggled:function(e){return BM.getPart(e,t,"toolbar").bind((function(t){return A.from(t.getApis().isOpen).map((function(e){return e(t)}))})).getOr(!1)},getThrobber:function(e){return BM.getPart(e,t,"throbber")},focusToolbar:function(e){BM.getPart(e,t,"toolbar").orThunk((function(){return BM.getPart(e,t,"multiple-toolbar")})).each((function(t){cg.focusIn(t)}))},setMenubar:function(e,n){BM.getPart(e,t,"menubar").each((function(t){wA.setMenus(t,n)}))},focusMenubar:function(e){BM.getPart(e,t,"menubar").each((function(t){wA.focus(t)}))}};return{uid:t.uid,dom:t.dom,components:e,apis:o,behaviours:t.behaviours}},configFields:[Ne("dom"),Ne("behaviours")],partFields:[VA,NA,FA,LA,jA,UA,WA],apis:{getSocket:function(t,e){return t.getSocket(e)},setSidebar:function(t,e,n){t.setSidebar(e,n)},toggleSidebar:function(t,e,n){t.toggleSidebar(e,n)},whichSidebar:function(t,e){return t.whichSidebar(e)},getHeader:function(t,e){return t.getHeader(e)},getToolbar:function(t,e){return t.getToolbar(e)},setToolbar:function(t,e,n){var o=L(n,(function(t){return uT(t)}));t.setToolbar(e,o)},setToolbars:function(t,e,n){var o=L(n,(function(t){return L(t,uT)}));t.setToolbars(e,o)},refreshToolbar:function(t,e){return t.refreshToolbar(e)},toggleToolbarDrawer:function(t,e){t.toggleToolbarDrawer(e)},isToolbarDrawerToggled:function(t,e){return t.isToolbarDrawerToggled(e)},getThrobber:function(t,e){return t.getThrobber(e)},setMenubar:function(t,e,n){t.setMenubar(e,n)},focusMenubar:function(t,e){t.focusMenubar(e)},focusToolbar:function(t,e){t.focusToolbar(e)}}}),$A={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | formats blockformats fontformats fontsizes align lineheight | forecolor backcolor | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code wordcount"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},GA=function(t){return"string"==typeof t?t.split(" "):t},YA=function(t,e){var n=_(_({},$A),e.menus),o=yt(e.menus).length>0,r=void 0===e.menubar||!0===e.menubar?GA("file edit view insert format tools table help"):GA(!1===e.menubar?"":e.menubar),i=j(r,(function(t){return o&&e.menus.hasOwnProperty(t)&&e.menus[t].hasOwnProperty("items")||$A.hasOwnProperty(t)})),a=L(i,(function(o){var r=n[o];return function(t,e,n){var o=function(t){return t.getParam("removed_menuitems","")}(n).split(/[ ,]/);return{text:t.title,getItems:function(){return Y(t.items,(function(t){var n=t.toLowerCase();return 0===n.trim().length||R(o,(function(t){return t===n}))?[]:"separator"===n||"|"===n?[{type:"separator"}]:e.menuItems[n]?[e.menuItems[n]]:[]}))}}}({title:r.title,items:GA(r.items)},e,t)}));return j(a,(function(t){return t.getItems().length>0&&R(t.getItems(),(function(t){return"separator"!==t.type}))}))},XA=function(t){var e=function(){t._skinLoaded=!0,function(t){t.fire("SkinLoaded")}(t)};return function(){t.initialized?e():t.on("init",e)}},KA=function(t,e,n){return new Rp((function(o,r){n.load(e,o,r),t.on("remove",(function(){return n.unload(e)}))}))},JA=function(t,e){return KA(t,e+"/skin.min.css",t.ui.styleSheetLoader)},ZA=function(t,e){var n;return(n=dn.fromDom(t.getElement()),Rr(n).isSome())?KA(t,e+"/skin.shadowdom.min.css",rv.DOM.styleSheetLoader):Rp.resolve()},QA=function(t,e){var n=function(t){var e=t.getParam("skin"),n=t.getParam("skin_url");if(!1!==e){var o=e||"oxide";n=n?t.documentBaseURI.toAbsolute(n):yv.baseURL+"/skins/ui/"+o}return n}(e);n&&e.contentCSS.push(n+(t?"/content.inline":"/content")+".min.css"),!1===function(t){return!1===t.getParam("skin")}(e)&&r(n)?Rp.all([JA(e,n),ZA(e,n)]).then(XA(e),function(t,e){return function(){return function(t,e){return t.fire("SkinLoadError",e)}(t,{message:e})}}(e,"Skin could not be loaded")):XA(e)()},tD=v(QA,!1),eD=v(QA,!0),nD=function(t,e,n,o){var i=e.outerContainer,a=n.toolbar,u=n.buttons;if(d(a,r)){var c=a.map((function(e){var r={toolbar:e,buttons:u,allowToolbarGroups:n.allowToolbarGroups};return MM(t,r,{backstage:o},A.none())}));qA.setToolbars(i,c)}else qA.setToolbar(i,MM(t,n,{backstage:o},A.none()))},oD=qn(),rD=oD.os.isiOS()&&oD.os.version.major<=12,iD=Object.freeze({__proto__:null,render:function(t,e,n,o,r){var i=sn(0),a=e.outerContainer;tD(t);var u=dn.fromDom(r.targetNode),c=Br(Hr(u));!function(t,e){fs(t,e,Fr)}(u,e.mothership),ss(c,e.uiMothership),t.on("PostRender",(function(){nD(t,e,n,o),i.set(t.getWin().innerWidth),qA.setMenubar(a,YA(t,n)),qA.setSidebar(a,n.sidebar),function(t,e){var n=t.dom,o=t.getWin(),r=t.getDoc().documentElement,i=sn(Sa(o.innerWidth,o.innerHeight)),a=sn(Sa(r.offsetWidth,r.offsetHeight)),u=function(){var e=i.get();e.left===o.innerWidth&&e.top===o.innerHeight||(i.set(Sa(o.innerWidth,o.innerHeight)),Wb(t))},c=function(){var e=t.getDoc().documentElement,n=a.get();n.left===e.offsetWidth&&n.top===e.offsetHeight||(a.set(Sa(e.offsetWidth,e.offsetHeight)),Wb(t))},l=function(e){return function(t,e){return t.fire("ScrollContent",e)}(t,e)};n.bind(o,"resize",u),n.bind(o,"scroll",l);var s=Dx(dn.fromDom(t.getBody()),"load",c),f=e.uiMothership.element;t.on("hide",(function(){Ji(f,"display","none")})),t.on("show",(function(){ia(f,"display")})),t.on("NodeChange",c),t.on("remove",(function(){s.unbind(),n.unbind(o,"resize",u),n.unbind(o,"scroll",l),o=null}))}(t,e)}));var l,s,f,d=qA.getSocket(a).getOrDie("Could not find expected socket element");if(rD){Zi(d.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});var m=(l=function(){t.fire("ScrollContent")},s=20,f=null,{cancel:function(){null!==f&&(clearTimeout(f),f=null)},throttle:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];null===f&&(f=setTimeout((function(){l.apply(null,t),f=null}),s))}}),g=Ax(d.element,"scroll",m.throttle);t.on("remove",g.unbind)}Xv(t,e),t.addCommand("ToggleSidebar",(function(e,n){qA.toggleSidebar(a,n),t.fire("ToggleSidebar")})),t.addQueryValueHandler("ToggleSidebar",(function(){return qA.whichSidebar(a)}));var p=Ev(t);p!==uh.sliding&&p!==uh.floating||t.on("ResizeWindow ResizeEditor ResizeContent",(function(){var n=t.getWin().innerWidth;n!==i.get()&&(qA.refreshToolbar(e.outerContainer),i.set(n))}));var h={enable:function(){Yv(e,!1)},disable:function(){Yv(e,!0)},isDisabled:function(){return xv.isDisabled(a)}};return{iframeContainer:d.element.dom,editorContainer:a.element.dom,api:h}}}),aD=function(t){return/^[0-9\.]+(|px)$/i.test(""+t)?A.some(parseInt(""+t,10)):A.none()},uD=function(t){return f(t)?t+"px":t},cD=function(t,e,n){var o=e.filter((function(e){return t<e})),r=n.filter((function(e){return t>e}));return o.or(r).getOr(t)},lD=function(t){var e=function(t){var e=wv(t),n=Cv(t),o=Ov(t);return aD(e).map((function(t){return cD(t,n,o)}))}(t);return e.getOr(wv(t))},sD=function(t){var e=kv(t),n=_v(t),o=Sv(t);return aD(e).map((function(t){return cD(t,n,o)}))},fD=function(t,e,n,o,r){var i=n.uiMothership,a=n.outerContainer,u=rv.DOM,c=Nv(t),l=Vv(t),s=Sv(t).or(sD(t)),f=o.shared.header,d=f.isPositionedAtTop,m=Ev(t),g=m===uh.sliding||m===uh.floating,p=sn(!1),h=function(){return p.get()&&!t.removed},v=function(t){return g?t.fold((function(){return 0}),(function(t){return t.components().length>1?_a(t.components()[1].element):0})):0},b=function(){i.broadcastOn([Ss()],{})},x=function(t){if(void 0===t&&(t=!1),h()){var n;if(c||(n=s.getOrThunk((function(){var t=aD(ta(Gi(),"margin-left")).getOr(0);return Aa(Gi())-za(e).left+t})),Ji(r.get().element,"max-width",n+"px")),g&&qA.refreshToolbar(a),c||function(){var t=qA.getToolbar(a),n=v(t),o=Wa(e),i=d()?Math.max(o.y-_a(r.get().element)+n,0):o.bottom;Zi(a.element,{position:"absolute",top:Math.round(i)+"px",left:Math.round(o.x)+"px"})}(),l){var o=r.get();t?dA.reset(o):dA.refresh(o)}b()}},y=function(n){if(void 0===n&&(n=!0),!c&&l&&h()){var o=f.getDockingMode(),i=function(n){switch(Bv(t)){case Dv.auto:var o=qA.getToolbar(a),r=v(o),i=_a(n.element)-r,u=Wa(e);if(u.y>i)return"top";var c=Sr(e),l=Math.max(c.dom.scrollHeight,_a(c));return u.bottom<l-i||$a().bottom<u.bottom-i?"bottom":"top";case Dv.bottom:return"bottom";case Dv.top:default:return"top"}}(r.get());i!==o&&(!function(t){var e=r.get();dA.setModes(e,[t]),f.setDockingMode(t);var n=d()?Oc.TopToBottom:Oc.BottomToTop;Kr(e.element,$c,n)}(i),n&&x(!0))}};return{isVisible:h,isPositionedAtTop:d,show:function(){p.set(!0),Ji(a.element,"display","flex"),u.addClass(t.getBody(),"mce-edit-focus"),ia(i.element,"display"),y(!1),x()},hide:function(){p.set(!1),n.outerContainer&&(Ji(a.element,"display","none"),u.removeClass(t.getBody(),"mce-edit-focus")),Ji(i.element,"display","none")},update:x,updateMode:y,repositionPopups:b}},dD=function(t,e){var n=Wa(t);return{pos:e?n.y:n.bottom,bounds:n}},mD=Object.freeze({__proto__:null,render:function(t,e,n,o,r){var i=e.mothership,a=e.uiMothership,u=e.outerContainer,c=sn(null),l=dn.fromDom(r.targetNode),s=fD(t,l,e,o,c),f=function(t){return t.getParam("toolbar_persist",!1,"boolean")}(t);eD(t);var d=function(){if(c.get())s.show();else{c.set(qA.getHeader(u).getOrDie());var r=Lv(t);ss(r,i),ss(r,a),nD(t,e,n,o),qA.setMenubar(u,YA(t,n)),s.show(),function(t,e,n,o){var r=sn(dD(e,n.isPositionedAtTop())),i=function(o){var i=dD(e,n.isPositionedAtTop()),a=i.pos,u=i.bounds,c=r.get(),l=c.pos,s=c.bounds,f=u.height!==s.height||u.width!==s.width;r.set({pos:a,bounds:u}),f&&Wb(t,o),n.isVisible()&&(l!==a?n.update(!0):f&&(n.updateMode(),n.repositionPopups()))};o||(t.on("activate",n.show),t.on("deactivate",n.hide)),t.on("SkinLoaded ResizeWindow",(function(){return n.update(!0)})),t.on("NodeChange keydown",(function(t){pp.requestAnimationFrame((function(){return i(t)}))})),t.on("ScrollWindow",(function(){return n.updateMode()}));var a=bM();a.set(Dx(dn.fromDom(t.getBody()),"load",i)),t.on("remove",(function(){a.clear()}))}(t,l,s,f),t.nodeChanged()}},m=function(){return pp.setEditorTimeout(t,d,0)};t.on("show",d),t.on("hide",s.hide),f||(t.on("focus",m),t.on("blur",s.hide)),t.on("init",(function(){(t.hasFocus()||f)&&m()})),Xv(t,e);var g={show:function(){s.show()},hide:function(){s.hide()},enable:function(){Yv(e,!1)},disable:function(){Yv(e,!0)},isDisabled:function(){return xv.isDisabled(u)}};return{editorContainer:u.element.dom,api:g}}}),gD=function(t,e){!function(t,e){var n=ZT(0,e,uM(t));t.ui.registry.addNestedMenuItem("align",{text:e.shared.providers.translate("Align"),getSubmenuItems:function(){return n.items.validateItems(n.getStyleItems())}})}(t,e),function(t,e){var n=ZT(0,e,sM(t));t.ui.registry.addNestedMenuItem("fontformats",{text:e.shared.providers.translate("Fonts"),getSubmenuItems:function(){return n.items.validateItems(n.getStyleItems())}})}(t,e),function(t,e){var n=_({type:"advanced"},e.styleselect),o=ZT(0,e,kM(t,n));t.ui.registry.addNestedMenuItem("formats",{text:"Formats",getSubmenuItems:function(){return o.items.validateItems(o.getStyleItems())}})}(t,e),function(t,e){var n=ZT(0,e,wM(t));t.ui.registry.addNestedMenuItem("blockformats",{text:"Blocks",getSubmenuItems:function(){return n.items.validateItems(n.getStyleItems())}})}(t,e),function(t,e){var n=ZT(0,e,gM(t));t.ui.registry.addNestedMenuItem("fontsizes",{text:"Font sizes",getSubmenuItems:function(){return n.items.validateItems(n.getStyleItems())}})}(t,e)},pD={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},hD=(eM="[eE][+-]?[0-9]+",nM=function(t){return"(?:"+t+")?"},oM=["Infinity","[0-9]+\\."+nM(tM="[0-9]+")+nM(eM),"\\.[0-9]+"+nM(eM),tM+nM(eM)].join("|"),new RegExp("^([+-]?(?:"+oM+"))(.*)$")),vD=function(t,e){return A.from(hD.exec(t)).bind((function(t){var n=Number(t[1]),o=t[2];return function(t,e){return R(e,(function(e){return R(pD[e],(function(e){return t===e}))}))}(o,e)?A.some({value:n,unit:o}):A.none()}))},bD=function(t){return function(t,e){return vD(t,e).map((function(t){return t.value+t.unit}))}(t,["fixed","relative","empty"]).getOr(t)},xD=function(t){var e=function(t){return t.getParam("lineheight_formats","1 1.1 1.2 1.3 1.4 1.5 2","string").split(" ")}(t),n=new Map,o=vM(),r=function(){var e=bD(t.queryCommandValue("LineHeight"));A.from(n.get(e)).fold((function(){return o.clear()}),(function(t){o.set({destroy:function(){t.setActive(!1)}}),t.setActive(!0)}))};return t.on("nodeChange",r),L(e,(function(i,a){return{type:"togglemenuitem",text:i,onSetup:function(u){return n.set(bD(i),u),a+1===e.length&&r(),function(){0===a&&(t.off("nodeChange",r),o.clear())}},onAction:function(){return t.execCommand("LineHeight",!1,i)}}}))},yD=function(t){!function(t){t.ui.registry.addNestedMenuItem("lineheight",{type:"nestedmenuitem",text:"Line height",getSubmenuItems:function(){return xD(t)}})}(t),function(t){t.ui.registry.addMenuButton("lineheight",{tooltip:"Line height",icon:"line-height",fetch:function(e){return e(xD(t))}})}(t)},wD=function(t,e){return function(){t.execCommand("mceToggleFormat",!1,e)}},kD=function(t){!function(t){O_.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(function(e,n){t.ui.registry.addToggleButton(e.name,{tooltip:e.text,icon:e.icon,onSetup:xM(t,e.name),onAction:wD(t,e.name)})}));for(var e=1;e<=6;e++){var n="h"+e;t.ui.registry.addToggleButton(n,{text:n.toUpperCase(),tooltip:"Heading "+e,onSetup:xM(t,n),onAction:wD(t,n)})}}(t),function(t){O_.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"}],(function(e){t.ui.registry.addButton(e.name,{tooltip:e.text,icon:e.icon,onAction:function(){return t.execCommand(e.action)}})}))}(t),function(t){O_.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],(function(e){t.ui.registry.addToggleButton(e.name,{tooltip:e.text,icon:e.icon,onAction:function(){return t.execCommand(e.action)},onSetup:xM(t,e.name)})}))}(t)},_D=function(t){kD(t),function(t){O_.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through",shortcut:""},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript",shortcut:""},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript",shortcut:""},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting",shortcut:""},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document",shortcut:""},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"}],(function(e){t.ui.registry.addMenuItem(e.name,{text:e.text,icon:e.icon,shortcut:e.shortcut,onAction:function(){return t.execCommand(e.action)}})})),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onAction:wD(t,"code")})}(t)},CD=function(t,e,n){var o=function(){return!!e.undoManager&&e.undoManager[n]()},r=function(){t.setDisabled(e.mode.isReadOnly()||!o())};return t.setDisabled(!o()),e.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",r),function(){return e.off("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",r)}},SD=function(t){!function(t){t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:function(e){return CD(e,t,"hasUndo")},onAction:function(){return t.execCommand("undo")}}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:function(e){return CD(e,t,"hasRedo")},onAction:function(){return t.execCommand("redo")}})}(t),function(t){t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",onSetup:function(e){return CD(e,t,"hasUndo")},onAction:function(){return t.execCommand("undo")}}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",onSetup:function(e){return CD(e,t,"hasRedo")},onAction:function(){return t.execCommand("redo")}})}(t)},OD=function(t,e){!function(t){O_.each([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],(function(e){t.ui.registry.addToggleButton(e.name,{tooltip:e.text,onAction:function(){return t.execCommand(e.cmd)},icon:e.icon,onSetup:xM(t,e.name)})}));var e="alignnone",n="No alignment",o="JustifyNone",r="align-none";t.ui.registry.addButton(e,{tooltip:n,onAction:function(){return t.execCommand(o)},icon:r})}(t),_D(t),gD(t,e),SD(t),function(t){!function(t){t.addCommand("mceApplyTextcolor",(function(e,n){!function(t,e,n){t.undoManager.transact((function(){t.focus(),t.formatter.apply(e,{value:n}),t.nodeChanged()}))}(t,e,n)})),t.addCommand("mceRemoveTextcolor",(function(e){!function(t,e){t.undoManager.transact((function(){t.focus(),t.formatter.remove(e,{value:null},null,!0),t.nodeChanged()}))}(t,e)}))}(t);var e=sn(null),n=sn(null);ix(t,"forecolor","forecolor","Text color",e),ix(t,"backcolor","hilitecolor","Background color",n),ax(t,"forecolor","forecolor","Text color"),ax(t,"backcolor","hilitecolor","Background color")}(t),function(t){!function(t){t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:function(){return t.execCommand("mceToggleVisualAid")}})}(t),function(t){t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:function(e){return function(t,e){t.setActive(e.hasVisual);var n=function(e){t.setActive(e.hasVisual)};return e.on("VisualAid",n),function(){return e.off("VisualAid",n)}}(e,t)},onAction:function(){t.execCommand("mceToggleVisualAid")}})}(t)}(t),function(t){!function(t){t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:function(e){return function(t,e){t.setDisabled(!e.queryCommandState("outdent"));var n=function(){t.setDisabled(!e.queryCommandState("outdent"))};return e.on("NodeChange",n),function(){return e.off("NodeChange",n)}}(e,t)},onAction:function(){return t.execCommand("outdent")}}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onAction:function(){return t.execCommand("indent")}})}(t)}(t),yD(t)},zD=function(t,e){return{anchor:"makeshift",x:t,y:e}},TD=function(t){return"longpress"===t.type||0===t.type.indexOf("touch")},MD=function(t,e){var n=rv.DOM.getPos(t);return function(t,e,n){return zD(t.x+e,t.y+n)}(e,n.x,n.y)},AD=function(t,e){return"contextmenu"===e.type||"longpress"===e.type?t.inline?function(t){if(TD(t)){var e=t.touches[0];return zD(e.pageX,e.pageY)}return zD(t.pageX,t.pageY)}(e):MD(t.getContentAreaContainer(),function(t){if(TD(t)){var e=t.touches[0];return zD(e.clientX,e.clientY)}return zD(t.clientX,t.clientY)}(e)):DD(t)},DD=function(t){return{anchor:"selection",root:dn.fromDom(t.selection.getNode())}},ED=function(t){return{anchor:"node",node:A.some(dn.fromDom(t.selection.getNode())),root:dn.fromDom(t.getBody())}},PD=function(t,e,n,o,r,i){var a=n(),u=i?ED(t):AD(t,e);$C(a,ch.CLOSE_ON_EXECUTE,o,!1).map((function(t){e.preventDefault(),op.showMenuAt(r,u,{menu:{markers:kh("normal")},data:t})}))},HD={onLtr:function(){return[$u,Vu,ju,Uu,Wu,qu,mp,gp,fp,lp,dp,sp]},onRtl:function(){return[$u,ju,Vu,Wu,Uu,qu,mp,gp,dp,sp,fp,lp]}},BD={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},RD=function(t,e,n,o,r,i,a){var u=i?ED(t):function(t,e){return _({bubble:jc(0,12,BD),layouts:HD,overrides:{maxWidthFunction:fz(),maxHeightFunction:Nc()}},AD(t,e))}(t,e);$C(n,ch.CLOSE_ON_EXECUTE,o,!0).map((function(n){e.preventDefault(),op.showMenuWithinBounds(r,u,{menu:{markers:kh("normal"),highlightImmediately:a},data:n,type:"horizontal"},(function(){return A.some(jT(t,o.shared))})),t.fire(dz)}))},ID=function(t,e,n,o,r,i){var a=qn(),u=a.os.isiOS(),c=a.os.isOSX(),l=a.os.isAndroid(),s=a.deviceType.isTouch(),f=function(){var a=n();RD(t,e,a,o,r,i,!(l||u||c&&s))};if(!c&&!u||i)l&&!i&&t.selection.setCursorLocation(e.target,0),f();else{var d=function(){!function(t){var e=t.selection.getRng(),n=function(){pp.setEditorTimeout(t,(function(){t.selection.setRng(e)}),10),i()};t.once("touchend",n);var o=function(t){t.preventDefault(),t.stopImmediatePropagation()};t.on("mousedown",o,!0);var r=function(){return i()};t.once("longpresscancel",r);var i=function(){t.off("touchend",n),t.off("longpresscancel",r),t.off("mousedown",o)}}(t),f()};!function(t,e){var n=t.selection;if(n.isCollapsed()||e.touches.length<1)return!1;var o=e.touches[0],r=n.getRng();return Dl(t.getWin(),ml.domRange(r)).exists((function(t){return t.left<=o.clientX&&t.right>=o.clientX&&t.top<=o.clientY&&t.bottom>=o.clientY}))}(t,e)?(t.once("selectionchange",d),t.once("touchend",(function(){return t.off("selectionchange",d)}))):d()}},ND=function(t){return"string"==typeof t?t.split(/[ ,]/):t},LD=function(t){return t.getParam("contextmenu_never_use_native",!1,"boolean")},FD=function(t){return function(t,e,n){var o=t.ui.registry.getAll().contextMenus;return A.from(t.getParam(e)).map(ND).getOrThunk((function(){return j(ND(n),(function(t){return At(o,t)}))}))}(t,"contextmenu","link linkchecker image imagetools table spellchecker configurepermanentpen")},VD=function(t){return r(t)?"|"===t:"separator"===t.type},jD={type:"separator"},UD=function t(e){var n,o=function(t){return{text:t.text,icon:t.icon,disabled:t.disabled,shortcut:t.shortcut}};if(r(e))return e;switch(e.type){case"separator":return jD;case"submenu":return _(_({type:"nestedmenuitem"},o(e)),{getSubmenuItems:function(){var n=e.getSubmenuItems();return r(n)?n:L(n,t)}});default:return _(_({type:"menuitem"},o(e)),{onAction:(n=e.onAction,function(){return n()})})}},WD=function(t,e){if(0===e.length)return t;var n=et(t).filter((function(t){return!VD(t)})),o=n.fold((function(){return[]}),(function(t){return[jD]}));return t.concat(o).concat(e).concat([jD])},qD=function(t,e){return"longpress"!==e.type&&(2!==e.button||e.target===t.getBody()&&""===e.pointerType)},$D=function(t,e){return qD(t,e)?t.selection.getStart(!0):e.target},GD=function(t,e,n){var o=qn().deviceType.isTouch,i=xa(op.sketch({dom:{tag:"div"},lazySink:e,onEscape:function(){return t.focus()},onShow:function(){return n.setContextMenuState(!0)},onHide:function(){return n.setContextMenuState(!1)},fireDismissalEventInstead:{},inlineBehaviours:uc([pg("dismissContextMenu",[ir(jo(),(function(e,n){_s.close(e),t.focus()}))])])})),a=function(t){return op.hide(i)},u=function(e){if(LD(t)&&e.preventDefault(),!function(t,e){return e.ctrlKey&&!LD(t)}(t,e)&&!function(t){return!1===t.getParam("contextmenu")}(t)){var a=function(t,e){var n=function(t){return t.getParam("contextmenu_avoid_overlap","","string")}(t);if(qD(t,e))return!0;if(n){var o=$D(t,e);return Px(dn.fromDom(o),n)}return!1}(t,e);(o()?ID:PD)(t,e,(function(){var n=$D(t,e),o=t.ui.registry.getAll(),i=FD(t);return function(t,e,n){var o=W(e,(function(e,o){return Mt(t,o.toLowerCase()).map((function(t){var o=t.update(n);if(r(o))return WD(e,o.split(" "));if(o.length>0){var i=L(o,UD);return WD(e,i)}return e})).getOrThunk((function(){return e.concat([o])}))}),[]);return o.length>0&&VD(o[o.length-1])&&o.pop(),o}(o.contextMenus,i,n)}),n,i,a)}};t.on("init",(function(){var e="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(o()?"":" ResizeWindow");t.on(e,a),t.on("longpress contextmenu",u)}))},YD=Et([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),XD=function(t){return function(e){return e.translate(-t.left,-t.top)}},KD=function(t){return function(e){return e.translate(t.left,t.top)}},JD=function(t){return function(e,n){return W(t,(function(t,e){return e(t)}),Sa(e,n))}},ZD=function(t,e,n){return t.fold(JD([KD(n),XD(e)]),JD([XD(e)]),JD([]))},QD=function(t,e,n){return t.fold(JD([KD(n)]),JD([]),JD([KD(e)]))},tE=function(t,e,n){return t.fold(JD([]),JD([XD(n)]),JD([KD(e),XD(n)]))},eE=function(t,e,n){var o=t.fold((function(t,e){return{position:A.some("absolute"),left:A.some(t+"px"),top:A.some(e+"px")}}),(function(t,e){return{position:A.some("absolute"),left:A.some(t-n.left+"px"),top:A.some(e-n.top+"px")}}),(function(t,e){return{position:A.some("fixed"),left:A.some(t+"px"),top:A.some(e+"px")}}));return _({right:A.none(),bottom:A.none()},o)},nE=function(t,e,n,o){var r=function(t,r){return function(i,a){var u=t(e,n,o);return r(i.getOr(u.left),a.getOr(u.top))}};return t.fold(r(tE,oE),r(QD,rE),r(ZD,iE))},oE=YD.offset,rE=YD.absolute,iE=YD.fixed,aE=function(t,e){var n=Jr(t,e);return c(n)?NaN:parseInt(n,10)},uE=function(t,e,n,o){return function(t,e){var n=t.element,o=aE(n,e.leftAttr),r=aE(n,e.topAttr);return isNaN(o)||isNaN(r)?A.none():A.some(Sa(o,r))}(t,e).fold((function(){return n}),(function(t){return iE(t.left+o.left,t.top+o.top)}))},cE=function(t,e,n,o,r,i){var a=uE(t,e,n,o),u=e.mustSnap?fE(t,e,a,r,i):dE(t,e,a,r,i),c=ZD(a,r,i);return function(t,e,n){var o=t.element;Kr(o,e.leftAttr,n.left+"px"),Kr(o,e.topAttr,n.top+"px")}(t,e,c),u.fold((function(){return{coord:iE(c.left,c.top),extra:A.none()}}),(function(t){return{coord:t.output,extra:t.extra}}))},lE=function(t,e){!function(t,e){var n=t.element;ti(n,e.leftAttr),ti(n,e.topAttr)}(t,e)},sE=function(t,e,n,o){return ot(t,(function(t){var r=t.sensor,i=function(t,e,n,o,r,i){var a=QD(t,r,i),u=QD(e,r,i);return Math.abs(a.left-u.left)<=n&&Math.abs(a.top-u.top)<=o}(e,r,t.range.left,t.range.top,n,o);return i?A.some({output:nE(t.output,e,n,o),extra:t.extra}):A.none()}))},fE=function(t,e,n,o,r){var i=e.getSnapPoints(t);return sE(i,n,o,r).orThunk((function(){var t=W(i,(function(t,e){var i=e.sensor,a=function(t,e,n,o,r,i){var a=QD(t,r,i),u=QD(e,r,i),c=Math.abs(a.left-u.left),l=Math.abs(a.top-u.top);return Sa(c,l)}(n,i,e.range.left,e.range.top,o,r);return t.deltas.fold((function(){return{deltas:A.some(a),snap:A.some(e)}}),(function(n){return(a.left+a.top)/2<=(n.left+n.top)/2?{deltas:A.some(a),snap:A.some(e)}:t}))}),{deltas:A.none(),snap:A.none()});return t.snap.map((function(t){return{output:nE(t.output,n,o,r),extra:t.extra}}))}))},dE=function(t,e,n,o,r){var i=e.getSnapPoints(t);return sE(i,n,o,r)},mE=Object.freeze({__proto__:null,snapTo:function(t,e,n,o){var r=e.getTarget(t.element);if(e.repositionTarget){var i=_r(t.element),a=Ba(i),u=GM(r),c=function(t,e,n){return{coord:nE(t.output,t.output,e,n),extra:t.extra}}(o,a,u),l=eE(c.coord,0,u);Qi(r,l)}}}),gE="data-initial-z-index",pE=function(t,e){t.getSystem().addToGui(e),function(t){zr(t.element).filter(xr).each((function(e){na(e,"z-index").each((function(t){Kr(e,gE,t)})),Ji(e,"z-index",ta(t.element,"z-index"))}))}(e)},hE=function(t){!function(t){zr(t.element).filter(xr).each((function(t){Zr(t,gE).fold((function(){return ia(t,"z-index")}),(function(e){return Ji(t,"z-index",e)})),ti(t,gE)}))}(t),t.getSystem().removeFromGui(t)},vE=function(t,e,n){return t.getSystem().build(Yx.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[e]},events:n}))},bE=Ze("snaps",[Ne("getSnapPoints"),vu("onSensor"),Ne("leftAttr"),Ne("topAttr"),Qe("lazyViewport",$a),Qe("mustSnap",!1)]),xE=[Qe("useFixed",y),Ne("blockerClass"),Qe("getTarget",h),Qe("onDrag",m),Qe("repositionTarget",!0),Qe("onDrop",m),an("getBounds",$a),bE],yE=function(t){return(e=na(t,"left"),n=na(t,"top"),o=na(t,"position"),r=function(t,e,n){return("fixed"===n?iE:oE)(parseInt(t,10),parseInt(e,10))},e.isSome()&&n.isSome()&&o.isSome()?A.some(r(e.getOrDie(),n.getOrDie(),o.getOrDie())):A.none()).getOrThunk((function(){var e=za(t);return rE(e.left,e.top)}));var e,n,o,r},wE=function(t,e,n,o,r,i,a){return function(t,e,n,o,r){var i=r.bounds,a=QD(e,n,o),u=Dc(a.left,i.x,i.x+i.width-r.width),c=Dc(a.top,i.y,i.y+i.height-r.height),l=rE(u,c);return e.fold((function(){var t=tE(l,n,o);return oE(t.left,t.top)}),(function(){return l}),(function(){var t=ZD(l,n,o);return iE(t.left,t.top)}))}(0,e.fold((function(){var t,e,a,u=(t=n,e=i.left,a=i.top,t.fold((function(t,n){return oE(t+e,n+a)}),(function(t,n){return rE(t+e,n+a)}),(function(t,n){return iE(t+e,n+a)}))),c=ZD(u,o,r);return iE(c.left,c.top)}),(function(e){var a=cE(t,e,n,i,o,r);return a.extra.each((function(n){e.onSensor(t,n)})),a.coord})),o,r,a)},kE=function(t,e){return{bounds:t.getBounds(),height:Ca(e.element),width:Da(e.element)}},_E=function(t,e,n,o,r){var i=n.update(o,r),a=n.getStartData().getOrThunk((function(){return kE(e,t)}));i.each((function(n){!function(t,e,n,o){var r=e.getTarget(t.element);if(e.repositionTarget){var i=_r(t.element),a=Ba(i),u=GM(r),c=yE(r),l=wE(t,e.snaps,c,a,u,o,n),s=eE(l,0,u);Qi(r,s)}e.onDrag(t,r,o)}(t,e,a,n)}))},CE=function(t,e,n,o){e.each(hE),n.snaps.each((function(e){lE(t,e)}));var r=n.getTarget(t.element);o.reset(),n.onDrop(t,r)},SE=function(t){return function(e,n){var o=function(t){n.setStartData(kE(e,t))};return nr(S([ir(No(),(function(t){n.getStartData().each((function(){return o(t)}))}))],t(e,n,o)))}},OE=Object.freeze({__proto__:null,getData:function(t){return A.from(Sa(t.x,t.y))},getDelta:function(t,e){return Sa(e.left-t.left,e.top-t.top)}}),zE=function(t,e,n){return[ir(co(),(function(o,r){if(0===r.event.raw.button){r.stop();var i=function(){return CE(o,A.some(c),t,e)},a=Hx(i,200),u={drop:i,delayDrop:a.schedule,forceDrop:i,move:function(n){a.cancel(),_E(o,t,e,OE,n)}},c=vE(o,t.blockerClass,function(t){return nr([ir(co(),t.forceDrop),ir(fo(),t.drop),ir(lo(),(function(e,n){t.move(n.event)})),ir(so(),t.delayDrop)])}(u));n(o),pE(o,c)}}))]},TE=S(xE,[wu("dragger",{handlers:SE(zE)})]),ME=Object.freeze({__proto__:null,getData:function(t){var e=t.raw.touches;return 1===e.length?function(t){var e=t[0];return A.some(Sa(e.clientX,e.clientY))}(e):A.none()},getDelta:function(t,e){return Sa(e.left-t.left,e.top-t.top)}}),AE=function(t,e,n){var o=sn(A.none());return[ir(ro(),(function(r,i){i.stop();var a=function(){CE(r,o.get(),t,e),o.set(A.none())},u={drop:a,delayDrop:m,forceDrop:a,move:function(n){_E(r,t,e,ME,n)}},c=vE(r,t.blockerClass,function(t){return nr([ir(ro(),t.forceDrop),ir(ao(),t.drop),ir(uo(),t.drop),ir(io(),(function(e,n){t.move(n.event)}))])}(u));o.set(A.some(c));n(r),pE(r,c)})),ir(io(),(function(n,o){o.stop(),_E(n,t,e,ME,o.event)})),ir(ao(),(function(n,r){r.stop(),CE(n,o.get(),t,e),o.set(A.none())})),ir(uo(),(function(n){CE(n,o.get(),t,e),o.set(A.none())}))]},DE=TE,EE=S(xE,[wu("dragger",{handlers:SE(AE)})]),PE=S(xE,[wu("dragger",{handlers:SE((function(t,e,n){return S(zE(t,e,n),AE(t,e,n))}))})]),HE=Object.freeze({__proto__:null,mouse:DE,touch:EE,mouseOrTouch:PE}),BE=Object.freeze({__proto__:null,init:function(){var t=A.none(),e=A.none(),n=p({});return Ci({readState:n,reset:function(){t=A.none(),e=A.none()},update:function(e,n){return e.getData(n).bind((function(n){return function(e,n){var o=t.map((function(t){return e.getDelta(t,n)}));return t=A.some(n),o}(e,n)}))},getStartData:function(){return e},setStartData:function(t){e=A.some(t)}})}}),RE=fc({branchKey:"mode",branches:HE,name:"dragging",active:{events:function(t,e){return t.dragger.handlers(t,e)}},extra:{snap:function(t){return{sensor:t.sensor,range:t.range,output:t.output,extra:A.from(t.extra)}}},state:BE,apis:mE}),IE=function(t,e,n,o,r,i){return t.fold((function(){return RE.snap({sensor:rE(n-20,o-20),range:Sa(r,i),output:rE(A.some(n),A.some(o)),extra:{td:e}})}),(function(t){var r=n-20,i=o-20,a=t.element.dom.getBoundingClientRect();return RE.snap({sensor:rE(r,i),range:Sa(40,40),output:rE(A.some(n-a.width/2),A.some(o-a.height/2)),extra:{td:e}})}))},NE=function(t,e,n){return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:function(t,o){var r=o.td;(function(t,e){return t.exists((function(t){return Yn(t,e)}))})(e.get(),r)||(e.set(A.some(r)),n(r))},mustSnap:!0}},LE=function(t){return vp(hp.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:uc([RE.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),fw.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}}))},FE=function(t,e){var n=sn([]),o=sn([]),r=sn(!1),i=sn(A.none()),a=sn(A.none()),u=function(t){var n=qa(t);return IE(f.getOpt(e),t,n.x,n.y,n.width,n.height)},c=function(t){var n=qa(t);return IE(d.getOpt(e),t,n.right,n.bottom,n.width,n.height)},l=NE((function(){return L(n.get(),(function(t){return u(t)}))}),i,(function(e){a.get().each((function(n){t.fire("TableSelectorChange",{start:e,finish:n})}))})),s=NE((function(){return L(o.get(),(function(t){return c(t)}))}),a,(function(e){i.get().each((function(n){t.fire("TableSelectorChange",{start:n,finish:e})}))})),f=LE(l),d=LE(s),m=xa(f.asSpec()),g=xa(d.asSpec()),p=function(e,n,o,r){var i=o(n);RE.snapTo(e,i);!function(e,n,o,r){var i=n.dom.getBoundingClientRect();ia(e.element,"display");var a=Or(dn.fromDom(t.getBody())).dom.innerHeight,u=o(i),c=r(i,a);(u||c)&&Ji(e.element,"display","none")}(e,n,(function(t){return t[r]<0}),(function(t,e){return t[r]>e}))},h=function(t){return p(m,t,u,"top")},v=function(t){return p(g,t,c,"bottom")};qn().deviceType.isTouch()&&(t.on("TableSelectionChange",(function(t){r.get()||(is(e,m),is(e,g),r.set(!0)),i.set(A.some(t.start)),a.set(A.some(t.finish)),t.otherCells.each((function(e){n.set(e.upOrLeftCells),o.set(e.downOrRightCells),h(t.start),v(t.finish)}))})),t.on("ResizeEditor ResizeWindow ScrollContent",(function(){i.get().each(h),a.get().each(v)})),t.on("TableSelectionClear",(function(){r.get()&&(cs(m),cs(g),r.set(!1)),i.set(A.none()),a.set(A.none())})))},VE=function(t){if(1===t.nodeType){if("BR"===t.nodeName||t.getAttribute("data-mce-bogus"))return!0;if("bookmark"===t.getAttribute("data-mce-type"))return!0}return!1},jE=function(t,e,n){e.delimiter||(e.delimiter="");return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:uc([cg.config({mode:"flow",selector:"div[role=button]"}),xv.config({disabled:n.isDisabled}),Kv(),ey.config({}),gg.config({}),pg("elementPathEvents",[mr((function(o,r){t.shortcuts.add("alt+F11","focus statusbar elementpath",(function(){return cg.focusIn(o)})),t.on("NodeChange",(function(r){var i,a,u=function(e){for(var n=[],o=e.length;o-- >0;){var r=e[o];if(1===r.nodeType&&!VE(r)){var i=t.fire("ResolveName",{name:r.nodeName.toLowerCase(),target:r});if(i.isDefaultPrevented()||n.push({name:i.name,element:r}),i.isPropagationStopped())break}}return n}(r.parents);u.length>0?gg.set(o,(i=L(u||[],(function(e,o){return hp.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{role:"button","data-index":o,"tab-index":-1,"aria-level":o+1},innerHtml:e.name},action:function(n){t.focus(),t.selection.select(e.element),t.nodeChanged()},buttonBehaviours:uc([Zv(n.isDisabled),Kv()])})})),a={dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0},innerHtml:" "+e.delimiter+" "}},W(i.slice(1),(function(t,e){var n=t;return n.push(a),n.push(e),n}),[i[0]]))):gg.set(o,[])}))}))])]),components:[]}};!function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"}(rM||(rM={}));var UE,WE,qE,$E=function(t,e,n){var o=dn.fromDom(t.getContainer()),r=function(t,e,n,o,r){var i={};return i.height=cD(o+e.top,Cv(t),Ov(t)),n===rM.Both&&(i.width=cD(r+e.left,_v(t),Sv(t))),i}(t,e,n,_a(o),Aa(o));kt(r,(function(t,e){return Ji(o,e,uD(t))})),function(t){t.fire("ResizeEditor")}(t)},GE=function(t,e,n,o){var r=Sa(20*n,20*o);return $E(t,r,e),A.some(!0)},YE=function(t,e){var n=function(t){var e=!t.hasPlugin("autoresize"),n=t.getParam("resize",e);return!1===n?rM.None:"both"===n?rM.Both:rM.Vertical}(t);return n===rM.None?A.none():A.some({dom:{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:e.translate("Resize")},innerHtml:xp("resize-handle",e.icons)},behaviours:uc([RE.config({mode:"mouse",repositionTarget:!1,onDrag:function(e,o,r){return $E(t,r,n)},blockerClass:"tox-blocker"}),cg.config({mode:"special",onLeft:function(){return GE(t,n,-1,0)},onRight:function(){return GE(t,n,1,0)},onUp:function(){return GE(t,n,0,-1)},onDown:function(){return GE(t,n,0,1)}}),ey.config({}),yg.config({})])})},XE=function(t,e){var n=function(){var n,o=[];return t.getParam("elementpath",!0,"boolean")&&o.push(jE(t,{},e)),t.hasPlugin("wordcount")&&o.push(function(t,e){var n,o=function(t,n,o){return gg.set(t,[ha(e.translate(["{0} "+o,n[o]]))])};return hp.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:uc([Zv(e.isDisabled),Kv(),ey.config({}),gg.config({}),Us.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),pg("wordcount-events",[hr((function(t){var e=Us.getValue(t),n="words"===e.mode?"characters":"words";Us.setValue(t,{mode:n,count:e.count}),o(t,e.count,n)})),mr((function(e){t.on("wordCountUpdate",(function(t){var n=Us.getValue(e).mode;Us.setValue(e,{mode:n,count:t.wordCount}),o(e,t.wordCount,n)}))}))])]),eventOrder:(n={},n[Mo()]=["disabling","alloy.base.behaviour","wordcount-events"],n)})}(t,e)),t.getParam("branding",!0,"boolean")&&o.push({dom:{tag:"span",classes:["tox-statusbar__branding"],innerHtml:'<a href="https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce&amp;utm_content=v5" rel="noopener" target="_blank" tabindex="-1" aria-label="'+(n=iv.translate(["Powered by {0}","Tiny"]))+'">'+n+"</a>"}}),o.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container"]},components:o}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:function(){var o=n(),r=YE(t,e);return o.concat(r.toArray())}()}},KE=function(t){var e,n,o,r,i=t.inline,a=i?mD:iD,u=Vv(t)?yA:qM,c=A.none(),l=qn(),s=l.browser.isIE()?["tox-platform-ie"]:[],f=l.deviceType.isTouch()?["tox-platform-touch"]:[],d=Rv(t),g=Lv(t),p=iv.isRtl()?{attributes:{dir:"rtl"}}:{},h={attributes:(e={},e[$c]=d?Oc.BottomToTop:Oc.TopToBottom,e)},v=function(){return c.bind(qA.getHeader)},b=function(){Ji($.element,"width",document.body.clientWidth+"px")},x=xa((n=Yn(Gi(),g)&&"grid"===ta(g,"display"),o={dom:_({tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(s).concat(f)},p),behaviours:uc([ts.config({useFixed:function(){return u.isDocked(v)}})])},r={dom:{styles:{width:document.body.clientWidth+"px"}},events:nr([ir(Lo(),b)])},Bt(o,n?r:{}))),y=function(){return at(x)},w=vp({dom:{tag:"div",classes:["tox-anchorbar"]}}),k=function(){return c.bind((function(t){return qA.getThrobber(t)})).getOrDie("Could not find throbber element")},C=sz(x,t,(function(){return c.bind((function(t){return w.getOpt(t)})).getOrDie("Could not find a anchor bar element")})),S=qA.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:C,onEscape:function(){t.focus()}}),O=Ev(t),z=qA.parts.toolbar(_({dom:{tag:"div",classes:["tox-toolbar"]},getSink:y,providers:C.shared.providers,onEscape:function(){t.focus()},type:O,lazyToolbar:function(){return c.bind((function(t){return qA.getToolbar(t)})).getOrDie("Could not find more toolbar element")},lazyHeader:function(){return v().getOrDie("Could not find header element")}},h)),T=qA.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:C.shared.providers,onEscape:function(){t.focus()},type:O}),M=qA.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),D=qA.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}}),E=qA.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:C}),P=t.getParam("statusbar",!0,"boolean")&&!i?A.some(XE(t,C.shared.providers)):A.none(),H={dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[M,D]},B=Av(t),R=Tv(t),I=zv(t),N=qA.parts.header({dom:_({tag:"div",classes:["tox-editor-header"]},h),components:G([I?[S]:[],B?[T]:R?[z]:[],Nv(t)?[]:[w.asSpec()]]),sticky:Vv(t),editor:t,sharedBackstage:C.shared}),L=G([d?[]:[N],i?[]:[H],d?[N]:[]]),V=G([[{dom:{tag:"div",classes:["tox-editor-container"]},components:L}],i?[]:P.toArray(),[E]]),j=Fv(t),U=_(_({role:"application"},iv.isRtl()?{dir:"rtl"}:{}),j?{"aria-hidden":"true"}:{}),W=xa(qA.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(i?["tox-tinymce-inline"]:[]).concat(d?["tox-tinymce--toolbar-bottom"]:[]).concat(f).concat(s),styles:_({visibility:"hidden"},j?{opacity:"0",border:"0"}:{}),attributes:U},components:V,behaviours:uc([Kv(),xv.config({disableClass:"tox-tinymce--disabled"}),cg.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])}));c=A.some(W),t.shortcuts.add("alt+F9","focus menubar",(function(){qA.focusMenubar(W)})),t.shortcuts.add("alt+F10","focus toolbar",(function(){qA.focusToolbar(W)})),t.addCommand("ToggleToolbarDrawer",(function(){qA.toggleToolbarDrawer(W)})),t.addQueryStateHandler("ToggleToolbarDrawer",(function(){return qA.isToolbarDrawerToggled(W)}));var q=Xx(W),$=Xx(x);!function(t,e,n){var o=function(t,o){F([e,n],(function(e){e.broadcastEvent(t,o)}))},r=function(t,o){F([e,n],(function(e){e.broadcastOn([t],o)}))},i=function(t){return r(Cs(),{target:t.target})},a=Ax(dn.fromDom(document),"touchstart",i),u=Ax(dn.fromDom(document),"touchmove",(function(t){return o(Ro(),t)})),c=Ax(dn.fromDom(document),"touchend",(function(t){return o(Io(),t)})),l=Ax(dn.fromDom(document),"mousedown",i),s=Ax(dn.fromDom(document),"mouseup",(function(t){0===t.raw.button&&r(Os(),{target:t.target})})),f=function(t){return r(Cs(),{target:dn.fromDom(t.target)})},d=function(t){0===t.button&&r(Os(),{target:dn.fromDom(t.target)})},m=function(t){return o(No(),Ex(t))},g=function(t){r(Ss(),{}),o(Lo(),Ex(t))},p=function(){return r(Ss(),{})},h=function(e){e.state&&r(Cs(),{target:dn.fromDom(t.getContainer())})};t.on("PostRender",(function(){t.on("click",f),t.on("tap",f),t.on("mouseup",d),t.on("ScrollWindow",m),t.on("ResizeWindow",g),t.on("ResizeEditor",p),t.on("AfterProgressState",h)})),t.on("remove",(function(){t.off("click",f),t.off("tap",f),t.off("mouseup",d),t.off("ScrollWindow",m),t.off("ResizeWindow",g),t.off("ResizeEditor",p),t.off("AfterProgressState",h),l.unbind(),a.unbind(),u.unbind(),c.unbind(),s.unbind()})),t.on("detach",(function(){ds(e),ds(n),e.destroy(),n.destroy()}))}(t,q,$);var Y=function(){var e=uD(lD(t)),n=uD(function(t){return sD(t).getOr(kv(t))}(t));return t.inline||(ra("div","width",n)&&Ji(W.element,"width",n),ra("div","height",e)?Ji(W.element,"height",e):Ji(W.element,"height","200px")),e};return{mothership:q,uiMothership:$,backstage:C,renderUI:function(){u.setup(t,C.shared,v),OD(t,C),GD(t,y,C),function(t){var e=t.ui.registry.getAll().sidebars;F(yt(e),(function(n){var o=e[n],r=function(){return A.from(t.queryCommandValue("ToggleSidebar")).is(n)};t.ui.registry.addToggleButton(n,{icon:o.icon,tooltip:o.tooltip,onAction:function(e){t.execCommand("ToggleSidebar",!1,n),e.setActive(r())},onSetup:function(e){var n=function(){return e.setActive(r())};return t.on("ToggleSidebar",n),function(){t.off("ToggleSidebar",n)}}})}))}(t),IA(t,k,C.shared),_t(function(t){return t.getParam("toolbar_groups",{},"object")}(t),(function(e,n){t.ui.registry.addGroupToolbarButton(n,e)}));var e=t.ui.registry.getAll(),n=e.buttons,o=e.menuItems,r=e.contextToolbars,i=e.sidebars,c=Mv(t),l={menuItems:o,menus:jv(t),menubar:Uv(t),toolbar:c.getOrThunk((function(){return function(t){return t.getParam("toolbar",!0)}(t)})),allowToolbarGroups:O===uh.floating,buttons:n,sidebar:i};HM(t,r,x,{backstage:C}),FE(t,x);var s=t.getElement(),f=Y(),d={mothership:q,uiMothership:$,outerContainer:W},m={targetNode:s,height:f};return a.render(t,d,l,C,m)},getUi:function(){return{channels:{broadcastAll:$.broadcast,broadcastOn:$.broadcastOn,register:m}}}}},JE=p([Ne("lazySink"),Ge("dragBlockClass"),an("getBounds",$a),Qe("useTabstopAt",w),Qe("eventOrder",{}),Ws("modalBehaviours",[cg]),bu("onExecute"),yu("onEscape")]),ZE={sketch:h},QE=p([_f({name:"draghandle",overrides:function(t,e){return{behaviours:uc([RE.config({mode:"mouse",getTarget:function(t){return Za(t,'[role="dialog"]').getOr(t)},blockerClass:t.dragBlockClass.getOrDie(new Error("The drag blocker class was not specified for a dialog with a drag handle: \n"+JSON.stringify(e,null,2)).message),getBounds:t.getDragBounds})])}}}),wf({schema:[Ne("dom")],name:"title"}),wf({factory:ZE,schema:[Ne("dom")],name:"close"}),wf({factory:ZE,schema:[Ne("dom")],name:"body"}),_f({factory:ZE,schema:[Ne("dom")],name:"footer"}),kf({factory:{sketch:function(t,e){return _(_({},t),{dom:e.dom,components:e.components})}},schema:[Qe("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),Qe("components",[])],name:"blocker"})]),tP=Object.freeze({__proto__:null,block:function(t,e,n,o){Kr(t.element,"aria-busy",!0);var r=e.getRoot(t).getOr(t),i=uc([cg.config({mode:"special",onTab:function(){return A.some(!0)},onShiftTab:function(){return A.some(!0)}}),yg.config({})]),a=o(r,i),u=r.getSystem().build(a);gg.append(r,ya(u)),u.hasConfigured(cg)&&cg.focusIn(u),n.isBlocked()||e.onBlock(t),n.blockWith((function(){return gg.remove(r,u)}))},unblock:function(t,e,n){ti(t.element,"aria-busy"),n.isBlocked()&&e.onUnblock(t),n.clear()}}),eP=[an("getRoot",A.none),vu("onBlock"),vu("onUnblock")],nP=lc({fields:eP,name:"blocking",apis:tP,state:Object.freeze({__proto__:null,init:function(){var t=vM();return Ci({readState:t.isSet,blockWith:function(e){t.set({destroy:e})},clear:t.clear,isBlocked:t.isSet})}})}),oP=Kf({name:"ModalDialog",configFields:JE(),partFields:QE(),factory:function(t,e,n,o){var r,i=sn(A.none()),a=ui("modal-events"),u=_(_({},t.eventOrder),((r={})[Fo()]=[a].concat(t.eventOrder["alloy.system.attached"]||[]),r));return{uid:t.uid,dom:t.dom,components:e,apis:{show:function(e){i.set(A.some(e));var n=t.lazySink(e).getOrDie(),r=o.blocker(),a=n.getSystem().build(_(_({},r),{components:r.components.concat([ya(e)]),behaviours:uc([yg.config({}),pg("dialog-blocker-events",[dr(go(),(function(){cg.focusIn(e)}))])])}));is(n,a),cg.focusIn(e)},hide:function(t){i.set(A.none()),zr(t.element).each((function(e){t.getSystem().getByDom(e).each((function(t){cs(t)}))}))},getBody:function(e){return Rf(e,t,"body")},getFooter:function(e){return Rf(e,t,"footer")},setIdle:function(t){nP.unblock(t)},setBusy:function(t,e){nP.block(t,e)}},eventOrder:u,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:$s(t.modalBehaviours,[gg.config({}),cg.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt}),nP.config({getRoot:i.get}),pg(a,[mr((function(e){var n,o,r,i,a,u;n=e.element,o=Rf(e,t,"title").element,r=Zr(n,"id").fold((function(){var t=ui("dialog-label");return Kr(o,"id",t),t}),h),Kr(n,"aria-labelledby",r),i=e.element,a=Rf(e,t,"body").element,u=A.from(Jr(i,"id")).fold((function(){var t=ui("dialog-describe");return Kr(a,"id",t),t}),h),Kr(i,"aria-describedby",u)}))])])}},apis:{show:function(t,e){t.show(e)},hide:function(t,e){t.hide(e)},getBody:function(t,e){return t.getBody(e)},getFooter:function(t,e){return t.getFooter(e)},setBusy:function(t,e,n){t.setBusy(e,n)},setIdle:function(t,e){t.setIdle(e)}}}),rP=ce([Ve("type"),Ve("name")].concat(Lh)),iP=Pe,aP=[pe("name","name",Ut((function(){return ui("button-name")})),Ee),Ke("icon"),on("align","end",["start","end"]),rn("primary",!1),rn("disabled",!1)],uP=S(aP,[Ve("text")]),cP=S([je("type",["submit","cancel","custom"])],uP),lP=S([je("type",["menu"]),Ke("text"),Ke("tooltip"),Ke("icon"),$e("items",rP)],aP),sP=Te("type",{submit:cP,cancel:cP,custom:cP,menu:lP}),fP=[Ve("type"),Ve("text"),je("level",["info","warn","error","success"]),Ve("icon"),Qe("url","")],dP=ce(fP),mP=[Ve("type"),Ve("text"),rn("disabled",!1),rn("primary",!1),pe("name","name",Ut((function(){return ui("button-name")})),Ee),Ke("icon"),rn("borderless",!1)],gP=ce(mP),pP=[Ve("type"),Ve("name"),Ve("label"),rn("disabled",!1)],hP=ce(pP),vP=Pe,bP=[Ve("type"),Ve("name")],xP=bP.concat([Ke("label")]),yP=xP.concat([Qe("columns","auto")]),wP=ce(yP),kP=xe([Ve("value"),Ve("text"),Ve("icon")]),_P=ce(xP),CP=Ee,SP=ce(xP),OP=Ee,zP=bP.concat([nn("tag","textarea"),Ve("scriptId"),Ve("scriptUrl"),function(t,e){return tn(t,e,Re)}("settings",void 0)]),TP=bP.concat([nn("tag","textarea"),Ue("init")]),MP=we((function(t){return _e("customeditor.old",ue(TP),t).orThunk((function(){return _e("customeditor.new",ue(zP),t)}))})),AP=Ee,DP=ce(xP),EP=le(be),PP=function(t){return[Ve("type"),Fe("columns"),t]},HP=[Ve("type"),Ve("html"),on("presets","presentation",["presentation","document"])],BP=ce(HP),RP=xP.concat([rn("sandboxed",!0)]),IP=ce(RP),NP=Ee,LP=xP.concat([Le("currentState",ce([Ne("blob"),Ve("url")]))]),FP=ce(LP),VP=xP.concat([Ke("inputMode"),Ke("placeholder"),rn("maximized",!1),rn("disabled",!1)]),jP=ce(VP),UP=Ee,WP=function(t){return[Ve("type"),Ve("label"),t]},qP=[Ve("text"),Ve("value")],$P=[Ve("text"),$e("items",(UE=function(){return GP},WE=UE,qE=It((function(){return WE()})),{extract:function(t,e,n){return qE().extract(t,e,n)},toString:function(){return qE().toString()}}))],GP=se([ce(qP),ce($P)]),YP=xP.concat([$e("items",GP),rn("disabled",!1)]),XP=ce(YP),KP=Ee,JP=xP.concat([qe("items",[Ve("text"),Ve("value")]),en("size",1),rn("disabled",!1)]),ZP=ce(JP),QP=Ee,tH=xP.concat([rn("constrain",!0),rn("disabled",!1)]),eH=ce(tH),nH=ce([Ve("width"),Ve("height")]),oH=[Ve("type"),$e("header",Ee),$e("cells",le(Ee))],rH=ce(oH),iH=xP.concat([Ke("placeholder"),rn("maximized",!1),rn("disabled",!1)]),aH=ce(iH),uH=Ee,cH=xP.concat([on("filetype","file",["image","media","file"]),Qe("disabled",!1)]),lH=ce(cH),sH=ce([Ve("value"),Qe("meta",{})]),fH=function(t){return pe("items","items",Vt(),le(we((function(e){return _e("Checking item of "+t,dH,e).fold((function(t){return ut(Oe(t))}),(function(t){return at(t)}))}))))},dH=ye((function(){return ze("type",{alertbanner:dP,bar:ce((t=fH("bar"),[Ve("type"),t])),button:gP,checkbox:hP,colorinput:_P,colorpicker:SP,dropzone:DP,grid:ce(PP(fH("grid"))),iframe:IP,input:jP,listbox:XP,selectbox:ZP,sizeinput:eH,textarea:aH,urlinput:lH,customeditor:MP,htmlpanel:BP,imagetools:FP,collection:wP,label:ce(WP(fH("label"))),table:rH,panel:gH});var t})),mH=[Ve("type"),Qe("classes",[]),$e("items",dH)],gH=ce(mH),pH=[pe("name","name",Ut((function(){return ui("tab-name")})),Ee),Ve("title"),$e("items",dH)],hH=[Ve("type"),qe("tabs",pH)],vH=ce(hH),bH=uP,xH=sP,yH=ce([Ve("title"),Le("body",ze("type",{panel:gH,tabpanel:vH})),nn("size","normal"),$e("buttons",xH),Qe("initialData",{}),an("onAction",m),an("onChange",m),an("onSubmit",m),an("onClose",m),an("onCancel",m),Qe("onTabChange",m)]),wH=ce(S([je("type",["cancel","custom"])],bH)),kH=ce([Ve("title"),Ve("url"),Xe("height"),Xe("width"),function(t,e){return Ye(t,le(e))}("buttons",wH),an("onAction",m),an("onCancel",m),an("onClose",m),an("onMessage",m)]),_H=function t(e){return i(e)?[e].concat(Y(Tt(e),t)):a(e)?Y(e,t):[]},CH=function(t){return r(t.type)&&r(t.name)},SH={checkbox:vP,colorinput:CP,colorpicker:OP,dropzone:EP,input:UP,iframe:NP,sizeinput:nH,selectbox:QP,listbox:KP,size:nH,textarea:uH,urlinput:sH,customeditor:AP,collection:kP,togglemenuitem:iP},OH=function(t){return j(_H(t),CH)},zH=function(t){var e=OH(t),n=Y(e,(function(t){return function(t){return A.from(SH[t.type])}(t).fold((function(){return[]}),(function(e){return[Le(t.name,e)]}))}));return ce(n)},TH=function(t){return{internalDialog:Ce(_e("dialog",yH,t)),dataValidator:zH(t),initialData:t.initialData}},MH={open:function(t,e){var n=TH(e);return t(n.internalDialog,n.initialData,n.dataValidator)},openUrl:function(t,e){return t(Ce(_e("dialog",kH,e)))},redial:function(t){return TH(t)}},AH=function(t){var e=[],n={};return kt(t,(function(t,o){t.fold((function(){e.push(o)}),(function(t){n[o]=t}))})),e.length>0?ut(e):at(n)},DH=function(t,e){var n=vp(d_.sketch((function(n){return{dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:L(t.items,(function(t){return hO(n,t,e)}))}})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[n.asSpec()]}],behaviours:uc([cg.config({mode:"acyclic",useTabstopAt:b(V_)}),w_(n),A_(n,{postprocess:function(t){return AH(t).fold((function(t){return console.error(t),{}}),(function(t){return t}))}})])}},EH=Xf({name:"TabButton",configFields:[Qe("uid",void 0),Ne("value"),pe("dom","dom",Wt((function(){return{attributes:{role:"tab",id:ui("aria"),"aria-selected":"false"}}})),Me()),Ge("action"),Qe("domModification",{}),Ws("tabButtonBehaviours",[yg,cg,Us]),Ne("view")],factory:function(t,e){return{uid:t.uid,dom:t.dom,components:t.components,events:Hg(t.action),behaviours:$s(t.tabButtonBehaviours,[yg.config({}),cg.config({mode:"execution",useSpace:!0,useEnter:!0}),Us.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}}}),PH=p([Ne("tabs"),Ne("dom"),Qe("clickToDismiss",!1),Ws("tabbarBehaviours",[md,cg]),pu(["tabClass","selectedClass"])]),HH=Cf({factory:EH,name:"tabs",unit:"tab",overrides:function(t){var e=function(t,e){md.dehighlight(t,e),Jo(t,Go(),{tabbar:t,button:e})},n=function(t,e){md.highlight(t,e),Jo(t,$o(),{tabbar:t,button:e})};return{action:function(o){var r=o.getSystem().getByUid(t.uid).getOrDie(),i=md.isHighlighted(r,o);(i&&t.clickToDismiss?e:i?m:n)(r,o)},domModification:{classes:[t.markers.tabClass]}}}}),BH=p([HH]),RH=Kf({name:"Tabbar",configFields:PH(),partFields:BH(),factory:function(t,e,n,o){return{uid:t.uid,dom:t.dom,components:e,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:$s(t.tabbarBehaviours,[md.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:function(t,e){Kr(e.element,"aria-selected","true")},onDehighlight:function(t,e){Kr(e.element,"aria-selected","false")}}),cg.config({mode:"flow",getInitial:function(t){return md.getHighlighted(t).map((function(t){return t.element}))},selector:"."+t.markers.tabClass,executeOnMove:!0})])}}}),IH=Xf({name:"Tabview",configFields:[Ws("tabviewBehaviours",[gg])],factory:function(t,e){return{uid:t.uid,dom:t.dom,behaviours:$s(t.tabviewBehaviours,[gg.config({})]),domModification:{attributes:{role:"tabpanel"}}}}}),NH=p([Qe("selectFirst",!0),vu("onChangeTab"),vu("onDismissTab"),Qe("tabs",[]),Ws("tabSectionBehaviours",[])]),LH=wf({factory:RH,schema:[Ne("dom"),We("markers",[Ne("tabClass"),Ne("selectedClass")])],name:"tabbar",defaults:function(t){return{tabs:t.tabs}}}),FH=wf({factory:IH,name:"tabview"}),VH=p([LH,FH]),jH=Kf({name:"TabSection",configFields:NH(),partFields:VH(),factory:function(t,e,n,o){var r=function(e,n){Bf(e,t,"tabbar").each((function(t){n(t).each(Zo)}))};return{uid:t.uid,dom:t.dom,components:e,behaviours:qs(t.tabSectionBehaviours),events:nr(G([t.selectFirst?[mr((function(t,e){r(t,md.getFirst)}))]:[],[ir($o(),(function(e,n){!function(e){var n=Us.getValue(e);Bf(e,t,"tabview").each((function(o){var r=q(t.tabs,(function(t){return t.value===n}));r.each((function(n){var r=n.view();Zr(e.element,"id").each((function(t){Kr(o.element,"aria-labelledby",t)})),gg.set(o,r),t.onChangeTab(o,e,r)}))}))}(n.event.button)})),ir(Go(),(function(e,n){var o=n.event.button;t.onDismissTab(e,o)}))]])),apis:{getViewItems:function(e){return Bf(e,t,"tabview").map((function(t){return gg.contents(t)})).getOr([])},showTab:function(t,e){r(t,(function(t){var n=md.getCandidates(t);return q(n,(function(t){return Us.getValue(t)===e})).filter((function(e){return!md.isHighlighted(t,e)}))}))}}}},apis:{getViewItems:function(t,e){return t.getViewItems(e)},showTab:function(t,e,n){t.showTab(e,n)}}}),UH=function(t,e){Ji(t,"height",e+"px"),qn().browser.isIE()?ia(t,"flex-basis"):Ji(t,"flex-basis",e+"px")},WH=function(t,e,n){Za(t,'[role="dialog"]').each((function(t){Qa(t,'[role="tablist"]').each((function(o){n.get().map((function(n){return Ji(e,"height","0"),Ji(e,"flex-basis","0"),Math.min(n,function(t,e,n){var o,r=Sr(t).dom,i=Za(t,".tox-dialog-wrap").getOr(t);o="fixed"===ta(i,"position")?Math.max(r.clientHeight,window.innerHeight):Math.max(r.offsetHeight,r.scrollHeight);var a=_a(e),u=e.dom.offsetLeft>=n.dom.offsetLeft+Aa(n)?Math.max(_a(n),a):a,c=parseInt(ta(t,"margin-top"),10)||0,l=parseInt(ta(t,"margin-bottom"),10)||0;return o-(_a(t)+c+l-u)}(t,e,o))})).each((function(t){UH(e,t)}))}))}))},qH=function(t){return Qa(t,'[role="tabpanel"]')},$H=function(t){var e,n,o=(e=sn(A.none()),n=[mr((function(n){var o=n.element;qH(o).each((function(r){Ji(r,"visibility","hidden"),n.getSystem().getByDom(r).toOptional().each((function(n){var o=function(t,e,n){return L(t,(function(o,r){gg.set(n,t[r].view());var i=e.dom.getBoundingClientRect();return gg.set(n,[]),i.height}))}(t,r,n),i=function(t){return tt(Z(t,(function(t,e){return t>e?-1:t<e?1:0})))}(o);e.set(i)})),WH(o,r,e),ia(r,"visibility"),function(t,e){tt(t).each((function(t){return jH.showTab(e,t.value)}))}(t,n),pp.requestAnimationFrame((function(){WH(o,r,e)}))}))})),ir(Lo(),(function(t){var n=t.element;qH(n).each((function(t){WH(n,t,e)}))})),ir(py,(function(t,n){var o=t.element;qH(o).each((function(t){var n=hc(Hr(t));Ji(t,"visibility","hidden");var r=na(t,"height").map((function(t){return parseInt(t,10)}));ia(t,"height"),ia(t,"flex-basis");var i=t.dom.getBoundingClientRect().height;r.forall((function(t){return i>t}))?(e.set(A.from(i)),WH(o,t,e)):r.each((function(e){UH(t,e)})),ia(t,"visibility"),n.each(pc)}))}))],{extraEvents:n,selectFirst:!1});return{smartTabHeight:o,naiveTabHeight:{extraEvents:[],selectFirst:!0}}},GH="send-data-to-section",YH="send-data-to-view",XH=function(t,e){var n=sn({}),o=function(t){var e=Us.getValue(t),o=AH(e).getOr({}),r=n.get(),i=Bt(r,o);n.set(i)},r=function(t){var e=n.get();Us.setValue(t,e)},i=sn(null),a=L(t.tabs,(function(t){return{value:t.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"],innerHtml:e.shared.providers.translate(t.title)},view:function(){return[d_.sketch((function(n){return{dom:{tag:"div",classes:["tox-form"]},components:L(t.items,(function(t){return hO(n,t,e)})),formBehaviours:uc([cg.config({mode:"acyclic",useTabstopAt:b(V_)}),pg("TabView.form.events",[mr(r),gr(o)]),mc.config({channels:Yt([{key:GH,value:{onReceive:o}},{key:YH,value:{onReceive:r}}])})])}}))]}}})),u=$H(a).smartTabHeight;return jH.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:function(t,e,n){var o=Us.getValue(e);Jo(t,gy,{name:o,oldName:i.get()}),i.set(o)},tabs:a,components:[jH.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[RH.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:uc([ey.config({})])}),jH.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:u.selectFirst,tabSectionBehaviours:uc([pg("tabpanel",u.extraEvents),cg.config({mode:"acyclic"}),nd.config({find:function(t){return tt(jH.getViewItems(t))}}),Us.config({store:{mode:"manual",getValue:function(t){return t.getSystem().broadcastOn([GH],{}),n.get()},setValue:function(t,e){n.set(e),t.getSystem().broadcastOn([YH],{})}}})])})},KH=ui("update-dialog"),JH=ui("update-title"),ZH=ui("update-body"),QH=ui("update-footer"),tB=ui("body-send-message"),eB=function(t,e,n,o){return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:_(_({},e.map((function(t){return{id:t}})).getOr({})),o?{"aria-live":"polite"}:{})},components:[],behaviours:uc([k_(0),wT.config({channel:ZH,updateState:function(t,e){return A.some({isTabPanel:function(){return"tabpanel"===e.body.type}})},renderComponents:function(t){return"tabpanel"===t.body.type?[XH(t.body,n)]:[DH(t.body,n)]},initialData:t})])}},nB=lb.deviceType.isTouch(),oB=function(t,e){return{dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,e]}},rB=function(t,e){return oP.parts.close(hp.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":e.translate("Close")}},action:t,buttonBehaviours:uc([ey.config({})])}))},iB=function(){return oP.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}})},aB=function(t,e){return oP.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:BA("<p>"+e.translate(t)+"</p>")}]}]})},uB=function(t){return oP.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t})},cB=function(t,e){return[Yx.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),Yx.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:e})]},lB=function(t){var e,n="tox-dialog",o=n+"-wrap",r=o+"__backdrop",i=n+"__disable-scroll";return oP.sketch({lazySink:t.lazySink,onEscape:function(e){return t.onEscape(e),A.some(!0)},useTabstopAt:function(t){return!V_(t)},dom:{tag:"div",classes:[n].concat(t.extraClasses),styles:_({position:"relative"},t.extraStyles)},components:S([t.header,t.body],t.footer.toArray()),parts:{blocker:{dom:BA('<div class="'+o+'"></div>'),components:[{dom:{tag:"div",classes:nB?[r,r+"--opaque"]:[r]}}]}},dragBlockClass:o,modalBehaviours:uc(S([yg.config({}),pg("dialog-events",t.dialogEvents.concat([dr(go(),(function(t,e){cg.focusIn(t)}))])),pg("scroll-lock",[mr((function(){Li(Gi(),i)})),gr((function(){Vi(Gi(),i)}))])],t.extraBehaviours)),eventOrder:_((e={},e[Mo()]=["dialog-events"],e[Fo()]=["scroll-lock","dialog-events","alloy.base.behaviour"],e[Vo()]=["alloy.base.behaviour","dialog-events","scroll-lock"],e),t.eventOrder)})},sB=function(t){return hp.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),title:t.translate("Close")}},components:[{dom:{tag:"div",classes:["tox-icon"],innerHtml:xp("close",t.icons)}}],action:function(t){Ko(t,ly)}})},fB=function(t,e,n){var o=function(t){return[ha(n.translate(t.title))]};return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:_({},e.map((function(t){return{id:t}})).getOr({}))},components:o(t),behaviours:uc([wT.config({channel:JH,renderComponents:o})])}},dB=function(){return{dom:BA('<div class="tox-dialog__draghandle"></div>')}},mB=function(t,e){return function(t,e){var n=oP.parts.title(fB(t,A.none(),e)),o=oP.parts.draghandle(dB()),r=oP.parts.close(sB(e)),i=[n].concat(t.draggable?[o]:[]).concat([r]);return Yx.sketch({dom:BA('<div class="tox-dialog__header"></div>'),components:i})}({title:e.shared.providers.translate(t),draggable:e.dialog.isDraggableModal()},e.shared.providers)},gB=function(t,e,n){return{dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":n.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:"0px",position:"absolute"}},behaviours:e,components:[{dom:BA('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}},pB=function(t,e,n){return{onClose:function(){return n.closeWindow()},onBlock:function(n){oP.setBusy(t(),(function(t,o){return gB(n.message,o,e)}))},onUnblock:function(){oP.setIdle(t())}}},hB=function(t,e,n,o){var r;return xa(lB(_(_({},t),{lazySink:o.shared.getSink,extraBehaviours:S([wT.config({channel:KH,updateState:function(t,e){return A.some(e)},initialData:e}),P_({})],t.extraBehaviours),onEscape:function(t){Ko(t,ly)},dialogEvents:n,eventOrder:(r={},r[To()]=[wT.name(),mc.name()],r[Fo()]=["scroll-lock",wT.name(),"messages","dialog-events","alloy.base.behaviour"],r[Vo()]=["alloy.base.behaviour","dialog-events","messages",wT.name(),"scroll-lock"],r)})))},vB=function(t){return L(t,(function(t){return"menu"===t.type?function(t){var e=L(t.items,(function(t){var e=sn(!1);return _(_({},t),{storage:e})}));return _(_({},t),{items:e})}(t):t}))},bB=function(t){return W(t,(function(t,e){return"menu"===e.type?W(e.items,(function(t,e){return t[e.name]=e.storage,t}),t):t}),{})},xB=function(t,e){return[lr(go(),F_),t(cy,(function(t,n){e.onClose(),n.onClose()})),t(ly,(function(t,e,n,o){e.onCancel(t),Ko(o,cy)})),ir(my,(function(t,n){return e.onUnblock()})),ir(dy,(function(t,n){return e.onBlock(n.event)}))]},yB=function(t,e){var n=function(e,n){return ir(e,(function(e,r){o(e,(function(o,i){n(t(),o,r.event,e)}))}))},o=function(t,e){wT.getState(t).get().each((function(n){e(n,t)}))};return S(xB(n,e),[n(sy,(function(t,e,n){e.onAction(t,{name:n.name})}))])},wB=function(t,e,n){var o=function(e,n){return ir(e,(function(e,o){r(e,(function(r,i){n(t(),r,o.event,e)}))}))},r=function(t,e){wT.getState(t).get().each((function(n){e(n.internalDialog,t)}))};return S(xB(o,e),[o(fy,(function(t,e){return e.onSubmit(t)})),o(uy,(function(t,e,n){e.onChange(t,{name:n.name})})),o(sy,(function(t,e,o,r){var i=function(){return cg.focusIn(r)},a=function(t){return Qr(t,"disabled")||Zr(t,"aria-disabled").exists((function(t){return"true"===t}))},u=Hr(r.element),c=hc(u);e.onAction(t,{name:o.name,value:o.value}),hc(u).fold(i,(function(t){a(t)||c.exists((function(e){return Kn(t,e)&&a(e)}))?i():n().toOptional().filter((function(e){return!Kn(e.element,t)})).each(i)}))})),o(gy,(function(t,e,n){e.onTabChange(t,{newTabName:n.name,oldTabName:n.oldName})})),gr((function(e){var n=t();Us.setValue(e,n.getData())}))])},kB=function(t,e){var n=e.map((function(t){return t.footerButtons})).getOr([]),o=V(n,(function(t){return"start"===t.align})),r=function(t,e){return Yx.sketch({dom:{tag:"div",classes:["tox-dialog__footer-"+t]},components:L(e,(function(t){return t.memento.asSpec()}))})};return[r("start",o.pass),r("end",o.fail)]},_B=function(t,e){return{dom:BA('<div class="tox-dialog__footer"></div>'),components:[],behaviours:uc([wT.config({channel:QH,initialData:t,updateState:function(t,n){var o=L(n.buttons,(function(t){var n=vp(function(t,e){return nS(t,t.type,e)}(t,e));return{name:t.name,align:t.align,memento:n}}));return A.some({lookupByName:function(t,e){return function(t,e,n){return q(e,(function(t){return t.name===n})).bind((function(e){return e.memento.getOpt(t)}))}(t,o,e)},footerButtons:o})},renderComponents:kB})])}},CB=function(t,e){return oP.parts.footer(_B(t,e))},SB=function(t,e){if(t.getRoot().getSystem().isConnected()){var n=nd.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return d_.getField(n,e).fold((function(){var o=t.getFooter();return wT.getState(o).get().bind((function(t){return t.lookupByName(n,e)}))}),(function(t){return A.some(t)}))}return A.none()},OB=function(t,e,n){var o=function(e){var n=t.getRoot();n.getSystem().isConnected()&&e(n)},i={getData:function(){var e=t.getRoot(),o=e.getSystem().isConnected()?t.getFormWrapper():e,r=Us.getValue(o),i=_t(n,(function(t){return t.get()}));return _(_({},r),i)},setData:function(e){o((function(o){var r=i.getData(),a=_(_({},r),e),u=function(t,e){var n=t.getRoot();return wT.getState(n).get().map((function(t){return Ce(_e("data",t.dataValidator,e))})).getOr(e)}(t,a),c=t.getFormWrapper();Us.setValue(c,u),kt(n,(function(t,e){At(a,e)&&t.set(a[e])}))}))},disable:function(e){SB(t,e).each(xv.disable)},enable:function(e){SB(t,e).each(xv.enable)},focus:function(e){SB(t,e).each(yg.focus)},block:function(t){if(!r(t))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");o((function(e){Jo(e,dy,{message:t})}))},unblock:function(){o((function(t){Ko(t,my)}))},showTab:function(e){o((function(n){var o=t.getBody();wT.getState(o).get().exists((function(t){return t.isTabPanel()}))&&nd.getCurrent(o).each((function(t){jH.showTab(t,e)}))}))},redial:function(t){o((function(n){var o=e(t);n.getSystem().broadcastOn([KH],o),n.getSystem().broadcastOn([JH],o.internalDialog),n.getSystem().broadcastOn([ZH],o.internalDialog),n.getSystem().broadcastOn([QH],o.internalDialog),i.setData(o.initialData)}))},close:function(){o((function(t){Ko(t,cy)}))}};return i},zB=function(t,e,n){var o=mB(t.internalDialog.title,n),r=function(t,e){var n=eB(t,A.none(),e,!1);return oP.parts.body(n)}({body:t.internalDialog.body},n),i=vB(t.internalDialog.buttons),a=bB(i),u=CB({buttons:i},n),c=wB((function(){return d}),pB((function(){return f}),n.shared.providers,e),n.shared.getSink),l=function(t){switch(t){case"large":return["tox-dialog--width-lg"];case"medium":return["tox-dialog--width-md"];default:return[]}}(t.internalDialog.size),s={header:o,body:r,footer:A.some(u),extraClasses:l,extraBehaviours:[],extraStyles:{}},f=hB(s,t,c,n),d=OB({getRoot:function(){return f},getBody:function(){return oP.getBody(f)},getFooter:function(){return oP.getFooter(f)},getFormWrapper:function(){var t=oP.getBody(f);return nd.getCurrent(t).getOr(t)}},e.redial,a);return{dialog:f,instanceApi:d}},TB=function(t,e,n,o){var r,i,a,u,c,l=ui("dialog-label"),s=ui("dialog-content"),f=vp((a={title:t.internalDialog.title,draggable:!0},u=l,c=n.shared.providers,Yx.sketch({dom:BA('<div class="tox-dialog__header"></div>'),components:[fB(a,A.some(u),c),dB(),sB(c)],containerBehaviours:uc([RE.config({mode:"mouse",blockerClass:"blocker",getTarget:function(t){return tu(t,'[role="dialog"]').getOrDie()},snaps:{getSnapPoints:function(){return[]},leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}))),d=vp(function(t,e,n,o){return eB(t,A.some(e),n,o)}({body:t.internalDialog.body},s,n,o)),m=vB(t.internalDialog.buttons),g=bB(m),p=vp(function(t,e){return _B(t,e)}({buttons:m},n)),h=wB((function(){return b}),{onBlock:function(t){nP.block(v,(function(e,o){return gB(t.message,o,n.shared.providers)}))},onUnblock:function(){nP.unblock(v)},onClose:function(){return e.closeWindow()}},n.shared.getSink),v=xa({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline"],attributes:(r={role:"dialog"},r["aria-labelledby"]=l,r["aria-describedby"]=""+s,r)},eventOrder:(i={},i[To()]=[wT.name(),mc.name()],i[Mo()]=["execute-on-form"],i[Fo()]=["reflecting","execute-on-form"],i),behaviours:uc([cg.config({mode:"cyclic",onEscape:function(t){return Ko(t,cy),A.some(!0)},useTabstopAt:function(t){return!V_(t)&&("button"!==vr(t)||"disabled"!==Jr(t,"disabled"))}}),wT.config({channel:KH,updateState:function(t,e){return A.some(e)},initialData:t}),yg.config({}),pg("execute-on-form",h.concat([dr(go(),(function(t,e){cg.focusIn(t)}))])),nP.config({getRoot:function(){return A.some(v)}}),gg.config({}),P_({})]),components:[f.asSpec(),d.asSpec(),p.asSpec()]}),b=OB({getRoot:function(){return v},getFooter:function(){return p.get(v)},getBody:function(){return d.get(v)},getFormWrapper:function(){var t=d.get(v);return nd.getCurrent(t).getOr(t)}},e.redial,g);return{dialog:v,instanceApi:b}},MB=tinymce.util.Tools.resolve("tinymce.util.URI"),AB=["insertContent","setContent","execCommand","close","block","unblock"],DB=function(t){return i(t)&&-1!==AB.indexOf(t.mceAction)},EB=function(t,e,n,o){var a,c,l,s=mB(t.title,o),f=function(t){var e={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[N_({dom:{tag:"iframe",attributes:{src:t.url}},behaviours:uc([ey.config({}),yg.config({})])})]}],behaviours:uc([cg.config({mode:"acyclic",useTabstopAt:b(V_)})])};return oP.parts.body(e)}(t),d=t.buttons.bind((function(t){return 0===t.length?A.none():A.some(CB({buttons:t},o))})),m=yB((function(){return k}),pB((function(){return w}),o.shared.providers,e)),g=_(_({},t.height.fold((function(){return{}}),(function(t){return{height:t+"px","max-height":t+"px"}}))),t.width.fold((function(){return{}}),(function(t){return{width:t+"px","max-width":t+"px"}}))),p=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],h=new MB(t.url,{base_uri:new MB(window.location.href)}),v=h.protocol+"://"+h.host+(h.port?":"+h.port:""),x=sn(A.none()),y=[pg("messages",[mr((function(){var e=Ax(dn.fromDom(window),"message",(function(e){if(h.isSameOrigin(new MB(e.raw.origin))){var o=e.raw.data;DB(o)?function(t,e,n){switch(n.mceAction){case"insertContent":t.insertContent(n.content);break;case"setContent":t.setContent(n.content);break;case"execCommand":var o=!!u(n.ui)&&n.ui;t.execCommand(n.cmd,o,n.value);break;case"close":e.close();break;case"block":e.block(n.message);break;case"unblock":e.unblock()}}(n,k,o):function(t){return!DB(t)&&i(t)&&At(t,"mceAction")}(o)&&t.onMessage(k,o)}}));x.set(A.some(e))})),gr((function(){x.get().each((function(t){return t.unbind()}))}))]),mc.config({channels:(a={},a[tB]={onReceive:function(t,e){Qa(t.element,"iframe").each((function(t){t.dom.contentWindow.postMessage(e,v)}))}},a)})],w=hB({header:s,body:f,footer:d,extraClasses:p,extraBehaviours:y,extraStyles:g},t,m,o),k=(c=w,l=function(t){c.getSystem().isConnected()&&t(c)},{block:function(t){if(!r(t))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");l((function(e){Jo(e,dy,{message:t})}))},unblock:function(){l((function(t){Ko(t,my)}))},close:function(){l((function(t){Ko(t,cy)}))},sendMessage:function(t){l((function(e){e.getSystem().broadcastOn([tB],t)}))}});return{dialog:w,instanceApi:k}},PB=function(t,e,n){return e&&n?[]:[dA.config({contextual:{lazyContext:function(){return A.some(Wa(dn.fromDom(t.getContentAreaContainer())))},fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"]})]},HB=function(t){var e=t.backstage,n=t.editor,o=Vv(n),r=function(t){var e=t.backstage.shared;return{open:function(n,o){var r=function(){oP.hide(c),o()},i=vp(nS({name:"close-alert",text:"OK",primary:!0,align:"end",disabled:!1,icon:A.none()},"cancel",t.backstage)),a=iB(),u=rB(r,e.providers),c=xa(lB({lazySink:function(){return e.getSink()},header:oB(a,u),body:aB(n,e.providers),footer:A.some(uB(cB([],[i.asSpec()]))),onEscape:r,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[ir(ly,r)],eventOrder:{}}));oP.show(c);var l=i.get(c);yg.focus(l)}}}(t),i=function(t){var e=t.backstage.shared;return{open:function(n,o){var r=function(t){oP.hide(l),o(t)},i=vp(nS({name:"yes",text:"Yes",primary:!0,align:"end",disabled:!1,icon:A.none()},"submit",t.backstage)),a=nS({name:"no",text:"No",primary:!1,align:"end",disabled:!1,icon:A.none()},"cancel",t.backstage),u=iB(),c=rB((function(){return r(!1)}),e.providers),l=xa(lB({lazySink:function(){return e.getSink()},header:oB(u,c),body:aB(n,e.providers),footer:A.some(uB(cB([],[a,i.asSpec()]))),onEscape:function(){return r(!1)},extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[ir(ly,(function(){return r(!1)})),ir(fy,(function(){return r(!0)}))],eventOrder:{}}));oP.show(l);var s=i.get(l);yg.focus(s)}}}(t),a=function(t,o){return MH.openUrl((function(t){var r=EB(t,{closeWindow:function(){oP.hide(r.dialog),o(r.instanceApi)}},n,e);return oP.show(r.dialog),r.instanceApi}),t)},u=function(t,n){return MH.open((function(t,o,r){var i=o,a=zB({dataValidator:r,initialData:i,internalDialog:t},{redial:MH.redial,closeWindow:function(){oP.hide(a.dialog),n(a.instanceApi)}},e);return oP.show(a.dialog),a.instanceApi.setData(i),a.instanceApi}),t)},c=function(t,r,i,a){return MH.open((function(t,u,c){var l,s=Ce(_e("data",c,u)),f=(l=sn(A.none()),{clear:function(){return l.set(A.none())},set:function(t){return l.set(A.some(t))},isSet:function(){return l.get().isSome()},on:function(t){return l.get().each(t)}}),d=e.shared.header.isPositionedAtTop(),m=function(){return f.on((function(t){op.reposition(t),dA.refresh(t)}))},g=TB({dataValidator:c,initialData:s,internalDialog:t},{redial:MH.redial,closeWindow:function(){f.on(op.hide),n.off("ResizeEditor",m),f.clear(),i(g.instanceApi)}},e,a),p=xa(op.sketch(_(_({lazySink:e.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:{}},d?{}:{fireRepositionEventInstead:{}}),{inlineBehaviours:uc(S([pg("window-manager-inline-events",[ir(jo(),(function(t,e){Ko(g.dialog,ly)}))])],PB(n,o,d))),isExtraPart:function(t,e){return function(t){return Px(t,".tox-alert-dialog")||Px(t,".tox-confirm-dialog")}(e)}})));return f.set(p),op.showWithin(p,r,ya(g.dialog),A.some(Gi())),o&&d||(dA.refresh(p),n.on("ResizeEditor",m)),g.instanceApi.setData(s),cg.focusIn(g.dialog),g.instanceApi}),t)};return{open:function(t,n,o){return void 0!==n&&"toolbar"===n.inline?c(t,e.shared.anchors.inlineDialog(),o,n.ariaAttrs):void 0!==n&&"cursor"===n.inline?c(t,e.shared.anchors.cursor(),o,n.ariaAttrs):u(t,o)},openUrl:function(t,e){return a(t,e)},alert:function(t,e){r.open(t,(function(){e()}))},close:function(t){t.close()},confirm:function(t,e){i.open(t,(function(t){e(t)}))}}};k.add("silver",(function(t){var e=KE(t),n=e.uiMothership,o=e.backstage,r=e.renderUI,i=e.getUi;Tx(t,o.shared);var a=HB({editor:t,backstage:o});return{renderUI:r,getWindowManagerImpl:p(a),getNotificationManagerImpl:function(){return _p(0,{backstage:o},n)},ui:i()}}))}(),tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 012 2 2 2 0 01-2 2 2 2 0 01-2-2c0-1.1.9-2 2-2zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 01-1-1v-5c0-.6-.4-1-1-1a1 1 0 00-1 1v5c0 .6-.4 1-1 1a1 1 0 01-1-1V9H4a1 1 0 110-2h16c.6 0 1 .4 1 1s-.4 1-1 1z" fill-rule="nonzero"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 00-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 10-1.4-1.4L12 13.6 5.7 7.3z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 001.4-1.4L12 6.6l-7.7 7.7a1 1 0 001.4 1.4L12 9.4l6.3 6.3z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 110-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5L13 7H5a1 1 0 110-2h9.2zm4 0h.8a1 1 0 010 2h-2l1.2-2zm-6.4 4l-1.2 2H5a1 1 0 010-2h6.8zm4 0H19a1 1 0 010 2h-4.4l1.2-2zm-6.4 4l-1.2 2H5a1 1 0 010-2h4.4zm4 0H19a1 1 0 010 2h-6.8l1.2-2zM7 17l-1.2 2H5a1 1 0 010-2h2zm4 0h8a1 1 0 010 2H9.8l1.2-2zm5.2-13.5l1.3.7-9.7 16.3-1.3-.7 9.7-16.3z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="M5.6 13l12 6a1 1 0 001.4-1V6a1 1 0 00-1.4-.9l-12 6a1 1 0 000 1.8z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="M18.5 13l-12 6A1 1 0 015 18V6a1 1 0 011.4-.9l12 6a1 1 0 010 1.8z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 01-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 00-1 1z" fill-rule="nonzero"/></svg>',"border-width":'<svg width="24" height="24"><path d="M5 14.8h14a1 1 0 010 2H5a1 1 0 010-2zm-.5 3.7h15c.3 0 .5.2.5.5s-.2.5-.5.5h-15a.5.5 0 110-1zm.5-8.3h14c.6 0 1 .4 1 1v1c0 .5-.4 1-1 1H5a1 1 0 01-1-1v-1c0-.6.4-1 1-1zm0-5.7h14c.6 0 1 .4 1 1v2c0 .6-.4 1-1 1H5a1 1 0 01-1-1v-2c0-.6.4-1 1-1z" fill-rule="evenodd"/></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.7-.3 1 1 0 01-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3zm0-10a1 1 0 01-.7-.3A1 1 0 0111 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 01-.7.3zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 01-.7.3h-1a1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1zM7 12c0 .3-.1.5-.3.7a1 1 0 01-.7.3H5a1 1 0 01-.7-.3A1 1 0 014 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7zm10 3.5l.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 01-.8.3 1 1 0 01-.6-.3l-.8-.7a1 1 0 01-.3-.8c0-.2.1-.5.3-.7a1 1 0 011.4 0zm-10-7l-.7-.8a1 1 0 01-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.8-.3zm10 0a1 1 0 01-.8.3 1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 010 1.4l-.8.8a1 1 0 01-.6.3 1 1 0 01-.8-.3 1 1 0 01-.3-.8c0-.2.1-.5.3-.6l.7-.8zM12 8a4 4 0 013.7 2.4 4 4 0 010 3.2A4 4 0 0112 16a4 4 0 01-3.7-2.4 4 4 0 010-3.2A4 4 0 0112 8zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9.4l-2.3 2.3a1 1 0 11-1.4-1.4l4-4a1 1 0 011.4 0l4 4a1 1 0 01-1.4 1.4L13 13.4V20a1 1 0 01-2 0v-6.6z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 110 14.8 7.4 7.4 0 010-14.8zM12 3a9 9 0 100 18 9 9 0 000-18zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7z" fill-rule="nonzero"/></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 01-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 01-1 .7h-.2a.7.7 0 01-.7-1l4-12a1 1 0 012 0l4 12a.7.7 0 01-.8 1h-.2a1 1 0 01-1-.7l-.8-2.6zm-.3-1.5l-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1zm4.8-6.8V10H7.7V5.8h-1v-1h2zM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1zM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2v-.1-.2l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 01-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 00-.5-.1 1 1 0 00-.4 0l-.3.4h-1zm2.3.8h-.2l-.2.1-.4.1a1 1 0 00-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 001.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 00-.6-.3l-.6.3-.2.8zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 00-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 01-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 01-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8a1 1 0 010 2h-8a1 1 0 010-2zM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 011.6 1.2l-8 12a1 1 0 01-1.5.1l-5-5a1 1 0 111.4-1.4l4.1 4.1 7.4-11z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 010-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3L4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 010-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 010-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 010-1.1L6 5 2.2 1.3z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8L5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 010-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2L13.4 12l3.9 3.8a1 1 0 01-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 01-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 011.5-1.5l3.8 3.9 3.8-3.9a1 1 0 011.5 1.5z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 01-.8 2 2.8 2.8 0 01.8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 01-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 01-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 01-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 01.8-2 2.8 2.8 0 01-.8-2zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2zM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 01-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 01-.5-.5V17a3 3 0 001-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0118 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 01-3.7 3 5.7 5.7 0 01-3.2 0A5.9 5.9 0 017.6 18a6.2 6.2 0 01-1.4-2.6 6.7 6.7 0 010-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 012.3-4A20 20 0 0112 4a26.4 26.4 0 013.2 3.4 18.2 18.2 0 012.3 4zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 00-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 01-1.3 3 5.3 5.3 0 01-2.3 1.5 4.9 4.9 0 01-2 .1 4.3 4.3 0 002.4.8 4 4 0 002-.6 4 4 0 001.5-1.5z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 000 18 1.5 1.5 0 001.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 005-5c0-4.4-4-8-9-8zm-5.5 9a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm3-4a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm5 0a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm3 4a1.5 1.5 0 110-3 1.5 1.5 0 010 3z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3L3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9 19l3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 00-1 1v10c0 .6.4 1 1 1h4v2zm-2 4v-4H5a3 3 0 01-3-3V6a3 3 0 013-3h14a3 3 0 013 3v10a3 3 0 01-3 3h-6.4L7 23z"/><path d="M13 10h2a1 1 0 010 2h-2v2a1 1 0 01-2 0v-2H9a1 1 0 010-2h2V8a1 1 0 012 0v2z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="M9 19l3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 00-1 1v10c0 .6.4 1 1 1h4v2zm-2 4v-4H5a3 3 0 01-3-3V6a3 3 0 013-3h14a3 3 0 013 3v10a3 3 0 01-3 3h-6.4L7 23z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4zm-6 8a6 6 0 006 6V6a6 6 0 00-6 6z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 00-2 2v11h2V5h10V3zm1 4a2 2 0 012 2v10a2 2 0 01-2 2h-7a2 2 0 01-2-2V9c0-1.2.9-2 2-2h7zm0 12V9h-7v10h7z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 01-1-1v-2H7V9H5a1 1 0 110-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3zM9 9v5l5-5H9zm1 6h5v-5l-5 5z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0110.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 012 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 017 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7zm12.3 5h-3v10h3v-10zM8 13.8h-.3l-.4.2a2.8 2.8 0 00-.7.4v.1a2.8 2.8 0 00-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 00.8-.3 2.4 2.4 0 00.7-.7 2.5 2.5 0 00.3-.8 1.5 1.5 0 000-.8 1 1 0 00-.2-.4 1 1 0 00-.5-.2H8zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4zM7 5.8h-.4a1 1 0 00-.5.3 1 1 0 00-.2.5v.7a2.5 2.5 0 00.3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 000-.8 2.6 2.6 0 00-.3-.8A2.5 2.5 0 007.7 6l-.4-.1H7z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 01-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 018.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 010-2c0-.4.3-.7.5-1l2 2V3h14zM8.5 15.3h-.3a2.6 2.6 0 00-.8.4 2.5 2.5 0 00-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 00.8-.3L9 18V18l.4-.4.2-.4.1-.4v-.3-.4a1 1 0 00-.2-.5 1 1 0 00-.4-.2h-.5zm7 0H15a1 1 0 00-.4.3 1 1 0 00-.2.5 1.5 1.5 0 000 .7v.4a2.8 2.8 0 00.5.7h.1a2.8 2.8 0 00.8.6l.4.1h.7l.5-.2.2-.5v-.4-.3a2.6 2.6 0 00-.3-.8 2.4 2.4 0 00-.7-.7 2.5 2.5 0 00-.8-.3h-.3zM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4zm8.5-7.1h-11v2h11v-2z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 01-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 018.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 010-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 010 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8zm-8.5 2.2l.1-.4v-.3-.4a1 1 0 00-.2-.5 1 1 0 00-.4-.2 1.6 1.6 0 00-.8 0 2.6 2.6 0 00-.8.3 2.5 2.5 0 00-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 00.8-.3 2.8 2.8 0 001-1zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4zm5.4 4l.2-.5v-.4-.3a2.6 2.6 0 00-.3-.8 2.4 2.4 0 00-.7-.7 2.5 2.5 0 00-.8-.3 1.5 1.5 0 00-.8 0 1 1 0 00-.4.2 1 1 0 00-.2.5 1.5 1.5 0 000 .7v.4l.3.4.3.4a2.8 2.8 0 00.8.5l.4.1h.7l.5-.2z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 00-2 2v14c0 1.1.9 2 2 2h10a2 2 0 002-2V7.6L14.4 3zM17 19H7V5h6v4h4v10z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5zm0 4h2v2h-2V9zM9 9h2v2H9V9zm4 4h2v2h-2v-2zm-4 0h2v2H9v-2zm0 4h2v2H9v-2zm4 0h2v2h-2v-2zM9 5h2v2H9V5z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7zm-2 2h-3v12h3V8zm-2-6v2H8v15H6V2h7z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16zm-2 2H8v3h12v-3zm-1-6v2H4v5H2V7h17z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10zm3 8h-2V9h-7v10h9a2 2 0 01-2 2h-7a2 2 0 01-2-2V9c0-1.2.9-2 2-2h7a2 2 0 012 2v2z"/><path d="M17 14h1a1 1 0 010 2h-1v1a1 1 0 01-2 0v-1h-1a1 1 0 010-2h1v-1a1 1 0 012 0v1z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19.8 8.8l-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5zm-2-.2l1-.9v-.3l-2.2-2.2a.3.3 0 00-.3 0l-1 1L18 8.5zm-1 1l-2.5-2.4-6 6 2.5 2.5 6-6zm-7 7.1l-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 00-2-2H7v2h11v9zM6 17h15a1 1 0 010 2h-1v1a1 1 0 01-2 0v-1H6a2 2 0 01-2-2V7H3a1 1 0 110-2h1V4a1 1 0 112 0v13zm3-5.3l1.3 2 3-4.7 3.7 6H7l2-3.3z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0119 6zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 008 19h3zM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 00-4 4.5h2.2zm-3.4 0a12 12 0 012.8-4 12 12 0 00-5 4h2.2z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm4.8 2.6l5.6 4a.5.5 0 010 .8l-5.6 4A.5.5 0 019 16V8a.5.5 0 01.8-.4z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 00-1 1c0 .6.4 1 1 1zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 00-1 1c0 .6.4 1 1 1zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5zM12 4a8 8 0 100 16 8 8 0 000-16zm0 14.5a6.5 6.5 0 110-13 6.5 6.5 0 010 13z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3L18 7v1h-5V5H7v14h9a1 1 0 012 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3z"/><path d="M16.4 9.2a1 1 0 011.4.2l2.4 3.6-2.4 3.6a1 1 0 01-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 01.2-1.4z"/></g></svg>',fill:'<svg width="24" height="26"><path d="M16.6 12l-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 002.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2zM5.2 13L10 8.2l4.8 4.8H5.2zM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 002-2c0-1.3-2-3.5-2-3.5z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2zm4-8h2V9h-2v2zM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 00-2 2zm14-2v2h2a2 2 0 00-2-2zm-7 16h2V3h-2v18zm7-6h2v-2h-2v2zm-4-8h2V5h-2v2zm4 12a2 2 0 002-2h-2v2z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5zm8 4v2h2v-2h-2zm4-14H7a2 2 0 00-2 2v3h2V6h10v3h2V6a2 2 0 00-2-2zm2 14h-2v2a2 2 0 002-2zM3 11v2h18v-2H3zm6 7v2h2v-2H9zm8-4v2h2v-2h-2zM5 18c0 1.1.9 2 2 2v-2H5z" fill-rule="nonzero"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 00-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 010 2h-4v11a1 1 0 01-2 0V7H7a1 1 0 110-2h10z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="M15.3 10l-1.2-1.3 2.9-3h-2.3a.9.9 0 110-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 11-1.8 0V7l-2.9 3zm0 4l3 3v-2.3a.9.9 0 111.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 110-1.8H17l-3-2.9 1.3-1.2zM10 15.4l-2.9 3h2.3a.9.9 0 110 1.7H5a.9.9 0 01-.9-.9v-4.4a.9.9 0 111.8 0V17l2.9-3 1.2 1.3zM8.7 10L5.7 7v2.3a.9.9 0 01-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 010 1.8H7l3 2.9-1.3 1.2z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="M5 15.7l2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7zM5 18V19h3l1.8-1.9-2-2L5 17.9zm14-3l-2.5-2.4-6.4 6.5H19v-4zM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 01-1-1V7c0-.6.4-1 1-1zm6 7a2 2 0 110-4 2 2 0 010 4zM4.5 4h15a.5.5 0 110 1h-15a.5.5 0 010-1zm2-2h11a.5.5 0 110 1h-11a.5.5 0 010-1z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 00-.4-.8l-.1-.2H8 8v-1l.3-.1.3-.1h.7a1 1 0 01.6.5l.1.3a8.5 8.5 0 01.3.6l1.9 4.6 2-5.2a1 1 0 011-.6.5.5 0 01.5.6L13 14v2.8a.7.7 0 01-1.4 0z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 00-6 9 6.3 6.3 0 001.4 2l1 1a6.3 6.3 0 003.6 1 6.5 6.5 0 006-9 6.3 6.3 0 00-1.4-2l-1-1a6.3 6.3 0 00-3.6-1zM12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4z"/><path d="M9.6 9.7a.7.7 0 01-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 00-.8.8.8.8 0 01-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path id="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 012.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm12 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm-6 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="M5 15.7l3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7zM5 18V19h3l2.8-2.9-2-2L5 17.9zm14-3l-2.5-2.4-6.4 6.5H19v-4zM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm6 8a2 2 0 100-4 2 2 0 000 4z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 110-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm-5 4h12a1 1 0 010 2H7a1 1 0 010-2zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 011.2-1.6l3 2a1 1 0 010 1.6l-3 2a1 1 0 11-1.2-1.6z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4zm-1 3v2h2V7h-2zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 001.8-2.9 6.3 6.3 0 00-.1-4.1 5.8 5.8 0 00-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 00-3.9 1.8 6.3 6.3 0 00-1.3 6 6.2 6.2 0 001.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 014 11c0-1 .2-1.9.6-2.7A7 7 0 016.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 015.7 2 7 7 0 011.7 2.3 6 6 0 01.2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 01-3.6 2.5v.5z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 100-14 7 7 0 000 14zm0 2a9 9 0 110-18 9 9 0 010 18z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 00-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3L16.5 18a5.8 5.8 0 01-3.1 1.9 6.1 6.1 0 01-5.5-1.6A5.8 5.8 0 016 14v-.3l.1-1.2A13.9 13.9 0 017.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 00.2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 00-3-4.2L12 6a26.1 26.1 0 00-2.2 2.5l-1-1a20.9 20.9 0 012.9-3.3L12 4l1 .8a22.2 22.2 0 014 5.4c.6 1.2 1 2.4 1 3.6z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="M16.7 4.7l-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8z" fill-rule="evenodd"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zM7 3.6l3.7 3.7a1 1 0 01-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 011.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 011.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 01-1.3 0h-.1a1 1 0 010-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="M15 9l-8 8H4v-3l8-8 3 3zm1-1l-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1zM4 18h16v2H4v-2z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 011.4 1.4l-2.1 2a2 2 0 102.7 2.8l4.8-4.8a1 1 0 000-1.4 1 1 0 111.4-1.3 2.9 2.9 0 010 4L9.6 20a3.9 3.9 0 01-5.5-5.5l2-2zm11.6-.6a1 1 0 01-1.4-1.4l2-2a2 2 0 10-2.6-2.8L11 10.3a1 1 0 000 1.4A1 1 0 119.6 13a2.9 2.9 0 010-4L14.4 4a3.9 3.9 0 015.5 5.5l-2 2z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6zM11 26a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6zM11 36a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8l-1.6 1v-1.1l1.6-1h1.2V17zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6zM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3zM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4zM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3zM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM37.1 34.6L34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2zm.7 1a2 2 0 00-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1zM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3zM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2zm.7 1a2 2 0 00-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33zm0 10v-1.2h-1.3V26H33zm0 10v-1.2h-1.3V36H33z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15zm0 10v-1.2h1.3V26H15zm0 10v-1.2h1.3V36H15z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M39.3 17l-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3zm-1.6-4.7l-.7 2.3h1.6l-.8-2.3zM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26zM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M12.6 17l-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3zM11 12.3l-.7 2.3h1.6l-.8-2.3zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7zM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3zm0 10v-1.2H33V27h-1.3zm0 10v-1.2H33V37h-1.3z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15zm0 10v-1.2h1.3V27H15zm0 10v-1.2h1.3V37H15z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3zM10 8v3h4V8a1 1 0 00-.3-.7A1 1 0 0013 7h-2a1 1 0 00-.7.3 1 1 0 00-.3.7z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 017.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L11 5zM4.4 16.2L6.2 15l-1.8-1.2a1 1 0 011.2-1.6l3 2a1 1 0 010 1.6l-3 2a1 1 0 11-1.2-1.6z" fill-rule="evenodd"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm12 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm-6 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 00-2 2v14c0 1.1.9 2 2 2h10a2 2 0 002-2V7.6L14.4 3zM17 19H7V5h6v4h4v10z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="M15 13l2-2v8H5V7h8l-2 2H7v8h8v-4zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 110-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 01-1-1v-3zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M17.8 9.8L15.4 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7l2.3 5.8zm0 0l2.2 5.7-2.3-5.8zM13 17v-2h-2v2h2zm0-4V7h-2v6h2z" fill-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 010 2H6a1 1 0 010-2zm0-6h8a1 1 0 010 2H6a1 1 0 010-2zm0-6h8a1 1 0 010 2H6a1 1 0 110-2zm13-1v3.5a.5.5 0 11-1 0V5h-.5a.5.5 0 110-1H19zm-1 8.8l.2.2h1.3a.5.5 0 110 1h-1.6a1 1 0 01-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 00-.2-.2h-1.3a.5.5 0 01-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 010-1h1.2a.3.3 0 100-.6h-1.3a.4.4 0 110-.8h1.3a.3.3 0 000-.6h-1.2a.5.5 0 110-1H19c.6 0 1 .4 1 1z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 110-2zM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 01-.5-.5V5h-.5a.5.5 0 010-1H6zm-1 8.8l.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 01-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 00-.2-.2H4.5a.5.5 0 01-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3zM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 010-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 110-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 110-1H6c.6 0 1 .4 1 1z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4L1 13l6.4 6.5 6.5-6.5-6.5-6.5zM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7zM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 010-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 11-4.3 16.9l1.5-1.5A7 7 0 1013 6h-1z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 110-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm-5 4h12a1 1 0 010 2H7a1 1 0 010-2zm1.6-3.8a1 1 0 01-1.2 1.6l-3-2a1 1 0 010-1.6l3-2a1 1 0 011.2 1.6L6.8 12l1.8 1.2z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 010-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1zM6 22a1 1 0 01-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 01-1-1v-5H7v5c0 .6-.4 1-1 1z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 016.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L10 5z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm8 7v12h-6V8h6zm-1.5 1.5h-3v9h3v-9zM12 3a1 1 0 100 2 1 1 0 000-2z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm-2 7v12H4V8h6zM8.5 9.5h-3v9h3v-9zM12 3a1 1 0 100 2 1 1 0 000-2z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm10 11v5H8v-5h14zm-1.5 1.5h-11v2h11v-2zM12 3a1 1 0 100 2 1 1 0 000-2z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm10 7v5H8V8h14zm-1.5 1.5h-11v2h11v-2zM12 3a1 1 0 100 2 1 1 0 000-2z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 01-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0112 1a3 3 0 012.8 2H18a2 2 0 012 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 00-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 01-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0112 1a3 3 0 012.8 2H18a2 2 0 012 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 00-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5L8 20H3v-3l3.5-3.5a2 2 0 010-3L14 3l1 1-7.3 7.3a1 1 0 000 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 01-2.8 0l-.1-.1z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 01.1 2H13v6a1 1 0 01-2 .1V13H5a1 1 0 01-.1-2H11V5c0-.6.4-1 1-1z"/></svg>',preferences:'<svg width="24" height="24"><path d="M20.1 13.5l-1.9.2a5.8 5.8 0 01-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 01-1.4 0l-1.5-1.2a6.2 6.2 0 01-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 01-1-.9l-.2-1.9a5.8 5.8 0 01-1.5-.6l-1.5 1.2a1 1 0 01-1.4 0l-.7-.7a1 1 0 010-1.4l1.2-1.5a6.2 6.2 0 01-.6-1.5l-1.9-.2a1 1 0 01-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 01.6-1.5L5.2 7.3a1 1 0 010-1.4l.7-.7a1 1 0 011.4 0l1.5 1.2a6.2 6.2 0 011.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 011.5.6l1.5-1.2a1 1 0 011.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 01.6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1zM12 15a3 3 0 100-6 3 3 0 000 6z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 002.1-2.8 15.7 15.7 0 00-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 00-6.7 3.2A16.2 16.2 0 003.2 12c0 .2.2.3.3.5zm-2.4-1l.7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 012.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 01-2.8-3.7 1 1 0 010-1zm12-3.3a2 2 0 102.7 2.6 4 4 0 11-2.6-2.6z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 00-3 3v6h2v3h14v-3h2v-6a3 3 0 00-3-3zm-1 10H7v-4h10v4zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5zm.5-8H6v2h12V5z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 00-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 00.8 1.3zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 00-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 00.8 1.3z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 11-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 111.4-1.4l5 5a1 1 0 010 1.4l-5 5a1 1 0 01-1.4-1.4l3.3-3.3z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M5 22.1l-1.2-4.7v-.2a1 1 0 011-1l5 .4a1 1 0 11-.2 2l-2.2-.2a7.8 7.8 0 008.4.2 7.5 7.5 0 003.5-6.4 1 1 0 112 0 9.5 9.5 0 01-4.5 8 9.9 9.9 0 01-10.2 0l.4 1.4a1 1 0 11-2 .5zM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 00-9.5-1 7.5 7.5 0 00-3.6 7 1 1 0 01-2 0 9.5 9.5 0 014.5-8.6 10 10 0 0110.9.3l-.3-1a1 1 0 012-.5l1.1 4.8a1 1 0 01-1 1.2l-5-.4a1 1 0 01-.9-1z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 010 .2l-2.6 10a1 1 0 01-1 .8h-.2a.8.8 0 01-.8-1l2.6-10H8a1 1 0 110-2h9a1 1 0 010 2h-3.8zM5 18h7a1 1 0 010 2H5a1 1 0 010-2zm13 1.5L16.5 18 15 19.5a.7.7 0 01-1-1l1.5-1.5-1.5-1.5a.7.7 0 011-1l1.5 1.5 1.5-1.5a.7.7 0 011 1L17.5 17l1.5 1.5a.7.7 0 01-1 1z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 010 2h-1v9a3 3 0 01-3 3H9a3 3 0 01-3-3V9H5a1 1 0 110-2h3V6a3 3 0 013-3h2a3 3 0 013 3v1zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 00-1 1v1h4zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9zm-7 3a1 1 0 012 0v4a1 1 0 01-2 0v-4zm4 0a1 1 0 012 0v4a1 1 0 01-2 0v-4z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 119 2l-7 7A.5.5 0 111 8l7-7zM8.1 5.1A.5.5 0 119 6l-3 3A.5.5 0 115 8l3-3z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 01-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 01-.7.3h-6a1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.7-.3A1 1 0 014 11V5z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1z"/><path d="M4.7 10H9a1 1 0 010 2H3a1 1 0 01-1-1V5a1 1 0 112 0v3l2.5-2.4a9.2 9.2 0 0110.8-1.5A9 9 0 0113.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 111.3-1.5 7.2 7.2 0 0011.6-3.7 7 7 0 00-3.5-7.7A7.2 7.2 0 008 7L4.7 10z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 010 2H3a1 1 0 01-1-1V5a1 1 0 112 0v3l2.5-2.4a9.2 9.2 0 0110.8-1.5A9 9 0 0113.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 111.3-1.5 7.2 7.2 0 0011.6-3.7 7 7 0 00-3.5-7.7A7.2 7.2 0 008 7L4.7 10z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 012 0v6c0 .6-.4 1-1 1h-6a1 1 0 010-2h4.3L16 7A7.2 7.2 0 007.7 6a7 7 0 003 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 011.4 1.5A9.2 9.2 0 012.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 014.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L8 5zm12 11.2a1 1 0 11-1 1.6l-3-2a1 1 0 010-1.6l3-2a1 1 0 111 1.6L18.4 15l1.8 1.2z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 012 2v2a2 2 0 01-2 2H5a2 2 0 01-2-2v-2c0-1.1.9-2 2-2zm0 2v2h14v-2H5zm10 0h2v2h-2v-2zm-4-6.4L8.7 9.3a1 1 0 10-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 10-1.4-1.4L13 11.6V4a1 1 0 00-2 0v7.6z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 00-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2a2 2 0 00-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8a2 2 0 002-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2zM7 17h10V7H7v10zm2-8h6v6H9V9z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2zm3.6 10.9L7 12.3a.7.7 0 00-1 1L9.6 17 18 8.6a.7.7 0 000-1 .7.7 0 00-1 0l-7.4 7.3z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V8H5a1 1 0 110-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6zM8 8h2V6H8v2zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V13H5a1 1 0 010-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6zM14 13h2v-2h-2v2zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V18H5a1 1 0 010-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6zM8 18h2v-2H8v2z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="M16 6l4 4-8 9-8-9 4-4h8zm-4 10.2l5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 010-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7zM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 00-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6zm0-3v2h2V5H6zm13 0h-3v5h3v1h-3a1 1 0 01-.7-.3 1 1 0 01-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1zm-5 1.5l-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 01-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5zM13 10V8h-2v2h2zm0-3V5h-2v2h2zm3 5l1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 017 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1z"/><path d="M5 11h14a1 1 0 010 2H5a1 1 0 010-2z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="M10.4 10l4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10zM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 00-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 01-1.3 1.3l-.6.6h2.6V19z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4L10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11z" fill-rule="nonzero"/></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9H5v5h6v-5zm8 0h-6v5h6v-5zm-8-7H5v5h6V6z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v12h14V6z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v12h14V6z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2zm.3.5l1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6zm-4.7 1.8l1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 6v12h14V6H5z"/><path d="M14.4 8.6l1 1-2.3 2.4 2.3 2.4-1 1-2.4-2.3-2.4 2.3-1-1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 01-2 0V6h-8v12h8v-1a1 1 0 012 0v2c0 .5-.4 1-.9 1H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h15zM9 13H5v5h4v-5zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 01.1 2H17v2a1 1 0 01-2 .1V13h-2a1 1 0 01-.1-2H15V9c0-.6.4-1 1-1zM9 6H5v5h4V6z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H4a1 1 0 01-1-1v-2a1 1 0 012 0v1h8V6H5v1a1 1 0 11-2 0V5c0-.6.4-1 1-1h15zm0 9h-4v5h4v-5zM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 01.1 2H9v2a1 1 0 01-2 .1V13H5a1 1 0 01-.1-2H7V9c0-.6.4-1 1-1zm11-2h-4v5h4V6z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 110 2H5v6h14V6h-1a1 1 0 010-2h2c.6 0 1 .4 1 1v13a2 2 0 01-2 2H5a2 2 0 01-2-2V5c0-.6.4-1 1-1h2zm5 10H5v4h6v-4zm8 0h-6v4h6v-4zM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 010 2h-2v2a1 1 0 01-2 .1V8H9a1 1 0 010-2h2V4c0-.6.4-1 1-1z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 01.1 2H13v2a1 1 0 01-2 .1V18H9a1 1 0 01-.1-2H11v-2c0-.6.4-1 1-1zm6 7a1 1 0 010-2h1v-6H5v6h1a1 1 0 010 2H4a1 1 0 01-1-1V6c0-1.1.9-2 2-2h14a2 2 0 012 2v13c0 .5-.4 1-.9 1H18zM11 6H5v4h6V6zm8 0h-6v4h6V6z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 9h-4v5h4v-5zm-6 0H9v5h4v-5zm0-7H9v5h4V6zm6 0h-4v5h4V6z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 15.5V18h3v-2.5H5zm14-5h-9V18h9v-7.5zM19 6h-4v2.5h4V6zM8 6H5v2.5h3V6zm5 0h-3v2.5h3V6zm-8 7.5h3v-3H5v3z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 15v3h6v-3H5zm14 0h-6v3h6v-3zm0-9h-6v3h6V6zM5 9h6V6H5v3z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM8 15.5H5V18h3v-2.5zm11-5h-9V18h9v-7.5zm-2.5 1l1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2zm-8.5-1H5v3h3v-3zM19 6h-4v2.5h4V6zM8 6H5v2.5h3V6zm5 0h-3v2.5h3V6z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 11H5v3h6v-3zm8 0h-6v3h6v-3zm0-5h-6v3h6v-3zM5 13h6v-3H5v3z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 14v4h6v-4H5zm14 0h-6v4h6v-4zm0-6h-6v4h6V8zM5 12h6V8H5v4z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14zM9 16v-4a5 5 0 116 0v4h4a2 2 0 012 2v3H3v-3c0-1.1.9-2 2-2h4zm4 0v-5l.8-.6a3 3 0 10-3.6 0l.8.6v5h2z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 111 0V6H15v1.6a8 8 0 11-6 0zm-2.6 5.3a.5.5 0 00.3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 013.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 00-4.1 3.7z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path id="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 01-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 01-.5.6h-.8a.5.5 0 01-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4zm2.6-7.6l-.6 2a.5.5 0 00.5.6h1.6a.5.5 0 00.5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4z"/></g></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 110-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 110-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 110-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="M12.7 14.3l-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 010-1l3.1-3A12.4 12.4 0 016.7 9H8a10.1 10.1 0 001.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 110-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 01-1 2.4 13.5 13.5 0 01-1.7 2.3l1.9 1.8zm4.3-3l2.7 7.3a.5.5 0 01-.4.7 1 1 0 01-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 01-1 .7.5.5 0 01-.4-.7l2.7-7.4a1 1 0 012 0zm-2.2 4.4h2.4L16 12.5l-1.2 3.2z" fill-rule="evenodd"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 01-.4 1.8l-1 1.4a5.3 5.3 0 01-5.5 1 5 5 0 01-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 01-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 002.2.8 3.4 3.4 0 002.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1zM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 01-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 11-1.4 1.4l-5-5a1 1 0 010-1.4l5-5a1 1 0 011.4 1.4L6.4 8z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 011.4 1.4l-2 2a2 2 0 102.6 2.8l4.8-4.8a1 1 0 000-1.4 1 1 0 111.4-1.3 2.9 2.9 0 010 4L9.6 20a3.9 3.9 0 01-5.5-5.5l2-2zm11.6-.6a1 1 0 01-1.4-1.4l2.1-2a2 2 0 10-2.7-2.8L11 10.3a1 1 0 000 1.4A1 1 0 119.6 13a2.9 2.9 0 010-4L14.4 4a3.9 3.9 0 015.5 5.5l-2 2zM7.6 6.3a.8.8 0 01-1 1.1L3.3 4.2a.7.7 0 111-1l3.2 3.1zM5.1 8.6a.8.8 0 010 1.5H3a.8.8 0 010-1.5H5zm5-3.5a.8.8 0 01-1.5 0V3a.8.8 0 011.5 0V5zm6 11.8a.8.8 0 011-1l3.2 3.2a.8.8 0 01-1 1L16 17zm-2.2 2a.8.8 0 011.5 0V21a.8.8 0 01-1.5 0V19zm5-3.5a.7.7 0 110-1.5H21a.8.8 0 010 1.5H19z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 00-.3-.7A1 1 0 0016 7h-2a1 1 0 00-.7.3 1 1 0 00-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2zm0 1a1 1 0 00-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 012 0v3c0 .6-.4 1-1 1H5a1 1 0 01-1-1v-3a1 1 0 012 0v2h12zM11 6.4L8.7 8.7a1 1 0 01-1.4-1.4l4-4a1 1 0 011.4 0l4 4a1 1 0 11-1.4 1.4L13 6.4V16a1 1 0 01-2 0V6.4z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 110-24 12 12 0 010 24zm-8.7-5.3a11 11 0 0017.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7zM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13z" fill-rule="nonzero"/></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2zm-4 0v2a2 2 0 01-2-2h2zm8 0v2h-2v-2h2zm8 0a2 2 0 01-2 2v-2h2zm-4 0v2h-2v-2h2zM15 7a1 1 0 010 2v7a1 1 0 01-2 0V9h-1v7a1 1 0 01-2 0v-4a2.5 2.5 0 01-.2-5H15zM5 15v2H3v-2h2zm16 0v2h-2v-2h2zM5 11v2H3v-2h2zm16 0v2h-2v-2h2zM5 7v2H3V7h2zm16 0v2h-2V7h2zM5 3v2H3c0-1.1.9-2 2-2zm8 0v2h-2V3h2zm6 0a2 2 0 012 2h-2V3zM9 3v2H7V3h2zm8 0v2h-2V3h2z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 016.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L10 5z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6zM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 00-.3-.7 1 1 0 00-.7-.3 1 1 0 00-.7.3 1 1 0 00-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3zm.7-3l.3-4a1 1 0 00-.3-.7 1 1 0 00-.7-.3 1 1 0 00-.7.3 1 1 0 00-.3.7l.3 4h1.4z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12zm-1-9a1 1 0 012 0v6a1 1 0 01-2 0V8zm-2 4a1 1 0 010-2h6a1 1 0 010 2H8z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12zm-3-5a1 1 0 010-2h6a1 1 0 010 2H8z" fill-rule="nonzero"/></svg>'}}),function(){var e,n=function(e){return function(n){return r=t(o=n),(null===o?"null":"object"===r&&(Array.prototype.isPrototypeOf(o)||o.constructor&&"Array"===o.constructor.name)?"array":"object"===r&&(String.prototype.isPrototypeOf(o)||o.constructor&&"String"===o.constructor.name)?"string":r)===e;var o,r}},o=function(e){return function(n){return t(n)===e}},r=n("string"),i=n("object"),a=n("array"),u=o("boolean"),c=(e=void 0,function(t){return e===t}),l=function(t){return!function(t){return null==t}(t)},s=o("function"),f=o("number"),d=function(){},m=function(t){return function(){return t}},g=function(t){return t};function p(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var r=e.concat(n);return t.apply(null,r)}}var h=function(t){return function(e){return!t(e)}},v=m(!1),b=m(!0),x=function(){return y},y=function(){var t=function(t){return t.isNone()},e=function(t){return t()},n=function(t){return t};return{fold:function(t,e){return t()},is:v,isSome:v,isNone:b,getOr:n,getOrThunk:e,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:m(null),getOrUndefined:m(void 0),or:n,orThunk:e,map:x,each:d,bind:x,exists:v,forall:b,filter:x,equals:t,equals_:t,toArray:function(){return[]},toString:m("none()")}}(),w=function t(e){var n=m(e),o=function(){return i},r=function(t){return t(e)},i={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:b,isNone:v,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:o,orThunk:o,map:function(n){return t(n(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?i:y},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(v,(function(t){return n(e,t)}))}};return i},k={some:w,none:x,from:function(t){return null==t?y:w(t)}},_=Array.prototype.slice,C=Array.prototype.indexOf,S=Array.prototype.push,O=function(t,e){return function(t,e){return C.call(t,e)}(t,e)>-1},z=function(t,e){for(var n=0,o=t.length;n<o;n++){if(e(t[n],n))return!0}return!1},T=function(t,e){for(var n=[],o=0;o<t;o++)n.push(e(o));return n},M=function(t,e){for(var n=t.length,o=new Array(n),r=0;r<n;r++){var i=t[r];o[r]=e(i,r)}return o},A=function(t,e){for(var n=0,o=t.length;n<o;n++){e(t[n],n)}},D=function(t,e){for(var n=[],o=0,r=t.length;o<r;o++){var i=t[o];e(i,o)&&n.push(i)}return n},E=function(t,e,n){return function(t,e){for(var n=t.length-1;n>=0;n--)e(t[n],n)}(t,(function(t){n=e(n,t)})),n},P=function(t,e,n){return A(t,(function(t){n=e(n,t)})),n},H=function(t,e){return function(t,e,n){for(var o=0,r=t.length;o<r;o++){var i=t[o];if(e(i,o))return k.some(i);if(n(i,o))break}return k.none()}(t,e,v)},B=function(t,e){for(var n=0,o=t.length;n<o;n++){if(e(t[n],n))return k.some(n)}return k.none()},R=function(t){for(var e=[],n=0,o=t.length;n<o;++n){if(!a(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);S.apply(e,t[n])}return e},I=function(t,e){return R(M(t,e))},N=function(t,e){for(var n=0,o=t.length;n<o;++n){if(!0!==e(t[n],n))return!1}return!0},L=function(t,e){for(var n={},o=0,r=t.length;o<r;o++){var i=t[o];n[String(i)]=e(i,o)}return n},F=function(t){return[t]},V=function(t,e){return e>=0&&e<t.length?k.some(t[e]):k.none()},j=function(t){return V(t,0)},U=function(t){return V(t,t.length-1)},W=function(t,e){for(var n=0;n<t.length;n++){var o=e(t[n],n);if(o.isSome())return o}return k.none()},q=function(){return q=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},q.apply(this,arguments)};function $(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,u=i.length;a<u;a++,r++)o[r]=i[a];return o}var G=function(t){var e,n=!1;return function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];return n||(n=!0,e=t.apply(null,o)),e}},Y=function(){return X(0,0)},X=function(t,e){return{major:t,minor:e}},K={nu:X,detect:function(t,e){var n=String(e).toLowerCase();return 0===t.length?Y():function(t,e){var n=function(t,e){for(var n=0;n<t.length;n++){var o=t[n];if(o.test(e))return o}}(t,e);if(!n)return{major:0,minor:0};var o=function(t){return Number(e.replace(n,"$"+t))};return X(o(1),o(2))}(t,n)},unknown:Y},J=function(t,e){var n=String(e).toLowerCase();return H(t,(function(t){return t.search(n)}))},Z=function(t,e){return J(t,e).map((function(t){var n=K.detect(t.versionRegexes,e);return{current:t.name,version:n}}))},Q=function(t,e){return J(t,e).map((function(t){var n=K.detect(t.versionRegexes,e);return{current:t.name,version:n}}))},tt=function(t,e,n){return""===e||t.length>=e.length&&t.substr(n,n+e.length)===e},et=function(t,e){return-1!==t.indexOf(e)},nt=function(t,e){return tt(t,e,0)},ot=function(t,e){return tt(t,e,t.length-e.length)},rt=function(t){return function(e){return e.replace(t,"")}}(/^\s+|\s+$/g),it=function(t){return t.length>0},at=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ut=function(t){return function(e){return et(e,t)}},ct=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return et(t,"edge/")&&et(t,"chrome")&&et(t,"safari")&&et(t,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,at],search:function(t){return et(t,"chrome")&&!et(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return et(t,"msie")||et(t,"trident")}},{name:"Opera",versionRegexes:[at,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ut("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ut("firefox")},{name:"Safari",versionRegexes:[at,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(et(t,"safari")||et(t,"mobile/"))&&et(t,"applewebkit")}}],lt=[{name:"Windows",search:ut("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return et(t,"iphone")||et(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ut("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:ut("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ut("linux"),versionRegexes:[]},{name:"Solaris",search:ut("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ut("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ut("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],st={browsers:m(ct),oses:m(lt)},ft="Edge",dt="Chrome",mt="Opera",gt="Firefox",pt="Safari",ht=function(t){var e=t.current,n=t.version,o=function(t){return function(){return e===t}};return{current:e,version:n,isEdge:o(ft),isChrome:o(dt),isIE:o("IE"),isOpera:o(mt),isFirefox:o(gt),isSafari:o(pt)}},vt={unknown:function(){return ht({current:void 0,version:K.unknown()})},nu:ht,edge:m(ft),chrome:m(dt),ie:m("IE"),opera:m(mt),firefox:m(gt),safari:m(pt)},bt="Windows",xt="Android",yt="Linux",wt="Solaris",kt="FreeBSD",_t="ChromeOS",Ct=function(t){var e=t.current,n=t.version,o=function(t){return function(){return e===t}};return{current:e,version:n,isWindows:o(bt),isiOS:o("iOS"),isAndroid:o(xt),isOSX:o("OSX"),isLinux:o(yt),isSolaris:o(wt),isFreeBSD:o(kt),isChromeOS:o(_t)}},St={unknown:function(){return Ct({current:void 0,version:K.unknown()})},nu:Ct,windows:m(bt),ios:m("iOS"),android:m(xt),linux:m(yt),osx:m("OSX"),solaris:m(wt),freebsd:m(kt),chromeos:m(_t)},Ot=function(t,e){var n=st.browsers(),o=st.oses(),r=Z(n,t).fold(vt.unknown,vt.nu),i=Q(o,t).fold(St.unknown,St.nu),a=function(t,e,n,o){var r=t.isiOS()&&!0===/ipad/i.test(n),i=t.isiOS()&&!r,a=t.isiOS()||t.isAndroid(),u=a||o("(pointer:coarse)"),c=r||!i&&a&&o("(min-device-width:768px)"),l=i||a&&!c,s=e.isSafari()&&t.isiOS()&&!1===/safari/i.test(n),f=!l&&!c&&!s;return{isiPad:m(r),isiPhone:m(i),isTablet:m(c),isPhone:m(l),isTouch:m(u),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:m(s),isDesktop:m(f)}}(i,r,t,e);return{browser:r,os:i,deviceType:a}},zt=function(t){return window.matchMedia(t).matches},Tt=G((function(){return Ot(navigator.userAgent,zt)})),Mt=function(){return Tt()},At=function(t){if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}},Dt={fromHtml:function(t,e){var n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||n.childNodes.length>1)throw console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return At(n.childNodes[0])},fromTag:function(t,e){var n=(e||document).createElement(t);return At(n)},fromText:function(t,e){var n=(e||document).createTextNode(t);return At(n)},fromDom:At,fromPoint:function(t,e,n){return k.from(t.dom.elementFromPoint(e,n)).map(At)}},Et=function(t,e){var n=t.dom;if(1!==n.nodeType)return!1;var o=n;if(void 0!==o.matches)return o.matches(e);if(void 0!==o.msMatchesSelector)return o.msMatchesSelector(e);if(void 0!==o.webkitMatchesSelector)return o.webkitMatchesSelector(e);if(void 0!==o.mozMatchesSelector)return o.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},Pt=function(t){return 1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType||0===t.childElementCount},Ht=function(t,e){return t.dom===e.dom},Bt=function(t,e){return n=t.dom,o=e.dom,function(t,e,n){return 0!=(t.compareDocumentPosition(e)&n)}(n,o,Node.DOCUMENT_POSITION_CONTAINED_BY);var n,o},Rt=function(t,e){return Mt().browser.isIE()?Bt(t,e):function(t,e){var n=t.dom,o=e.dom;return n!==o&&n.contains(o)}(t,e)},It=Et,Nt=Object.keys,Lt=Object.hasOwnProperty,Ft=function(t,e){for(var n=Nt(t),o=0,r=n.length;o<r;o++){var i=n[o];e(t[i],i)}},Vt=function(t,e){return jt(t,(function(t,n){return{k:n,v:e(t,n)}}))},jt=function(t,e){var n={};return Ft(t,(function(t,o){var r=e(t,o);n[r.k]=r.v})),n},Ut=function(t,e){var n={};return function(t,e,n,o){Ft(t,(function(t,r){(e(t,r)?n:o)(t,r)}))}(t,e,function(t){return function(e,n){t[n]=e}}(n),d),n},Wt=function(t,e){var n=[];return Ft(t,(function(t,o){n.push(e(t,o))})),n},qt=function(t){return Nt(t).length},$t=function(t,e){return Gt(t,e)?k.from(t[e]):k.none()},Gt=function(t,e){return Lt.call(t,e)},Yt=function(t,e){return Gt(t,e)&&void 0!==t[e]&&null!==t[e]},Xt=["tfoot","thead","tbody","colgroup"],Kt=function(t,e,n){return{element:t,rowspan:e,colspan:n}},Jt=function(t,e,n){return{element:t,cells:e,section:n}},Zt=function(t,e,n){return{element:t,isNew:e,isLocked:n}},Qt=function(t,e){return{cells:t,section:e}};"undefined"!=typeof window?window:Function("return this;")();var te=function(t){return t.dom.nodeName.toLowerCase()},ee=function(t){return t.dom.nodeType},ne=function(t){return function(e){return ee(e)===t}},oe=function(t){return 8===ee(t)||"#comment"===te(t)},re=ne(1),ie=ne(3),ae=ne(9),ue=ne(11),ce=function(t){return function(e){return re(e)&&te(e)===t}},le=function(t){return Dt.fromDom(t.dom.ownerDocument)},se=function(t){return ae(t)?t:le(t)},fe=function(t){return k.from(t.dom.parentNode).map(Dt.fromDom)},de=function(t,e){for(var n=s(e)?e:v,o=t.dom,r=[];null!==o.parentNode&&void 0!==o.parentNode;){var i=o.parentNode,a=Dt.fromDom(i);if(r.push(a),!0===n(a))break;o=i}return r},me=function(t){return k.from(t.dom.previousSibling).map(Dt.fromDom)},ge=function(t){return k.from(t.dom.nextSibling).map(Dt.fromDom)},pe=function(t){return M(t.dom.childNodes,Dt.fromDom)},he=function(t,e){var n=t.dom.childNodes;return k.from(n[e]).map(Dt.fromDom)},ve=s(Element.prototype.attachShadow)&&s(Node.prototype.getRootNode),be=m(ve),xe=ve?function(t){return Dt.fromDom(t.dom.getRootNode())}:se,ye=function(t){var e,n=xe(t);return ue(e=n)&&l(e.dom.host)?k.some(n):k.none()},we=function(t){return Dt.fromDom(t.dom.host)},ke=function(t){return l(t.dom.shadowRoot)},_e=function t(e){var n=ie(e)?e.dom.parentNode:e.dom;if(null==n||null===n.ownerDocument)return!1;var o,r,i=n.ownerDocument;return ye(Dt.fromDom(n)).fold((function(){return i.body.contains(n)}),(o=t,r=we,function(t){return o(r(t))}))},Ce=function(t){var e=t.dom.body;if(null==e)throw new Error("Body is not available yet");return Dt.fromDom(e)},Se=function t(e,n){var o=[];return A(pe(e),(function(e){n(e)&&(o=o.concat([e])),o=o.concat(t(e,n))})),o},Oe=function(t,e,n){return function(t,e,n){return D(de(t,n),e)}(t,(function(t){return Et(t,e)}),n)},ze=function(t,e){return function(t,e){return D(pe(t),e)}(t,(function(t){return Et(t,e)}))},Te=function(t,e){return function(t,e){var n=void 0===e?document:e.dom;return Pt(n)?[]:M(n.querySelectorAll(t),Dt.fromDom)}(e,t)};function Me(t,e,n,o,r){return t(n,o)?k.some(n):s(r)&&r(n)?k.none():e(n,o,r)}var Ae=function(t,e,n){for(var o=t.dom,r=s(n)?n:v;o.parentNode;){o=o.parentNode;var i=Dt.fromDom(o);if(e(i))return k.some(i);if(r(i))break}return k.none()},De=function(t,e,n){return Ae(t,(function(t){return Et(t,e)}),n)},Ee=function(t,e){return function(t,e){return H(t.dom.childNodes,(function(t){return e(Dt.fromDom(t))})).map(Dt.fromDom)}(t,(function(t){return Et(t,e)}))},Pe=function(t,e){return function(t,e){var n=void 0===e?document:e.dom;return Pt(n)?k.none():k.from(n.querySelector(t)).map(Dt.fromDom)}(e,t)},He=function(t,e,n){return Me((function(t,e){return Et(t,e)}),De,t,e,n)},Be=function(t,e,n){if(!(r(n)||u(n)||f(n)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")},Re=function(t,e,n){Be(t.dom,e,n)},Ie=function(t,e){var n=t.dom;Ft(e,(function(t,e){Be(n,e,t)}))},Ne=function(t,e){var n=t.dom.getAttribute(e);return null===n?void 0:n},Le=function(t,e){return k.from(Ne(t,e))},Fe=function(t,e){t.dom.removeAttribute(e)},Ve=function(t){return P(t.dom.attributes,(function(t,e){return t[e.name]=e.value,t}),{})},je=function(t){return void 0!==t.style&&s(t.style.getPropertyValue)},Ue=function(t,e,n){if(!r(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);je(t)&&t.style.setProperty(e,n)},We=function(t,e,n){var o=t.dom;Ue(o,e,n)},qe=function(t,e){var n=t.dom;Ft(e,(function(t,e){Ue(n,e,t)}))},$e=function(t,e){var n=t.dom,o=window.getComputedStyle(n).getPropertyValue(e);return""!==o||_e(t)?o:Ge(n,e)},Ge=function(t,e){return je(t)?t.style.getPropertyValue(e):""},Ye=function(t,e){var n=t.dom,o=Ge(n,e);return k.from(o).filter((function(t){return t.length>0}))},Xe=function(t,e){!function(t,e){je(t)&&t.style.removeProperty(e)}(t.dom,e),Le(t,"style").map(rt).is("")&&Fe(t,"style")},Ke=function(t,e,n){return void 0===n&&(n=0),Le(t,e).map((function(t){return parseInt(t,10)})).getOr(n)},Je=function(t,e){return Ke(t,e,1)},Ze=function(t){return Je(t,"colspan")>1},Qe=function(t){return Je(t,"rowspan")>1},tn=function(t,e){return parseInt($e(t,e),10)},en=m(10),nn=m(10),on=function(t,e){return rn(t,e,b)},rn=function t(e,n,o){return I(pe(e),(function(e){return Et(e,n)?o(e)?[e]:[]:t(e,n,o)}))},an=function(t,e){return function(t,e,n){return void 0===n&&(n=v),n(e)?k.none():O(t,te(e))?k.some(e):De(e,t.join(","),(function(t){return Et(t,"table")||n(t)}))}(["td","th"],t,e)},un=function(t){return on(t,"th,td")},cn=function(t){return Et(t,"colgroup")?ze(t,"col"):I(fn(t),(function(t){return ze(t,"col")}))},ln=function(t,e){return He(t,"table",e)},sn=function(t){return on(t,"tr")},fn=function(t){return ln(t).fold(m([]),(function(t){return ze(t,"colgroup")}))},dn=function(t,e){return M(t,(function(t){if("colgroup"===te(t)){var n=M(cn(t),(function(t){var e=Ke(t,"span",1);return Kt(t,1,e)}));return Jt(t,n,"colgroup")}n=M(un(t),(function(t){var e=Ke(t,"rowspan",1),n=Ke(t,"colspan",1);return Kt(t,e,n)}));return Jt(t,n,e(t))}))},mn=function(t){return fe(t).map((function(t){var e=te(t);return function(t){return O(Xt,t)}(e)?e:"tbody"})).getOr("tbody")},gn=function(t){var e=sn(t),n=$(fn(t),e);return dn(n,mn)},pn=function(t,e,n){var o=t.cells,r=o.slice(0,e),i=o.slice(e),a=r.concat(n).concat(i);return bn(t,a)},hn=function(t,e,n){return pn(t,e,[n])},vn=function(t,e,n){t.cells[e]=n},bn=function(t,e){return Qt(e,t.section)},xn=function(t,e){var n=t.cells,o=M(n,e);return Qt(o,t.section)},yn=function(t,e){return t.cells[e]},wn=function(t,e){return yn(t,e).element},kn=function(t){return t.cells.length},_n=function(t){var e=function(t,e){for(var n=[],o=[],r=0,i=t.length;r<i;r++){var a=t[r];(e(a,r)?n:o).push(a)}return{pass:n,fail:o}}(t,(function(t){return"colgroup"===t.section}));return{rows:e.fail,cols:e.pass}},Cn="data-snooker-locked-cols",Sn=function(t){return Le(t,Cn).bind((function(t){return k.from(t.match(/\d+/g))})).map((function(t){return L(t,b)}))},On=function(t){var e=P(_n(t).rows,(function(t,e){return A(e.cells,(function(e,n){e.isLocked&&(t[n]=!0)})),t}),{}),n=Wt(e,(function(t,e){return parseInt(e,10)}));return function(t,e){var n=_.call(t,0);return n.sort(e),n}(n)},zn=function(t,e){return t+","+e},Tn=function(t,e){var n=I(t.all,(function(t){return t.cells}));return D(n,e)},Mn=function(t){var e={},n=[],o={},r=j(t).map((function(t){return t.element})).bind(ln).bind(Sn).getOr({}),i=0,a=0,u=0;A(t,(function(t){if("colgroup"===t.section)o=function(t){var e={},n=0;return A(t.cells,(function(t){var o=t.colspan;T(o,(function(r){var i=n+r;e[i]=function(t,e,n){return{element:t,colspan:e,column:n}}(t.element,o,i)})),n+=o})),e}(t);else{var c=[];A(t.cells,(function(t){for(var n=0;void 0!==e[zn(u,n)];)n++;for(var o=Yt(r,n.toString()),i=function(t,e,n,o,r,i){return{element:t,rowspan:e,colspan:n,row:o,column:r,isLocked:i}}(t.element,t.rowspan,t.colspan,u,n,o),l=0;l<t.colspan;l++)for(var s=0;s<t.rowspan;s++){var f=n+l,d=zn(u+s,f);e[d]=i,a=Math.max(a,f+1)}c.push(i)})),i++,n.push(Jt(t.element,c,t.section)),u++}}));var c=function(t,e){return{rows:t,columns:e}}(i,a);return{grid:c,access:e,all:n,columns:o}},An={fromTable:function(t){var e=gn(t);return Mn(e)},generate:Mn,getAt:function(t,e,n){var o=t.access[zn(e,n)];return void 0!==o?k.some(o):k.none()},findItem:function(t,e,n){var o=Tn(t,(function(t){return n(e,t.element)}));return o.length>0?k.some(o[0]):k.none()},filterItems:Tn,justCells:function(t){return I(t.all,(function(t){return t.cells}))},justColumns:function(t){return e=t.columns,Wt(e,(function(t){return t}));var e},hasColumns:function(t){return Nt(t.columns).length>0},getColumnAt:function(t,e){return k.from(t.columns[e])}},Dn=function(t,e){var n=e.column,o=e.column+e.colspan-1,r=e.row,i=e.row+e.rowspan-1;return n<=t.finishCol&&o>=t.startCol&&r<=t.finishRow&&i>=t.startRow},En=function(t,e){return e.column>=t.startCol&&e.column+e.colspan-1<=t.finishCol&&e.row>=t.startRow&&e.row+e.rowspan-1<=t.finishRow},Pn=function(t,e,n){var o=An.findItem(t,e,Ht),r=An.findItem(t,n,Ht);return o.bind((function(t){return r.map((function(e){return n=t,o=e,r=Math.min(n.row,o.row),i=Math.min(n.column,o.column),a=Math.max(n.row+n.rowspan-1,o.row+o.rowspan-1),u=Math.max(n.column+n.colspan-1,o.column+o.colspan-1),{startRow:r,startCol:i,finishRow:a,finishCol:u};var n,o,r,i,a,u}))}))},Hn=function(t,e,n){return Pn(t,e,n).bind((function(e){return function(t,e){for(var n=!0,o=p(En,e),r=e.startRow;r<=e.finishRow;r++)for(var i=e.startCol;i<=e.finishCol;i++)n=n&&An.getAt(t,r,i).exists(o);return n?k.some(e):k.none()}(t,e)}))},Bn=function(t,e,n){return Pn(t,e,n).map((function(e){var n=An.filterItems(t,p(Dn,e));return M(n,(function(t){return t.element}))}))},Rn=function(t,e){return An.findItem(t,e,(function(t,e){return Rt(e,t)})).map((function(t){return t.element}))},In=function(t,e,n){return ln(t).bind((function(o){return function(t,e,n,o){return An.findItem(t,e,Ht).bind((function(e){var r=n>0?e.row+e.rowspan-1:e.row,i=o>0?e.column+e.colspan-1:e.column;return An.getAt(t,r+n,i+o).map((function(t){return t.element}))}))}(Fn(o),t,e,n)}))},Nn=function(t,e,n){var o=Fn(t);return Bn(o,e,n)},Ln=function(t,e,n,o,r){var i=Fn(t),a=Ht(t,n)?k.some(e):Rn(i,e),u=Ht(t,r)?k.some(o):Rn(i,o);return a.bind((function(t){return u.bind((function(e){return Bn(i,t,e)}))}))},Fn=An.fromTable,Vn=function(t,e){fe(t).each((function(n){n.dom.insertBefore(e.dom,t.dom)}))},jn=function(t,e){ge(t).fold((function(){fe(t).each((function(t){Wn(t,e)}))}),(function(t){Vn(t,e)}))},Un=function(t,e){var n=function(t){return he(t,0)}(t);n.fold((function(){Wn(t,e)}),(function(n){t.dom.insertBefore(e.dom,n.dom)}))},Wn=function(t,e){t.dom.appendChild(e.dom)},qn=function(t,e){Vn(t,e),Wn(e,t)},$n=function(t,e){A(e,(function(n,o){var r=0===o?t:e[o-1];jn(r,n)}))},Gn=function(t,e){A(e,(function(e){Wn(t,e)}))},Yn=function(t){t.dom.textContent="",A(pe(t),(function(t){Xn(t)}))},Xn=function(t){var e=t.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},Kn=function(t){var e,n=pe(t);n.length>0&&(e=t,A(n,(function(t){Vn(e,t)}))),Xn(t)},Jn=function(t,e){var n=function(e){return t(e)?k.from(e.dom.nodeValue):k.none()};return{get:function(o){if(!t(o))throw new Error("Can only get "+e+" value of a "+e+" node");return n(o).getOr("")},getOption:n,set:function(n,o){if(!t(n))throw new Error("Can only set raw "+e+" value of a "+e+" node");n.dom.nodeValue=o}}}(ie,"text"),Zn=function(t){return Jn.get(t)},Qn=function(t){return Jn.getOption(t)},to=function(t,e){return Jn.set(t,e)},eo=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function no(){return{up:m({selector:De,closest:He,predicate:Ae,all:de}),down:m({selector:Te,predicate:Se}),styles:m({get:$e,getRaw:Ye,set:We,remove:Xe}),attrs:m({get:Ne,set:Re,remove:Fe,copyTo:function(t,e){var n=Ve(t);Ie(e,n)}}),insert:m({before:Vn,after:jn,afterAll:$n,append:Wn,appendAll:Gn,prepend:Un,wrap:qn}),remove:m({unwrap:Kn,remove:Xn}),create:m({nu:Dt.fromTag,clone:function(t){return Dt.fromDom(t.dom.cloneNode(!1))},text:Dt.fromText}),query:m({comparePosition:function(t,e){return t.dom.compareDocumentPosition(e.dom)},prevSibling:me,nextSibling:ge}),property:m({children:pe,name:te,parent:fe,document:function(t){return se(t).dom},isText:ie,isComment:oe,isElement:re,isSpecial:function(t){var e=te(t);return O(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],e)},getText:Zn,setText:to,isBoundary:function(t){return!!re(t)&&("body"===te(t)||O(eo,te(t)))},isEmptyTag:function(t){return!!re(t)&&O(["br","img","hr","input"],te(t))},isNonEditable:function(t){return re(t)&&"false"===Ne(t,"contenteditable")}}),eq:Ht,is:It}}var oo,ro,io,ao,uo=function(t,e,n,o){var r=e(t,n);return E(o,(function(n,o){var r=e(t,o);return co(t,n,r)}),r)},co=function(t,e,n){return e.bind((function(e){return n.filter(p(t.eq,e))}))},lo=function(t,e,n){return n.length>0?function(t,e,n,o){return o(t,e,n[0],n.slice(1))}(t,e,n,uo):k.none()},so=function(t,e,n,o){void 0===o&&(o=v);var r=[e].concat(t.up().all(e)),i=[n].concat(t.up().all(n)),a=function(t){return B(t,o).fold((function(){return t}),(function(e){return t.slice(0,e+1)}))},u=a(r),c=a(i),l=H(u,(function(e){return z(c,function(t,e){return p(t.eq,e)}(t,e))}));return{firstpath:u,secondpath:c,shared:l}},fo=no(),mo=function(t,e){return lo(fo,(function(e,n){return t(n)}),e)},go=function(t){return De(t,"table")},po=function(t,e,n){var o=function(t){return function(e){return void 0!==n&&n(e)||Ht(e,t)}};return Ht(t,e)?k.some({boxes:k.some([t]),start:t,finish:e}):go(t).bind((function(r){return go(e).bind((function(i){if(Ht(r,i))return k.some({boxes:Nn(r,t,e),start:t,finish:e});if(Rt(r,i)){var a=(u=Oe(e,"td,th",o(r))).length>0?u[u.length-1]:e;return k.some({boxes:Ln(r,t,r,e,i),start:t,finish:a})}if(Rt(i,r)){var u,c=(u=Oe(t,"td,th",o(i))).length>0?u[u.length-1]:t;return k.some({boxes:Ln(i,t,r,e,i),start:t,finish:c})}return function(t,e,n){return so(fo,t,e,n)}(t,e).shared.bind((function(a){return He(a,"table",n).bind((function(n){var a=Oe(e,"td,th",o(n)),u=a.length>0?a[a.length-1]:e,c=Oe(t,"td,th",o(n)),l=c.length>0?c[c.length-1]:t;return k.some({boxes:Ln(n,t,r,e,i),start:l,finish:u})}))}))}))}))},ho=function(t,e){var n=Te(t,e);return n.length>0?k.some(n):k.none()},vo=function(t,e,n){return Pe(t,e).bind((function(e){return Pe(t,n).bind((function(t){return mo(go,[e,t]).map((function(n){return{first:e,last:t,table:n}}))}))}))},bo=function(t,e,n,o,r){return function(t,e){return H(t,(function(t){return Et(t,e)}))}(t,r).bind((function(t){return In(t,e,n).bind((function(t){return function(t,e){return De(t,"table").bind((function(n){return Pe(n,e).bind((function(e){return po(e,t).bind((function(t){return t.boxes.map((function(e){return{boxes:e,start:t.start,finish:t.finish}}))}))}))}))}(t,o)}))}))},xo=function(t,e){return ho(t,e)},yo=function(t,e,n){return vo(t,e,n).bind((function(e){var n=function(e){return Ht(t,e)},o="thead,tfoot,tbody,table",r=De(e.first,o,n),i=De(e.last,o,n);return r.bind((function(t){return i.bind((function(n){return Ht(t,n)?function(t,e,n){var o=Fn(t);return Hn(o,e,n)}(e.table,e.first,e.last):k.none()}))}))}))},wo=function(t){if(!a(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");var e=[],n={};return A(t,(function(o,r){var i=Nt(o);if(1!==i.length)throw new Error("one and only one name per case");var u=i[0],c=o[u];if(void 0!==n[u])throw new Error("duplicate key detected:"+u);if("cata"===u)throw new Error("cannot have a case named cata (sorry)");if(!a(c))throw new Error("case arguments must be an array");e.push(u),n[u]=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var i=n.length;if(i!==c.length)throw new Error("Wrong number of arguments to case "+u+". Expected "+c.length+" ("+c+"), got "+i);var a=function(t){var o=Nt(t);if(e.length!==o.length)throw new Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+o.join(","));if(!N(e,(function(t){return O(o,t)})))throw new Error("Not all branches were specified when using match. Specified: "+o.join(", ")+"\nRequired: "+e.join(", "));return t[u].apply(null,n)};return{fold:function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];if(e.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+e.length);var i=e[r];return i.apply(null,n)},match:a,log:function(t){console.log(t,{constructors:e,constructor:u,params:n})}}}})),n},ko=wo([{none:[]},{multiple:["elements"]},{single:["element"]}]),_o=function(t,e,n,o){return t.fold(e,n,o)},Co=ko.none,So=ko.multiple,Oo=ko.single,zo=tinymce.util.Tools.resolve("tinymce.PluginManager"),To=function(t,e){return Dt.fromDom(t.dom.cloneNode(e))},Mo=function(t){return To(t,!1)},Ao=function(t){return To(t,!0)},Do=function(t,e){var n=function(t,e){var n=Dt.fromTag(e),o=Ve(t);return Ie(n,o),n}(t,e),o=pe(Ao(t));return Gn(n,o),n},Eo=function(t){for(var e=[],n=function(t){e.push(t)},o=0;o<t.length;o++)t[o].each(n);return e},Po=function(t,e){return t?k.some(e):k.none()},Ho=function(t,e){var n=function(n){var o=e(n);if(o<=0||null===o){var r=$e(n,t);return parseFloat(r)||0}return o},o=function(t,e){return P(e,(function(e,n){var o=$e(t,n),r=void 0===o?0:parseInt(o,10);return isNaN(r)?e:e+r}),0)};return{set:function(e,n){if(!f(n)&&!n.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+n);var o=e.dom;je(o)&&(o.style[t]=n+"px")},get:n,getOuter:n,aggregate:o,max:function(t,e,n){var r=o(t,n);return e>r?e-r:0}}},Bo=Ho("width",(function(t){return t.dom.offsetWidth})),Ro=function(t){return Bo.get(t)},Io=function(t){return Bo.getOuter(t)},No=function(t,e){void 0===e&&(e=b);var n=t.grid,o=T(n.columns,g),r=T(n.rows,g);return M(o,(function(n){return Lo((function(){return I(r,(function(e){return An.getAt(t,e,n).filter((function(t){return t.column===n})).toArray()}))}),(function(t){return 1===t.colspan&&e(t.element)}),(function(){return An.getAt(t,0,n)}))}))},Lo=function(t,e,n){var o=t();return H(o,e).orThunk((function(){return k.from(o[0]).orThunk(n)})).map((function(t){return t.element}))},Fo=function(t){var e=t.grid,n=T(e.rows,g),o=T(e.columns,g);return M(n,(function(e){return Lo((function(){return I(o,(function(n){return An.getAt(t,e,n).filter((function(t){return t.row===e})).fold(m([]),(function(t){return[t]}))}))}),(function(t){return 1===t.rowspan}),(function(){return An.getAt(t,e,0)}))}))},Vo=function(t,e){if(e<0||e>=t.length-1)return k.none();var n=t[e].fold((function(){var n=function(t){var e=_.call(t,0);return e.reverse(),e}(t.slice(0,e));return W(n,(function(t,e){return t.map((function(t){return{value:t,delta:e+1}}))}))}),(function(t){return k.some({value:t,delta:0})})),o=t[e+1].fold((function(){var n=t.slice(e+1);return W(n,(function(t,e){return t.map((function(t){return{value:t,delta:e+1}}))}))}),(function(t){return k.some({value:t,delta:1})}));return n.bind((function(t){return o.map((function(e){var n=e.delta+t.delta;return Math.abs(e.value-t.value)/n}))}))},jo=function(t,e){return function(n){return"rtl"===Uo(n)?e:t}},Uo=function(t){return"rtl"===$e(t,"direction")?"rtl":"ltr"},Wo=Ho("height",(function(t){var e=t.dom;return _e(t)?e.getBoundingClientRect().height:e.offsetHeight})),qo=function(t){return Wo.get(t)},$o=function(t){return Wo.getOuter(t)},Go=function t(e,n){return{left:e,top:n,translate:function(o,r){return t(e+o,n+r)}}},Yo=function(t,e){return void 0!==t?t:void 0!==e?e:0},Xo=function(t){var e=t.dom.ownerDocument,n=e.body,o=e.defaultView,r=e.documentElement;if(n===t.dom)return Go(n.offsetLeft,n.offsetTop);var i=Yo(null==o?void 0:o.pageYOffset,r.scrollTop),a=Yo(null==o?void 0:o.pageXOffset,r.scrollLeft),u=Yo(r.clientTop,n.clientTop),c=Yo(r.clientLeft,n.clientLeft);return Ko(t).translate(a-c,i-u)},Ko=function(t){var e=t.dom,n=e.ownerDocument.body;return n===e?Go(n.offsetLeft,n.offsetTop):_e(t)?function(t){var e=t.getBoundingClientRect();return Go(e.left,e.top)}(e):Go(0,0)},Jo=function(t,e){return{row:t,y:e}},Zo=function(t,e){return{col:t,x:e}},Qo=function(t){return Xo(t).left+Io(t)},tr=function(t){return Xo(t).left},er=function(t,e){return Zo(t,tr(e))},nr=function(t,e){return Zo(t,Qo(e))},or=function(t){return Xo(t).top},rr=function(t,e){return Jo(t,or(e))},ir=function(t,e){return Jo(t,or(e)+$o(e))},ar=function(t,e,n){if(0===n.length)return[];var o=M(n.slice(1),(function(e,n){return e.map((function(e){return t(n,e)}))})),r=n[n.length-1].map((function(t){return e(n.length-1,t)}));return o.concat([r])},ur={delta:g,positions:function(t){return ar(rr,ir,t)},edge:or},cr={delta:g,edge:tr,positions:function(t){return ar(er,nr,t)}},lr={delta:function(t){return-t},edge:Qo,positions:function(t){return ar(nr,er,t)}},sr=jo(cr,lr),fr={delta:function(t,e){return sr(e).delta(t,e)},positions:function(t,e){return sr(e).positions(t,e)},edge:function(t){return sr(t).edge(t)}},dr={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},mr=(oo="[0-9]+",ro="[eE][+-]?[0-9]+",io=function(t){return"(?:"+t+")?"},ao=["Infinity","[0-9]+\\."+io(oo)+io(ro),"\\.[0-9]+"+io(ro),oo+io(ro)].join("|"),new RegExp("^([+-]?(?:"+ao+"))(.*)$")),gr=function(t,e){return k.from(mr.exec(t)).bind((function(t){var n=Number(t[1]),o=t[2];return function(t,e){return z(e,(function(e){return z(dr[e],(function(e){return t===e}))}))}(o,e)?k.some({value:n,unit:o}):k.none()}))},pr=function(){var t=Mt().browser;return t.isIE()||t.isEdge()},hr=function(t,e,n){return function(t,e){var n=parseFloat(t);return isNaN(n)?e:n}($e(t,e),n)},vr=function(t){return pr()?function(t){var e=t.dom.getBoundingClientRect().height;return"border-box"===$e(t,"box-sizing")?e:e-hr(t,"padding-top",0)-hr(t,"padding-bottom",0)-(hr(t,"border-top-width",0)+hr(t,"border-bottom-width",0))}(t):hr(t,"height",qo(t))},br=function(t){return pr()?function(t){var e=t.dom.getBoundingClientRect().width;return"border-box"===$e(t,"box-sizing")?e:e-hr(t,"padding-left",0)-hr(t,"padding-right",0)-(hr(t,"border-left-width",0)+hr(t,"border-right-width",0))}(t):hr(t,"width",Ro(t))},xr=/(\d+(\.\d+)?)%/,yr=/(\d+(\.\d+)?)px|em/,wr=function(t,e){var n,o=(n=t,k.from(n.dom.offsetParent).map(Dt.fromDom)).getOr(Ce(le(t)));return e(t)/e(o)*100},kr=function(t,e){We(t,"width",e+"px")},_r=function(t,e){We(t,"width",e+"%")},Cr=function(t,e){We(t,"height",e+"px")},Sr=function(t,e,n,o){var r=parseInt(t,10);return ot(t,"%")&&"table"!==te(e)?function(t,e,n,o){var r=ln(t).map((function(t){var o=n(t);return Math.floor(e/100*o)})).getOr(e);return o(t,r),r}(e,r,n,o):r},Or=function(t){var e=function(t){return Ye(t,"height").getOrThunk((function(){return vr(t)+"px"}))}(t);return e?Sr(e,t,qo,Cr):qo(t)},zr=function(t){return Ye(t,"width").fold((function(){return k.from(Ne(t,"width"))}),(function(t){return k.some(t)}))},Tr=function(t,e){return t/e.pixelWidth()*100},Mr=function(t,e){return zr(t).fold((function(){var n=Ro(t);return Tr(n,e)}),(function(n){return function(t,e,n){var o=xr.exec(e);if(null!==o)return parseFloat(o[1]);var r=br(t);return Tr(r,n)}(t,n,e)}))},Ar=function(t,e){return zr(t).fold((function(){return br(t)}),(function(n){return function(t,e,n){var o=yr.exec(e);if(null!==o)return parseInt(o[1],10);var r=xr.exec(e);return null!==r?function(t,e){return t/100*e.pixelWidth()}(parseFloat(r[1]),n):br(t)}(t,n,e)}))},Dr=function(t){return function(t,e,n){return n(t)/Je(t,e)}(t,"rowspan",Or)},Er=function(t,e,n){We(t,"width",e+n)},Pr=function(t){return wr(t,Ro)+"%"},Hr=m(xr),Br=m(yr),Rr=ce("col"),Ir=function(t,e,n){return Ye(t,e).fold((function(){return n(t)+"px"}),(function(t){return t}))},Nr=function(t,e){return Ir(t,"width",(function(t){return Rr(t)?Ro(t):Ar(t,e)}))},Lr=function(t){return Ir(t,"height",Dr)},Fr=function(t,e){return Ye(t,e).isSome()},Vr=function(t,e,n,o,r,i){return t.filter(o).fold((function(){return i(Vo(n,e))}),(function(t){return r(t)}))},jr=function(t,e,n,o,r){var i=No(t,(function(t){return Fr(t,"width")})),a=An.hasColumns(t)?function(t){return M(An.justColumns(t),(function(t){return k.from(t.element)}))}(t):i,u=[k.some(fr.edge(e))].concat(M(fr.positions(i,e),(function(t){return t.map((function(t){return t.x}))}))),c=h(Ze);return M(a,(function(t,e){return Vr(t,e,u,c,(function(t){if(function(t){return!Rr(t)||Fr(t,"width")}(t))return n(t,r);var a,l,s=(a=i[e],l=g,null!=a?l(a):k.none());return Vr(s,e,u,c,(function(t){return o(k.some(Ro(t)))}),o)}),o)}))},Ur=function(t){return t.map((function(t){return t+"px"})).getOr("")},Wr=function(t,e,n){return jr(t,e,Ar,(function(t){return t.getOrThunk(n.minCellWidth)}),n)},qr=function(t,e,n,o,r){var i=Fo(t),a=[k.some(n.edge(e))].concat(M(n.positions(i,e),(function(t){return t.map((function(t){return t.y}))})));return M(i,(function(t,e){return Vr(t,e,a,h(Qe),o,r)}))},$r=function(t){var e=t;return{get:function(){return e},set:function(t){e=t}}},Gr=function(t){var e=function(){return Ro(t)},n=m(0);return{width:e,pixelWidth:e,getWidths:function(e,n){return Wr(e,t,n)},getCellDelta:n,singleColumnWidth:m([0]),minCellWidth:n,setElementWidth:d,adjustTableWidth:d,isRelative:!0,label:"none"}},Yr=function(t,e){var n=$r(parseFloat(t)),o=$r(Ro(e));return{width:n.get,pixelWidth:o.get,getWidths:function(t,n){return function(t,e,n){return jr(t,e,Mr,(function(t){return t.fold((function(){return n.minCellWidth()}),(function(t){return t/n.pixelWidth()*100}))}),n)}(t,e,n)},getCellDelta:function(t){return t/o.get()*100},singleColumnWidth:function(t,e){return[100-t]},minCellWidth:function(){return en()/o.get()*100},setElementWidth:_r,adjustTableWidth:function(t){var r=n.get(),i=r+t/100*r;_r(e,i),n.set(i),o.set(Ro(e))},isRelative:!0,label:"percent"}},Xr=function(t,e){var n=$r(t),o=n.get;return{width:o,pixelWidth:o,getWidths:function(t,n){return Wr(t,e,n)},getCellDelta:g,singleColumnWidth:function(t,e){return[Math.max(en(),t+e)-t]},minCellWidth:en,setElementWidth:kr,adjustTableWidth:function(t){var r=o()+t;kr(e,r),n.set(r)},isRelative:!1,label:"pixel"}},Kr=function(t){return zr(t).fold((function(){return Gr(t)}),(function(e){return function(t,e){var n=Hr().exec(e);if(null!==n)return Yr(n[1],t);var o=Br().exec(e);if(null!==o){var r=parseInt(o[1],10);return Xr(r,t)}var i=Ro(t);return Xr(i,t)}(t,e)}))},Jr=Xr,Zr=Yr,Qr=function(t,e,n){var o=t[n].element,r=Dt.fromTag("td");Wn(r,Dt.fromTag("br")),(e?Wn:Un)(o,r)},ti=function(t,e){var n=function(t){return Et(t.element,e)},o=Ao(t),r=gn(o),i=Kr(t),a=An.generate(r),u=function(t,e){var n=t.grid.columns,o=t.grid.rows,r=n,i=0,a=0,u=[],c=[];return Ft(t.access,(function(t){if(u.push(t),e(t)){c.push(t);var n=t.row,l=n+t.rowspan-1,s=t.column,f=s+t.colspan-1;n<o?o=n:l>i&&(i=l),s<r?r=s:f>a&&(a=f)}})),function(t,e,n,o,r,i){return{minRow:t,minCol:e,maxRow:n,maxCol:o,allCells:r,selectedCells:i}}(o,r,i,a,u,c)}(a,n),c="th:not("+e+"),td:not("+e+")",l=rn(o,"th,td",(function(t){return Et(t,c)}));A(l,Xn),function(t,e,n,o){for(var r=e.grid.columns,i=e.grid.rows,a=0;a<i;a++)for(var u=!1,c=0;c<r;c++)a<n.minRow||a>n.maxRow||c<n.minCol||c>n.maxCol||(An.getAt(e,a,c).filter(o).isNone()?Qr(t,u,a):u=!0)}(r,a,u,n);var s=function(t,e,n,o){if(0===o.minCol&&e.grid.columns===o.maxCol+1)return 0;var r=Wr(e,t,n),i=P(r,(function(t,e){return t+e}),0),a=P(r.slice(o.minCol,o.maxCol+1),(function(t,e){return t+e}),0),u=a/i*n.pixelWidth()-n.pixelWidth();return n.getCellDelta(u)}(t,An.fromTable(t),i,u);return function(t,e,n,o){Ft(n.columns,(function(t){(t.column<e.minCol||t.column>e.maxCol)&&Xn(t.element)}));var r=D(on(t,"tr"),(function(t){return 0===t.dom.childElementCount}));A(r,Xn),e.minCol!==e.maxCol&&e.minRow!==e.maxRow||A(on(t,"th,td"),(function(t){Fe(t,"rowspan"),Fe(t,"colspan")})),Fe(t,Cn),Fe(t,"data-snooker-col-series"),Kr(t).adjustTableWidth(o)}(o,u,a,s),o},ei=function(t){return"img"===te(t)?1:Qn(t).fold((function(){return pe(t).length}),(function(t){return t.length}))},ni=["img","br"],oi=function(t){return Qn(t).filter((function(t){return 0!==t.trim().length||t.indexOf("")>-1})).isSome()||O(ni,te(t))},ri=function(t){return e=oi,function t(n){for(var o=0;o<n.childNodes.length;o++){var r=Dt.fromDom(n.childNodes[o]);if(e(r))return k.some(r);var i=t(n.childNodes[o]);if(i.isSome())return i}return k.none()}(t.dom);var e},ii=function(t){return ai(t,oi)},ai=function(t,e){return function t(n){for(var o=pe(n),r=o.length-1;r>=0;r--){var i=o[r];if(e(i))return k.some(i);var a=t(i);if(a.isSome())return a}return k.none()}(t)},ui={scope:["row","col"]},ci=function(){var t=Dt.fromTag("td");return Wn(t,Dt.fromTag("br")),t},li=function(){return Dt.fromTag("col")},si=function(){return Dt.fromTag("colgroup")},fi=function(t,e,n){var o=Do(t,e);return Ft(n,(function(t,e){null===t?Fe(o,e):Re(o,e,t)})),o},di=function(t){return t},mi=function(t){return function(){return Dt.fromTag("tr",t.dom)}},gi=function(t,e,n){var o=function(t,e){var n,o,r,i;n=t.element,o=e,r=n.dom,i=o.dom,je(r)&&je(i)&&(i.style.cssText=r.style.cssText),Xe(e,"height"),1!==t.colspan&&Xe(e,"width")};return{col:function(e){var n=le(e.element),r=Dt.fromTag(te(e.element),n.dom);return o(e,r),t(e.element,r),r},colgroup:si,row:mi(e),cell:function(e){var r=le(e.element),i=Dt.fromTag(te(e.element),r.dom),a=n.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),u=a.length>0?function(t,e,n){return ri(t).map((function(o){var r=n.join(","),i=Oe(o,r,(function(e){return Ht(e,t)}));return E(i,(function(t,e){var n=Mo(e);return Fe(n,"contenteditable"),Wn(t,n),n}),e)})).getOr(e)}(e.element,i,a):i;return Wn(u,Dt.fromTag("br")),o(e,i),function(t,e){Ft(ui,(function(n,o){return Le(t,o).filter((function(t){return O(n,t)})).each((function(t){return Re(e,o,t)}))}))}(e.element,i),t(e.element,i),i},replace:fi,gap:ci}},pi=function(t){return{col:li,colgroup:si,row:mi(t),cell:ci,replace:di,gap:ci}},hi=function(t){return M(t,Dt.fromDom)},vi=function(t){return t.nodeName.toLowerCase()},bi=function(t){return Dt.fromDom(t.getBody())},xi=function(t){return t.getBoundingClientRect().width},yi=function(t){return t.getBoundingClientRect().height},wi=function(t){return function(e){return Ht(e,bi(t))}},ki=function(t){return/^\d+(\.\d+)?$/.test(t)?t+"px":t},_i=function(t){Fe(t,"data-mce-style");var e=function(t){return Fe(t,"data-mce-style")};A(un(t),e),A(cn(t),e)},Ci=function(t,e){var n=t.dom.getStyle(e,"width")||t.dom.getAttrib(e,"width");return k.from(n).filter(it)},Si=function(t){return/^(\d+(\.\d+)?)%$/.test(t)},Oi=function(t){return Dt.fromDom(t.selection.getStart())},zi=function(t){return _o(t.get(),m([]),g,F)},Ti=function(t){var e=function(t,e){return Le(t,e).exists((function(t){return parseInt(t,10)>1}))},n=zi(t);return n.length>0&&N(n,(function(t){return e(t,"rowspan")||e(t,"colspan")}))?k.some(n):k.none()},Mi=function(t,e,n){return _o(e.get(),k.none,(function(e){return e.length<=1?k.none():yo(t,n.firstSelectedSelector,n.lastSelectedSelector).map((function(t){return{bounds:t,cells:e}}))}),k.none)},Ai="data-mce-selected",Di="data-mce-first-selected",Ei="data-mce-last-selected",Pi={selected:Ai,selectedSelector:"td[data-mce-selected],th[data-mce-selected]",firstSelected:Di,firstSelectedSelector:"td[data-mce-first-selected],th[data-mce-first-selected]",lastSelected:Ei,lastSelectedSelector:"td[data-mce-last-selected],th[data-mce-last-selected]"},Hi=function(t,e,n){return{element:n,mergable:Mi(e,t,Pi),unmergable:Ti(t),selection:zi(t)}},Bi=function(t,e,n,o){t.on("BeforeGetContent",(function(n){!0===n.selection&&_o(e.get(),d,(function(e){n.preventDefault(),function(t){return ln(t[0]).map((function(t){var e=ti(t,"[data-mce-selected]");return _i(e),[e]}))}(e).each((function(e){n.content="text"===n.format?function(t){return M(t,(function(t){return t.dom.innerText})).join("")}(e):function(t,e){return M(e,(function(e){return t.selection.serializer.serialize(e.dom,{})})).join("")}(t,e)}))}),d)})),t.on("BeforeSetContent",(function(e){!0===e.selection&&!0===e.paste&&k.from(t.dom.getParent(t.selection.getStart(),"th,td")).each((function(r){var i=Dt.fromDom(r);ln(i).each((function(r){var a,u,c,l,s=D((a=e.content,(c=(u||document).createElement("div")).innerHTML=a,pe(Dt.fromDom(c))),(function(t){return"meta"!==te(t)}));if(1===s.length&&(l=s[0],"table"===te(l))){e.preventDefault();var f=Dt.fromDom(t.getDoc()),d=pi(f),m=function(t,e,n){return{element:t,clipboard:e,generators:n}}(i,s[0],d);n.pasteCells(r,m).each((function(e){t.selection.setRng(e.rng),t.focus(),o.clear(r)}))}}))}))}))},Ri=wo([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),Ii=q({},Ri),Ni=function(t,e,n,o,r){var i=t.slice(0),a=function(t,e){return 0===t.length?Ii.none():1===t.length?Ii.only(0):0===e?Ii.left(0,1):e===t.length-1?Ii.right(e-1,e):e>0&&e<t.length-1?Ii.middle(e-1,e,e+1):Ii.none()}(t,e),u=m(M(i,m(0)));return a.fold(u,(function(t){return o.singleColumnWidth(i[t],n)}),(function(t,e){return r.calcLeftEdgeDeltas(i,t,e,n,o.minCellWidth(),o.isRelative)}),(function(t,e,a){return r.calcMiddleDeltas(i,t,e,a,n,o.minCellWidth(),o.isRelative)}),(function(t,e){return r.calcRightEdgeDeltas(i,t,e,n,o.minCellWidth(),o.isRelative)}))},Li=function(t,e,n){for(var o=0,r=t;r<e;r++)o+=void 0!==n[r]?n[r]:0;return o},Fi=function(t,e){var n=An.justCells(t);return M(n,(function(t){var n=Li(t.row,t.row+t.rowspan,e);return{element:t.element,height:n,rowspan:t.rowspan}}))},Vi=function(t,e){return An.hasColumns(t)?function(t,e){var n=An.justColumns(t);return M(n,(function(t,n){return{element:t.element,width:e[n],colspan:t.colspan}}))}(t,e):function(t,e){var n=An.justCells(t);return M(n,(function(t){var n=Li(t.column,t.column+t.colspan,e);return{element:t.element,width:n,colspan:t.colspan}}))}(t,e)},ji=function(t,e,n){var o=Vi(t,e);A(o,(function(t){n.setElementWidth(t.element,t.width)}))},Ui=function(t,e,n,o,r){var i=An.fromTable(t),a=r.getCellDelta(e),u=r.getWidths(i,r),c=n===i.grid.columns-1,l=o.clampTableDelta(u,n,a,r.minCellWidth(),c),s=Ni(u,n,l,r,o),f=M(s,(function(t,e){return t+u[e]}));ji(i,f,r),o.resizeTable(r.adjustTableWidth,l,c)},Wi=function(t,e,n,o){var r=An.fromTable(t),i=function(t,e,n){return qr(t,e,n,Dr,(function(t){return t.getOrThunk(nn)}))}(r,t,o),a=M(i,(function(t,o){return n===o?Math.max(e+t,nn()):t})),u=Fi(r,a),c=function(t,e){return M(t.all,(function(t,n){return{element:t.element,height:e[n]}}))}(r,a);A(c,(function(t){Cr(t.element,t.height)})),A(u,(function(t){Cr(t.element,t.height)}));var l=E(a,(function(t,e){return t+e}),0);Cr(t,l)},qi=function(t){return M(t,m(0))},$i=function(t,e,n,o,r){return r(t.slice(0,e)).concat(o).concat(r(t.slice(n)))},Gi=function(t){return function(e,n,o,r){if(t(o)){var i=Math.max(r,e[n]-Math.abs(o)),a=Math.abs(i-e[n]);return o>=0?a:-a}return o}},Yi=Gi((function(t){return t<0})),Xi=Gi(b),Ki=function(){var t=function(t,e,n,o){var r=(100+n)/100,i=Math.max(o,(t[e]+n)/r);return M(t,(function(t,n){return(n===e?i:t/r)-t}))},e=function(e,n,o,r,i,a){return a?t(e,n,r,i):function(t,e,n,o,r){var i=Yi(t,e,o,r);return $i(t,e,n+1,[i,0],qi)}(e,n,o,r,i)},n=function(t,e){return t(e)};return{resizeTable:n,clampTableDelta:Yi,calcLeftEdgeDeltas:e,calcMiddleDeltas:function(t,n,o,r,i,a,u){return e(t,o,r,i,a,u)},calcRightEdgeDeltas:function(e,n,o,r,i,a){if(a)return t(e,o,r,i);var u=Yi(e,o,r,i);return qi(e.slice(0,o)).concat([u])},calcRedestributedWidths:function(t,e,n,o){if(o){var r=(e+n)/e,i=M(t,(function(t){return t/r}));return{delta:100*r-100,newSizes:i}}return{delta:n,newSizes:t}}}},Ji=function(){var t=function(t,e,n,o,r){var i=Xi(t,o>=0?n:e,o,r);return $i(t,e,n+1,[i,-i],qi)};return{resizeTable:function(t,e,n){n&&t(e)},clampTableDelta:function(t,e,n,o,r){if(r){if(n>=0)return n;var i=P(t,(function(t,e){return t+e-o}),0);return Math.max(-i,n)}return Yi(t,e,n,o)},calcLeftEdgeDeltas:t,calcMiddleDeltas:function(e,n,o,r,i,a){return t(e,o,r,i,a)},calcRightEdgeDeltas:function(t,e,n,o,r,i){if(i)return qi(t);var a=o/t.length;return M(t,m(a))},calcRedestributedWidths:function(t,e,n,o){return{delta:0,newSizes:t}}}},Zi=function(t,e){var n=k.from(t.dom.documentElement).map(Dt.fromDom).getOr(t);return{parent:m(n),view:m(t),origin:m(Go(0,0)),isResizable:e}},Qi=function(t,e,n){return{parent:m(e),view:m(t),origin:m(Go(0,0)),isResizable:n}},ta=wo([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),ea=function(t,e,n){var o=n.substring(0,n.length-t.length),r=parseFloat(o);return o===r.toString()?e(r):ta.invalid(n)},na=q(q({},ta),{from:function(t){return ot(t,"%")?ea("%",ta.percent,t):ot(t,"px")?ea("px",ta.pixels,t):ta.invalid(t)}}),oa=function(t,e,n){return t.fold((function(){return e}),(function(t){return function(t,e,n){var o=n/e;return M(t,(function(t){return na.from(t).fold((function(){return t}),(function(t){return t*o+"px"}),(function(t){return t/100*n+"px"}))}))}(e,n,t)}),(function(t){return function(t,e){return M(t,(function(t){return na.from(t).fold((function(){return t}),(function(t){return t/e*100+"%"}),(function(t){return t+"%"}))}))}(e,n)}))},ra=function(t,e,n){var o=na.from(n),r=N(t,(function(t){return"0px"===t}))?function(t,e){var n=t.fold((function(){return m("")}),(function(t){return m(t/e+"px")}),(function(){return m(100/e+"%")}));return T(e,n)}(o,t.length):oa(o,t,e);return ua(r)},ia=function(t,e){return 0===t.length?e:E(t,(function(t,e){return na.from(e).fold(m(0),g,g)+t}),0)},aa=function(t,e){return na.from(t).fold(m(t),(function(t){return t+e+"px"}),(function(t){return t+e+"%"}))},ua=function(t){if(0===t.length)return t;var e=E(t,(function(t,e){var n=na.from(e).fold((function(){return{value:e,remainder:0}}),(function(t){return function(t,e){var n=Math.floor(t);return{value:n+e,remainder:t-n}}(t,"px")}),(function(t){return{value:t+"%",remainder:0}}));return{output:[n.value].concat(t.output),remainder:t.remainder+n.remainder}}),{output:[],remainder:0}),n=e.output;return n.slice(0,n.length-1).concat([aa(n[n.length-1],Math.round(e.remainder))])},ca=na.from,la=function(t){return ca(t).fold(m("px"),m("px"),m("%"))},sa=function(t,e,n,o){var r=An.fromTable(t),i=r.all,a=An.justCells(r),u=An.justColumns(r);e.each((function(e){var n=la(e),i=Ro(t),c=function(t,e,n){return jr(t,e,Nr,Ur,n)}(r,t,o),l=ra(c,i,e);An.hasColumns(r)?function(t,e,n){A(e,(function(e,o){var r=ia([t[o]],en());We(e.element,"width",r+n)}))}(l,u,n):function(t,e,n){A(e,(function(e){var o=t.slice(e.column,e.colspan+e.column),r=ia(o,en());We(e.element,"width",r+n)}))}(l,a,n),We(t,"width",e)})),n.each((function(e){var n=la(e),o=qo(t),u=function(t,e,n){return qr(t,e,n,Lr,Ur)}(r,t,ur);!function(t,e,n,o){A(n,(function(e){var n=t.slice(e.row,e.rowspan+e.row),r=ia(n,nn());We(e.element,"height",r+o)})),A(e,(function(e,n){We(e.element,"height",t[n])}))}(ra(u,o,e),i,a,n),We(t,"height",e)}))},fa=function(t){return zr(t).exists((function(t){return xr.test(t)}))},da=function(t){return zr(t).exists((function(t){return yr.test(t)}))},ma=function(t){return zr(t).isNone()},ga=Pr,pa=function(t){return An.fromTable(t).grid},ha=function(t){var e=[];return{bind:function(t){if(void 0===t)throw new Error("Event bind error: undefined handler");e.push(t)},unbind:function(t){e=D(e,(function(e){return e!==t}))},trigger:function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var r={};A(t,(function(t,e){r[t]=n[e]})),A(e,(function(t){t(r)}))}}},va=function(t){return{registry:Vt(t,(function(t){return{bind:t.bind,unbind:t.unbind}})),trigger:Vt(t,(function(t){return t.trigger}))}},ba=function(t){return t.slice(0).sort()},xa=function(t,e,n){if(0===e.length)throw new Error("You must specify at least one required field.");var o;return function(t,e){if(!a(e))throw new Error("The "+t+" fields must be an array. Was: "+e+".");A(e,(function(e){if(!r(e))throw new Error("The value "+e+" in the "+t+" fields was not a string.")}))}("required",e),o=ba(e),H(o,(function(t,e){return e<o.length-1&&t===o[e+1]})).each((function(t){throw new Error("The field: "+t+" occurs more than once in the combined fields: ["+o.join(", ")+"].")})),function(o){var r=Nt(o);N(e,(function(t){return O(r,t)}))||function(t,e){throw new Error("All required keys ("+ba(t).join(", ")+") were not specified. Specified keys were: "+ba(e).join(", ")+".")}(e,r),t(e,r);var i=D(e,(function(t){return!n.validate(o[t],t)}));return i.length>0&&function(t,e){throw new Error("All values need to be of type: "+e+". Keys ("+ba(t).join(", ")+") were not.")}(i,n.label),o}},ya=function(t,e){var n=D(e,(function(e){return!O(t,e)}));n.length>0&&function(t){throw new Error("Unsupported keys for object: "+ba(t).join(", "))}(n)},wa=function(t){return function(t,e){return xa(t,e,{validate:s,label:"function"})}(ya,t)},ka=wa(["compare","extract","mutate","sink"]),_a=wa(["element","start","stop","destroy"]),Ca=wa(["forceDrop","drop","move","delayDrop"]),Sa=function(){var t=k.none(),e=va({move:ha(["info"])});return{onEvent:function(n,o){o.extract(n).each((function(n){var r=function(e,n){var o=t.map((function(t){return e.compare(t,n)}));return t=k.some(n),o}(o,n);r.each((function(t){e.trigger.move(t)}))}))},reset:function(){t=k.none()},events:e.registry}},Oa=function(){var t,e=(t=va({move:ha(["info"])}),{onEvent:d,reset:d,events:t.registry}),n=Sa(),o=e;return{on:function(){o.reset(),o=n},off:function(){o.reset(),o=e},isOn:function(){return o===n},onEvent:function(t,e){o.onEvent(t,e)},events:n.events}},za=function(t,e,n){var o,r,i,a=!1,u=va({start:ha([]),stop:ha([])}),c=Oa(),l=function(){d.stop(),c.isOn()&&(c.off(),u.trigger.stop())},s=(o=l,r=200,i=null,{cancel:function(){null!==i&&(clearTimeout(i),i=null)},throttle:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];null!==i&&clearTimeout(i),i=setTimeout((function(){o.apply(null,t),i=null}),r)}});c.events.move.bind((function(n){e.mutate(t,n.info)}));var f=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];a&&t.apply(null,e)}},d=e.sink(Ca({forceDrop:l,drop:f(l),move:f((function(t){s.cancel(),c.onEvent(t,e)})),delayDrop:f(s.throttle)}),n);return{element:d.element,go:function(t){d.start(t),c.on(),u.trigger.start()},on:function(){a=!0},off:function(){a=!1},destroy:function(){d.destroy()},events:u.registry}},Ta=function(t){var e,n,o=Dt.fromDom(function(t){if(be()&&l(t.target)){var e=Dt.fromDom(t.target);if(re(e)&&ke(e)&&t.composed&&t.composedPath){var n=t.composedPath();if(n)return j(n)}}return k.from(t.target)}(t).getOr(t.target)),r=function(){return t.stopPropagation()},i=function(){return t.preventDefault()},a=(e=i,n=r,function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];return e(n.apply(null,t))});return function(t,e,n,o,r,i,a){return{target:t,x:e,y:n,stop:o,prevent:r,kill:i,raw:a}}(o,t.clientX,t.clientY,r,i,a,t)},Ma=function(t,e,n,o,r){var i=function(t,e){return function(n){t(n)&&e(Ta(n))}}(n,o);return t.dom.addEventListener(e,i,r),{unbind:p(Aa,t,e,i,r)}},Aa=function(t,e,n,o){t.dom.removeEventListener(e,n,o)},Da=b,Ea=function(t,e,n){return function(t,e,n,o){return Ma(t,e,n,o,!1)}(t,e,Da,n)},Pa=Ta,Ha=function(t,e){var n=Ne(t,e);return void 0===n||""===n?[]:n.split(" ")},Ba=function(t){return void 0!==t.dom.classList},Ra=function(t,e){return function(t,e,n){var o=Ha(t,e).concat([n]);return Re(t,e,o.join(" ")),!0}(t,"class",e)},Ia=function(t,e){Ba(t)?t.dom.classList.add(e):Ra(t,e)},Na=function(t,e){return Ba(t)&&t.dom.classList.contains(e)},La=function(t){var e=t.replace(/\./g,"-");return{resolve:function(t){return e+"-"+t}}},Fa=La("ephox-dragster"),Va=Fa.resolve,ja=ka({compare:function(t,e){return Go(e.left-t.left,e.top-t.top)},extract:function(t){return k.some(Go(t.x,t.y))},sink:function(t,e){var n=function(t){var e=q({layerClass:Va("blocker")},t),n=Dt.fromTag("div");return Re(n,"role","presentation"),qe(n,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Ia(n,Va("blocker")),Ia(n,e.layerClass),{element:function(){return n},destroy:function(){Xn(n)}}}(e),o=Ea(n.element(),"mousedown",t.forceDrop),r=Ea(n.element(),"mouseup",t.drop),i=Ea(n.element(),"mousemove",t.move),a=Ea(n.element(),"mouseout",t.delayDrop);return _a({element:n.element,start:function(t){Wn(t,n.element())},stop:function(){Xn(n.element())},destroy:function(){n.destroy(),r.unbind(),i.unbind(),a.unbind(),o.unbind()}})},mutate:function(t,e){t.mutate(e.left,e.top)}}),Ua=function(t){return"true"===Ne(t,"contenteditable")},Wa=La("ephox-snooker"),qa=Wa.resolve,$a=function(){var t=va({drag:ha(["xDelta","yDelta","target"])}),e=k.none(),n=function(){var t=va({drag:ha(["xDelta","yDelta"])});return{mutate:function(e,n){t.trigger.drag(e,n)},events:t.registry}}();n.events.drag.bind((function(n){e.each((function(e){t.trigger.drag(n.xDelta,n.yDelta,e)}))}));return{assign:function(t){e=k.some(t)},get:function(){return e},mutate:n.mutate,events:t.registry}},Ga=qa("resizer-bar"),Ya=qa("resizer-rows"),Xa=qa("resizer-cols"),Ka=function(t){var e=Te(t.parent(),"."+Ga);A(e,Xn)},Ja=function(t,e,n){var o=t.origin();A(e,(function(e){e.each((function(e){var r=n(o,e);Ia(r,Ga),Wn(t.parent(),r)}))}))},Za=function(t,e,n,o){Ja(t,e,(function(t,e){var r,i,a,u,c,l,s=(r=e.col,i=e.x-t.left,a=n.top-t.top,u=7,c=o,l=Dt.fromTag("div"),qe(l,{position:"absolute",left:i-u/2+"px",top:a+"px",height:c+"px",width:u+"px"}),Ie(l,{"data-column":r,role:"presentation"}),l);return Ia(s,Xa),s}))},Qa=function(t,e,n,o){Ja(t,e,(function(t,e){var r=function(t,e,n,o,r){var i=Dt.fromTag("div");return qe(i,{position:"absolute",left:e+"px",top:n-r/2+"px",height:r+"px",width:o+"px"}),Ie(i,{"data-row":t,role:"presentation"}),i}(e.row,n.left-t.left,e.y-t.top,o,7);return Ia(r,Ya),r}))},tu=function(t,e,n,o,r){var i=Xo(n),a=e.isResizable,u=o.length>0?ur.positions(o,n):[],c=u.length>0?function(t,e){return I(t.all,(function(t,n){return e(t.element)?[n]:[]}))}(t,a):[],l=D(u,(function(t,e){return z(c,(function(t){return e===t}))}));Qa(e,l,i,Io(n));var s=r.length>0?fr.positions(r,n):[],f=s.length>0?function(t,e){var n=[];return T(t.grid.columns,(function(o){var r=An.getColumnAt(t,o).map((function(t){return t.element}));r.forall(e)&&n.push(o)})),D(n,(function(n){var o=An.filterItems(t,(function(t){return t.column===n}));return N(o,(function(t){return e(t.element)}))}))}(t,a):[],d=D(s,(function(t,e){return z(f,(function(t){return e===t}))}));Za(e,d,i,$o(n))},eu=function(t,e){if(Ka(t),t.isResizable(e)){var n=An.fromTable(e),o=Fo(n),r=No(n);tu(n,t,e,o,r)}},nu=function(t,e){var n=Te(t.parent(),"."+Ga);A(n,e)},ou=function(t){nu(t,(function(t){We(t,"display","none")}))},ru=function(t){nu(t,(function(t){We(t,"display","block")}))},iu=qa("resizer-bar-dragging"),au=function(t){var e=$a(),n=function(t,e){void 0===e&&(e={});var n=void 0!==e.mode?e.mode:ja;return za(t,n,e)}(e,{}),o=k.none(),r=function(t,e){return k.from(Ne(t,e))};e.events.drag.bind((function(t){r(t.target,"data-row").each((function(e){var n=tn(t.target,"top");We(t.target,"top",n+t.yDelta+"px")})),r(t.target,"data-column").each((function(e){var n=tn(t.target,"left");We(t.target,"left",n+t.xDelta+"px")}))}));var i=function(t,e){return tn(t,e)-Ke(t,"data-initial-"+e,0)};n.events.stop.bind((function(){e.get().each((function(e){o.each((function(n){r(e,"data-row").each((function(t){var o=i(e,"top");Fe(e,"data-initial-top"),f.trigger.adjustHeight(n,o,parseInt(t,10))})),r(e,"data-column").each((function(t){var o=i(e,"left");Fe(e,"data-initial-left"),f.trigger.adjustWidth(n,o,parseInt(t,10))})),eu(t,n)}))}))}));var a=function(o,r){f.trigger.startAdjust(),e.assign(o),Re(o,"data-initial-"+r,tn(o,r)),Ia(o,iu),We(o,"opacity","0.2"),n.go(t.parent())},u=Ea(t.parent(),"mousedown",(function(t){var e;e=t.target,Na(e,Ya)&&a(t.target,"top"),function(t){return Na(t,Xa)}(t.target)&&a(t.target,"left")})),c=function(e){return Ht(e,t.view())},l=function(t){return He(t,"table",c).filter((function(t){return function(t,e){return He(t,"[contenteditable]",e)}(t,c).exists(Ua)}))},s=Ea(t.view(),"mouseover",(function(e){l(e.target).fold((function(){_e(e.target)&&Ka(t)}),(function(e){o=k.some(e),eu(t,e)}))})),f=va({adjustHeight:ha(["table","delta","row"]),adjustWidth:ha(["table","delta","column"]),startAdjust:ha([])});return{destroy:function(){u.unbind(),s.unbind(),n.destroy(),Ka(t)},refresh:function(e){eu(t,e)},on:n.on,off:n.off,hideBars:p(ou,t),showBars:p(ru,t),events:f.registry}},uu=function(t,e,n){var o=ur,r=fr,i=au(t),a=va({beforeResize:ha(["table","type"]),afterResize:ha(["table","type"]),startDrag:ha([])});return i.events.adjustHeight.bind((function(t){var e=t.table;a.trigger.beforeResize(e,"row");var n=o.delta(t.delta,e);Wi(e,n,t.row,o),a.trigger.afterResize(e,"row")})),i.events.startAdjust.bind((function(t){a.trigger.startDrag()})),i.events.adjustWidth.bind((function(t){var o=t.table;a.trigger.beforeResize(o,"col");var i=r.delta(t.delta,o),u=n(o);Ui(o,i,t.column,e,u),a.trigger.afterResize(o,"col")})),{on:i.on,off:i.off,hideBars:i.hideBars,showBars:i.showBars,destroy:i.destroy,events:a.registry}},cu=function(t,e){return t.fire("newrow",{node:e})},lu=function(t,e){return t.fire("newcell",{node:e})},su=function(t,e,n){t.fire("TableModified",q(q({},n),{table:e}))},fu={structure:!1,style:!0},du={structure:!0,style:!1},mu={"border-collapse":"collapse",width:"100%"},gu={border:"1"},pu="preservetable",hu=function(t){return t.getParam("table_sizing_mode","auto")},vu=function(t){return t.getParam("table_responsive_width")},bu=function(t){return t.getParam("table_default_attributes",gu,"object")},xu=function(t){return t.getParam("table_default_styles",function(t){if(Su(t)){var e=t.getBody().offsetWidth;return q(q({},mu),{width:e+"px"})}return Ou(t)?Ut(mu,(function(t,e){return"width"!==e})):mu}(t),"object")},yu=function(t){return t.getParam("table_cell_advtab",!0,"boolean")},wu=function(t){return t.getParam("table_row_advtab",!0,"boolean")},ku=function(t){return t.getParam("table_advtab",!0,"boolean")},_u=function(t){return t.getParam("table_style_by_css",!1,"boolean")},Cu=function(t){return"relative"===hu(t)||!0===vu(t)},Su=function(t){return"fixed"===hu(t)||!1===vu(t)},Ou=function(t){return"responsive"===hu(t)},zu=function(t){return t.getParam("table_use_colgroups",!1,"boolean")},Tu=function(t){var e="section",n=t.getParam("table_header_type",e,"string");return O(["section","cells","sectionCells","auto"],n)?n:e},Mu=function(t){var e=t.getParam("table_column_resizing",pu,"string");return H(["preservetable","resizetable"],(function(t){return t===e})).getOr(pu)},Au=function(t){return"preservetable"===Mu(t)},Du=function(t){return"resizetable"===Mu(t)},Eu=function(t){var e=t.getParam("table_clone_elements");return r(e)?k.some(e.split(/[ ,]/)):Array.isArray(e)?k.some(e):k.none()},Pu=function(t,e){if(Cu(t)){var n=Ci(t,e.dom).filter(Si).getOrThunk((function(){return ga(e)}));return Zr(n,e)}return Su(t)?Jr(Ro(e),e):Kr(e)},Hu=function(t){Fe(t,"width")},Bu=function(t,e){var n=function(t){return Ro(t)+"px"}(t);sa(t,k.some(n),k.none(),e),Hu(t)},Ru=function(t,e){!function(t,e){var n=Pr(t);sa(t,k.some(n),k.none(),e),Hu(t)}(e,Pu(t,e))},Iu=function(t,e){var n=Pu(t,e);Bu(e,n)},Nu=function(t){Xe(t,"width");var e=cn(t),n=e.length>0?e:un(t);A(n,(function(t){Xe(t,"width"),Hu(t)})),Hu(t)},Lu=function(){var t=Dt.fromTag("div");return qe(t,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),Wn(Ce(Dt.fromDom(document)),t),t},Fu="bar-",Vu=function(t){return"false"!==Ne(t,"data-mce-resize")},ju=function(t){var e,n,o=k.none(),i=k.none(),a=k.none(),u=function(t){return"TABLE"===t.nodeName},c=function(){return i},l=function(e){return Pu(t,e)},s=function(){return Au(t)?Ji():Ki()},f=function(o,r,i){var a=ot(r,"e");if(""===n&&Ru(t,o),i!==e&&""!==n){We(o,"width",n);var u=s(),c=l(o),f=Au(t)||a?function(t){return pa(t).columns}(o)-1:0;Ui(o,i-e,f,u,c)}else if(Si(n)){var d=parseFloat(n.replace("%",""));We(o,"width",i*d/e+"%")}(function(t){return/^(\d+(\.\d+)?)px$/.test(t)})(n)&&function(t){var e=An.fromTable(t);An.hasColumns(e)||A(un(t),(function(t){var e=$e(t,"width");We(t,"width",e),Fe(t,"width")}))}(o)};return t.on("init",(function(){var e=function(t,e){return t.inline?Qi(bi(t),Lu(),e):Zi(Dt.fromDom(t.getDoc()),e)}(t,Vu);if(a=k.some(e),function(t){var e=t.getParam("object_resizing",!0);return r(e)?"table"===e:e}(t)&&function(t){return t.getParam("table_resize_bars",!0,"boolean")}(t)){var n=s(),u=uu(e,n,l);u.on(),u.events.startDrag.bind((function(e){o=k.some(t.selection.getRng())})),u.events.beforeResize.bind((function(e){var n=e.table.dom;!function(t,e,n,o,r){t.fire("ObjectResizeStart",{target:e,width:n,height:o,origin:r})}(t,n,xi(n),yi(n),Fu+e.type)})),u.events.afterResize.bind((function(e){var n=e.table,r=n.dom;_i(n),o.each((function(e){t.selection.setRng(e),t.focus()})),function(t,e,n,o,r){t.fire("ObjectResized",{target:e,width:n,height:o,origin:r})}(t,r,xi(r),yi(r),Fu+e.type),t.undoManager.add()})),i=k.some(u)}})),t.on("ObjectResizeStart",(function(o){var r=o.target;if(u(r)){var i=Dt.fromDom(r);A(t.dom.select(".mce-clonedresizable"),(function(e){t.dom.addClass(e,"mce-"+Mu(t)+"-columns")})),!da(i)&&Su(t)?Iu(t,i):!fa(i)&&Cu(t)&&Ru(t,i),ma(i)&&nt(o.origin,Fu)&&Ru(t,i),e=o.width,n=Ou(t)?"":Ci(t,r).getOr("")}})),t.on("ObjectResized",(function(e){var n=e.target;if(u(n)){var o=Dt.fromDom(n),r=e.origin;nt(r,"corner-")&&f(o,r,e.width),_i(o),su(t,o.dom,fu)}})),t.on("SwitchMode",(function(){c().each((function(e){t.mode.isReadOnly()?e.hideBars():e.showBars()}))})),{lazyResize:c,lazyWire:function(){return a.getOr(Zi(Dt.fromDom(t.getBody()),Vu))},destroy:function(){i.each((function(t){t.destroy()})),a.each((function(e){!function(t,e){t.inline&&Xn(e.parent())}(t,e)}))}}},Uu=function(t,e){return{element:t,offset:e}},Wu=function t(e,n,o){return e.property().isText(n)&&0===e.property().getText(n).trim().length||e.property().isComment(n)?o(n).bind((function(n){return t(e,n,o).orThunk((function(){return k.some(n)}))})):k.none()},qu=function(t,e){return t.property().isText(e)?t.property().getText(e).length:t.property().children(e).length},$u=function t(e,n){var o=Wu(e,n,e.query().prevSibling).getOr(n);if(e.property().isText(o))return Uu(o,qu(e,o));var r=e.property().children(o);return r.length>0?t(e,r[r.length-1]):Uu(o,qu(e,o))},Gu=no(),Yu=function(t,e){if(1===Je(t,"colspan")){var n=function(t){return zr(t).bind((function(t){return gr(t,["fixed","relative","empty"])}))}(t);n.each((function(n){var o=n.value/2;Er(t,o,n.unit),Er(e,o,n.unit)}))}},Xu=function(t,e,n,o){n===o?Fe(t,e):Re(t,e,n)},Ku=function(t,e,n){U(ze(t,e)).fold((function(){return Un(t,n)}),(function(t){return jn(t,n)}))},Ju=function(t,e){var n=[],o=[],r=function(t){return M(t,(function(t){t.isNew&&n.push(t.element);var e=t.element;return Yn(e),A(t.cells,(function(t){t.isNew&&o.push(t.element),Xu(t.element,"colspan",t.colspan,1),Xu(t.element,"rowspan",t.rowspan,1),Wn(e,t.element)})),e}))},i=function(t){return I(t,(function(t){return M(t.cells,(function(t){return Xu(t.element,"span",t.colspan,1),t.element}))}))},a=function(e,n){var o=function(t,e){var n=Ee(t,e).getOrThunk((function(){var n=Dt.fromTag(e,le(t).dom);return"thead"===e?Ku(t,"caption,colgroup",n):"colgroup"===e?Ku(t,"caption",n):Wn(t,n),n}));return Yn(n),n}(t,n),a=("colgroup"===n?i:r)(e);Gn(o,a)},u=function(e,n){e.length>0?a(e,n):function(e){Ee(t,e).each(Xn)}(n)},c=[],l=[],s=[],f=[];return A(e,(function(t){switch(t.section){case"thead":c.push(t);break;case"tbody":l.push(t);break;case"tfoot":s.push(t);break;case"colgroup":f.push(t)}})),u(f,"colgroup"),u(c,"thead"),u(l,"tbody"),u(s,"tfoot"),{newRows:n,newCells:o}},Zu=function(t,e){if(0===t.length)return 0;var n=t[0];return B(t,(function(t){return!e(n.element,t.element)})).fold((function(){return t.length}),(function(t){return t}))},Qu=function(t,e,n,o){var r=function(t,e){return t[e]}(t,e).cells.slice(n),i=Zu(r,o),a=function(t,e){return M(t,(function(t){return yn(t,e)}))}(t,n).slice(e);return{colspan:i,rowspan:Zu(a,o)}},tc=function(t,e){var n=M(t,(function(t){return M(t.cells,v)}));return M(t,(function(o,r){var i=I(o.cells,(function(o,i){if(!1===n[r][i]){var a=Qu(t,r,i,e);return function(t,e,o,r){for(var i=t;i<t+o;i++)for(var a=e;a<e+r;a++)n[i][a]=!0}(r,i,a.rowspan,a.colspan),[(u=o.element,c=a.rowspan,l=a.colspan,s=o.isNew,{element:u,rowspan:c,colspan:l,isNew:s})]}return[];var u,c,l,s}));return function(t,e){return{details:t,section:e}}(i,o.section)}))},ec=function(t,e,n){var o=[];if(An.hasColumns(t)){var r=M(An.justColumns(t),(function(t){return Zt(t.element,n,!1)}));o.push(Qt(r,"colgroup"))}for(var i=0;i<t.grid.rows;i++){for(var a=[],u=0;u<t.grid.columns;u++){var c=An.getAt(t,i,u).map((function(t){return Zt(t.element,n,t.isLocked)})).getOrThunk((function(){return Zt(e.gap(),!0,!1)}));a.push(c)}var l=Qt(a,t.all[i].section);o.push(l)}return o},nc=function(t,e){return M(t,(function(t){var n=function(t){var n=W(t,(function(t){return fe(t.element).map((function(t){var e=fe(t).isNone();return Zt(t,e,!1)}))}));return n.getOrThunk((function(){return Zt(e.row(),!0,!1)}))}(t.details);return function(t,e,n,o){return{element:t,cells:e,section:n,isNew:o}}(n.element,t.details,t.section,n.isNew)}))},oc=function(t,e){var n=tc(t,Ht);return nc(n,e)},rc=function(t,e){return W(t.all,(function(t){return H(t.cells,(function(t){return Ht(e,t.element)}))}))},ic=function(t,e,n){var o=M(e.selection,(function(e){return an(e).bind((function(e){return rc(t,e)})).filter(n)})),r=Eo(o);return Po(r.length>0,r)},ac=function(t,e,n,o,r){return function(i,a,u,c,l,s){var f=An.fromTable(a);return e(f,u).map((function(e){var n=function(t,e){return ec(t,e,!1)}(f,c),o=t(n,e,Ht,r(c)),i=On(o.grid);return{info:e,grid:oc(o.grid,c),cursor:o.cursor,lockedColumns:i}})).bind((function(t){var e=Ju(a,t.grid),r=k.from(l).getOrThunk((function(){return Kr(a)})),u=k.from(s).getOrThunk(Ji);return n(a,t.grid,t.info,r,u),o(a),eu(i,a),Fe(a,Cn),t.lockedColumns.length>0&&Re(a,Cn,t.lockedColumns.join(",")),k.some({cursor:t.cursor,newRows:e.newRows,newCells:e.newCells})}))}},uc=function(t,e){return ic(t,e,b).map((function(t){return{cells:t,generators:e.generators,clipboard:e.clipboard}}))},cc=function(t,e){return ic(t,e,b)},lc=function(t,e){return ic(t,e,(function(t){return!t.isLocked}))},sc=function(t,e){return N(e,(function(e){return function(t,e){return rc(t,e).exists((function(t){return!t.isLocked}))}(t,e)}))},fc=function(t,e){return function(t,e){return e.mergable}(0,e).filter((function(e){return sc(t,e.cells)}))},dc=function(t,e){return function(t,e){return e.unmergable}(0,e).filter((function(e){return sc(t,e)}))},mc=function(t,e,n,o){for(var r=_n(t).rows,i=!0,a=0;a<r.length;a++)for(var u=0;u<kn(r[0]);u++){var c=r[a],l=yn(c,u),s=n(l.element,e);!0===s&&!1===i?vn(c,u,Zt(o(),!0,l.isLocked)):!0===s&&(i=!1)}return t},gc=function(t,e,n,o){var r=_n(t).rows;if(e>0&&e<r.length){var i=function(t,e){return P(t,(function(t,n){return z(t,(function(t){return e(t.element,n.element)}))?t:t.concat([n])}),[])}(r[e-1].cells,n);A(i,(function(t){for(var i=k.none(),a=e;a<r.length;a++)for(var u=function(e){var u=r[a],c=yn(u,e);n(c.element,t.element)&&(i.isNone()&&(i=k.some(o())),i.each((function(t){vn(u,e,Zt(t,!0,c.isLocked))})))},c=0;c<kn(r[0]);c++)u(c)}))}return t},pc=function t(e){return{is:function(t){return e===t},isValue:b,isError:v,getOr:m(e),getOrThunk:m(e),getOrDie:m(e),or:function(n){return t(e)},orThunk:function(n){return t(e)},fold:function(t,n){return n(e)},map:function(n){return t(n(e))},mapError:function(n){return t(e)},each:function(t){t(e)},bind:function(t){return t(e)},exists:function(t){return t(e)},forall:function(t){return t(e)},toOptional:function(){return k.some(e)}}},hc=function t(e){return{is:v,isValue:v,isError:b,getOr:g,getOrThunk:function(t){return t()},getOrDie:function(){return(t=String(e),function(){throw new Error(t)})();var t},or:function(t){return t},orThunk:function(t){return t()},fold:function(t,n){return t(e)},map:function(n){return t(e)},mapError:function(n){return t(n(e))},each:d,bind:function(n){return t(e)},exists:v,forall:b,toOptional:k.none}},vc=pc,bc=hc,xc=function(t,e){return{rowDelta:0,colDelta:kn(t[0])-kn(e[0])}},yc=function(t,e){return{rowDelta:t.length-e.length,colDelta:0}},wc=function(t,e,n,o){var r="colgroup"===e.section?n.col:n.cell;return T(t,(function(t){return Zt(r(),!0,o(t))}))},kc=function(t,e,n,o){return t.concat(T(e,(function(){var e=t[t.length-1],r=wc(e.cells.length,e,n,(function(t){return Gt(o,t.toString())}));return bn(e,r)})))},_c=function(t,e,n,o){return M(t,(function(t){var r=wc(e,t,n,v);return pn(t,o,r)}))},Cc=function(t,e,n){var o=e.colDelta<0?_c:g,r=e.rowDelta<0?kc:g,i=On(t),a=kn(t[0]),u=z(i,(function(t){return t===a-1})),c=o(t,Math.abs(e.colDelta),n,u?a-1:a),l=On(c);return r(c,Math.abs(e.rowDelta),n,L(l,b))},Sc=function(t,e,n,o){var r=p(o,yn(t[e],n).element),i=t[e];return t.length>1&&kn(i)>1&&(n>0&&r(wn(i,n-1))||n<i.cells.length-1&&r(wn(i,n+1))||e>0&&r(wn(t[e-1],n))||e<t.length-1&&r(wn(t[e+1],n)))},Oc=function(t,e,n){return D(n,(function(n){return n>=t.column&&n<=kn(e[0])+t.column}))},zc=function(t,e,n,o,r){var i=On(e),a=function(t,e,n){var o=kn(e[0]),r=_n(e).cols.length+t.row,i=T(o-t.column,(function(e){return e+t.column})),a=H(i,(function(t){return N(n,(function(e){return e!==t}))})).getOr(o-1);return{row:r,column:a}}(t,e,i),u=_n(n).rows,c=Oc(a,u,i),l=function(t,e,n){if(t.row>=e.length||t.column>kn(e[0]))return bc("invalid start address out of table bounds, row: "+t.row+", column: "+t.column);var o=e.slice(t.row),r=o[0].cells.slice(t.column),i=kn(n[0]),a=n.length;return vc({rowDelta:o.length-a,colDelta:r.length-i})}(a,e,u);return l.map((function(t){var n=q(q({},t),{colDelta:t.colDelta-c.length}),i=Cc(e,n,o),l=On(i),s=Oc(a,u,l);return function(t,e,n,o,r,i){for(var a=t.row,u=t.column,c=a+n.length,l=u+kn(n[0])+i.length,s=L(i,b),f=a;f<c;f++)for(var d=0,m=u;m<l;m++)if(s[m])d++;else{Sc(e,f,m,r)&&mc(e,wn(e[f],m),r,o.cell);var g=m-u-d,p=yn(n[f-a],g),h=p.element,v=o.replace(h);vn(e[f],m,Zt(v,!0,p.isLocked))}return e}(a,i,u,o,r,s)}))},Tc=function(t,e,n,o,r){!function(t,e,n,o){e>0&&e<t[0].cells.length&&A(t,(function(t){var r=t.cells[e-1],i=t.cells[e];n(i.element,r.element)&&vn(t,e,Zt(o(),!0,i.isLocked))}))}(e,t,r,o.cell);var i=yc(n,e),a=Cc(n,i,o),u=yc(e,a),c=Cc(e,u,o);return M(c,(function(e,n){return pn(e,t,a[n].cells)}))},Mc=function(t,e,n,o,r){gc(e,t,r,o.cell);var i=On(e),a=xc(e,n),u=q(q({},a),{colDelta:a.colDelta-i.length}),c=Cc(e,u,o),l=_n(c),s=l.cols,f=l.rows,d=On(c),m=xc(n,e),g=q(q({},m),{colDelta:m.colDelta+d.length}),p=function(t,e,n){return M(t,(function(t){return P(n,(function(n,o){var r=wc(1,t,e,b)[0];return hn(n,o,r)}),t)}))}(n,o,d),h=Cc(p,g,o);return s.concat(f.slice(0,t)).concat(h).concat(f.slice(t,f.length))},Ac=function(t,e,n,o,r){var i=_n(t),a=i.rows,u=i.cols,c=a.slice(0,e),l=a.slice(e),s=xn(a[n],(function(t,n){return e>0&&e<a.length&&o(wn(a[e-1],n),wn(a[e],n))?yn(a[e],n):Zt(r(t.element,o),!0,t.isLocked)}));return u.concat(c).concat([s]).concat(l)},Dc=function(t,e,n,o,r){return M(t,(function(t){var i=e>0&&e<kn(t)&&o(wn(t,e-1),wn(t,e)),a=function(t,e,n,o,r,i,a){if("colgroup"!==n&&o)return yn(t,e);var u=yn(t,r);return Zt(a(u.element,i),!0,!1)}(t,e,t.section,i,n,o,r);return hn(t,e,a)}))},Ec=function(t,e,n,o){return M(t,(function(t){return xn(t,(function(t){return function(t){return z(e,(function(e){return n(t.element,e.element)}))}(t)?Zt(o(t.element,n),!0,t.isLocked):t}))}))},Pc=function(t,e,n,o){var r=_n(t).rows,i=I(r,(function(o,r){var i=function(t,e,n,o){return void 0!==wn(t[e],n)&&e>0&&o(wn(t[e-1],n),wn(t[e],n))}(t,r,e,n)||function(t,e,n){return e>0&&n(wn(t,e-1),wn(t,e))}(o,e,n);return i?[]:[yn(o,e)]}));return Ec(t,i,n,o)},Hc=function(t){return P(t,(function(t,e){return z(t,(function(t){return t.column===e.column}))?t:t.concat([e])}),[]).sort((function(t,e){return t.column-e.column}))},Bc=function(t){return{element:t,colspan:Ke(t,"colspan",1),rowspan:Ke(t,"rowspan",1)}},Rc=function(t){return Le(t,"scope").map((function(t){return t.substr(0,3)}))},Ic=function(t,e){void 0===e&&(e=Bc);var n=$r(k.none()),o=function(n){return function(e){return"col"===te(e.element)?t.col(e):t.cell(e)}(e(n))},r=function(t){var e=o(t);return n.get().isNone()&&n.set(k.some(e)),i=k.some({item:t,replacement:e}),e},i=k.none();return{getOrInit:function(t,e){return i.fold((function(){return r(t)}),(function(n){return e(t,n.item)?n.replacement:r(t)}))},cursor:n.get}},Nc=function(t,e){return function(n){var o=$r(k.none()),r=[],i=function(i){var a={scope:t},u=n.replace(i,e,a);return r.push({item:i,sub:u}),o.get().isNone()&&o.set(k.some(u)),u};return{replaceOrInit:function(t,e){return"col"===te(t)?t:function(t,e){return H(r,(function(n){return e(n.item,t)}))}(t,e).fold((function(){return i(t)}),(function(n){return e(t,n.item)?n.sub:i(t)}))},cursor:o.get}}},Lc=function(t){var e=$r(k.none());return{unmerge:function(n){e.get().isNone()&&e.set(k.some(n));var o=Rc(n);return o.each((function(t){return Re(n,"scope",t)})),function(){var e=t.cell({element:n,colspan:1,rowspan:1});return Xe(e,"width"),Xe(n,"width"),o.each((function(t){return Re(e,"scope",t)})),e}},merge:function(t){return Xe(t[0],"width"),function(){var e=Eo(M(t,Rc));if(0===e.length)return k.none();var n=e[0],o=["row","col"];return z(e,(function(t){return t!==n&&O(o,t)}))?k.none():k.from(n)}().fold((function(){return Fe(t[0],"scope")}),(function(e){return Re(t[0],"scope",e+"group")})),m(t[0])},cursor:e.get}},Fc=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Vc=no(),jc=function(t){return function(t,e){var n=t.property().name(e);return O(Fc,n)}(Vc,t)},Uc=function(t){return function(t,e){var n=t.property().name(e);return O(["ol","ul"],n)}(Vc,t)},Wc=function(t){return function(t,e){return O(["br","img","hr","input"],t.property().name(e))}(Vc,t)},qc=function(t){var e,n=function(t){return"br"===te(t)},o=function(t){return ii(t).bind((function(e){var o=ge(e).map((function(t){return!!jc(t)||!!Wc(t)&&"img"!==te(t)})).getOr(!1);return fe(e).map((function(r){return!0===o||function(t){return"li"===te(t)||Ae(t,Uc).isSome()}(r)||n(e)||jc(r)&&!Ht(t,r)?[]:[Dt.fromTag("br")]}))})).getOr([])},r=(e=I(t,(function(t){var e=pe(t);return function(t){return N(t,(function(t){return n(t)||ie(t)&&0===Zn(t).trim().length}))}(e)?[]:e.concat(o(t))})),0===e.length?[Dt.fromTag("br")]:e);Yn(t[0]),Gn(t[0],r)},$c=function(t){0===un(t).length&&Xn(t)},Gc=function(t,e){return{grid:t,cursor:e}},Yc=function(t,e,n){var o=_n(t).rows;return Xc(o,e,n).orThunk((function(){return Xc(o,0,0)}))},Xc=function(t,e,n){return k.from(t[e]).bind((function(t){return k.from(t.cells[n]).bind((function(t){return k.from(t.element)}))}))},Kc=function(t,e,n){var o=_n(t).rows;return Gc(t,Xc(o,e,n))},Jc=function(t){return P(t,(function(t,e){return z(t,(function(t){return t.row===e.row}))?t:t.concat([e])}),[]).sort((function(t,e){return t.row-e.row}))},Zc=function(t,e,n){var o,r,i=(o=t,r=n.section,dn(o,(function(){return r}))),a=An.generate(i);return ec(a,e,!0)},Qc=function(t,e){var n=D(t,e);return 0===n.length?k.some("td"):n.length===t.length?k.some("th"):k.none()},tl=function(t,e,n,o){var r=An.generate(e),i=o.getWidths(r,o);ji(r,i,o)},el=function(t,e,n,o,r){var i=An.generate(e),a=o.getWidths(i,o),u=o.pixelWidth(),c=r.calcRedestributedWidths(a,u,n.pixelDelta,o.isRelative),l=c.newSizes,s=c.delta;ji(i,l,o),o.adjustTableWidth(s)},nl=function(t,e){return z(e,(function(t){return 0===t.column&&t.isLocked}))},ol=function(t,e){return z(e,(function(e){return e.column+e.colspan>=t.grid.columns&&e.isLocked}))},rl=function(t,e){var n=No(t),o=Hc(e);return P(o,(function(t,e){return t+n[e.column].map(Io).getOr(0)}),0)},il=function(t){return function(e,n){return cc(e,n).filter((function(n){return!(t?nl:ol)(e,n)})).map((function(t){return{details:t,pixelDelta:rl(e,t)}}))}},al=function(t){return function(e,n){return uc(e,n).filter((function(n){return!(t?nl:ol)(e,n.cells)}))}},ul=ac((function(t,e,n,o){var r=e[0].row,i=Jc(e),a=E(i,(function(t,e){return{grid:Ac(t.grid,r,e.row+t.delta,n,o.getOrInit),delta:t.delta+1}}),{grid:t,delta:0}).grid;return Kc(a,r,e[0].column)}),cc,d,d,Ic),cl=ac((function(t,e,n,o){var r=Jc(e),i=r[r.length-1],a=i.row+i.rowspan,u=E(r,(function(t,e){return Ac(t,a,e.row,n,o.getOrInit)}),t);return Kc(u,a,e[0].column)}),cc,d,d,Ic),ll=ac((function(t,e,n,o){var r=e.details,i=Hc(r),a=i[0].column,u=E(i,(function(t,e){return{grid:Dc(t.grid,a,e.column+t.delta,n,o.getOrInit),delta:t.delta+1}}),{grid:t,delta:0}).grid;return Kc(u,r[0].row,a)}),il(!0),el,d,Ic),sl=ac((function(t,e,n,o){var r=e.details,i=r[r.length-1],a=i.column+i.colspan,u=Hc(r),c=E(u,(function(t,e){return Dc(t,a,e.column,n,o.getOrInit)}),t);return Kc(c,r[0].row,a)}),il(!1),el,d,Ic),fl=ac((function(t,e,n,o){var r=Hc(e.details),i=function(t,e){return I(t,(function(t){var n=t.cells,o=E(e,(function(t,e){return e>=0&&e<t.length?t.slice(0,e).concat(t.slice(e+1)):t}),n);return o.length>0?[Qt(o,t.section)]:[]}))}(t,M(r,(function(t){return t.column}))),a=Yc(i,r[0].row,r[0].column);return Gc(i,a)}),(function(t,e){return lc(t,e).map((function(e){return{details:e,pixelDelta:-rl(t,e)}}))}),el,$c,Ic),dl=ac((function(t,e,n,o){var r=Jc(e),i=function(t,e,n){var o=_n(t),r=o.rows;return o.cols.concat(r.slice(0,e)).concat(r.slice(n+1))}(t,r[0].row,r[r.length-1].row),a=Yc(i,e[0].row,e[0].column);return Gc(i,a)}),cc,d,$c,Ic),ml=ac((function(t,e,n,o){var r=Hc(e),i=P(r,(function(t,e){return Pc(t,e.column,n,o.replaceOrInit)}),t);return Kc(i,e[0].row,e[0].column)}),lc,d,d,Nc("row","th")),gl=ac((function(t,e,n,o){var r=Hc(e),i=P(r,(function(t,e){return Pc(t,e.column,n,o.replaceOrInit)}),t);return Kc(i,e[0].row,e[0].column)}),lc,d,d,Nc(null,"td")),pl=ac((function(t,e,n,o){var r=e.cells;qc(r);var i=function(t,e,n,o){var r=_n(t).rows;if(0===r.length)return t;for(var i=e.startRow;i<=e.finishRow;i++)for(var a=e.startCol;a<=e.finishCol;a++){var u=r[i],c=yn(u,a).isLocked;vn(u,a,Zt(o(),!1,c))}return t}(t,e.bounds,0,o.merge(r));return Gc(i,k.from(r[0]))}),fc,tl,d,Lc),hl=ac((function(t,e,n,o){var r=E(e,(function(t,e){return mc(t,e,n,o.unmerge(e))}),t);return Gc(r,k.from(e[0]))}),dc,tl,d,Lc),vl=ac((function(t,e,n,o){var r=function(t,e){var n=An.fromTable(t);return ec(n,e,!0)}(e.clipboard,e.generators),i=function(t,e){return{row:t,column:e}}(e.row,e.column);return zc(i,t,r,e.generators,n).fold((function(){return Gc(t,k.some(e.element))}),(function(t){var n=Yc(t,e.row,e.column);return Gc(t,n)}))}),(function(t,e){return an(e.element).bind((function(n){return rc(t,n).map((function(t){return q(q({},t),{generators:e.generators,clipboard:e.clipboard})}))}))}),tl,d,Ic),bl=ac((function(t,e,n,o){var r=_n(t).rows,i=e.cells[0].column,a=r[e.cells[0].row],u=Zc(e.clipboard,e.generators,a),c=Tc(i,t,u,e.generators,n),l=Yc(c,e.cells[0].row,e.cells[0].column);return Gc(c,l)}),al(!0),d,d,Ic),xl=ac((function(t,e,n,o){var r=_n(t).rows,i=e.cells[e.cells.length-1].column+e.cells[e.cells.length-1].colspan,a=r[e.cells[0].row],u=Zc(e.clipboard,e.generators,a),c=Tc(i,t,u,e.generators,n),l=Yc(c,e.cells[0].row,e.cells[0].column);return Gc(c,l)}),al(!1),d,d,Ic),yl=ac((function(t,e,n,o){var r=_n(t).rows,i=e.cells[0].row,a=r[i],u=Zc(e.clipboard,e.generators,a),c=Mc(i,t,u,e.generators,n),l=Yc(c,e.cells[0].row,e.cells[0].column);return Gc(c,l)}),uc,d,d,Ic),wl=ac((function(t,e,n,o){var r=_n(t).rows,i=e.cells[e.cells.length-1].row+e.cells[e.cells.length-1].rowspan,a=r[e.cells[0].row],u=Zc(e.clipboard,e.generators,a),c=Mc(i,t,u,e.generators,n),l=Yc(c,e.cells[0].row,e.cells[0].column);return Gc(c,l)}),uc,d,d,Ic),kl=function(t,e){var n=An.fromTable(t);return cc(n,e).bind((function(t){var e=t[t.length-1],o=t[0].column,r=e.column+e.colspan,i=R(M(n.all,(function(t){return D(t.cells,(function(t){return t.column>=o&&t.column<r}))})));return Qc(i,(function(t){return"th"===te(t.element)}))})).getOr("")},_l=function(t){return vi(t.parentNode)},Cl=function(t,e){var n="thead"===_l(e),o=!z(e.cells,(function(t){return"th"!==vi(t)}));return n||o?k.some({thead:n,ths:o}):k.none()},Sl=function(t,e){return"thead"===(n=Cl(0,e).fold((function(){return _l(e)}),(function(t){return"thead"})))?"header":"tfoot"===n?"footer":"body";var n},Ol=function(t,e,n){var o=t.getParent(e,"table"),r=e.parentNode,i=vi(r);if(n!==i){var a=t.select(n,o)[0];if(!a){a=t.create(n);var u=o.firstChild;"thead"===n?U(ze(Dt.fromDom(o),"caption,colgroup")).fold((function(){return o.insertBefore(a,u)}),(function(e){return t.insertAfter(a,e.dom)})):o.appendChild(a)}"tbody"===n&&"thead"===i&&a.firstChild?a.insertBefore(e,a.firstChild):a.appendChild(e),r.hasChildNodes()||t.remove(r)}},zl=function(t,e,n,o){var r=t.dom,i=function(t,e,n){if(l(n)&&vi(e)!==n){var o=t.dom.rename(e,n);return lu(t,o),o}return e}(t,e,n);return c(o)||r.setAttrib(i,"scope",o),i},Tl=function(t,e,n,o){return A(e,(function(e){return zl(t,e,n,o)}))},Ml=function(t,e,n){var o,r=t.dom;if("header"===n){var i=Tu(t),a="auto"===i?(o=ln(Dt.fromDom(e.cells[0])).map((function(t){return sn(t)})).getOr([]),W(o,(function(t){return Cl(0,t.dom)})).map((function(t){return t.thead&&t.ths?"sectionCells":t.thead?"section":"cells"})).getOr("section")):i;Tl(t,e.cells,"section"===a?"td":"th","col"),Ol(r,e,"cells"===a?"tbody":"thead")}else Tl(t,e.cells,"td",null),Ol(r,e,"footer"===n?"tfoot":"tbody")},Al=function(t){return function(e,n){var o=te(e),r="col"===o||"colgroup"===o?function(t){return ln(t).bind((function(t){return xo(t,Pi.firstSelectedSelector)})).fold((function(){return t}),(function(t){return t[0]}))}(e):e;return He(r,t,n)}},Dl=Al("th,td"),El=Al("th,td,caption"),Pl=function(t,e,n){return Dl(t,n).map((function(t){return zi(e)})).getOr([])},Hl=function(t,e){var n,o,r,i=Dl(t),a=i.bind((function(t){return ln(t)})).map((function(t){return sn(t)}));return(n=i,o=a,r=function(t,n){return D(n,(function(n){return z(hi(n.dom.cells),(function(n){return"1"===Ne(n,e)||Ht(n,t)}))}))},n.isSome()&&o.isSome()?k.some(r(n.getOrDie(),o.getOrDie())):k.none()).getOr([])},Bl=function(t,e,n){var o=function(t){return"table"===te(bi(t))},r=Eu(t),i=Du(t)?d:Yu,a=function(e,n,o,i,a){return function(u,c){_i(u);var l=i(),s=Dt.fromDom(t.getDoc()),f=gi(o,s,r),d=Pu(t,u),m=Du(t)?Ki():Ji();return n(u)?e(l,u,c,f,d,m).bind((function(e){return A(e.newRows,(function(e){cu(t,e.dom)})),A(e.newCells,(function(e){lu(t,e.dom)})),e.cursor.map((function(e){var n=$u(Gu,e),o=t.dom.createRng();return o.setStart(n.element.dom,n.offset),o.setEnd(n.element.dom,n.offset),{rng:o,effect:a}}))})):k.none()}},u=a(dl,(function(e){return!1===o(t)||pa(e).rows>1}),d,e,du),c=a(fl,(function(e){return!1===o(t)||pa(e).columns>1}),d,e,du),l=a(ul,b,d,e,du),s=a(cl,b,d,e,du),f=a(ll,b,i,e,du),m=a(sl,b,i,e,du),g=a(pl,b,d,e,du),p=a(hl,b,d,e,du),h=a(bl,b,d,e,du),v=a(xl,b,d,e,du),x=a(yl,b,d,e,du),y=a(wl,b,d,e,du),w=a(vl,b,d,e,du),_=function(t,e){return $t(t,"type").filter((function(t){return O(e,t)}))};return{deleteRow:u,deleteColumn:c,insertRowsBefore:l,insertRowsAfter:s,insertColumnsBefore:f,insertColumnsAfter:m,mergeCells:g,unmergeCells:p,pasteColsBefore:h,pasteColsAfter:v,pasteRowsBefore:x,pasteRowsAfter:y,pasteCells:w,setTableCellType:function(t,e){return _(e,["td","th"]).each((function(e){var o=M(Pl(Oi(t),n),(function(t){return t.dom}));Tl(t,o,e,null)}))},setTableRowType:function(t,e){return _(e,["header","body","footer"]).each((function(e){M(Hl(Oi(t),Pi.selected),(function(n){return Ml(t,n.dom,e)}))}))},makeColumnsHeader:a(ml,b,d,e,du),unmakeColumnsHeader:a(gl,b,d,e,du),getTableRowType:function(t){var e=Hl(Oi(t),Pi.selected);if(e.length>0){var n=M(e,(function(t){return Sl(0,t.dom)})),o=O(n,"header"),r=O(n,"footer");if(o||r){var i=O(n,"body");return!o||i||r?o||i||!r?"":"footer":"header"}return"body"}},getTableCellType:function(t){return Qc(Pl(Oi(t),n),(function(t){return"th"===te(t)})).getOr("")},getTableColType:kl}},Rl={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},Il=function(t){var e=Dt.fromTag("colgroup");return T(t,(function(){return Wn(e,Dt.fromTag("col"))})),e},Nl=function(t,e,n,o){return T(t,(function(t){return function(t,e,n,o){for(var r=Dt.fromTag("tr"),i=0;i<t;i++){var a=o<e||i<n?Dt.fromTag("th"):Dt.fromTag("td");i<n&&Re(a,"scope","row"),o<e&&Re(a,"scope","col"),Wn(a,Dt.fromTag("br")),Wn(r,a)}return r}(e,n,o,t)}))},Ll=function(t,e){t.selection.select(e.dom,!0),t.selection.collapse(!0)},Fl=function(t,e,n,o,i){var a=xu(t),u={styles:a,attributes:bu(t),colGroups:zu(t)};return t.undoManager.ignore((function(){var r=function(t,e,n,o,r,i){void 0===i&&(i=Rl);var a=Dt.fromTag("table"),u="cells"!==r;qe(a,i.styles),Ie(a,i.attributes),i.colGroups&&Wn(a,Il(e));var c=Math.min(t,n);if(u&&n>0){var l=Dt.fromTag("thead");Wn(a,l);var s=Nl(n,e,"sectionCells"===r?c:0,o);Gn(l,s)}var f=Dt.fromTag("tbody");Wn(a,f);var d=Nl(u?t-c:t,e,u?0:n,o);return Gn(f,d),a}(n,e,i,o,Tu(t),u);Re(r,"data-mce-id","__mce");var a=function(t){var e=Dt.fromTag("div"),n=Dt.fromDom(t.dom.cloneNode(!0));return Wn(e,n),function(t){return t.dom.innerHTML}(e)}(r);t.insertContent(a),t.addVisual()})),Pe(bi(t),'table[data-mce-id="__mce"]').map((function(e){return Su(t)?Iu(t,e):Ou(t)?Nu(e):(Cu(t)||function(t){return r(t)&&-1!==t.indexOf("%")}(a.width))&&Ru(t,e),_i(e),Fe(e,"data-mce-id"),function(t,e){A(Te(e,"tr"),(function(e){cu(t,e.dom),A(Te(e,"th,td"),(function(e){lu(t,e.dom)}))}))}(t,e),function(t,e){Pe(e,"td,th").each(p(Ll,t))}(t,e),e.dom})).getOr(null)},Vl=function(t,e,n,o,r){void 0===o&&(o={});var i=function(t){return f(t)&&t>0};if(i(e)&&i(n)){var a=o.headerRows||0,u=o.headerColumns||0;return Fl(t,n,e,u,a)}return console.error(r),null},jl=function(t){return function(){return t().fold((function(){return[]}),(function(t){return M(t,(function(t){return t.dom}))}))}},Ul=function(t){return function(e){var n=e.length>0?k.some(hi(e)):k.none();t(n)}},Wl=function(t){return function(e,n,o){void 0===o&&(o={});var r=Vl(t,n,e,o,"Invalid values for insertTable - rows and columns values are required to insert a table.");return t.undoManager.add(),r}},ql=function(t,e,n){var o=Ke(t,e,1);1===n||o<=1?Fe(t,e):Re(t,e,Math.min(n,o))},$l=function(t,e){var n=An.fromTable(t);return lc(n,e).map((function(t){var e=t[t.length-1],o=t[0].column,r=e.column+e.colspan,i=function(t,e,n){if(An.hasColumns(t)){var o=D(An.justColumns(t),(function(t){return t.column>=e&&t.column<n})),r=M(o,(function(t){var o=Ao(t.element);return ql(o,"span",n-e),o})),i=Dt.fromTag("colgroup");return Gn(i,r),[i]}return[]}(n,o,r),a=function(t,e,n){return M(t.all,(function(t){var o=D(t.cells,(function(t){return t.column>=e&&t.column<n})),r=M(o,(function(t){var o=Ao(t.element);return ql(o,"colspan",n-e),o})),i=Dt.fromTag("tr");return Gn(i,r),i}))}(n,o,r);return $(i,a)}))},Gl=function(t,e,n){var o=An.fromTable(t);return cc(o,e).bind((function(t){var e=ec(o,n,!1),r=_n(e).rows.slice(t[0].row,t[t.length-1].row+t[t.length-1].rowspan),i=I(r,(function(t){var e=D(t.cells,(function(t){return!t.isLocked}));return e.length>0?[q(q({},t),{cells:e})]:[]})),a=oc(i,n);return Po(a.length>0,a)})).map((function(t){return function(t){return M(t,(function(t){var e=Mo(t.element);return A(t.cells,(function(t){var n=Ao(t.element);Xu(n,"colspan",t.colspan,1),Xu(n,"rowspan",t.rowspan,1),Wn(e,n)})),e}))}(t)}))},Yl=tinymce.util.Tools.resolve("tinymce.util.Tools"),Xl=function(t,e,n){return function(e,o){for(var r=0;r<o.length;r++){var i=t.getStyle(o[r],n);if(void 0===e&&(e=i),e!==i)return""}return e}(undefined,t.select("td,th",e))},Kl=function(t,e,n){n&&t.formatter.apply("align"+n,{},e)},Jl=function(t,e){Yl.each("left center right".split(" "),(function(n){t.formatter.remove("align"+n,{},e)}))},Zl=function t(e,n){return function(e,n){return n.concat(M(e,(function(e){var n=e.text||e.title;return function(t){return Yt(t,"menu")}(e)?{text:n,items:t(e.menu)}:{text:n,value:e.value}})))}(e,n||[])},Ql=function(t){return function(e){return nt(e,"rgb")?t.toHex(e):e}},ts=function(t,e){var n=Dt.fromDom(e);return{borderwidth:Ye(n,"border-width").getOr(""),borderstyle:Ye(n,"border-style").getOr(""),bordercolor:Ye(n,"border-color").map(Ql(t)).getOr(""),backgroundcolor:Ye(n,"background-color").map(Ql(t)).getOr("")}},es=function(t){var e=t[0],n=t.slice(1);return A(n,(function(t){A(Nt(e),(function(n){Ft(t,(function(t,o){var r=e[n];""!==r&&n===o&&r!==t&&(e[n]="")}))}))})),e},ns=function(t){var e=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:"cell"===t?[{name:"borderwidth",type:"input",label:"Border width"}].concat(e):e}},os=function(t,e,n,o){return H(t,(function(t){return n.formatter.matchNode(o,e+t)})).getOr("")},rs=p(os,["left","center","right"],"align"),is=p(os,["top","middle","bottom"],"valign"),as=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}],us=function(t){return as.concat(function(t){var e=Zl(function(t){return t.getParam("table_cell_class_list",[],"array")}(t));return e.length>0?k.some({name:"class",type:"listbox",label:"Class",items:e}):k.none()}(t).toArray())},cs=function(t){return function(e,n){var o=e.dom;return{setAttrib:function(e,r){t&&!r||o.setAttrib(n,e,r)},setStyle:function(e,r){t&&!r||o.setStyle(n,e,r)},setFormat:function(o,r){t&&!r||(""===r?e.formatter.remove(o,{value:null},n,!0):e.formatter.apply(o,{value:r},n))}}}},ls={normal:cs(!1),ifTruthy:cs(!0)},ss=function(t){return ln(t[0]).map((function(e){var n=An.fromTable(e),o=An.justCells(n),r=D(o,(function(e){return z(t,(function(t){return Ht(e.element,t)}))}));return M(r,(function(t){return{element:t.element.dom,column:An.getColumnAt(n,t.column).map((function(t){return t.element.dom}))}}))}))},fs=function(t,e,n,o){var r=1===e.length,i=Ut(o,(function(t,e){return n[e]!==t}));if(qt(i)>0&&e.length>=1){var a=ln(e[0]);ss(e).each((function(e){A(e,(function(e){var n=zl(t,e.element,o.celltype),i=r?ls.normal(t,n):ls.ifTruthy(t,n),a=e.column.map((function(e){return r?ls.normal(t,e):ls.ifTruthy(t,e)})).getOr(i);!function(t,e,n){t.setAttrib("scope",n.scope),t.setAttrib("class",n.class),t.setStyle("height",ki(n.height)),e.setStyle("width",ki(n.width))}(i,a,o),yu(t)&&function(t,e){t.setFormat("tablecellbackgroundcolor",e.backgroundcolor),t.setFormat("tablecellbordercolor",e.bordercolor),t.setFormat("tablecellborderstyle",e.borderstyle),t.setFormat("tablecellborderwidth",ki(e.borderwidth))}(i,o),r&&(Jl(t,n),function(t,e){Yl.each("top middle bottom".split(" "),(function(n){t.formatter.remove("valign"+n,{},e)}))}(t,n)),o.halign&&Kl(t,n,o.halign),o.valign&&function(t,e,n){n&&t.formatter.apply("valign"+n,{},e)}(t,n,o.valign)}))}));var u=qt(Ut(i,(function(t,e){return"scope"!==e&&"celltype"!==e})))>0;a.each((function(e){return su(t,e.dom,{structure:Gt(i,"celltype"),style:u})}))}},ds=function(t,e,n,o){var r=o.getData();o.close(),t.undoManager.transact((function(){fs(t,e,n,r),t.focus()}))},ms=function(t,e){var n=ss(e).map((function(e){return M(e,(function(e){return function(t,e,n,o){var r=t.dom,i=o.getOr(e),a=function(t,e){return r.getStyle(t,e)||r.getAttrib(t,e)};return q({width:a(i,"width"),height:a(e,"height"),scope:r.getAttrib(e,"scope"),celltype:vi(e),class:r.getAttrib(e,"class",""),halign:rs(t,e),valign:is(t,e)},n?ts(r,e):{})}(t,e.element,yu(t),e.column)}))}));return es(n.getOrDie())},gs=function(t,e){var n=Pl(Oi(t),e);if(0!==n.length){var o=ms(t,n),r={type:"tabpanel",tabs:[{title:"General",name:"general",items:us(t)},ns("cell")]},i={type:"panel",items:[{type:"grid",columns:2,items:us(t)}]};t.windowManager.open({title:"Cell Properties",size:"normal",body:yu(t)?r:i,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:o,onSubmit:p(ds,t,n,o)})}},ps=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],hs=function(t){return ps.concat(function(t){var e=Zl(function(t){return t.getParam("table_row_class_list",[],"array")}(t));return e.length>0?k.some({name:"class",type:"listbox",label:"Class",items:e}):k.none()}(t).toArray())},vs=function(t,e,n,o){var r=1===e.length,i=Ut(o,(function(t,e){return n[e]!==t}));if(qt(i)>0){A(e,(function(e){o.type!==vi(e.parentNode)&&Ml(t,e,o.type);var i=r?ls.normal(t,e):ls.ifTruthy(t,e);!function(t,e){t.setAttrib("class",e.class),t.setStyle("height",ki(e.height))}(i,o),wu(t)&&function(t,e){t.setStyle("background-color",e.backgroundcolor),t.setStyle("border-color",e.bordercolor),t.setStyle("border-style",e.borderstyle)}(i,o),o.align!==n.align&&(Jl(t,e),Kl(t,e,o.align))}));var a=Gt(i,"type"),u=!a||qt(i)>1;ln(Dt.fromDom(e[0])).each((function(e){return su(t,e.dom,{structure:a,style:u})}))}},bs=function(t,e,n,o){var r=o.getData();o.close(),t.undoManager.transact((function(){vs(t,e,n,r),t.focus()}))},xs=function(t){var e=Hl(Oi(t),Pi.selected);if(0!==e.length){var n=M(e,(function(e){return function(t,e,n){var o=t.dom;return q({height:o.getStyle(e,"height")||o.getAttrib(e,"height"),class:o.getAttrib(e,"class",""),type:Sl(0,e),align:rs(t,e)},n?ts(o,e):{})}(t,e.dom,wu(t))})),o=es(n),r={type:"tabpanel",tabs:[{title:"General",name:"general",items:hs(t)},ns("row")]},i={type:"panel",items:[{type:"grid",columns:2,items:hs(t)}]};t.windowManager.open({title:"Row Properties",size:"normal",body:wu(t)?r:i,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:o,onSubmit:p(bs,t,M(e,(function(t){return t.dom})),o)})}},ys=tinymce.util.Tools.resolve("tinymce.Env"),ws=function(t,e,n){var o=n?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],r=function(t){return t.getParam("table_appearance_options",!0,"boolean")}(t)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],i=e.length>0?[{type:"listbox",name:"class",label:"Class",items:e}]:[];return o.concat([{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}]).concat(r).concat([{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]).concat(i)},ks=function t(e,n,o,i){if("TD"===n.tagName||"TH"===n.tagName)r(o)?e.setStyle(n,o,i):e.setStyle(n,o);else if(n.children)for(var a=0;a<n.children.length;a++)t(e,n.children[a],o,i)},_s=function(t,e,n,o){var r,i=t.dom,a=o.getData(),u=Ut(a,(function(t,e){return n[e]!==t}));o.close(),""===a.class&&delete a.class,t.undoManager.transact((function(){if(!e){var n=parseInt(a.cols,10)||1,o=parseInt(a.rows,10)||1;e=Fl(t,n,o,0,0)}if(qt(u)>0&&(!function(t,e,n){var o=t.dom,r={},i={};if(r.class=n.class,i.height=ki(n.height),o.getAttrib(e,"width")&&!_u(t)?r.width=function(t){return t?t.replace(/px$/,""):""}(n.width):i.width=ki(n.width),_u(t)?(i["border-width"]=ki(n.border),i["border-spacing"]=ki(n.cellspacing)):(r.border=n.border,r.cellpadding=n.cellpadding,r.cellspacing=n.cellspacing),_u(t)&&e.children)for(var a=0;a<e.children.length;a++)ks(o,e.children[a],{"border-width":ki(n.border),padding:ki(n.cellpadding)}),ku(t)&&ks(o,e.children[a],{"border-color":n.bordercolor});ku(t)&&(i["background-color"]=n.backgroundcolor,i["border-color"]=n.bordercolor,i["border-style"]=n.borderstyle),r.style=o.serializeStyle(q(q({},xu(t)),i)),o.setAttribs(e,q(q({},bu(t)),r))}(t,e,a),(r=i.select("caption",e)[0])&&!a.caption&&i.remove(r),!r&&a.caption&&((r=i.create("caption")).innerHTML=ys.ie?"":'<br data-mce-bogus="1"/>',e.insertBefore(r,e.firstChild)),""===a.align?Jl(t,e):Kl(t,e,a.align)),t.focus(),t.addVisual(),qt(u)>0){var c=Gt(u,"caption"),l=!c||qt(u)>1;su(t,e,{structure:c,style:l})}}))},Cs=function(t,e){var n,o=t.dom,r=function(t,e){var n,o,r,i,a=xu(t),u=bu(t),c=e?(n=t.dom,{borderstyle:$t(a,"border-style").getOr(""),bordercolor:Ql(n)($t(a,"border-color").getOr("")),backgroundcolor:Ql(n)($t(a,"background-color").getOr(""))}):{};return q(q(q(q(q(q({},{height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""}),a),u),c),(i=a["border-width"],_u(t)&&i?{border:i}:$t(u,"border").fold((function(){return{}}),(function(t){return{border:t}})))),(o=$t(a,"border-spacing").or($t(u,"cellspacing")).fold((function(){return{}}),(function(t){return{cellspacing:t}})),r=$t(a,"border-padding").or($t(u,"cellpadding")).fold((function(){return{}}),(function(t){return{cellpadding:t}})),q(q({},o),r)))}(t,ku(t));!1===e?(n=o.getParent(t.selection.getStart(),"table",t.getBody()))?r=function(t,e,n){var o=t.dom;return q({width:o.getStyle(e,"width")||o.getAttrib(e,"width"),height:o.getStyle(e,"height")||o.getAttrib(e,"height"),cellspacing:o.getStyle(e,"border-spacing")||o.getAttrib(e,"cellspacing"),cellpadding:o.getAttrib(e,"cellpadding")||Xl(t.dom,e,"padding"),border:function(e,n){var o=Ye(Dt.fromDom(n),"border-width");return _u(t)&&o.isSome()?o.getOr(""):e.getAttrib(n,"border")||Xl(t.dom,n,"border-width")||Xl(t.dom,n,"border")}(o,e),caption:!!o.select("caption",e)[0],class:o.getAttrib(e,"class",""),align:rs(t,e)},n?ts(o,e):{})}(t,n,ku(t)):ku(t)&&(r.borderstyle="",r.bordercolor="",r.backgroundcolor=""):(r.cols="1",r.rows="1",ku(t)&&(r.borderstyle="",r.bordercolor="",r.backgroundcolor=""));var i=Zl(function(t){return t.getParam("table_class_list",[],"array")}(t));i.length>0&&r.class&&(r.class=r.class.replace(/\s*mce\-item\-table\s*/g,""));var a={type:"grid",columns:2,items:ws(t,i,e)},u=ku(t)?{type:"tabpanel",tabs:[{title:"General",name:"general",items:[a]},ns("table")]}:{type:"panel",items:[a]};t.windowManager.open({title:"Table Properties",size:"normal",body:u,onSubmit:p(_s,t,n,r),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:r})},Ss=function(t){return El(Oi(t),wi(t))},Os=function(t){return Dl(Oi(t),wi(t))},zs=function(t,e,n,o,a){var u=wi(t),c=function(t){return ln(t,u)},l=function(e){return function(o){t.selection.setRng(o.rng),t.focus(),n.clear(e),_i(e),su(t,e.dom,o.effect)}},s=function(e){return Os(t).each((function(t){c(t).each((function(n){var r=Hi(o,n,t);e(n,r).each(l(n))}))}))},f=function(){return Os(t).map((function(e){return c(e).bind((function(n){var r=Hi(o,n,e),i=gi(d,Dt.fromDom(t.getDoc()),k.none());return Gl(n,r,i)}))}))},m=function(){return Os(t).map((function(t){return c(t).bind((function(e){var n=Hi(o,e,t);return $l(e,n)}))}))},g=function(e,n){return n().each((function(n){var r=M(n,(function(t){return Ao(t)}));Os(t).each((function(n){return c(n).each((function(n){var i=pi(Dt.fromDom(t.getDoc())),a=function(t,e,n,o){return{selection:zi(t),clipboard:n,generators:o}}(o,0,r,i);e(n,a).each(l(n))}))}))}))};Ft({mceTableSplitCells:function(){return s(e.unmergeCells)},mceTableMergeCells:function(){return s(e.mergeCells)},mceTableInsertRowBefore:function(){return s(e.insertRowsBefore)},mceTableInsertRowAfter:function(){return s(e.insertRowsAfter)},mceTableInsertColBefore:function(){return s(e.insertColumnsBefore)},mceTableInsertColAfter:function(){return s(e.insertColumnsAfter)},mceTableDeleteCol:function(){return s(e.deleteColumn)},mceTableDeleteRow:function(){return s(e.deleteRow)},mceTableCutCol:function(t){return m().each((function(t){a.setColumns(t),s(e.deleteColumn)}))},mceTableCutRow:function(t){return f().each((function(t){a.setRows(t),s(e.deleteRow)}))},mceTableCopyCol:function(t){return m().each((function(t){return a.setColumns(t)}))},mceTableCopyRow:function(t){return f().each((function(t){return a.setRows(t)}))},mceTablePasteColBefore:function(t){return g(e.pasteColsBefore,a.getColumns)},mceTablePasteColAfter:function(t){return g(e.pasteColsAfter,a.getColumns)},mceTablePasteRowBefore:function(t){return g(e.pasteRowsBefore,a.getRows)},mceTablePasteRowAfter:function(t){return g(e.pasteRowsAfter,a.getRows)},mceTableDelete:function(){return Ss(t).each((function(e){ln(e,u).filter(h(u)).each((function(e){var n=Dt.fromText("");if(jn(e,n),Xn(e),t.dom.isEmpty(t.getBody()))t.setContent(""),t.selection.setCursorLocation();else{var o=t.dom.createRng();o.setStart(n.dom,0),o.setEnd(n.dom,0),t.selection.setRng(o),t.nodeChanged()}}))}))},mceTableSizingMode:function(e,n){return function(e){return Ss(t).each((function(n){Ou(t)||Su(t)||Cu(t)||ln(n,u).each((function(n){"relative"!==e||fa(n)?"fixed"!==e||da(n)?"responsive"!==e||ma(n)||Nu(n):Iu(t,n):Ru(t,n),_i(n),su(t,n.dom,du)}))}))}(n)}},(function(e,n){return t.addCommand(n,e)}));var v=function(t,e){e.each((function(e){su(t,e.dom,du)}))};Ft({mceTableCellType:function(n,o){var r=ln(Oi(t),u);e.setTableCellType(t,o),v(t,r)},mceTableRowType:function(n,o){var r=ln(Oi(t),u);e.setTableRowType(t,o),v(t,r)}},(function(e,n){return t.addCommand(n,e)})),t.addCommand("mceTableColType",(function(t,n){return $t(n,"type").each((function(t){return s("th"===t?e.makeColumnsHeader:e.unmakeColumnsHeader)}))})),Ft({mceTableProps:p(Cs,t,!1),mceTableRowProps:p(xs,t),mceTableCellProps:p(gs,t,o)},(function(e,n){return t.addCommand(n,(function(){return e()}))})),t.addCommand("mceInsertTable",(function(e,n){i(n)&&Nt(n).length>0?Vl(t,n.rows,n.columns,n.options,"Invalid values for mceInsertTable - rows and columns values are required to insert a table."):Cs(t,!0)})),t.addCommand("mceTableApplyCellStyle",(function(e,n){var a=function(t){return"tablecell"+t.toLowerCase().replace("-","")};if(i(n)){var l=Pl(Oi(t),o,u);if(0!==l.length){var s=Ut(n,(function(e,n){return t.formatter.has(a(n))&&r(e)}));(function(t){for(var e in t)if(Lt.call(t,e))return!1;return!0})(s)||(Ft(s,(function(e,n){A(l,(function(o){ls.normal(t,o.dom).setFormat(a(n),e)}))})),c(l[0]).each((function(e){return su(t,e.dom,fu)})))}}}))},Ts=function(t,e,n){var o=wi(t);Ft({mceTableRowType:function(){return e.getTableRowType(t)},mceTableCellType:function(){return e.getTableCellType(t)},mceTableColType:function(){return Dl(Oi(t)).bind((function(t){return function(t){return ln(t,o)}(t).map((function(o){var r=Hi(n,o,t);return e.getTableColType(o,r)}))})).getOr("")}},(function(e,n){return t.addQueryValueHandler(n,e)}))},Ms={tablecellbackgroundcolor:{selector:"td,th",styles:{backgroundColor:"%value"},remove_similar:!0},tablecellbordercolor:{selector:"td,th",styles:{borderColor:"%value"},remove_similar:!0},tablecellborderstyle:{selector:"td,th",styles:{borderStyle:"%value"},remove_similar:!0},tablecellborderwidth:{selector:"td,th",styles:{borderWidth:"%value"},remove_similar:!0}},As=wo([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Ds=q(q({},As),{none:function(t){return void 0===t&&(t=void 0),As.none(t)}}),Es=function(t,e){return ln(t,e).bind((function(e){var n=un(e);return B(n,(function(e){return Ht(t,e)})).map((function(t){return{index:t,all:n}}))}))},Ps=function(t,e,n,o){return{start:t,soffset:e,finish:n,foffset:o}},Hs=wo([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Bs={before:Hs.before,on:Hs.on,after:Hs.after,cata:function(t,e,n,o){return t.fold(e,n,o)},getStart:function(t){return t.fold(g,g,g)}},Rs=wo([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Is={domRange:Rs.domRange,relative:Rs.relative,exact:Rs.exact,exactFromRange:function(t){return Rs.exact(t.start,t.soffset,t.finish,t.foffset)},getWin:function(t){var e,n=function(t){return t.match({domRange:function(t){return Dt.fromDom(t.startContainer)},relative:function(t,e){return Bs.getStart(t)},exact:function(t,e,n,o){return t}})}(t);return e=n,Dt.fromDom(se(e).dom.defaultView)},range:Ps},Ns=function(t,e){return t.selectNodeContents(e.dom)},Ls=function(t,e,n){var o,r=t.document.createRange();return o=r,e.fold((function(t){o.setStartBefore(t.dom)}),(function(t,e){o.setStart(t.dom,e)}),(function(t){o.setStartAfter(t.dom)})),function(t,e){e.fold((function(e){t.setEndBefore(e.dom)}),(function(e,n){t.setEnd(e.dom,n)}),(function(e){t.setEndAfter(e.dom)}))}(r,n),r},Fs=function(t,e,n,o,r){var i=t.document.createRange();return i.setStart(e.dom,n),i.setEnd(o.dom,r),i},Vs=function(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}},js=wo([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Us=function(t,e,n){return e(Dt.fromDom(n.startContainer),n.startOffset,Dt.fromDom(n.endContainer),n.endOffset)},Ws=function(t,e){var n=function(t,e){return e.match({domRange:function(t){return{ltr:m(t),rtl:k.none}},relative:function(e,n){return{ltr:G((function(){return Ls(t,e,n)})),rtl:G((function(){return k.some(Ls(t,n,e))}))}},exact:function(e,n,o,r){return{ltr:G((function(){return Fs(t,e,n,o,r)})),rtl:G((function(){return k.some(Fs(t,o,r,e,n))}))}}})}(t,e);return function(t,e){var n=e.ltr();return n.collapsed?e.rtl().filter((function(t){return!1===t.collapsed})).map((function(t){return js.rtl(Dt.fromDom(t.endContainer),t.endOffset,Dt.fromDom(t.startContainer),t.startOffset)})).getOrThunk((function(){return Us(0,js.ltr,n)})):Us(0,js.ltr,n)}(0,n)},qs=function(t,e){return Ws(t,e).match({ltr:function(e,n,o,r){var i=t.document.createRange();return i.setStart(e.dom,n),i.setEnd(o.dom,r),i},rtl:function(e,n,o,r){var i=t.document.createRange();return i.setStart(o.dom,r),i.setEnd(e.dom,n),i}})};js.ltr,js.rtl;var $s=function(t,e,n){return e>=t.left&&e<=t.right&&n>=t.top&&n<=t.bottom},Gs=function(t,e,n,o,r){var i=function(n){var o=t.dom.createRange();return o.setStart(e.dom,n),o.collapse(!0),o},a=Zn(e).length,u=function(t,e,n,o,r){if(0===r)return 0;if(e===o)return r-1;for(var i=o,a=1;a<r;a++){var u=t(a),c=Math.abs(e-u.left);if(n<=u.bottom){if(n<u.top||c>i)return a-1;i=c}}return 0}((function(t){return i(t).getBoundingClientRect()}),n,o,r.right,a);return i(u)},Ys=function(t,e,n,o){var r=t.dom.createRange(),i=pe(e);return W(i,(function(e){return r.selectNode(e.dom),$s(r.getBoundingClientRect(),n,o)?Xs(t,e,n,o):k.none()}))},Xs=function(t,e,n,o){return ie(e)?function(t,e,n,o){var r=t.dom.createRange();r.selectNode(e.dom);var i=r.getClientRects();return W(i,(function(t){return $s(t,n,o)?k.some(t):k.none()})).map((function(r){return Gs(t,e,n,o,r)}))}(t,e,n,o):Ys(t,e,n,o)},Ks=function(t,e){return e-t.left<t.right-e},Js=function(t,e,n){var o=t.dom.createRange();return o.selectNode(e.dom),o.collapse(n),o},Zs=function(t,e,n){var o=t.dom.createRange();o.selectNode(e.dom);var r=o.getBoundingClientRect(),i=Ks(r,n);return(true===i?ri:ii)(e).map((function(e){return Js(t,e,i)}))},Qs=function(t,e,n){var o=e.dom.getBoundingClientRect(),r=Ks(o,n);return k.some(Js(t,e,r))},tf=function(t,e,n){return k.from(t.dom.caretPositionFromPoint(e,n)).bind((function(e){if(null===e.offsetNode)return k.none();var n=t.dom.createRange();return n.setStart(e.offsetNode,e.offset),n.collapse(),k.some(n)}))},ef=function(t,e,n){return k.from(t.dom.caretRangeFromPoint(e,n))},nf=function(t,e,n,o){var r=t.dom.createRange();r.selectNode(e.dom);var i=r.getBoundingClientRect();return function(t,e,n,o){var r=t.dom.createRange();r.selectNode(e.dom);var i=r.getBoundingClientRect(),a=Math.max(i.left,Math.min(i.right,n)),u=Math.max(i.top,Math.min(i.bottom,o));return Xs(t,e,a,u)}(t,e,Math.max(i.left,Math.min(i.right,n)),Math.max(i.top,Math.min(i.bottom,o)))},of=function(t,e,n){return Dt.fromPoint(t,e,n).bind((function(o){var r=function(){return function(t,e,n){return(0===pe(e).length?Qs:Zs)(t,e,n)}(t,o,e)};return 0===pe(o).length?r():nf(t,o,e,n).orThunk(r)}))},rf=document.caretPositionFromPoint?tf:document.caretRangeFromPoint?ef:of,af=function(t,e){var n=te(t);return"input"===n?Bs.after(t):O(["br","img"],n)?0===e?Bs.before(t):Bs.after(t):Bs.on(t,e)},uf=function(t,e){var n=t.fold(Bs.before,af,Bs.after),o=e.fold(Bs.before,af,Bs.after);return Is.relative(n,o)},cf=function(t,e,n,o){var r=af(t,e),i=af(n,o);return Is.relative(r,i)},lf=function(t,e,n,o){var r=function(t,e,n,o){var r=le(t).dom.createRange();return r.setStart(t.dom,e),r.setEnd(n.dom,o),r}(t,e,n,o),i=Ht(t,n)&&e===o;return r.collapsed&&!i},sf=function(t){return k.from(t.getSelection())},ff=function(t,e){sf(t).each((function(t){t.removeAllRanges(),t.addRange(e)}))},df=function(t,e,n,o,r){var i=Fs(t,e,n,o,r);ff(t,i)},mf=function(t,e){return Ws(t,e).match({ltr:function(e,n,o,r){df(t,e,n,o,r)},rtl:function(e,n,o,r){sf(t).each((function(i){if(i.setBaseAndExtent)i.setBaseAndExtent(e.dom,n,o.dom,r);else if(i.extend)try{!function(t,e,n,o,r,i){e.collapse(n.dom,o),e.extend(r.dom,i)}(0,i,e,n,o,r)}catch(a){df(t,o,r,e,n)}else df(t,o,r,e,n)}))}})},gf=function(t,e,n,o,r){var i=cf(e,n,o,r);mf(t,i)},pf=function(t,e,n){var o=uf(e,n);mf(t,o)},hf=function(t){var e=Is.getWin(t).dom,n=function(t,n,o,r){return Fs(e,t,n,o,r)},o=function(t){return t.match({domRange:function(t){var e=Dt.fromDom(t.startContainer),n=Dt.fromDom(t.endContainer);return cf(e,t.startOffset,n,t.endOffset)},relative:uf,exact:cf})}(t);return Ws(e,o).match({ltr:n,rtl:n})},vf=function(t){if(t.rangeCount>0){var e=t.getRangeAt(0),n=t.getRangeAt(t.rangeCount-1);return k.some(Ps(Dt.fromDom(e.startContainer),e.startOffset,Dt.fromDom(n.endContainer),n.endOffset))}return k.none()},bf=function(t){if(null===t.anchorNode||null===t.focusNode)return vf(t);var e=Dt.fromDom(t.anchorNode),n=Dt.fromDom(t.focusNode);return lf(e,t.anchorOffset,n,t.focusOffset)?k.some(Ps(e,t.anchorOffset,n,t.focusOffset)):vf(t)},xf=function(t,e){var n=function(t,e){var n=t.document.createRange();return Ns(n,e),n}(t,e);ff(t,n)},yf=function(t){return function(t){return sf(t).filter((function(t){return t.rangeCount>0})).bind(bf)}(t).map((function(t){return Is.exact(t.start,t.soffset,t.finish,t.foffset)}))},wf=function(t,e){return function(t){var e=t.getClientRects(),n=e.length>0?e[0]:t.getBoundingClientRect();return n.width>0||n.height>0?k.some(n).map(Vs):k.none()}(qs(t,e))},kf=function(t,e,n){return function(t,e,n){var o=Dt.fromDom(t.document);return rf(o,e,n).map((function(t){return Ps(Dt.fromDom(t.startContainer),t.startOffset,Dt.fromDom(t.endContainer),t.endOffset)}))}(t,e,n)},_f=tinymce.util.Tools.resolve("tinymce.util.VK"),Cf=function(t,e,n){return zf(t,e,function(t,e){return Es(t,e).fold((function(){return Ds.none(t)}),(function(e){return e.index+1<e.all.length?Ds.middle(t,e.all[e.index+1]):Ds.last(t)}))}(n))},Sf=function(t,e,n){return zf(t,e,function(t,e){return Es(t,e).fold((function(){return Ds.none()}),(function(e){return e.index-1>=0?Ds.middle(t,e.all[e.index-1]):Ds.first(t)}))}(n))},Of=function(t,e){var n=Is.exact(e,0,e,0);return hf(n)},zf=function(t,e,n){return n.fold(k.none,k.none,(function(t,e){return ri(e).map((function(t){return Of(0,t)}))}),(function(n){return ln(n,e).bind((function(e){return t.execCommand("mceTableInsertRowAfter"),function(t,e){var n=Te(e,"tr");return U(n).bind((function(t){return Pe(t,"td,th").map((function(t){return Of(0,t)}))}))}(0,e)}))}))},Tf=["table","li","dl"],Mf=function(t,e){return{selection:t,kill:e}},Af=function(t,e,n,o){return{start:Bs.on(t,e),finish:Bs.on(n,o)}},Df=function(t,e){var n=qs(t,e);return Ps(Dt.fromDom(n.startContainer),n.startOffset,Dt.fromDom(n.endContainer),n.endOffset)},Ef=Af,Pf=function(t,e,n,o,r){return Ht(n,o)?k.none():po(n,o,e).bind((function(e){var o=e.boxes.getOr([]);return o.length>0?(r(t,o,e.start,e.finish),k.some(Mf(k.some(Ef(n,0,n,ei(n))),!0))):k.none()}))},Hf=function(t,e){return{item:t,mode:e}},Bf=function(t,e,n,o){return void 0===o&&(o=Rf),t.property().parent(e).map((function(t){return Hf(t,o)}))},Rf=function(t,e,n,o){return void 0===o&&(o=If),n.sibling(t,e).map((function(t){return Hf(t,o)}))},If=function t(e,n,o,r){void 0===r&&(r=t);var i=e.property().children(n);return o.first(i).map((function(t){return Hf(t,r)}))},Nf=[{current:Bf,next:Rf,fallback:k.none()},{current:Rf,next:If,fallback:k.some(Bf)},{current:If,next:If,fallback:k.some(Rf)}],Lf=function t(e,n,o,r,i){return void 0===i&&(i=Nf),H(i,(function(t){return t.current===o})).bind((function(o){return o.current(e,n,r,o.next).orThunk((function(){return o.fallback.bind((function(o){return t(e,n,o,r)}))}))}))},Ff=function(){return{sibling:function(t,e){return t.query().prevSibling(e)},first:function(t){return t.length>0?k.some(t[t.length-1]):k.none()}}},Vf=function(){return{sibling:function(t,e){return t.query().nextSibling(e)},first:function(t){return t.length>0?k.some(t[0]):k.none()}}},jf=function t(e,n,o,r,i,a){return Lf(e,n,r,i).bind((function(n){return a(n.item)?k.none():o(n.item)?k.some(n.item):t(e,n.item,o,n.mode,i,a)}))},Uf=function(t){return function(e){return 0===t.property().children(e).length}},Wf=function(t,e,n,o){return jf(t,e,n,Rf,Ff(),o)},qf=function(t,e,n,o){return jf(t,e,n,Rf,Vf(),o)},$f=no(),Gf=function(t,e){return function(t,e,n){return Wf(t,e,Uf(t),n)}($f,t,e)},Yf=function(t,e){return function(t,e,n){return qf(t,e,Uf(t),n)}($f,t,e)},Xf=wo([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),Kf=function(t){return He(t,"tr")},Jf=q(q({},Xf),{verify:function(t,e,n,o,r,i,a){return He(o,"td,th",a).bind((function(n){return He(e,"td,th",a).map((function(e){return Ht(n,e)?Ht(o,n)&&ei(n)===r?i(e):Xf.none("in same cell"):mo(Kf,[n,e]).fold((function(){return function(t,e,n){var o=t.getRect(e),r=t.getRect(n);return r.right>o.left&&r.left<o.right}(t,e,n)?Xf.success():i(e)}),(function(t){return i(e)}))}))})).getOr(Xf.none("default"))},cata:function(t,e,n,o,r){return t.fold(e,n,o,r)}}),Zf=function(t,e){return B(t,p(Ht,e))},Qf=function(t){return"br"===te(t)},td=function t(e,n,o){return n(e,o).bind((function(e){return ie(e)&&0===Zn(e).trim().length?t(e,n,o):k.some(e)}))},ed=function(t,e,n,o){return function(t,e){return he(t,e).filter(Qf).orThunk((function(){return he(t,e-1).filter(Qf)}))}(e,n).bind((function(e){return o.traverse(e).fold((function(){return td(e,o.gather,t).map(o.relative)}),(function(t){return function(t){return fe(t).bind((function(e){var n=pe(e);return Zf(n,t).map((function(o){return function(t,e,n,o){return{parent:t,children:e,element:n,index:o}}(e,n,t,o)}))}))}(t).map((function(t){return Bs.on(t.parent,t.index)}))}))}))},nd=function(t,e,n,o){var r=Qf(e)?function(t,e,n){return n.traverse(e).orThunk((function(){return td(e,n.gather,t)})).map(n.relative)}(t,e,o):ed(t,e,n,o);return r.map((function(t){return{start:t,finish:t}}))},od=function(t,e){return{left:t.left,top:t.top+e,right:t.right,bottom:t.bottom+e}},rd=function(t,e){return{left:t.left,top:t.top-e,right:t.right,bottom:t.bottom-e}},id=function(t,e,n){return{left:t.left+e,top:t.top+n,right:t.right+e,bottom:t.bottom+n}},ad=function(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}},ud=function(t,e){return k.some(t.getRect(e))},cd=function(t,e,n){return re(e)?ud(t,e).map(ad):ie(e)?function(t,e,n){return n>=0&&n<ei(e)?t.getRangedRect(e,n,e,n+1):n>0?t.getRangedRect(e,n-1,e,n):k.none()}(t,e,n).map(ad):k.none()},ld=function(t,e){return re(e)?ud(t,e).map(ad):ie(e)?t.getRangedRect(e,0,e,ei(e)).map(ad):k.none()},sd=wo([{none:[]},{retry:["caret"]}]),fd=function(t,e,n){return(o=e,r=jc,Me((function(t,e){return e(t)}),Ae,o,r,i)).fold(v,(function(e){return ld(t,e).exists((function(t){return function(t,e){return t.left<e.left||Math.abs(e.right-t.left)<1||t.left>e.right}(n,t)}))}));var o,r,i},dd={point:function(t){return t.bottom},adjuster:function(t,e,n,o,r){var i=od(r,5);return Math.abs(n.bottom-o.bottom)<1||n.top>r.bottom?sd.retry(i):n.top===r.bottom?sd.retry(od(r,1)):fd(t,e,r)?sd.retry(id(i,5,0)):sd.none()},move:od,gather:Yf},md=function(t,e,n,o,r){return gd(t,e,n,e.move(o,5),r)},gd=function t(e,n,o,r,i){return 0===i?k.some(r):function(t,e,n){return t.elementFromPoint(e,n).filter((function(t){return"table"===te(t)})).isSome()}(e,r.left,n.point(r))?md(e,n,o,r,i-1):e.situsFromPoint(r.left,n.point(r)).bind((function(a){return a.start.fold(k.none,(function(a){return ld(e,a).bind((function(u){return n.adjuster(e,a,u,o,r).fold(k.none,(function(r){return t(e,n,o,r,i-1)}))})).orThunk((function(){return k.some(r)}))}),k.none)}))},pd=function(t,e,n){var o=t.move(n,5),r=gd(e,t,n,o,100).getOr(o);return function(t,e,n){return t.point(e)>n.getInnerHeight()?k.some(t.point(e)-n.getInnerHeight()):t.point(e)<0?k.some(-t.point(e)):k.none()}(t,r,e).fold((function(){return e.situsFromPoint(r.left,t.point(r))}),(function(n){return e.scrollBy(0,n),e.situsFromPoint(r.left,t.point(r)-n)}))},hd={tryUp:p(pd,{point:function(t){return t.top},adjuster:function(t,e,n,o,r){var i=rd(r,5);return Math.abs(n.top-o.top)<1||n.bottom<r.top?sd.retry(i):n.bottom===r.top?sd.retry(rd(r,1)):fd(t,e,r)?sd.retry(id(i,5,0)):sd.none()},move:rd,gather:Gf}),tryDown:p(pd,dd),ieTryUp:function(t,e){return t.situsFromPoint(e.left,e.top-5)},ieTryDown:function(t,e){return t.situsFromPoint(e.left,e.bottom+5)},getJumpSize:m(5)},vd=function(t,e,n){return t.getSelection().bind((function(o){return nd(e,o.finish,o.foffset,n).fold((function(){return k.some(Uu(o.finish,o.foffset))}),(function(r){var i=t.fromSitus(r);return function(t){return Jf.cata(t,(function(t){return k.none()}),(function(){return k.none()}),(function(t){return k.some(Uu(t,0))}),(function(t){return k.some(Uu(t,ei(t)))}))}(Jf.verify(t,o.finish,o.foffset,i.finish,i.foffset,n.failure,e))}))}))},bd=function t(e,n,o,r,i,a){return 0===a?k.none():wd(e,n,o,r,i).bind((function(u){var c=e.fromSitus(u),l=Jf.verify(e,o,r,c.finish,c.foffset,i.failure,n);return Jf.cata(l,(function(){return k.none()}),(function(){return k.some(u)}),(function(u){return Ht(o,u)&&0===r?xd(e,o,r,rd,i):t(e,n,u,0,i,a-1)}),(function(u){return Ht(o,u)&&r===ei(u)?xd(e,o,r,od,i):t(e,n,u,ei(u),i,a-1)}))}))},xd=function(t,e,n,o,r){return cd(t,e,n).bind((function(e){return yd(t,r,o(e,hd.getJumpSize()))}))},yd=function(t,e,n){var o=Mt().browser;return o.isChrome()||o.isSafari()||o.isFirefox()||o.isEdge()?e.otherRetry(t,n):o.isIE()?e.ieRetry(t,n):k.none()},wd=function(t,e,n,o,r){return cd(t,n,o).bind((function(e){return yd(t,r,e)}))},kd=function(t,e,n){return vd(t,e,n).bind((function(o){return bd(t,e,o.element,o.offset,n,20).map(t.fromSitus)}))},_d=function(t,e){return Ae(t,(function(t){return fe(t).exists((function(t){return Ht(t,e)}))}),n).isSome();var n},Cd=function(t,e,n,o,r){return He(o,"td,th",e).bind((function(o){return He(o,"table",e).bind((function(i){return _d(r,i)?kd(t,e,n).bind((function(t){return He(t.finish,"td,th",e).map((function(e){return{start:o,finish:e,range:t}}))})):k.none()}))}))},Sd=function(t,e,n,o,r,i){return Mt().browser.isIE()?k.none():i(o,e).orThunk((function(){return Cd(t,e,n,o,r).map((function(t){var e=t.range;return Mf(k.some(Ef(e.start,e.soffset,e.finish,e.foffset)),!0)}))}))},Od=function(t,e){return He(t,"tr",e).bind((function(t){return He(t,"table",e).bind((function(n){var o=Te(n,"tr");return Ht(t,o[0])?function(t,e,n){return Wf($f,t,e,n)}(n,(function(t){return ii(t).isSome()}),e).map((function(t){var e=ei(t);return Mf(k.some(Ef(t,e,t,e)),!0)})):k.none()}))}))},zd=function(t,e){return He(t,"tr",e).bind((function(t){return He(t,"table",e).bind((function(n){var o=Te(n,"tr");return Ht(t,o[o.length-1])?function(t,e,n){return qf($f,t,e,n)}(n,(function(t){return ri(t).isSome()}),e).map((function(t){return Mf(k.some(Ef(t,0,t,0)),!0)})):k.none()}))}))},Td=function(t,e,n,o,r,i,a){return Cd(t,n,o,r,i).bind((function(t){return Pf(e,n,t.start,t.finish,a)}))},Md=function(t,e){return He(t,"td,th",e)},Ad=function(t,e,n,o){var r,i=(r=$r(k.none()),{clear:function(){return r.set(k.none())},set:function(t){return r.set(k.some(t))},isSet:function(){return r.get().isSome()},on:function(t){return r.get().each(t)}}),a=i.clear,u=function(r){i.on((function(i){o.clearBeforeUpdate(e),Md(r.target,n).each((function(r){po(i,r,n).each((function(n){var a=n.boxes.getOr([]);(a.length>1||1===a.length&&!Ht(i,r))&&(o.selectRange(e,a,n.start,n.finish),t.selectContents(r))}))}))}))};return{clearstate:a,mousedown:function(t){o.clear(e),Md(t.target,n).each(i.set)},mouseover:function(t){u(t)},mouseup:function(t){u(t),a()}}},Dd={traverse:ge,gather:Yf,relative:Bs.before,otherRetry:hd.tryDown,ieRetry:hd.ieTryDown,failure:Jf.failedDown},Ed={traverse:me,gather:Gf,relative:Bs.before,otherRetry:hd.tryUp,ieRetry:hd.ieTryUp,failure:Jf.failedUp},Pd=function(t){return function(e){return e===t}},Hd=Pd(38),Bd=Pd(40),Rd=function(t){return t>=37&&t<=40},Id={isBackward:Pd(37),isForward:Pd(39)},Nd={isBackward:Pd(39),isForward:Pd(37)},Ld=function(t){return{elementFromPoint:function(e,n){return Dt.fromPoint(Dt.fromDom(t.document),e,n)},getRect:function(t){return t.dom.getBoundingClientRect()},getRangedRect:function(e,n,o,r){var i=Is.exact(e,n,o,r);return wf(t,i)},getSelection:function(){return yf(t).map((function(e){return Df(t,e)}))},fromSitus:function(e){var n=Is.relative(e.start,e.finish);return Df(t,n)},situsFromPoint:function(e,n){return kf(t,e,n).map((function(t){return Af(t.start,t.soffset,t.finish,t.foffset)}))},clearSelection:function(){!function(t){sf(t).each((function(t){return t.removeAllRanges()}))}(t)},collapseSelection:function(e){void 0===e&&(e=!1),yf(t).each((function(n){return n.fold((function(t){return t.collapse(e)}),(function(n,o){var r=e?n:o;pf(t,r,r)}),(function(n,o,r,i){var a=e?n:r,u=e?o:i;gf(t,a,u,a,u)}))}))},setSelection:function(e){gf(t,e.start,e.soffset,e.finish,e.foffset)},setRelativeSelection:function(e,n){pf(t,e,n)},selectContents:function(e){xf(t,e)},getInnerHeight:function(){return t.innerHeight},getScrollY:function(){var e,n,o,r;return(e=Dt.fromDom(t.document),n=void 0!==e?e.dom:document,o=n.body.scrollLeft||n.documentElement.scrollLeft,r=n.body.scrollTop||n.documentElement.scrollTop,Go(o,r)).top},scrollBy:function(e,n){!function(t,e,n){var o=(void 0!==n?n.dom:document).defaultView;o&&o.scrollBy(t,e)}(e,n,Dt.fromDom(t.document))}}},Fd=function(t,e){return{rows:t,cols:e}},Vd=function(t,e,n,o){var r=Ld(t),i=function(){return o.clear(e),k.none()};return{keydown:function(t,a,u,c,l,s){var f=t.raw,d=f.which,m=!0===f.shiftKey,g=ho(e,o.selectedSelector).fold((function(){return Bd(d)&&m?p(Td,r,e,n,Dd,c,a,o.selectRange):Hd(d)&&m?p(Td,r,e,n,Ed,c,a,o.selectRange):Bd(d)?p(Sd,r,n,Dd,c,a,zd):Hd(d)?p(Sd,r,n,Ed,c,a,Od):k.none}),(function(t){var n=function(n){return function(){var i=W(n,(function(n){return function(t,e,n,o,r){return bo(o,t,e,r.firstSelectedSelector,r.lastSelectedSelector).map((function(t){return r.clearBeforeUpdate(n),r.selectRange(n,t.boxes,t.start,t.finish),t.boxes}))}(n.rows,n.cols,e,t,o)}));return i.fold((function(){return vo(e,o.firstSelectedSelector,o.lastSelectedSelector).map((function(t){var n=Bd(d)||s.isForward(d)?Bs.after:Bs.before;return r.setRelativeSelection(Bs.on(t.first,0),n(t.table)),o.clear(e),Mf(k.none(),!0)}))}),(function(t){return k.some(Mf(k.none(),!0))}))}};return Bd(d)&&m?n([Fd(1,0)]):Hd(d)&&m?n([Fd(-1,0)]):s.isBackward(d)&&m?n([Fd(0,-1),Fd(-1,0)]):s.isForward(d)&&m?n([Fd(0,1),Fd(1,0)]):Rd(d)&&!1===m?i:k.none}));return g()},keyup:function(t,r,i,a,u){return ho(e,o.selectedSelector).fold((function(){var c=t.raw,l=c.which;return!1===(!0===c.shiftKey)?k.none():Rd(l)?function(t,e,n,o,r,i,a){return Ht(n,r)&&o===i?k.none():He(n,"td,th",e).bind((function(n){return He(r,"td,th",e).bind((function(o){return Pf(t,e,n,o,a)}))}))}(e,n,r,i,a,u,o.selectRange):k.none()}),k.none)}}},jd=function(t,e,n){var o=function(e){Fe(e,t.selected),Fe(e,t.firstSelected),Fe(e,t.lastSelected)},r=function(e){Re(e,t.selected,"1")},i=function(t){a(t),n()},a=function(e){var n=Te(e,t.selectedSelector);A(n,o)};return{clearBeforeUpdate:a,clear:i,selectRange:function(n,o,a,u){i(n),A(o,r),Re(a,t.firstSelected,"1"),Re(u,t.lastSelected,"1"),e(o,a,u)},selectedSelector:t.selectedSelector,firstSelectedSelector:t.firstSelectedSelector,lastSelectedSelector:t.lastSelectedSelector}},Ud=function(t,e,n){var o=An.fromTable(t);return cc(o,e).map((function(t){var e=ec(o,n,!1),r=function(t,e,n){var o=t.slice(0,e[e.length-1].row+1),r=oc(o,n);return I(r,(function(t){var n=t.cells.slice(0,e[e.length-1].column+1);return M(n,(function(t){return t.element}))}))}(e,t,n),i=function(t,e,n){var o=t.slice(e[0].row+e[0].rowspan-1,t.length),r=oc(o,n);return I(r,(function(t){var n=t.cells.slice(e[0].column+e[0].colspan-1,t.cells.length);return M(n,(function(t){return t.element}))}))}(e,t,n);return{upOrLeftCells:r,downOrRightCells:i}}))},Wd=function(t){return!1===Na(Dt.fromDom(t.target),"ephox-snooker-resizer-bar")};function qd(t,e,n){var o=jd(Pi,(function(e,o,r){n.targets().each((function(n){ln(o).each((function(i){var a=Eu(t),u=gi(d,Dt.fromDom(t.getDoc()),a),c=Ud(i,n,u);!function(t,e,n,o,r){t.fire("TableSelectionChange",{cells:e,start:n,finish:o,otherCells:r})}(t,e,o,r,c)}))}))}),(function(){return function(t){t.fire("TableSelectionClear")}(t)}));return t.on("init",(function(n){var r=t.getWin(),i=bi(t),a=wi(t),u=function(t,e,n,o){var r=Ld(t),i=Ad(r,e,n,o);return{clearstate:i.clearstate,mousedown:i.mousedown,mouseover:i.mouseover,mouseup:i.mouseup}}(r,i,a,o),c=Vd(r,i,a,o),l=function(t,e,n,o){var r=Ld(t);return function(t,i){o.clearBeforeUpdate(e),po(t,i,n).each((function(t){var n=t.boxes.getOr([]);o.selectRange(e,n,t.start,t.finish),r.selectContents(i),r.collapseSelection()}))}}(r,i,a,o);t.on("TableSelectorChange",(function(t){return l(t.start,t.finish)}));var s,f,m=function(e,n){(function(t){return!0===t.raw.shiftKey})(e)&&(n.kill&&e.kill(),n.selection.each((function(e){var n=Is.relative(e.start,e.finish),o=qs(r,n);t.selection.setRng(o)})))},g=function(t){return 0===t.button},p=(s=$r(Dt.fromDom(i)),f=$r(0),{touchEnd:function(t){var e=Dt.fromDom(t.target);if("td"===te(e)||"th"===te(e)){var n=s.get(),o=f.get();Ht(n,e)&&t.timeStamp-o<300&&(t.preventDefault(),l(e,e))}s.set(e),f.set(t.timeStamp)}});t.on("dragstart",(function(t){u.clearstate()})),t.on("mousedown",(function(t){g(t)&&Wd(t)&&u.mousedown(Pa(t))})),t.on("mouseover",(function(t){var e;(void 0===(e=t).buttons||ys.browser.isEdge()&&0===e.buttons||0!=(1&e.buttons))&&Wd(t)&&u.mouseover(Pa(t))})),t.on("mouseup",(function(t){g(t)&&Wd(t)&&u.mouseup(Pa(t))})),t.on("touchend",p.touchEnd),t.on("keyup",(function(e){var n=Pa(e);if(n.raw.shiftKey&&Rd(n.raw.which)){var o=t.selection.getRng(),r=Dt.fromDom(o.startContainer),i=Dt.fromDom(o.endContainer);c.keyup(n,r,o.startOffset,i,o.endOffset).each((function(t){m(n,t)}))}})),t.on("keydown",(function(n){var o=Pa(n);e().each((function(t){return t.hideBars()}));var r=t.selection.getRng(),i=Dt.fromDom(r.startContainer),a=Dt.fromDom(r.endContainer),u=jo(Id,Nd)(Dt.fromDom(t.selection.getStart()));c.keydown(o,i,r.startOffset,a,r.endOffset,u).each((function(t){m(o,t)})),e().each((function(t){return t.showBars()}))})),t.on("NodeChange",(function(){var e=t.selection,n=Dt.fromDom(e.getStart()),r=Dt.fromDom(e.getEnd());mo(ln,[n,r]).fold((function(){return o.clear(i)}),d)}))})),{clear:o.clear}}var $d=function(t,e){var n=$r(k.none()),o=$r([]),r=k.none(),i=ce("caption"),a=function(t){return r.forall((function(e){return!e[t]}))},u=function(){return El(Oi(t),wi(t)).bind((function(t){return ln(t).map((function(n){return i(t)?function(t){return{element:t,mergable:k.none(),unmergable:k.none(),selection:[t]}}(t):Hi(e,n,t)}))}))},c=function(t){return ln(t.element).map((function(e){var n=An.fromTable(e),o=cc(n,t).getOr([]),r=P(o,(function(t,e){return e.isLocked&&(t.onAny=!0,0===e.column?t.onFirst=!0:e.column+e.colspan>=n.grid.columns&&(t.onLast=!0)),t}),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:fc(n,t).isSome(),unmergeable:dc(n,t).isSome(),locked:r}}))},l=function(){n.set(G(u)()),r=n.get().bind(c),A(o.get(),(function(t){return t()}))},s=function(t,e){var r=function(){return n.get().fold((function(){t.setDisabled(!0)}),(function(n){t.setDisabled(e(n))}))};return r(),o.set(o.get().concat([r])),function(){o.set(D(o.get(),(function(t){return t!==r})))}},f=function(t){return r.exists((function(e){return e.locked[t]}))};return t.on("NodeChange ExecCommand TableSelectorChange",l),{onSetupTable:function(t){return s(t,(function(t){return!1}))},onSetupCellOrRow:function(t){return s(t,(function(t){return i(t.element)}))},onSetupColumn:function(t){return function(e){return s(e,(function(e){return i(e.element)||f(t)}))}},onSetupPasteable:function(t){return function(e){return s(e,(function(e){return i(e.element)||t().isNone()}))}},onSetupPasteableColumn:function(t,e){return function(n){return s(n,(function(n){return i(n.element)||t().isNone()||f(e)}))}},onSetupMergeable:function(t){return s(t,(function(t){return a("mergeable")}))},onSetupUnmergeable:function(t){return s(t,(function(t){return a("unmergeable")}))},resetTargets:l,targets:function(){return n.get()}}},Gd=function(t){var e=function(t,e,n){return{get:function(){return xo(t(),n).fold((function(){return e().map(Oo).getOrThunk(Co)}),(function(t){return So(t)}))}}}((function(){return bi(t)}),(function(){return El(Oi(t))}),Pi.selectedSelector),n=$d(t,e),o=ju(t),r=qd(t,o.lazyResize,n),i=Bl(t,o.lazyWire,e),a=function(){var t=$r(k.none()),e=$r(k.none()),n=function(t){t.set(k.none())};return{getRows:t.get,setRows:function(o){t.set(o),n(e)},clearRows:function(){return n(t)},getColumns:e.get,setColumns:function(o){e.set(o),n(t)},clearColumns:function(){return n(e)}}}();return zs(t,i,r,e,a),Ts(t,i,e),Bi(t,e,i,r),function(t,e,n){var o=function(e){return function(){return t.execCommand(e)}},r=function(e){t.execCommand("mceInsertTable",!1,{rows:e.numRows,columns:e.numColumns})},i={text:"Table properties",onSetup:e.onSetupTable,onAction:o("mceTableProps")},a={text:"Delete table",icon:"table-delete-table",onSetup:e.onSetupTable,onAction:o("mceTableDelete")};t.ui.registry.addMenuItem("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",onAction:o("mceTableInsertRowBefore"),onSetup:e.onSetupCellOrRow}),t.ui.registry.addMenuItem("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",onAction:o("mceTableInsertRowAfter"),onSetup:e.onSetupCellOrRow}),t.ui.registry.addMenuItem("tabledeleterow",{text:"Delete row",icon:"table-delete-row",onAction:o("mceTableDeleteRow"),onSetup:e.onSetupCellOrRow}),t.ui.registry.addMenuItem("tablerowprops",{text:"Row properties",icon:"table-row-properties",onAction:o("mceTableRowProps"),onSetup:e.onSetupCellOrRow}),t.ui.registry.addMenuItem("tablecutrow",{text:"Cut row",icon:"cut-row",onAction:o("mceTableCutRow"),onSetup:e.onSetupCellOrRow}),t.ui.registry.addMenuItem("tablecopyrow",{text:"Copy row",icon:"duplicate-row",onAction:o("mceTableCopyRow"),onSetup:e.onSetupCellOrRow}),t.ui.registry.addMenuItem("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",onAction:o("mceTablePasteRowBefore"),onSetup:e.onSetupPasteable(n.getRows)}),t.ui.registry.addMenuItem("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",onAction:o("mceTablePasteRowAfter"),onSetup:e.onSetupPasteable(n.getRows)}),t.ui.registry.addMenuItem("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",onAction:o("mceTableInsertColBefore"),onSetup:e.onSetupColumn("onFirst")}),t.ui.registry.addMenuItem("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",onAction:o("mceTableInsertColAfter"),onSetup:e.onSetupColumn("onLast")}),t.ui.registry.addMenuItem("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",onAction:o("mceTableDeleteCol"),onSetup:e.onSetupColumn("onAny")}),t.ui.registry.addMenuItem("tablecutcolumn",{text:"Cut column",icon:"cut-column",onAction:o("mceTableCutCol"),onSetup:e.onSetupColumn("onAny")}),t.ui.registry.addMenuItem("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",onAction:o("mceTableCopyCol"),onSetup:e.onSetupColumn("onAny")}),t.ui.registry.addMenuItem("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",onAction:o("mceTablePasteColBefore"),onSetup:e.onSetupPasteableColumn(n.getColumns,"onFirst")}),t.ui.registry.addMenuItem("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",onAction:o("mceTablePasteColAfter"),onSetup:e.onSetupPasteableColumn(n.getColumns,"onLast")}),t.ui.registry.addMenuItem("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",onAction:o("mceTableCellProps"),onSetup:e.onSetupCellOrRow}),t.ui.registry.addMenuItem("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",onAction:o("mceTableMergeCells"),onSetup:e.onSetupMergeable}),t.ui.registry.addMenuItem("tablesplitcells",{text:"Split cell",icon:"table-split-cells",onAction:o("mceTableSplitCells"),onSetup:e.onSetupUnmergeable}),!1===function(t){return t.getParam("table_grid",!0,"boolean")}(t)?t.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:o("mceInsertTable")}):t.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"inserttable",onAction:r}]}}),t.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:o("mceInsertTable")}),t.ui.registry.addMenuItem("tableprops",i),t.ui.registry.addMenuItem("deletetable",a),t.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:function(){return"tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter"}}),t.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:function(){return"tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter"}}),t.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:function(){return"tablecellprops tablemergecells tablesplitcells"}}),t.ui.registry.addContextMenu("table",{update:function(){return e.resetTargets(),e.targets().fold((function(){return""}),(function(t){return"caption"===te(t.element)?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"}))}})}(t,n,a),function(t,e,n){t.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:function(t){return t("inserttable | cell row column | advtablesort | tableprops deletetable")}});var o=function(e){return function(){return t.execCommand(e)}};t.ui.registry.addButton("tableprops",{tooltip:"Table properties",onAction:o("mceTableProps"),icon:"table",onSetup:e.onSetupTable}),t.ui.registry.addButton("tabledelete",{tooltip:"Delete table",onAction:o("mceTableDelete"),icon:"table-delete-table",onSetup:e.onSetupTable}),t.ui.registry.addButton("tablecellprops",{tooltip:"Cell properties",onAction:o("mceTableCellProps"),icon:"table-cell-properties",onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tablemergecells",{tooltip:"Merge cells",onAction:o("mceTableMergeCells"),icon:"table-merge-cells",onSetup:e.onSetupMergeable}),t.ui.registry.addButton("tablesplitcells",{tooltip:"Split cell",onAction:o("mceTableSplitCells"),icon:"table-split-cells",onSetup:e.onSetupUnmergeable}),t.ui.registry.addButton("tableinsertrowbefore",{tooltip:"Insert row before",onAction:o("mceTableInsertRowBefore"),icon:"table-insert-row-above",onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tableinsertrowafter",{tooltip:"Insert row after",onAction:o("mceTableInsertRowAfter"),icon:"table-insert-row-after",onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tabledeleterow",{tooltip:"Delete row",onAction:o("mceTableDeleteRow"),icon:"table-delete-row",onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tablerowprops",{tooltip:"Row properties",onAction:o("mceTableRowProps"),icon:"table-row-properties",onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tableinsertcolbefore",{tooltip:"Insert column before",onAction:o("mceTableInsertColBefore"),icon:"table-insert-column-before",onSetup:e.onSetupColumn("onFirst")}),t.ui.registry.addButton("tableinsertcolafter",{tooltip:"Insert column after",onAction:o("mceTableInsertColAfter"),icon:"table-insert-column-after",onSetup:e.onSetupColumn("onLast")}),t.ui.registry.addButton("tabledeletecol",{tooltip:"Delete column",onAction:o("mceTableDeleteCol"),icon:"table-delete-column",onSetup:e.onSetupColumn("onAny")}),t.ui.registry.addButton("tablecutrow",{tooltip:"Cut row",icon:"cut-row",onAction:o("mceTableCutRow"),onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tablecopyrow",{tooltip:"Copy row",icon:"duplicate-row",onAction:o("mceTableCopyRow"),onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tablepasterowbefore",{tooltip:"Paste row before",icon:"paste-row-before",onAction:o("mceTablePasteRowBefore"),onSetup:e.onSetupPasteable(n.getRows)}),t.ui.registry.addButton("tablepasterowafter",{tooltip:"Paste row after",icon:"paste-row-after",onAction:o("mceTablePasteRowAfter"),onSetup:e.onSetupPasteable(n.getRows)}),t.ui.registry.addButton("tablecutcol",{tooltip:"Cut column",icon:"cut-column",onAction:o("mceTableCutCol"),onSetup:e.onSetupColumn("onAny")}),t.ui.registry.addButton("tablecopycol",{tooltip:"Copy column",icon:"duplicate-column",onAction:o("mceTableCopyCol"),onSetup:e.onSetupColumn("onAny")}),t.ui.registry.addButton("tablepastecolbefore",{tooltip:"Paste column before",icon:"paste-column-before",onAction:o("mceTablePasteColBefore"),onSetup:e.onSetupPasteableColumn(n.getColumns,"onFirst")}),t.ui.registry.addButton("tablepastecolafter",{tooltip:"Paste column after",icon:"paste-column-after",onAction:o("mceTablePasteColAfter"),onSetup:e.onSetupPasteableColumn(n.getColumns,"onLast")}),t.ui.registry.addButton("tableinsertdialog",{tooltip:"Insert table",onAction:o("mceInsertTable"),icon:"table"})}(t,n,a),function(t){var e=function(t){return t.getParam("table_toolbar","tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol")}(t);e.length>0&&t.ui.registry.addContextToolbar("table",{predicate:function(e){return t.dom.is(e,"table")&&t.getBody().contains(e)},items:e,scope:"node",position:"node"})}(t),t.on("PreInit",(function(){t.serializer.addTempAttr(Pi.firstSelected),t.serializer.addTempAttr(Pi.lastSelected),function(t){t.formatter.register(Ms)}(t)})),function(t){return t.getParam("table_tab_navigation",!0,"boolean")}(t)&&t.on("keydown",(function(e){!function(t,e,n){if(t.keyCode===_f.TAB){var o=bi(e),r=function(t){var e=te(t);return Ht(t,o)||O(Tf,e)},i=e.selection.getRng(),a=Dt.fromDom(t.shiftKey?i.startContainer:i.endContainer);an(a,r).each((function(o){t.preventDefault(),ln(o,r).each(n.clear),e.selection.collapse(t.shiftKey),(t.shiftKey?Sf:Cf)(e,r,o).each((function(t){e.selection.setRng(t)}))}))}}(e,t,r)})),t.on("remove",(function(){o.destroy()})),function(t,e,n,o){return{insertTable:Wl(t),setClipboardRows:Ul(e.setRows),getClipboardRows:jl(e.getRows),setClipboardCols:Ul(e.setColumns),getClipboardCols:jl(e.getColumns),resizeHandler:n,selectionTargets:o}}(t,a,o,n)};zo.add("table",Gd)}(),h=tinymce.util.Tools.resolve("tinymce.PluginManager"),v=tinymce.util.Tools.resolve("tinymce.util.VK"),b=function(e){return function(n){return r=t(o=n),(null===o?"null":"object"===r&&(Array.prototype.isPrototypeOf(o)||o.constructor&&"Array"===o.constructor.name)?"array":"object"===r&&(String.prototype.isPrototypeOf(o)||o.constructor&&"String"===o.constructor.name)?"string":r)===e;var o,r}},x=function(e){return function(n){return t(n)===e}},y=b("string"),w=b("array"),p=null,k=function(t){return p===t},_=x("boolean"),C=x("function"),S=function(t){var e=t.getParam("link_assume_external_targets",!1);return _(e)&&e?1:!y(e)||"http"!==e&&"https"!==e?0:e},O=function(t){return t.getParam("default_link_target")},z=function(t){return t.getParam("target_list",!0)},T=function(t){return t.getParam("rel_list",[],"array")},M=function(t){return t.getParam("link_title",!0,"boolean")},A=function(t){return t.getParam("allow_unsafe_link_target",!1,"boolean")},D=function(t){return t.getParam("link_default_protocol","http","string")},E=function(){},H=(P=function(t){return function(){return t}})(!1),B=P(!0),R=function(){return I},d=function(t){return t.isNone()},I={fold:function(t,e){return t()},is:H,isSome:H,isNone:B,getOr:g=function(t){return t},getOrThunk:m=function(t){return t()},getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:P(null),getOrUndefined:P(void 0),or:g,orThunk:m,map:R,each:E,bind:R,exists:H,forall:B,filter:R,equals:d,equals_:d,toArray:function(){return[]},toString:P("none()")},N=function t(e){var n=P(e),o=function(){return i},r=function(t){return t(e)},i={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:B,isNone:H,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:o,orThunk:o,map:function(n){return t(n(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?i:I},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(H,(function(t){return n(e,t)}))}};return i},L=N,F=R,V=function(t){return null==t?I:N(t)},j=Array.prototype.indexOf,U=Array.prototype.push,W=function(t,e){return function(t,e){return j.call(t,e)}(t,e)>-1},q=function(t){for(var e=[],n=0,o=t.length;n<o;++n){if(!w(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);U.apply(e,t[n])}return e},$=function(t,e){return q(function(t,e){for(var n=t.length,o=new Array(n),r=0;r<n;r++){var i=t[r];o[r]=e(i,r)}return o}(t,e))},G=function(t,e){for(var n=0;n<t.length;n++){var o=e(t[n],n);if(o.isSome())return o}return F()},Y=function(t){for(var e=[],n=function(t){e.push(t)},o=0;o<t.length;o++)t[o].each(n);return e},X=function(t,e){return t?L(e):F()},K=tinymce.util.Tools.resolve("tinymce.util.Tools"),Z=function t(e,n){var o=[];return K.each(e,(function(e){var r=function(t){return y(t.text)?t.text:y(t.title)?t.title:""}(e);if(void 0!==e.menu){var i=t(e.menu,n);o.push({text:r,items:i})}else{var a=n(e);o.push({text:r,value:a})}})),o},tt={sanitize:function(t){return Q(J)(t)},sanitizeWith:Q=function(t){return void 0===t&&(t=J),function(e){return V(e).map((function(e){return Z(e,t)}))}},createUi:function(t,e){return function(n){return{name:t,type:"listbox",label:e,items:n}}},getValue:J=function(t){return y(t.value)?t.value:""}},et=function(){return et=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},et.apply(this,arguments)},nt=Object.keys,ot=Object.hasOwnProperty,rt=function(t,e,n,o){return function(t,e){for(var n=nt(t),o=0,r=n.length;o<r;o++){var i=n[o];e(t[i],i)}}(t,(function(t,r){(e(t,r)?n:o)(t,r)})),{}},it=function(t,e){return ot.call(t,e)},at=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),ut=function(t){return t&&"a"===t.nodeName.toLowerCase()},ct=function(t){return ut(t)&&!!ft(t)},lt=function(t,e){if(t.collapsed)return[];var n=t.cloneContents(),o=new at(n.firstChild,n),r=[],i=n.firstChild;do{e(i)&&r.push(i)}while(i=o.next());return r},st=function(t){return/^\w+:/i.test(t)},ft=function(t){var e=t.getAttribute("data-mce-href");return e||t.getAttribute("href")},dt=function(t,e){var n=["noopener"],o=t?t.split(/\s+/):[],r=function(t){return t.filter((function(t){return-1===K.inArray(n,t)}))},i=e?function(t){return(t=r(t)).length>0?t.concat(n):n}(o):r(o);return i.length>0?function(t){return K.trim(t.sort().join(" "))}(i):""},mt=function(t,e){return e=e||t.selection.getNode(),vt(e)?t.dom.select("a[href]",e)[0]:t.dom.getParent(e,"a[href]")},gt=function(t,e){return function(t){return t.replace(/\uFEFF/g,"")}(e?e.innerText||e.textContent:t.getContent({format:"text"}))},pt=function(t){return K.grep(t,ct).length>0},ht=function(t){var e=t.schema.getTextInlineElements();return 0===lt(t.selection.getRng(),(function(t){return 1===t.nodeType&&!ut(t)&&!it(e,t.nodeName.toLowerCase())})).length},vt=function(t){return t&&"FIGURE"===t.nodeName&&/\bimage\b/i.test(t.className)},bt=function(t,e){var n=et({},e);if(!(T(t).length>0)&&!1===A(t)){var o=dt(n.rel,"_blank"===n.target);n.rel=o||null}return V(n.target).isNone()&&!1===z(t)&&(n.target=O(t)),n.href=function(t,e){return"http"!==e&&"https"!==e||st(t)?t:e+"://"+t}(n.href,S(t)),n},xt=function(t,e,n){var o=t.selection.getNode(),r=mt(t,o),i=bt(t,function(t){return e=["title","rel","class","target"],n=function(e,n){return t[n].each((function(t){e[n]=t.length>0?t:null})),e},o={href:t.href},function(t,e){for(var n=0,o=t.length;n<o;n++)e(t[n],n)}(e,(function(t){o=n(o,t)})),o;var e,n,o}(n));t.undoManager.transact((function(){n.href===e.href&&e.attach(),r?(t.focus(),function(t,e,n,o){n.each((function(t){e.hasOwnProperty("innerText")?e.innerText=t:e.textContent=t})),t.dom.setAttribs(e,o),t.selection.select(e)}(t,r,n.text,i)):function(t,e,n,o){vt(e)?Ct(t,e,o):n.fold((function(){t.execCommand("mceInsertLink",!1,o)}),(function(e){t.insertContent(t.dom.createHTML("a",o,t.dom.encode(e)))}))}(t,o,n.text,i)}))},yt=function(t){var e=t.class,n=t.href,o=t.rel,r=t.target,i=t.text,a=t.title;return function(t,e){var n,o={};return rt(t,e,(n=o,function(t,e){n[e]=t}),E),o}({class:e.getOrNull(),href:n,rel:o.getOrNull(),target:r.getOrNull(),text:i.getOrNull(),title:a.getOrNull()},(function(t,e){return!1===k(t)}))},wt=function(t,e,n){t.hasPlugin("rtc",!0)?t.execCommand("createlink",!1,yt(n)):xt(t,e,n)},kt=function(t){t.hasPlugin("rtc",!0)?t.execCommand("unlink"):function(t){t.undoManager.transact((function(){var e=t.selection.getNode();vt(e)?_t(t,e):function(t){var e=t.dom,n=t.selection,o=n.getBookmark(),r=n.getRng().cloneRange(),i=e.getParent(r.startContainer,"a[href]",t.getBody()),a=e.getParent(r.endContainer,"a[href]",t.getBody());i&&r.setStartBefore(i),a&&r.setEndAfter(a),n.setRng(r),t.execCommand("unlink"),n.moveToBookmark(o)}(t),t.focus()}))}(t)},_t=function(t,e){var n=t.dom.select("img",e)[0];if(n){var o=t.dom.getParents(n,"a[href]",e)[0];o&&(o.parentNode.insertBefore(n,o),t.dom.remove(o))}},Ct=function(t,e,n){var o=t.dom.select("img",e)[0];if(o){var r=t.dom.create("a",n);o.parentNode.insertBefore(r,o),r.appendChild(o)}},St=function(t){return it(e=t,n="items")&&void 0!==e[n]&&null!==e[n];var e,n},Ot=function t(e,n){return G(n,(function(n){return St(n)?t(e,n.items):X(n.value===e,n)}))},zt=function(t,e,n,o){var r=o[e],i=t.length>0;return void 0!==r?Ot(r,n).map((function(e){return{url:{value:e.value,meta:{text:i?t:e.text,attach:E}},text:i?t:e.text}})):F()},Tt=function(t,e){var n={text:t.text,title:t.title},o=function(t){var e,o=(e=t.url,X(n.text.length<=0,V(e.meta.text).getOr(e.value))),r=function(t){return X(n.title.length<=0,V(t.meta.title).getOr(""))}(t.url);return o.isSome()||r.isSome()?L(et(et({},o.map((function(t){return{text:t}})).getOr({})),r.map((function(t){return{title:t}})).getOr({}))):F()},r=function(t,o){var r,i,a=(r=e,i=o.name,"link"===i?r.link:"anchor"===i?r.anchor:F()).getOr([]);return zt(n.text,o.name,a,t)};return{onChange:function(t,e){var i=e.name;return"url"===i?o(t()):W(["anchor","link"],i)?r(t(),e):"text"===i||"title"===i?(n[i]=t()[i],F()):F()}}},Mt=tinymce.util.Tools.resolve("tinymce.util.Delay"),At=tinymce.util.Tools.resolve("tinymce.util.Promise"),Dt=function(t){var e=t.href;return e.indexOf("@")>0&&-1===e.indexOf("/")&&-1===e.indexOf("mailto:")?L({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:function(t){return et(et({},t),{href:"mailto:"+e})}}):F()},Et=function(t,e){return function(n){var o=n.href;return 1===t&&!st(o)||0===t&&/^\s*www(\.|\d\.)/i.test(o)?L({message:"The URL you entered seems to be an external link. Do you want to add the required "+e+":// prefix?",preprocess:function(t){return et(et({},t),{href:e+"://"+o})}}):F()}},Pt=function(t,e){return G([Dt,Et(S(t),D(t))],(function(t){return t(e)})).fold((function(){return At.resolve(e)}),(function(n){return new At((function(o){!function(t,e,n){var o=t.selection.getRng();Mt.setEditorTimeout(t,(function(){t.windowManager.confirm(e,(function(e){t.selection.setRng(o),n(e)}))}))}(t,n.message,(function(t){o(t?n.preprocess(e):e)}))}))}))},Ht=function(t){var e=t.dom.select("a:not([href])"),n=$(e,(function(t){var e=t.name||t.id;return e?[{text:e,value:"#"+e}]:[]}));return n.length>0?L([{text:"None",value:""}].concat(n)):F()},Bt=function(t){var e=function(t){return t.getParam("link_class_list",[],"array")}(t);return e.length>0?tt.sanitize(e):F()},Rt=tinymce.util.Tools.resolve("tinymce.util.XHR"),It=function(t){var e=function(e){return t.convertURL(e.value||e.url,"href")},n=function(t){return t.getParam("link_list")}(t);return new At((function(t){y(n)?Rt.send({url:n,success:function(e){return t(function(t){try{return L(JSON.parse(t))}catch(e){return F()}}(e))},error:function(e){return t(F())}}):C(n)?n((function(e){return t(L(e))})):t(V(n))})).then((function(t){return t.bind(tt.sanitizeWith(e)).map((function(t){return t.length>0?[{text:"None",value:""}].concat(t):t}))}))},Nt=function(t,e){var n=T(t);if(n.length>0){var o=e.is("_blank");return(!1===A(t)?tt.sanitizeWith((function(t){return dt(tt.getValue(t),o)})):tt.sanitize)(n)}return F()},Lt=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],Ft=function(t){var e=z(t);return w(e)?tt.sanitize(e).orThunk((function(){return L(Lt)})):!1===e?F():L(Lt)},Vt=function(t,e,n){var o=t.getAttrib(e,n);return null!==o&&o.length>0?L(o):F()},jt=function(t,e){return It(t).then((function(n){var o=function(t,e){var n=t.dom,o=ht(t)?L(gt(t.selection,e)):F(),r=e?L(n.getAttrib(e,"href")):F(),i=e?V(n.getAttrib(e,"target")):F(),a=Vt(n,e,"rel"),u=Vt(n,e,"class");return{url:r,text:o,title:Vt(n,e,"title"),target:i,rel:a,linkClass:u}}(t,e);return{anchor:o,catalogs:{targets:Ft(t),rels:Nt(t,o.target),classes:Bt(t),anchor:Ht(t),link:n},optNode:V(e),flags:{titleEnabled:M(t)}}}))},Ut=function(t){var e=function(t){var e=mt(t);return jt(t,e)}(t);e.then((function(e){var n=function(t,e){return function(n){var o=n.getData();if(!o.url.value)return kt(t),void n.close();var r=function(t){return V(o[t]).filter((function(n){return!e.anchor[t].is(n)}))},i={href:o.url.value,text:r("text"),target:r("target"),rel:r("rel"),class:r("linkClass"),title:r("title")},a={href:o.url.value,attach:void 0!==o.url.meta&&o.url.meta.attach?o.url.meta.attach:E};Pt(t,i).then((function(e){wt(t,a,e)})),n.close()}}(t,e);return function(t,e,n){var o=t.anchor.text.map((function(){return{name:"text",type:"input",label:"Text to display"}})).toArray(),r=t.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],i=function(t,e){var n=t.anchor,o=n.url.getOr("");return{url:{value:o,meta:{original:{value:o}}},text:n.text.getOr(""),title:n.title.getOr(""),anchor:o,link:o,rel:n.rel.getOr(""),target:n.target.or(e).getOr(""),linkClass:n.linkClass.getOr("")}}(t,V(O(n))),a=t.catalogs,u=Tt(i,a);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:q([[{name:"url",type:"urlinput",filetype:"file",label:"URL"}],o,r,Y([a.anchor.map(tt.createUi("anchor","Anchors")),a.rels.map(tt.createUi("rel","Rel")),a.targets.map(tt.createUi("target","Open link in...")),a.link.map(tt.createUi("link","Link list")),a.classes.map(tt.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:i,onChange:function(t,e){var n=e.name;u.onChange(t.getData,{name:n}).each((function(e){t.setData(e)}))},onSubmit:e}}(e,n,t)})).then((function(e){t.windowManager.open(e)}))},Wt=function(t){var e=document.createElement("a");e.target="_blank",e.href=t,e.rel="noreferrer noopener";var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),function(t,e){document.body.appendChild(t),t.dispatchEvent(e),document.body.removeChild(t)}(e,n)},qt=function(t,e){return t.dom.getParent(e,"a[href]")},$t=function(t){return qt(t,t.selection.getStart())},Gt=function(t,e){if(e){var n=ft(e);if(/^#/.test(n)){var o=t.$(n);o.length&&t.selection.scrollIntoView(o[0],!0)}else Wt(e.href)}},Yt=function(t){return function(){Ut(t)}},Xt=function(t){return function(){Gt(t,$t(t))}},Kt=function(t,e){return t.on("NodeChange",e),function(){return t.off("NodeChange",e)}},Jt=function(t){return function(e){return Kt(t,(function(){e.setActive(!t.mode.isReadOnly()&&null!==mt(t,t.selection.getNode()))}))}},Zt=function(t){return function(e){var n=function(){return e.setDisabled(null===mt(t,t.selection.getNode()))};return n(),Kt(t,n)}},Qt=function(t){return function(e){var n=function(e){return pt(e)||(n=t.selection.getRng(),lt(n,ct).length>0);var n},o=t.dom.getParents(t.selection.getStart());return e.setDisabled(!n(o)),Kt(t,(function(t){return e.setDisabled(!n(t.parents))}))}},h.add("link",(function(t){!function(t){t.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:Yt(t),onSetup:Jt(t)}),t.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:Xt(t),onSetup:Zt(t)}),t.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:function(){return kt(t)},onSetup:Qt(t)})}(t),function(t){t.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:Xt(t),onSetup:Zt(t)}),t.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:Yt(t)}),t.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:function(){return kt(t)},onSetup:Qt(t)})}(t),function(t){t.ui.registry.addContextMenu("link",{update:function(e){return pt(t.dom.getParents(e,"a"))?"link unlink openlink":"link"}})}(t),function(t){var e=function(e){var n=t.selection.getNode();return e.setDisabled(!mt(t,n)),E};t.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:Jt(t)},label:"Link",predicate:function(e){return!!mt(t,e)&&function(t){return t.getParam("link_context_toolbar",!1,"boolean")}(t)},initValue:function(){var e=mt(t);return e?ft(e):""},commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:function(e){var n=t.selection.getNode();return e.setActive(!!mt(t,n)),Jt(t)(e)},onAction:function(e){var n=mt(t),o=e.getValue();if(n)t.undoManager.transact((function(){t.dom.setAttrib(n,"href",o),function(t){t.selection.collapse(!1)}(t),e.hide()}));else{var r={href:o,attach:E},i=ht(t)?L(gt(t.selection,n)).filter((function(t){return t.length>0})).or(V(o)):F();wt(t,r,{href:o,text:i,title:F(),rel:F(),target:F(),class:F()}),e.hide()}}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:e,onAction:function(e){kt(t),e.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:e,onAction:function(e){Xt(t)(),e.hide()}}]})}(t),function(t){t.on("click",(function(e){var n=qt(t,e.target);n&&v.metaKeyPressed(e)&&(e.preventDefault(),Gt(t,n))})),t.on("keydown",(function(e){var n=$t(t);n&&13===e.keyCode&&function(t){return!0===t.altKey&&!1===t.shiftKey&&!1===t.ctrlKey&&!1===t.metaKey}(e)&&(e.preventDefault(),Gt(t,n))}))}(t),function(t){t.addCommand("mceLink",(function(){!function(t){return t.getParam("link_quicklink",!1,"boolean")}(t)?Yt(t)():t.fire("contexttoolbar-show",{toolbarKey:"quicklink"})}))}(t),function(t){t.addShortcut("Meta+K","",(function(){t.execCommand("mceLink")}))}(t)})),function(){var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(){return n=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},n.apply(this,arguments)},o=function(e){return function(n){return function(e){var n=t(e);return null===e?"null":"object"===n&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===n&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":n}(n)===e}},r=function(e){return function(n){return t(n)===e}},i=o("string"),a=o("object"),u=o("array"),c=function(t){return function(e){return t===e}}(null),l=r("boolean"),s=function(t){return!function(t){return null==t}(t)},f=r("number"),d=function(){},m=function(t){return function(){return t}},g=m(!1),p=m(!0),h=function(){return v},v=function(){var t=function(t){return t.isNone()},e=function(t){return t()},n=function(t){return t};return{fold:function(t,e){return t()},is:g,isSome:g,isNone:p,getOr:n,getOrThunk:e,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:m(null),getOrUndefined:m(void 0),or:n,orThunk:e,map:h,each:d,bind:h,exists:g,forall:p,filter:h,equals:t,equals_:t,toArray:function(){return[]},toString:m("none()")}}(),b=function t(e){var n=m(e),o=function(){return i},r=function(t){return t(e)},i={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:p,isNone:g,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:o,orThunk:o,map:function(n){return t(n(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?i:v},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(g,(function(t){return n(e,t)}))}};return i},x=b,y=h,w=function(t){return null==t?v:b(t)},k=Object.keys,_=Object.hasOwnProperty,C=function(t,e,n,o){return function(t,e){for(var n=k(t),o=0,r=n.length;o<r;o++){var i=n[o];e(t[i],i)}}(t,(function(t,r){(e(t,r)?n:o)(t,r)})),{}},S=function(t,e){return function(t,e){return _.call(t,e)}(t,e)&&void 0!==t[e]&&null!==t[e]},O=Array.prototype.push,z=function(t){for(var e=[],n=0,o=t.length;n<o;++n){if(!u(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);O.apply(e,t[n])}return e},T=function(t){return function(t,e){return e>=0&&e<t.length?x(t[e]):y()}(t,0)};"undefined"!=typeof window?window:Function("return this;")();var M,A=function(t,e,n){!function(t,e,n){if(!(i(n)||l(n)||f(n)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")}(t.dom,e,n)},D=function(t){if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}},E={fromHtml:function(t,e){var n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||n.childNodes.length>1)throw console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return D(n.childNodes[0])},fromTag:function(t,e){var n=(e||document).createElement(t);return D(n)},fromText:function(t,e){var n=(e||document).createTextNode(t);return D(n)},fromDom:D,fromPoint:function(t,e,n){return w(t.dom.elementFromPoint(e,n)).map(D)}},P=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),H=tinymce.util.Tools.resolve("tinymce.util.Promise"),B=tinymce.util.Tools.resolve("tinymce.util.XHR"),R=function(t){return t.getParam("image_dimensions",!0,"boolean")},I=function(t,e){return Math.max(parseInt(t,10),parseInt(e,10))},N=function(t){return t&&(t=t.replace(/px$/,"")),t},L=function(t){return t.length>0&&/^[0-9]+$/.test(t)&&(t+="px"),t},F=function(t){if(t.margin){var e=String(t.margin).split(" ");switch(e.length){case 1:t["margin-top"]=t["margin-top"]||e[0],t["margin-right"]=t["margin-right"]||e[0],t["margin-bottom"]=t["margin-bottom"]||e[0],t["margin-left"]=t["margin-left"]||e[0];break;case 2:t["margin-top"]=t["margin-top"]||e[0],t["margin-right"]=t["margin-right"]||e[1],t["margin-bottom"]=t["margin-bottom"]||e[0],t["margin-left"]=t["margin-left"]||e[1];break;case 3:t["margin-top"]=t["margin-top"]||e[0],t["margin-right"]=t["margin-right"]||e[1],t["margin-bottom"]=t["margin-bottom"]||e[2],t["margin-left"]=t["margin-left"]||e[1];break;case 4:t["margin-top"]=t["margin-top"]||e[0],t["margin-right"]=t["margin-right"]||e[1],t["margin-bottom"]=t["margin-bottom"]||e[2],t["margin-left"]=t["margin-left"]||e[3]}delete t.margin}return t},V=function(t){return"IMG"===t.nodeName&&(t.hasAttribute("data-mce-object")||t.hasAttribute("data-mce-placeholder"))},j=P.DOM,U=function(t){return t.style.marginLeft&&t.style.marginRight&&t.style.marginLeft===t.style.marginRight?N(t.style.marginLeft):""},W=function(t){return t.style.marginTop&&t.style.marginBottom&&t.style.marginTop===t.style.marginBottom?N(t.style.marginTop):""},q=function(t){return t.style.borderWidth?N(t.style.borderWidth):""},$=function(t,e){return t.hasAttribute(e)?t.getAttribute(e):""},G=function(t,e){return t.style[e]?t.style[e]:""},Y=function(t){return null!==t.parentNode&&"FIGURE"===t.parentNode.nodeName},X=function(t,e,n){""===n?t.removeAttribute(e):t.setAttribute(e,n)},K=function(t){Y(t)?function(t){var e=t.parentNode;j.insertAfter(t,e),j.remove(e)}(t):function(t){var e=j.create("figure",{class:"image"});j.insertAfter(e,t),e.appendChild(t),e.appendChild(j.create("figcaption",{contentEditable:"true"},"Caption")),e.contentEditable="false"}(t)},J=function(t,e){var n=t.getAttribute("style"),o=e(null!==n?n:"");o.length>0?(t.setAttribute("style",o),t.setAttribute("data-mce-style",o)):t.removeAttribute("style")},Z=function(t,e){return function(t,n,o){t.style[n]?(t.style[n]=L(o),J(t,e)):X(t,n,o)}},Q=function(t,e){return t.style[e]?N(t.style[e]):$(t,e)},tt=function(t,e){var n=L(e);t.style.marginLeft=n,t.style.marginRight=n},et=function(t,e){var n=L(e);t.style.marginTop=n,t.style.marginBottom=n},nt=function(t,e){var n=L(e);t.style.borderWidth=n},ot=function(t,e){t.style.borderStyle=e},rt=function(t){return"FIGURE"===t.nodeName},it=function(t){return 0===j.getAttrib(t,"alt").length&&"presentation"===j.getAttrib(t,"role")},at=function(t){return it(t)?"":$(t,"alt")},ut=function(t,e){var n=document.createElement("img");return X(n,"style",e.style),(U(n)||""!==e.hspace)&&tt(n,e.hspace),(W(n)||""!==e.vspace)&&et(n,e.vspace),(q(n)||""!==e.border)&&nt(n,e.border),(function(t){return G(t,"borderStyle")}(n)||""!==e.borderStyle)&&ot(n,e.borderStyle),t(n.getAttribute("style"))},ct=function(t,e){return{src:$(e,"src"),alt:at(e),title:$(e,"title"),width:Q(e,"width"),height:Q(e,"height"),class:$(e,"class"),style:t($(e,"style")),caption:Y(e),hspace:U(e),vspace:W(e),border:q(e),borderStyle:G(e,"borderStyle"),isDecorative:it(e)}},lt=function(t,e,n,o,r){n[o]!==e[o]&&r(t,o,n[o])},st=function(t,e,n){if(n){j.setAttrib(t,"role","presentation");var o=E.fromDom(t);A(o,"alt","")}else{if(c(e)){o=E.fromDom(t);r="alt",o.dom.removeAttribute(r)}else{o=E.fromDom(t);A(o,"alt",e)}"presentation"===j.getAttrib(t,"role")&&j.setAttrib(t,"role","")}var r},ft=function(t,e){return function(n,o,r){t(n,r),J(n,e)}},dt=function(t,e,n){var o=ct(t,n);lt(n,o,e,"caption",(function(t,e,n){return K(t)})),lt(n,o,e,"src",X),lt(n,o,e,"title",X),lt(n,o,e,"width",Z(0,t)),lt(n,o,e,"height",Z(0,t)),lt(n,o,e,"class",X),lt(n,o,e,"style",ft((function(t,e){return X(t,"style",e)}),t)),lt(n,o,e,"hspace",ft(tt,t)),lt(n,o,e,"vspace",ft(et,t)),lt(n,o,e,"border",ft(nt,t)),lt(n,o,e,"borderStyle",ft(ot,t)),function(t,e,n){n.alt===e.alt&&n.isDecorative===e.isDecorative||st(t,n.alt,n.isDecorative)}(n,o,e)},mt=function(t,e){var n=t.dom.styles.parse(e),o=F(n),r=t.dom.styles.parse(t.dom.styles.serialize(o));return t.dom.styles.serialize(r)},gt=function(t){var e=t.selection.getNode(),n=t.dom.getParent(e,"figure.image");return n?t.dom.select("img",n)[0]:e&&("IMG"!==e.nodeName||V(e))?null:e},pt=function(t,e){var n=t.dom,o=function(t,e){var n,o={};return C(t,e,(n=o,function(t,e){n[e]=t}),d),o}(t.schema.getTextBlockElements(),(function(e,n){return!t.schema.isValidChild(n,"figure")})),r=n.getParent(e.parentNode,(function(t){return S(o,t.nodeName)}),t.getBody());return r?n.split(r,e):e},ht=function(t,e){var o=function(t,e){var o=document.createElement("img");if(dt(t,n(n({},e),{caption:!1}),o),st(o,e.alt,e.isDecorative),e.caption){var r=j.create("figure",{class:"image"});return r.appendChild(o),r.appendChild(j.create("figcaption",{contentEditable:"true"},"Caption")),r.contentEditable="false",r}return o}((function(e){return mt(t,e)}),e);t.dom.setAttrib(o,"data-mce-id","__mcenew"),t.focus(),t.selection.setContent(o.outerHTML);var r=t.dom.select('*[data-mce-id="__mcenew"]')[0];if(t.dom.setAttrib(r,"data-mce-id",null),rt(r)){var i=pt(t,r);t.selection.select(i)}else t.selection.select(r)},vt=function(t,e){var n=gt(t);if(dt((function(e){return mt(t,e)}),e,n),function(t,e){t.dom.setAttrib(e,"src",e.getAttribute("src"))}(t,n),rt(n.parentNode)){var o=n.parentNode;pt(t,o),t.selection.select(n.parentNode)}else t.selection.select(n),function(t,e,n){var o=function(){n.onload=n.onerror=null,t.selection&&(t.selection.select(n),t.nodeChanged())};n.onload=function(){e.width||e.height||!R(t)||t.dom.setAttribs(n,{width:String(n.clientWidth),height:String(n.clientHeight)}),o()},n.onerror=o}(t,e,n)},bt=Object.prototype.hasOwnProperty,xt=(M=function(t,e){return a(t)&&a(e)?xt(t,e):e},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)throw new Error("Can't merge zero objects");for(var n={},o=0;o<t.length;o++){var r=t[o];for(var i in r)bt.call(r,i)&&(n[i]=M(n[i],r[i]))}return n}),yt=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),wt=tinymce.util.Tools.resolve("tinymce.util.Tools"),kt=function(t){return i(t.value)?t.value:""},_t=function t(e,n){var o=[];return wt.each(e,(function(e){var r=function(t){return i(t.text)?t.text:i(t.title)?t.title:""}(e);if(void 0!==e.menu){var a=t(e.menu,n);o.push({text:r,items:a})}else{var u=n(e);o.push({text:r,value:u})}})),o},Ct=function(t){return void 0===t&&(t=kt),function(e){return e?w(e).map((function(e){return _t(e,t)})):y()}},St=function t(e,n){return function(t,e){for(var n=0;n<t.length;n++){var o=e(t[n],n);if(o.isSome())return o}return y()}(e,(function(e){return function(t){return Object.prototype.hasOwnProperty.call(t,"items")}(e)?t(e.items,n):e.value===n?x(e):y()}))},Ot=Ct,zt=function(t){return Ct(kt)(t)},Tt=function(t,e){return t.bind((function(t){return St(t,e)}))},Mt=function(t){return{title:"Advanced",name:"advanced",items:[{type:"input",label:"Style",name:"style"},{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]}},At=function(t){var e=Ot((function(e){return t.convertURL(e.value||e.url,"src")})),n=new H((function(n){!function(t,e){var n=function(t){return t.getParam("image_list",!1)}(t);"string"==typeof n?B.send({url:n,success:function(t){e(JSON.parse(t))}}):"function"==typeof n?n(e):e(n)}(t,(function(t){n(e(t).map((function(t){return z([[{text:"None",value:""}],t])})))}))})),o=zt(function(t){return t.getParam("image_class_list")}(t)),r=function(t){return t.getParam("image_advtab",!1,"boolean")}(t),a=function(t){return t.getParam("image_uploadtab",!0,"boolean")}(t),u=function(t){return s(t.getParam("images_upload_url"))}(t),c=function(t){return s(t.getParam("images_upload_handler"))}(t),l=function(t){var e=gt(t);return e?ct((function(e){return mt(t,e)}),e):{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}}(t),f=function(t){return t.getParam("image_description",!0,"boolean")}(t),d=function(t){return t.getParam("image_title",!1,"boolean")}(t),m=R(t),g=function(t){return t.getParam("image_caption",!1,"boolean")}(t),p=function(t){return t.getParam("a11y_advanced_options",!1,"boolean")}(t),h=function(t){return t.getParam("automatic_uploads",!0,"boolean")}(t),v=x(function(t){return t.getParam("image_prepend_url","","string")}(t)).filter((function(t){return i(t)&&t.length>0}));return n.then((function(t){return{image:l,imageList:t,classList:o,hasAdvTab:r,hasUploadTab:a,hasUploadUrl:u,hasUploadHandler:c,hasDescription:f,hasImageTitle:d,hasDimensions:m,hasImageCaption:g,prependURL:v,hasAccessibilityOptions:p,automaticUploads:h}}))},Dt=function(t){var e,o=t.imageList.map((function(t){return{name:"images",type:"listbox",label:"Image list",items:t}})),r={name:"alt",type:"input",label:"Alternative description",disabled:t.hasAccessibilityOptions&&t.image.isDecorative},i=t.classList.map((function(t){return{name:"classes",type:"listbox",label:"Class",items:t}}));return z([[{name:"src",type:"urlinput",filetype:"image",label:"Source"}],o.toArray(),t.hasAccessibilityOptions&&t.hasDescription?[{type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]}]:[],t.hasDescription?[r]:[],t.hasImageTitle?[{name:"title",type:"input",label:"Image title"}]:[],t.hasDimensions?[{name:"dimensions",type:"sizeinput"}]:[],[n(n({},(e=t.classList.isSome()&&t.hasImageCaption,e?{type:"grid",columns:2}:{type:"panel"})),{items:z([i.toArray(),t.hasImageCaption?[{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[]])})]])},Et=function(t){return{title:"General",name:"general",items:Dt(t)}},Pt=Dt,Ht=function(t){return{title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]}},Bt=function(t){return{src:{value:t.src,meta:{}},images:t.src,alt:t.alt,title:t.title,dimensions:{width:t.width,height:t.height},classes:t.class,caption:t.caption,style:t.style,vspace:t.vspace,border:t.border,hspace:t.hspace,borderstyle:t.borderStyle,fileinput:[],isDecorative:t.isDecorative}},Rt=function(t,e){return{src:t.src.value,alt:0===t.alt.length&&e?null:t.alt,title:t.title,width:t.dimensions.width,height:t.dimensions.height,class:t.classes,style:t.style,caption:t.caption,hspace:t.hspace,vspace:t.vspace,border:t.border,borderStyle:t.borderstyle,isDecorative:t.isDecorative}},It=function(t,e){var n=e.getData();(function(t,e){return/^(?:[a-zA-Z]+:)?\/\//.test(e)?y():t.prependURL.bind((function(t){return e.substring(0,t.length)!==t?x(t+e):y()}))})(t,n.src.value).each((function(t){e.setData({src:{value:t,meta:n.src.meta}})}))},Nt=function(t,e){var n=e.getData(),o=n.src.meta;if(void 0!==o){var r=xt({},n);!function(t,e,n){t.hasDescription&&i(n.alt)&&(e.alt=n.alt),t.hasAccessibilityOptions&&(e.isDecorative=n.isDecorative||e.isDecorative||!1),t.hasImageTitle&&i(n.title)&&(e.title=n.title),t.hasDimensions&&(i(n.width)&&(e.dimensions.width=n.width),i(n.height)&&(e.dimensions.height=n.height)),i(n.class)&&Tt(t.classList,n.class).each((function(t){e.classes=t.value})),t.hasImageCaption&&l(n.caption)&&(e.caption=n.caption),t.hasAdvTab&&(i(n.style)&&(e.style=n.style),i(n.vspace)&&(e.vspace=n.vspace),i(n.border)&&(e.border=n.border),i(n.hspace)&&(e.hspace=n.hspace),i(n.borderstyle)&&(e.borderstyle=n.borderstyle))}(t,r,o),e.setData(r)}},Lt=function(t,e,n,o){It(e,o),Nt(e,o),function(t,e,n,o){var r=o.getData(),i=r.src.value,a=r.src.meta||{};a.width||a.height||!e.hasDimensions||(i.length>0?t.imageSize(i).then((function(t){n.open&&o.setData({dimensions:t})})).catch((function(t){return console.error(t)})):o.setData({dimensions:{width:"",height:""}}))}(t,e,n,o),function(t,e,n){var o=n.getData(),r=Tt(t.imageList,o.src.value);e.prevImage=r,n.setData({images:r.map((function(t){return t.value})).getOr("")})}(e,n,o)},Ft=function(t,e,n){var o=F(t(n.style)),r=xt({},n);return r.vspace=function(t){return t["margin-top"]&&t["margin-bottom"]&&t["margin-top"]===t["margin-bottom"]?N(String(t["margin-top"])):""}(o),r.hspace=function(t){return t["margin-right"]&&t["margin-left"]&&t["margin-right"]===t["margin-left"]?N(String(t["margin-right"])):""}(o),r.border=function(t){return t["border-width"]?N(String(t["border-width"])):""}(o),r.borderstyle=function(t){return t["border-style"]?String(t["border-style"]):""}(o),r.style=function(t,e,n){return e(t(e(n)))}(t,e,o),r},Vt=function(t,e,n,o){var r=o.getData();o.block("Uploading image"),T(r.fileinput).fold((function(){o.unblock()}),(function(r){var i,a=URL.createObjectURL(r),u=function(){o.unblock(),URL.revokeObjectURL(a)},c=function(r){o.setData({src:{value:r,meta:{}}}),o.showTab("general"),Lt(t,e,n,o)};(i=r,new H((function(t,e){var n=new FileReader;n.onload=function(){t(n.result)},n.onerror=function(){e(n.error.message)},n.readAsDataURL(i)}))).then((function(n){var i=t.createBlobCache(r,a,n);e.automaticUploads?t.uploadImage(i).then((function(t){c(t.url),u()})).catch((function(e){u(),t.alertErr(e)})):(t.addToBlobCache(i),c(i.blobUri()),o.unblock())}))}))},jt=function(t,e,n){return function(o,r){"src"===r.name?Lt(t,e,n,o):"images"===r.name?function(t,e,n,o){var r=o.getData(),i=Tt(e.imageList,r.images);i.each((function(t){var e=""===r.alt||n.prevImage.map((function(t){return t.text===r.alt})).getOr(!1);e?""===t.value?o.setData({src:t,alt:n.prevAlt}):o.setData({src:t,alt:t.text}):o.setData({src:t})})),n.prevImage=i,Lt(t,e,n,o)}(t,e,n,o):"alt"===r.name?n.prevAlt=o.getData().alt:"style"===r.name?function(t,e){var n=e.getData(),o=Ft(t.parseStyle,t.serializeStyle,n);e.setData(o)}(t,o):"vspace"===r.name||"hspace"===r.name||"border"===r.name||"borderstyle"===r.name?function(t,e,n){var o=xt(Bt(e.image),n.getData()),r=ut(t.normalizeCss,Rt(o,!1));n.setData({style:r})}(t,e,o):"fileinput"===r.name?Vt(t,e,n,o):"isDecorative"===r.name&&(o.getData().isDecorative?o.disable("alt"):o.enable("alt"))}},Ut=function(t){return function(){t.open=!1}},Wt=function(t){return t.hasAdvTab||t.hasUploadUrl||t.hasUploadHandler?{type:"tabpanel",tabs:z([[Et(t)],t.hasAdvTab?[Mt(t)]:[],t.hasUploadTab&&(t.hasUploadUrl||t.hasUploadHandler)?[Ht(t)]:[]])}:{type:"panel",items:Pt(t)}},qt=function(t){return function(e){var n=function(t){return{prevImage:Tt(t.imageList,t.image.src),prevAlt:t.image.alt,open:!0}}(e);return{title:"Insert/Edit Image",size:"normal",body:Wt(e),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Bt(e.image),onSubmit:t.onSubmit(e),onChange:jt(t,e,n),onClose:Ut(n)}}},$t=function(t){return function(e){return function(n){var o=xt(Bt(e.image),n.getData());t.execCommand("mceUpdateImage",!1,Rt(o,e.hasAccessibilityOptions)),t.editorUpload.uploadImagesAuto(),n.close()}}},Gt=function(t){return function(e){return function(t){return new H((function(e){var n=document.createElement("img"),o=function(t){n.parentNode&&n.parentNode.removeChild(n),e(t)};n.onload=function(){var t={width:I(n.width,n.clientWidth),height:I(n.height,n.clientHeight)};o(H.resolve(t))},n.onerror=function(){o(H.reject("Failed to get image dimensions for: "+t))};var r=n.style;r.visibility="hidden",r.position="fixed",r.bottom=r.left="0px",r.width=r.height="auto",document.body.appendChild(n),n.src=t}))}(t.documentBaseURI.toAbsolute(e)).then((function(t){return{width:String(t.width),height:String(t.height)}}))}},Yt=function(t){return function(e,n,o){return t.editorUpload.blobCache.create({blob:e,blobUri:n,name:e.name?e.name.replace(/\.[^\.]+$/,""):null,filename:e.name,base64:o.split(",")[1]})}},Xt=function(t){return function(e){t.editorUpload.blobCache.add(e)}},Kt=function(t){return function(e){t.windowManager.alert(e)}},Jt=function(t){return function(e){return mt(t,e)}},Zt=function(t){return function(e){return t.dom.parseStyle(e)}},Qt=function(t){return function(e,n){return t.dom.serializeStyle(e,n)}},te=function(t){return function(e){return yt(t).upload([e],!1).then((function(t){return 0===t.length?H.reject("Failed to upload image"):!1===t[0].status?H.reject(t[0].error.message):t[0]}))}},ee=function(t){var e={onSubmit:$t(t),imageSize:Gt(t),addToBlobCache:Xt(t),createBlobCache:Yt(t),alertErr:Kt(t),normalizeCss:Jt(t),parseStyle:Zt(t),serializeStyle:Qt(t),uploadImage:te(t)};return{open:function(){At(t).then(qt(e)).then(t.windowManager.open)}}},ne=function(t){t.addCommand("mceImage",ee(t).open),t.addCommand("mceUpdateImage",(function(e,o){t.undoManager.transact((function(){return function(t,e){var o=gt(t);if(o){var r=ct((function(e){return mt(t,e)}),o),i=n(n({},r),e);i.src?vt(t,i):function(t,e){if(e){var n=t.dom.is(e.parentNode,"figure.image")?e.parentNode:e;t.dom.remove(n),t.focus(),t.nodeChanged(),t.dom.isEmpty(t.getBody())&&(t.setContent(""),t.selection.setCursorLocation())}}(t,o)}else e.src&&ht(t,n(n({},{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}),e))}(t,o)}))}))},oe=function(t){var e=t.attr("class");return e&&/\bimage\b/.test(e)},re=function(t){return function(e){for(var n=e.length,o=function(e){e.attr("contenteditable",t?"true":null)};n--;){var r=e[n];oe(r)&&(r.attr("contenteditable",t?"false":null),wt.each(r.getAll("figcaption"),o))}}};e.add("image",(function(t){!function(t){t.on("PreInit",(function(){t.parser.addNodeFilter("figure",re(!0)),t.serializer.addNodeFilter("figure",re(!1))}))}(t),function(t){t.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:ee(t).open,onSetup:function(e){return t.selection.selectorChangedWithUnbind("img:not([data-mce-object],[data-mce-placeholder]),figure.image",e.setActive).unbind}}),t.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:ee(t).open}),t.ui.registry.addContextMenu("image",{update:function(t){return rt(t)||"IMG"===t.nodeName&&!V(t)?["image"]:[]}})}(t),ne(t)}))}(),function(){var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=function(t){var e=function(t){return t.getContent({source_view:!0})}(t);t.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:e},onSubmit:function(e){!function(t,e){t.focus(),t.undoManager.transact((function(){t.setContent(e)})),t.selection.setCursorLocation(),t.nodeChanged()}(t,e.getData().code),e.close()}})};t.add("code",(function(t){return function(t){t.addCommand("mceCodeEditor",(function(){e(t)}))}(t),function(t){t.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:function(){return e(t)}}),t.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:function(){return e(t)}})}(t),{}}))}(),function(){var e=function(t){var e=t;return{get:function(){return e},set:function(t){e=t}}},n=tinymce.util.Tools.resolve("tinymce.PluginManager"),o=function(t){return{isFullscreen:function(){return null!==t.get()}}},r=function(e){return function(n){return function(e){var n=t(e);return null===e?"null":"object"===n&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===n&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":n}(n)===e}},i=function(e){return function(n){return t(n)===e}},a=r("string"),u=r("array"),c=i("boolean"),l=function(t){return!function(t){return null==t}(t)},s=i("function"),f=i("number"),d=function(){},m=function(t){return function(){return t}};function g(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var r=e.concat(n);return t.apply(null,r)}}var p=m(!1),h=m(!0),v=function(){return b},b=function(){var t=function(t){return t.isNone()},e=function(t){return t()},n=function(t){return t};return{fold:function(t,e){return t()},is:p,isSome:p,isNone:h,getOr:n,getOrThunk:e,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:m(null),getOrUndefined:m(void 0),or:n,orThunk:e,map:v,each:d,bind:v,exists:p,forall:h,filter:v,equals:t,equals_:t,toArray:function(){return[]},toString:m("none()")}}(),x=function t(e){var n=m(e),o=function(){return i},r=function(t){return t(e)},i={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:h,isNone:p,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:o,orThunk:o,map:function(n){return t(n(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?i:b},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(p,(function(t){return n(e,t)}))}};return i},y=x,w=v,k=function(t){return null==t?b:x(t)},_=function(){return t=function(t){return t.unbind()},n=e(w()),o=function(){return n.get().each(t)},{clear:function(){o(),n.set(w())},isSet:function(){return n.get().isSome()},set:function(t){o(),n.set(y(t))}};var t,n,o},C=Array.prototype.push,S=function(t,e){for(var n=t.length,o=new Array(n),r=0;r<n;r++){var i=t[r];o[r]=e(i,r)}return o},O=function(t,e){for(var n=0,o=t.length;n<o;n++){e(t[n],n)}},z=function(t,e){for(var n=[],o=0,r=t.length;o<r;o++){var i=t[o];e(i,o)&&n.push(i)}return n},T=function(t,e){return function(t){for(var e=[],n=0,o=t.length;n<o;++n){if(!u(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);C.apply(e,t[n])}return e}(S(t,e))},M=function(t){return function(t,e){return e>=0&&e<t.length?y(t[e]):w()}(t,0)},A=Object.keys,D=function(t){return void 0!==t.style&&s(t.style.getPropertyValue)},E=function(t){if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}},P={fromHtml:function(t,e){var n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||n.childNodes.length>1)throw console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return E(n.childNodes[0])},fromTag:function(t,e){var n=(e||document).createElement(t);return E(n)},fromText:function(t,e){var n=(e||document).createTextNode(t);return E(n)},fromDom:E,fromPoint:function(t,e,n){return k(t.dom.elementFromPoint(e,n)).map(E)}};"undefined"!=typeof window?window:Function("return this;")();var H=function(t){return function(e){return function(t){return t.dom.nodeType}(e)===t}},B=H(1),R=H(3),I=H(9),N=H(11),L=function(t,e){var n=t.dom;if(1!==n.nodeType)return!1;var o=n;if(void 0!==o.matches)return o.matches(e);if(void 0!==o.msMatchesSelector)return o.msMatchesSelector(e);if(void 0!==o.webkitMatchesSelector)return o.webkitMatchesSelector(e);if(void 0!==o.mozMatchesSelector)return o.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},F=function(t){return P.fromDom(t.dom.ownerDocument)},V=function(t){return function(t){return k(t.dom.parentNode).map(P.fromDom)}(t).map(j).map((function(e){return z(e,(function(e){return n=e,!(t.dom===n.dom);var n}))})).getOr([])},j=function(t){return S(t.dom.childNodes,P.fromDom)},U=s(Element.prototype.attachShadow)&&s(Node.prototype.getRootNode),W=m(U),q=U?function(t){return P.fromDom(t.dom.getRootNode())}:function(t){return I(t)?t:F(t)},$=function(t){var e,n=q(t);return N(e=n)&&l(e.dom.host)?y(n):w()},G=function(t){return P.fromDom(t.dom.host)},Y=function(t){return l(t.dom.shadowRoot)},X=function t(e){var n=R(e)?e.dom.parentNode:e.dom;if(null==n||null===n.ownerDocument)return!1;var o,r,i=n.ownerDocument;return $(P.fromDom(n)).fold((function(){return i.body.contains(n)}),(o=t,r=G,function(t){return o(r(t))}))},K=function(t,e,n){!function(t,e,n){if(!(a(n)||c(n)||f(n)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")}(t.dom,e,n)},J=function(t,e){var n=t.dom.getAttribute(e);return null===n?void 0:n},Z=function(t,e){t.dom.removeAttribute(e)},Q=function(t,e){var n=t.dom;!function(t,e){for(var n=A(t),o=0,r=n.length;o<r;o++){var i=n[o];e(t[i],i)}}(e,(function(t,e){!function(t,e,n){if(!a(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);D(t)&&t.style.setProperty(e,n)}(n,e,t)}))},tt=function(t,e){var n=t.dom,o=window.getComputedStyle(n).getPropertyValue(e);return""!==o||X(t)?o:et(n,e)},et=function(t,e){return D(t)?t.style.getPropertyValue(e):""},nt=function(t){var e,n,o=P.fromDom(function(t){if(W()&&l(t.target)){var e=P.fromDom(t.target);if(B(e)&&Y(e)&&t.composed&&t.composedPath){var n=t.composedPath();if(n)return M(n)}}return k(t.target)}(t).getOr(t.target)),r=function(){return t.stopPropagation()},i=function(){return t.preventDefault()},a=(e=i,n=r,function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];return e(n.apply(null,t))});return function(t,e,n,o,r,i,a){return{target:t,x:e,y:n,stop:o,prevent:r,kill:i,raw:a}}(o,t.clientX,t.clientY,r,i,a,t)},ot=function(t,e,n,o,r){var i=function(t,e){return function(n){t(n)&&e(nt(n))}}(n,o);return t.dom.addEventListener(e,i,r),{unbind:g(rt,t,e,i,r)}},rt=function(t,e,n,o){t.dom.removeEventListener(e,n,o)},it=h,at=function(t,e,n){return function(t,e,n,o){return ot(t,e,n,o,!1)}(t,e,it,n)},ut=function t(e,n){return{left:e,top:n,translate:function(o,r){return t(e+o,n+r)}}},ct=function(t){var e=void 0===t?window:t;return k(e.visualViewport)},lt=function(t,e,n,o){return{x:t,y:e,width:n,height:o,right:t+n,bottom:e+o}},st=function(t){var e=void 0===t?window:t,n=e.document,o=function(t){var e=void 0!==t?t.dom:document,n=e.body.scrollLeft||e.documentElement.scrollLeft,o=e.body.scrollTop||e.documentElement.scrollTop;return ut(n,o)}(P.fromDom(n));return ct(e).fold((function(){var t=e.document.documentElement,n=t.clientWidth,r=t.clientHeight;return lt(o.left,o.top,n,r)}),(function(t){return lt(Math.max(t.pageLeft,o.left),Math.max(t.pageTop,o.top),t.width,t.height)}))},ft=function(t,e,n){return ct(n).map((function(n){var o=function(t){return e(nt(t))};return n.addEventListener(t,o),{unbind:function(){return n.removeEventListener(t,o)}}})).getOrThunk((function(){return{unbind:d}}))},dt=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),mt=tinymce.util.Tools.resolve("tinymce.Env"),gt=tinymce.util.Tools.resolve("tinymce.util.Delay"),pt=function(t,e){t.fire("FullscreenStateChanged",{state:e})},ht=function(t){return t.getParam("fullscreen_native",!1,"boolean")},vt=function(t){var e=P.fromDom(t.getElement());return $(e).map(G).getOrThunk((function(){return function(t){var e=t.dom.body;if(null==e)throw new Error("Body is not available yet");return P.fromDom(e)}(F(e))}))},bt=function(t){return t.dom===(void 0!==(e=F(t).dom).fullscreenElement?e.fullscreenElement:void 0!==e.msFullscreenElement?e.msFullscreenElement:void 0!==e.webkitFullscreenElement?e.webkitFullscreenElement:null);var e},xt=function(t,e,n){return z(function(t,e){for(var n=s(e)?e:p,o=t.dom,r=[];null!==o.parentNode&&void 0!==o.parentNode;){var i=o.parentNode,a=P.fromDom(i);if(r.push(a),!0===n(a))break;o=i}return r}(t,n),e)},yt=function(t){return function(t,e){var n,o=void 0===e?document:e.dom;return 1!==(n=o).nodeType&&9!==n.nodeType&&11!==n.nodeType||0===n.childElementCount?[]:S(o.querySelectorAll(t),P.fromDom)}(t)},wt=function(t,e,n){return xt(t,(function(t){return L(t,e)}),n)},kt=function(t,e){return function(t,e){return z(V(t),e)}(t,(function(t){return L(t,e)}))},_t="data-ephox-mobile-fullscreen-style",Ct="position:absolute!important;",St="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",Ot=mt.os.isAndroid(),zt=function(t,e,n){var o=function(e){return function(n){var o=J(n,"style"),r=void 0===o?"no-styles":o.trim();r!==e&&(K(n,_t,r),Q(n,t.parseStyle(e)))}},r=wt(e,"*"),i=T(r,(function(t){return kt(t,"*:not(.tox-silver-sink)")})),a=function(t){var e=tt(t,"background-color");return void 0!==e&&""!==e?"background-color:"+e+"!important":"background-color:rgb(255,255,255)!important;"}(n);O(i,o("display:none!important;")),O(r,o(Ct+St+a)),o((!0===Ot?"":Ct)+St+a)(e)},Tt=dt.DOM,Mt=ct().fold((function(){return{bind:d,unbind:d}}),(function(t){var n,o=(n=e(w()),{clear:function(){return n.set(w())},set:function(t){return n.set(y(t))},isSet:function(){return n.get().isSome()},on:function(t){return n.get().each(t)}}),r=_(),i=_(),a=gt.throttle((function(){document.body.scrollTop=0,document.documentElement.scrollTop=0,window.requestAnimationFrame((function(){o.on((function(e){return Q(e,{top:t.offsetTop+"px",left:t.offsetLeft+"px",height:t.height+"px",width:t.width+"px"})}))}))}),50);return{bind:function(t){o.set(t),a(),r.set(ft("resize",a)),i.set(ft("scroll",a))},unbind:function(){o.on((function(){r.clear(),i.clear()})),o.clear()}}})),At=function t(e,n){var o,r,i,a,u,c=document.body,l=document.documentElement,s=e.getContainer(),f=P.fromDom(s),d=vt(e),m=n.get(),g=P.fromDom(e.getBody()),p=mt.deviceType.isTouch(),h=s.style,v=e.iframeElement.style,b=function(t){t(c,"tox-fullscreen"),t(l,"tox-fullscreen"),t(s,"tox-fullscreen"),$(f).map((function(t){return G(t).dom})).each((function(e){t(e,"tox-fullscreen"),t(e,"tox-shadowhost")}))},x=function(){var t,o;p&&(t=e.dom,o=yt("["+_t+"]"),O(o,(function(e){var n=J(e,_t);"no-styles"!==n?Q(e,t.parseStyle(n)):Z(e,"style"),Z(e,_t)}))),b(Tt.removeClass),Mt.unbind(),k(n.get()).each((function(t){return t.fullscreenChangeHandler.unbind()}))};if(m)m.fullscreenChangeHandler.unbind(),ht(e)&&bt(d)&&(r=F(d),(i=r.dom).exitFullscreen?i.exitFullscreen():i.msExitFullscreen?i.msExitFullscreen():i.webkitCancelFullScreen&&i.webkitCancelFullScreen()),v.width=m.iframeWidth,v.height=m.iframeHeight,h.width=m.containerWidth,h.height=m.containerHeight,h.top=m.containerTop,h.left=m.containerLeft,o=m.scrollPos,window.scrollTo(o.x,o.y),n.set(null),pt(e,!1),x(),e.off("remove",x);else{var y=at(F(d),void 0!==document.fullscreenElement?"fullscreenchange":void 0!==document.msFullscreenElement?"MSFullscreenChange":void 0!==document.webkitFullscreenElement?"webkitfullscreenchange":"fullscreenchange",(function(o){ht(e)&&(bt(d)||null===n.get()||t(e,n))})),w={scrollPos:(u=st(window),{x:u.x,y:u.y}),containerWidth:h.width,containerHeight:h.height,containerTop:h.top,containerLeft:h.left,iframeWidth:v.width,iframeHeight:v.height,fullscreenChangeHandler:y};p&&zt(e.dom,f,g),v.width=v.height="100%",h.width=h.height="",b(Tt.addClass),Mt.bind(f),e.on("remove",x),n.set(w),ht(e)&&((a=d.dom).requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.webkitRequestFullScreen&&a.webkitRequestFullScreen()),pt(e,!0)}},Dt=function(t,e){return function(n){n.setActive(null!==e.get());var o=function(t){return n.setActive(t.state)};return t.on("FullscreenStateChanged",o),function(){return t.off("FullscreenStateChanged",o)}}};n.add("fullscreen",(function(t){var n=e(null);return t.inline||(function(t,e){t.addCommand("mceFullScreen",(function(){At(t,e)}))}(t,n),function(t,e){t.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:function(){return t.execCommand("mceFullScreen")},onSetup:Dt(t,e)}),t.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:function(){return t.execCommand("mceFullScreen")},onSetup:Dt(t,e)})}(t,n),t.addShortcut("Meta+Shift+F","","mceFullScreen")),o(n)}))}(),function(){var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(){return n=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},n.apply(this,arguments)},o=function(e){return function(n){return function(e){var n=t(e);return null===e?"null":"object"===n&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===n&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":n}(n)===e}},r=o("string"),i=o("object"),a=o("array"),u=function(t){return!function(t){return null==t}(t)},c=function(){},l=function(t){return function(){return t}},s=l(!1),f=l(!0),d=function(){return m},m=function(){var t=function(t){return t.isNone()},e=function(t){return t()},n=function(t){return t};return{fold:function(t,e){return t()},is:s,isSome:s,isNone:f,getOr:n,getOrThunk:e,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:l(null),getOrUndefined:l(void 0),or:n,orThunk:e,map:d,each:c,bind:d,exists:s,forall:f,filter:d,equals:t,equals_:t,toArray:function(){return[]},toString:l("none()")}}(),g=function t(e){var n=l(e),o=function(){return i},r=function(t){return t(e)},i={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:f,isNone:s,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:o,orThunk:o,map:function(n){return t(n(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?i:m},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(s,(function(t){return n(e,t)}))}};return i},p=g,h=d,v=function(t){return null==t?m:g(t)},b=Array.prototype.push,x=function(t,e){for(var n=0,o=t.length;n<o;n++){e(t[n],n)}},y=function(t){for(var e=[],n=0,o=t.length;n<o;++n){if(!a(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);b.apply(e,t[n])}return e},w=function(t){var e=t;return{get:function(){return e},set:function(t){e=t}}},k=Object.keys,_=Object.hasOwnProperty,C=function(t,e){return S(t,e)?v(t[e]):h()},S=function(t,e){return _.call(t,e)},O=function(t){return t.getParam("media_scripts")},z=function(t){return t.getParam("media_live_embeds",!0)},T=tinymce.util.Tools.resolve("tinymce.util.Tools"),M=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),A=tinymce.util.Tools.resolve("tinymce.html.SaxParser"),D=function(t,e){if(t)for(var n=0;n<t.length;n++)if(-1!==e.indexOf(t[n].filter))return t[n]},E=M.DOM,P=function(t){return t.replace(/px$/,"")},H=function(t,e){var n=w(!1),o={};return A({validate:!1,allow_conditional_comments:!0,start:function(e,r){if(n.get());else if(S(r.map,"data-ephox-embed-iri"))n.set(!0),o=function(t){var e=t.map.style,n=e?E.parseStyle(e):{};return{type:"ephox-embed-iri",source:t.map["data-ephox-embed-iri"],altsource:"",poster:"",width:C(n,"max-width").map(P).getOr(""),height:C(n,"max-height").map(P).getOr("")}}(r);else{if(o.source||"param"!==e||(o.source=r.map.movie),"iframe"!==e&&"object"!==e&&"embed"!==e&&"video"!==e&&"audio"!==e||(o.type||(o.type=e),o=T.extend(r.map,o)),"script"===e){var i=D(t,r.map.src);if(!i)return;o={type:"script",source:r.map.src,width:String(i.width),height:String(i.height)}}"source"===e&&(o.source?o.altsource||(o.altsource=r.map.src):o.source=r.map.src),"img"!==e||o.poster||(o.poster=r.map.src)}}}).parse(e),o.source=o.source||o.src||o.data,o.altsource=o.altsource||"",o.poster=o.poster||"",o},B=function(t){var e={mp3:"audio/mpeg",m4a:"audio/x-m4a",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"}[t.toLowerCase().split(".").pop()];return e||""},R=tinymce.util.Tools.resolve("tinymce.html.Schema"),I=tinymce.util.Tools.resolve("tinymce.html.Writer"),N=M.DOM,L=function(t){return/^[0-9.]+$/.test(t)?t+"px":t},F=function(t,e){!function(t,e){for(var n=k(t),o=0,r=n.length;o<r;o++){var i=n[o];e(t[i],i)}}(e,(function(e,n){var o=""+e;if(t.map[n])for(var r=t.length;r--;){var i=t[r];i.name===n&&(o?(t.map[n]=o,i.value=o):(delete t.map[n],t.splice(r,1)))}else o&&(t.push({name:n,value:o}),t.map[n]=o)}))},V=["source","altsource"],j=function(t,e,n){var o,r=I(),i=w(!1),a=0;return A({validate:!1,allow_conditional_comments:!0,comment:function(t){r.comment(t)},cdata:function(t){r.cdata(t)},text:function(t,e){r.text(t,e)},start:function(t,u,c){if(i.get());else if(S(u.map,"data-ephox-embed-iri"))i.set(!0),function(t,e){var n=e.map.style,o=n?N.parseStyle(n):{};o["max-width"]=L(t.width),o["max-height"]=L(t.height),F(e,{style:N.serializeStyle(o)})}(e,u);else{switch(t){case"video":case"object":case"embed":case"img":case"iframe":void 0!==e.height&&void 0!==e.width&&F(u,{width:e.width,height:e.height})}if(n)switch(t){case"video":F(u,{poster:e.poster,src:""}),e.altsource&&F(u,{src:""});break;case"iframe":F(u,{src:e.source});break;case"source":if(a<2&&(F(u,{src:e[V[a]],type:e[V[a]+"mime"]}),!e[V[a]]))return;a++;break;case"img":if(!e.poster)return;o=!0}}r.start(t,u,c)},end:function(t){if(!i.get()){if("video"===t&&n)for(var u=0;u<2;u++)if(e[V[u]]){var c=[];c.map={},a<=u&&(F(c,{src:e[V[u]],type:e[V[u]+"mime"]}),r.start("source",c,!0))}if(e.poster&&"object"===t&&n&&!o){var l=[];l.map={},F(l,{src:e.poster,width:e.width,height:e.height}),r.start("img",l,!0)}}r.end(t)}},R({})).parse(t),r.getContent()},U=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],W=function(t,e){for(var n=function(t){var e=t.match(/^(https?:\/\/|www\.)(.+)$/i);return e&&e.length>1?"www."===e[1]?"https://":e[1]:"https://"}(e),o=t.regex.exec(e),r=n+t.url,i=function(t){r=r.replace("$"+t,(function(){return o[t]?o[t]:""}))},a=0;a<o.length;a++)i(a);return r.replace(/\?$/,"")},q=function(t,e){var n=T.extend({},e);if(!n.source&&(T.extend(n,H(O(t),n.embed)),!n.source))return"";n.altsource||(n.altsource=""),n.poster||(n.poster=""),n.source=t.convertURL(n.source,"source"),n.altsource=t.convertURL(n.altsource,"source"),n.sourcemime=B(n.source),n.altsourcemime=B(n.altsource),n.poster=t.convertURL(n.poster,"poster");var o,r,i=(o=n.source,r=U.filter((function(t){return t.regex.test(o)})),r.length>0?T.extend({},r[0],{url:W(r[0],o)}):null);if(i&&(n.source=i.url,n.type=i.type,n.allowfullscreen=i.allowFullscreen,n.width=n.width||String(i.w),n.height=n.height||String(i.h)),n.embed)return j(n.embed,n,!0);var a=D(O(t),n.source);a&&(n.type="script",n.width=String(a.width),n.height=String(a.height));var u=function(t){return t.getParam("audio_template_callback")}(t),c=function(t){return t.getParam("video_template_callback")}(t);return n.width=n.width||"300",n.height=n.height||"150",T.each(n,(function(e,o){n[o]=t.dom.encode(""+e)})),"iframe"===n.type?function(t){var e=t.allowfullscreen?' allowFullscreen="1"':"";return'<iframe src="'+t.source+'" width="'+t.width+'" height="'+t.height+'"'+e+"></iframe>"}(n):"application/x-shockwave-flash"===n.sourcemime?function(t){var e='<object data="'+t.source+'" width="'+t.width+'" height="'+t.height+'" type="application/x-shockwave-flash">';return t.poster&&(e+='<img src="'+t.poster+'" width="'+t.width+'" height="'+t.height+'" />'),e+"</object>"}(n):-1!==n.sourcemime.indexOf("audio")?function(t,e){return e?e(t):'<audio controls="controls" src="'+t.source+'">'+(t.altsource?'\n<source src="'+t.altsource+'"'+(t.altsourcemime?' type="'+t.altsourcemime+'"':"")+" />\n":"")+"</audio>"}(n,u):"script"===n.type?function(t){return'<script src="'+t.source+'"><\/script>'}(n):function(t,e){return e?e(t):'<video width="'+t.width+'" height="'+t.height+'"'+(t.poster?' poster="'+t.poster+'"':"")+' controls="controls">\n<source src="'+t.source+'"'+(t.sourcemime?' type="'+t.sourcemime+'"':"")+" />\n"+(t.altsource?'<source src="'+t.altsource+'"'+(t.altsourcemime?' type="'+t.altsourcemime+'"':"")+" />\n":"")+"</video>"}(n,c)},$=tinymce.util.Tools.resolve("tinymce.util.Promise"),G={},Y=function(t){return function(e){return q(t,e)}},X=function(t,e){var n=function(t){return t.getParam("media_url_resolver")}(t);return n?function(t,e,n){return new $((function(o,r){var i=function(n){return n.html&&(G[t.source]=n),o({url:t.source,html:n.html?n.html:e(t)})};G[t.source]?i(G[t.source]):n({url:t.source},i,r)}))}(e,Y(t),n):function(t,e){return new $((function(n){n({html:e(t),url:t.source})}))}(e,Y(t))},K=function(t,e){return C(e,t).bind((function(t){return C(t,"meta")}))},J=function(t,e,n){return function(o){var r,a=function(){return C(t,o)},u=function(){return C(e,o)},c=function(t){return C(t,"value").bind((function(t){return t.length>0?p(t):h()}))};return(r={})[o]=(o===n?a().bind((function(t){return i(t)?c(t).orThunk(u):u().orThunk((function(){return v(t)}))})):u().orThunk((function(){return a().bind((function(t){return i(t)?c(t):v(t)}))}))).getOr(""),r}},Z=function(t,e){var n={};return C(t,"dimensions").each((function(t){x(["width","height"],(function(o){C(e,o).orThunk((function(){return C(t,o)})).each((function(t){return n[o]=t}))}))})),n},Q=function(t,e){var o=e?K(e,t).getOr({}):{},r=J(t,o,e);return n(n(n(n(n({},r("source")),r("altsource")),r("poster")),r("embed")),Z(t,o))},tt=function(t){var e=n(n({},t),{source:{value:C(t,"source").getOr("")},altsource:{value:C(t,"altsource").getOr("")},poster:{value:C(t,"poster").getOr("")}});return x(["width","height"],(function(n){C(t,n).each((function(t){var o=e.dimensions||{};o[n]=t,e.dimensions=o}))})),e},et=function(t){return function(e){var n=e&&e.msg?"Media embed handler error: "+e.msg:"Media embed handler threw unknown error.";t.notificationManager.open({type:"error",text:n})}},nt=function(t,e){return H(O(t),e)},ot=function(t,e){return function(o){if(r(o.url)&&o.url.trim().length>0){var i=o.html,a=nt(e,i),u=n(n({},a),{source:o.url,embed:i});t.setData(tt(u))}}},rt=function(t,e){var n=t.dom.select("*[data-mce-object]");t.insertContent(e),function(t,e){for(var n=t.dom.select("*[data-mce-object]"),o=0;o<e.length;o++)for(var r=n.length-1;r>=0;r--)e[o]===n[r]&&n.splice(r,1);t.selection.select(n[0])}(t,n),t.nodeChanged()},it=function(t,e,n){var o;e.embed=j(e.embed,e),e.embed&&(t.source===e.source||(o=e.source,G.hasOwnProperty(o)))?rt(n,e.embed):X(n,e).then((function(t){rt(n,t.html)})).catch(et(n))},at=function(t){var e=function(t){var e=t.selection.getNode(),o=function(t){return t.getAttribute("data-mce-object")||t.getAttribute("data-ephox-embed-iri")}(e)?t.serializer.serialize(e,{selection:!0}):"";return n({embed:o},H(O(t),o))}(t),o=w(e),r=tt(e),i=function(t){return t.getParam("media_dimensions",!0)}(t)?[{type:"sizeinput",name:"dimensions",label:"Constrain proportions",constrain:!0}]:[],a={title:"General",name:"general",items:y([[{name:"source",type:"urlinput",filetype:"media",label:"Source"}],i])},u={title:"Embed",items:[{type:"textarea",name:"embed",label:"Paste your embed code below:"}]},c=[];(function(t){return t.getParam("media_alt_source",!0)})(t)&&c.push({name:"altsource",type:"urlinput",filetype:"media",label:"Alternative source URL"}),function(t){return t.getParam("media_poster",!0)}(t)&&c.push({name:"poster",type:"urlinput",filetype:"image",label:"Media poster (Image URL)"});var l={title:"Advanced",name:"advanced",items:c},s=[a,u];c.length>0&&s.push(l);var f={type:"tabpanel",tabs:s},d=t.windowManager.open({title:"Insert/Edit Media",size:"normal",body:f,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:function(e){var n=Q(e.getData());it(o.get(),n,t),e.close()},onChange:function(e,r){switch(r.name){case"source":!function(e,n){var o=Q(n.getData(),"source");e.source!==o.source&&(ot(d,t)({url:o.source,html:""}),X(t,o).then(ot(d,t)).catch(et(t)))}(o.get(),e);break;case"embed":!function(e){var n=Q(e.getData()),o=nt(t,n.embed);e.setData(tt(o))}(e);break;case"dimensions":case"altsource":case"poster":!function(e,o){var r=Q(e.getData(),o),i=q(t,r);e.setData(tt(n(n({},r),{embed:i})))}(e,r.name)}o.set(Q(e.getData()))},initialData:r})},ut=tinymce.util.Tools.resolve("tinymce.html.Node"),ct=tinymce.util.Tools.resolve("tinymce.Env"),lt=tinymce.util.Tools.resolve("tinymce.html.DomParser"),st=function(t,e){if(!1===function(t){return t.getParam("media_filter_html",!0)}(t))return e;var n,o=I();return A({validate:!1,allow_conditional_comments:!1,comment:function(t){n||o.comment(t)},cdata:function(t){n||o.cdata(t)},text:function(t,e){n||o.text(t,e)},start:function(e,r,i){if(n=!0,"script"!==e&&"noscript"!==e&&"svg"!==e){for(var a=r.length-1;a>=0;a--){var u=r[a].name;0===u.indexOf("on")&&(delete r.map[u],r.splice(a,1)),"style"===u&&(r[a].value=t.dom.serializeStyle(t.dom.parseStyle(r[a].value),e))}o.start(e,r,i),n=!1}},end:function(t){n||o.end(t)}},R({})).parse(e),o.getContent()},ft=function(t){var e=t.name;return"iframe"===e||"video"===e||"audio"===e},dt=function(t,e,n,o){void 0===o&&(o=null);var r=t.attr(n);return u(r)?r:S(e,n)?null:o},mt=function(t,e,n){var o="img"===e.name||"video"===t.name,r=o?"300":null,i="audio"===t.name?"30":"150",a=o?i:null;e.attr({width:dt(t,n,"width",r),height:dt(t,n,"height",a)})},gt=function(t,e){var n=e.name,o=new ut("img",1);return o.shortEnded=!0,ht(t,e,o),mt(e,o,{}),o.attr({style:e.attr("style"),src:ct.transparentSrc,"data-mce-object":n,class:"mce-object mce-object-"+n}),o},pt=function(t,e){var n=e.name,o=new ut("span",1);o.attr({contentEditable:"false",style:e.attr("style"),"data-mce-object":n,class:"mce-preview-object mce-object-"+n}),ht(t,e,o);var r=t.dom.parseStyle(e.attr("style")),i=new ut(n,1);if(mt(e,i,r),i.attr({src:e.attr("src"),style:e.attr("style"),class:e.attr("class")}),"iframe"===n)i.attr({allowfullscreen:e.attr("allowfullscreen"),frameborder:"0"});else{x(["controls","crossorigin","currentTime","loop","muted","poster","preload"],(function(t){i.attr(t,e.attr(t))}));var a=o.attr("data-mce-html");u(a)&&function(t,e,n,o){for(var r=lt({forced_root_block:!1,validate:!1},t.schema).parse(o,{context:e});r.firstChild;)n.append(r.firstChild)}(t,n,i,a)}var c=new ut("span",1);return c.attr("class","mce-shim"),o.append(i),o.append(c),o},ht=function(t,e,n){for(var o=e.attributes,r=o.length;r--;){var i=o[r].name,a=o[r].value;"width"!==i&&"height"!==i&&"style"!==i&&("data"!==i&&"src"!==i||(a=t.convertURL(a,i)),n.attr("data-mce-p-"+i,a))}var u=e.firstChild&&e.firstChild.value;u&&(n.attr("data-mce-html",escape(st(t,u))),n.firstChild=null)},vt=function(t){var e=t.attr("class");return e&&/\btiny-pageembed\b/.test(e)},bt=function(t){for(;t=t.parent;)if(t.attr("data-ephox-embed-iri")||vt(t))return!0;return!1},xt=function(t){t.on("preInit",(function(){var e=t.schema.getSpecialElements();T.each("video audio iframe object".split(" "),(function(t){e[t]=new RegExp("</"+t+"[^>]*>","gi")}));var n=t.schema.getBoolAttrs();T.each("webkitallowfullscreen mozallowfullscreen allowfullscreen".split(" "),(function(t){n[t]={}})),t.parser.addNodeFilter("iframe,video,audio,object,embed,script",function(t){return function(e){for(var n,o,r=e.length;r--;)(n=e[r]).parent&&(n.parent.attr("data-mce-object")||("script"!==n.name||(o=D(O(t),n.attr("src"))))&&(o&&(o.width&&n.attr("width",o.width.toString()),o.height&&n.attr("height",o.height.toString())),ft(n)&&z(t)&&ct.ceFalse?bt(n)||n.replace(pt(t,n)):bt(n)||n.replace(gt(t,n))))}}(t)),t.serializer.addAttributeFilter("data-mce-object",(function(e,n){for(var o,r,i,a,u,c,l,s,f=e.length;f--;)if((o=e[f]).parent){for(l=o.attr(n),r=new ut(l,1),"audio"!==l&&"script"!==l&&((s=o.attr("class"))&&-1!==s.indexOf("mce-preview-object")?r.attr({width:o.firstChild.attr("width"),height:o.firstChild.attr("height")}):r.attr({width:o.attr("width"),height:o.attr("height")})),r.attr({style:o.attr("style")}),i=(a=o.attributes).length;i--;){var d=a[i].name;0===d.indexOf("data-mce-p-")&&r.attr(d.substr(11),a[i].value)}"script"===l&&r.attr("type","text/javascript"),(u=o.attr("data-mce-html"))&&((c=new ut("#text",3)).raw=!0,c.value=st(t,unescape(u)),r.append(c)),o.replace(r)}}))})),t.on("SetContent",(function(){t.$("span.mce-preview-object").each((function(e,n){var o=t.$(n);0===o.find("span.mce-shim").length&&o.append('<span class="mce-shim"></span>')}))}))},yt=function(t,e){return function(n){return t.selection.selectorChangedWithUnbind(e.join(","),n.setActive).unbind}};e.add("media",(function(t){return function(t){t.addCommand("mceMedia",(function(){at(t)}))}(t),function(t){t.ui.registry.addToggleButton("media",{tooltip:"Insert/edit media",icon:"embed",onAction:function(){t.execCommand("mceMedia")},onSetup:yt(t,["img[data-mce-object]","span[data-mce-object]","div[data-ephox-embed-iri]"])}),t.ui.registry.addMenuItem("media",{icon:"embed",text:"Media...",onAction:function(){t.execCommand("mceMedia")}})}(t),function(t){t.on("ResolveName",(function(t){var e;1===t.target.nodeType&&(e=t.target.getAttribute("data-mce-object"))&&(t.name=e)}))}(t),xt(t),function(t){t.on("click keyup touchend",(function(){var e=t.selection.getNode();e&&t.dom.hasClass(e,"mce-preview-object")&&t.dom.getAttrib(e,"data-mce-selected")&&e.setAttribute("data-mce-selected","2")})),t.on("ObjectSelected",(function(t){"script"===t.target.getAttribute("data-mce-object")&&t.preventDefault()})),t.on("ObjectResized",(function(t){var e,n=t.target;n.getAttribute("data-mce-object")&&(e=n.getAttribute("data-mce-html"))&&(e=unescape(e),n.setAttribute("data-mce-html",escape(j(e,{width:String(t.width),height:String(t.height)}))))}))}(t),function(t){return{showDialog:function(){at(t)}}}(t)}))}(),function(){var t=tinymce.util.Tools.resolve("tinymce.PluginManager");t.add("hr",(function(t){!function(t){t.addCommand("InsertHorizontalRule",(function(){t.execCommand("mceInsertContent",!1,"<hr />")}))}(t),function(t){t.ui.registry.addButton("hr",{icon:"horizontal-rule",tooltip:"Horizontal line",onAction:function(){return t.execCommand("InsertHorizontalRule")}}),t.ui.registry.addMenuItem("hr",{icon:"horizontal-rule",text:"Horizontal line",onAction:function(){return t.execCommand("InsertHorizontalRule")}})}(t)}))}(),function(){var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(e){return function(n){return function(e){var n=t(e);return null===e?"null":"object"===n&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===n&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":n}(n)===e}},o=function(e){return function(n){return t(n)===e}},r=n("string"),i=n("object"),a=n("array"),u=o("boolean"),c=o("function"),l=o("number"),s=function(){},f=function(t){return function(){return t}},d=function(t){return function(e){return!t(e)}},m=f(!1),g=f(!0),p=function(){return h},h=function(){var t=function(t){return t.isNone()},e=function(t){return t()},n=function(t){return t};return{fold:function(t,e){return t()},is:m,isSome:m,isNone:g,getOr:n,getOrThunk:e,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:f(null),getOrUndefined:f(void 0),or:n,orThunk:e,map:p,each:s,bind:p,exists:m,forall:g,filter:p,equals:t,equals_:t,toArray:function(){return[]},toString:f("none()")}}(),v=function t(e){var n=f(e),o=function(){return i},r=function(t){return t(e)},i={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:g,isNone:m,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:o,orThunk:o,map:function(n){return t(n(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?i:h},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(m,(function(t){return n(e,t)}))}};return i},b=v,x=p,y=function(t){return null==t?h:v(t)},w=Array.prototype.slice,k=Array.prototype.push,_=function(t,e){for(var n=t.length,o=new Array(n),r=0;r<n;r++){var i=t[r];o[r]=e(i,r)}return o},C=function(t,e){for(var n=0,o=t.length;n<o;n++){e(t[n],n)}},S=function(t,e){for(var n=[],o=0,r=t.length;o<r;o++){var i=t[o];e(i,o)&&n.push(i)}return n},O=function(t,e,n){return C(t,(function(t){n=e(n,t)})),n},z=function(t,e,n){for(var o=0,r=t.length;o<r;o++){var i=t[o];if(e(i,o))return b(i);if(n(i,o))break}return x()},T=function(t,e){return z(t,e,m)},M=function(t,e){return function(t){for(var e=[],n=0,o=t.length;n<o;++n){if(!a(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);k.apply(e,t[n])}return e}(_(t,e))},A=function(t){var e=w.call(t,0);return e.reverse(),e},D=function(t,e){return e>=0&&e<t.length?b(t[e]):x()},E=function(t){return D(t,0)},P=function(t){return D(t,t.length-1)},H=function(){return H=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},H.apply(this,arguments)};var B,R=function(){return I(0,0)},I=function(t,e){return{major:t,minor:e}},N={nu:I,detect:function(t,e){var n=String(e).toLowerCase();return 0===t.length?R():function(t,e){var n=function(t,e){for(var n=0;n<t.length;n++){var o=t[n];if(o.test(e))return o}}(t,e);if(!n)return{major:0,minor:0};var o=function(t){return Number(e.replace(n,"$"+t))};return I(o(1),o(2))}(t,n)},unknown:R},L=function(t,e){var n=String(e).toLowerCase();return T(t,(function(t){return t.search(n)}))},F=function(t,e){return L(t,e).map((function(t){var n=N.detect(t.versionRegexes,e);return{current:t.name,version:n}}))},V=function(t,e){return L(t,e).map((function(t){var n=N.detect(t.versionRegexes,e);return{current:t.name,version:n}}))},j=function(t,e){return-1!==t.indexOf(e)},U=(B=/^\s+|\s+$/g,function(t){return t.replace(B,"")}),W=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,q=function(t){return function(e){return j(e,t)}},$=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return j(t,"edge/")&&j(t,"chrome")&&j(t,"safari")&&j(t,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,W],search:function(t){return j(t,"chrome")&&!j(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return j(t,"msie")||j(t,"trident")}},{name:"Opera",versionRegexes:[W,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:q("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:q("firefox")},{name:"Safari",versionRegexes:[W,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(j(t,"safari")||j(t,"mobile/"))&&j(t,"applewebkit")}}],G=[{name:"Windows",search:q("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return j(t,"iphone")||j(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:q("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:q("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:q("linux"),versionRegexes:[]},{name:"Solaris",search:q("sunos"),versionRegexes:[]},{name:"FreeBSD",search:q("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:q("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Y={browsers:f($),oses:f(G)},X="Edge",K="Chrome",J="Opera",Z="Firefox",Q="Safari",tt=function(t){var e=t.current,n=t.version,o=function(t){return function(){return e===t}};return{current:e,version:n,isEdge:o(X),isChrome:o(K),isIE:o("IE"),isOpera:o(J),isFirefox:o(Z),isSafari:o(Q)}},et={unknown:function(){return tt({current:void 0,version:N.unknown()})},nu:tt,edge:f(X),chrome:f(K),ie:f("IE"),opera:f(J),firefox:f(Z),safari:f(Q)},nt="Windows",ot="Android",rt="Linux",it="Solaris",at="FreeBSD",ut="ChromeOS",ct=function(t){var e=t.current,n=t.version,o=function(t){return function(){return e===t}};return{current:e,version:n,isWindows:o(nt),isiOS:o("iOS"),isAndroid:o(ot),isOSX:o("OSX"),isLinux:o(rt),isSolaris:o(it),isFreeBSD:o(at),isChromeOS:o(ut)}},lt={unknown:function(){return ct({current:void 0,version:N.unknown()})},nu:ct,windows:f(nt),ios:f("iOS"),android:f(ot),linux:f(rt),osx:f("OSX"),solaris:f(it),freebsd:f(at),chromeos:f(ut)},st=function(t,e){var n=Y.browsers(),o=Y.oses(),r=F(n,t).fold(et.unknown,et.nu),i=V(o,t).fold(lt.unknown,lt.nu),a=function(t,e,n,o){var r=t.isiOS()&&!0===/ipad/i.test(n),i=t.isiOS()&&!r,a=t.isiOS()||t.isAndroid(),u=a||o("(pointer:coarse)"),c=r||!i&&a&&o("(min-device-width:768px)"),l=i||a&&!c,s=e.isSafari()&&t.isiOS()&&!1===/safari/i.test(n),d=!l&&!c&&!s;return{isiPad:f(r),isiPhone:f(i),isTablet:f(c),isPhone:f(l),isTouch:f(u),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:f(s),isDesktop:f(d)}}(i,r,t,e);return{browser:r,os:i,deviceType:a}},ft=function(t){return window.matchMedia(t).matches},dt=function(t){var e,n=!1;return function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];return n||(n=!0,e=t.apply(null,o)),e}}((function(){return st(navigator.userAgent,ft)})),mt=function(t){if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}},gt={fromHtml:function(t,e){var n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||n.childNodes.length>1)throw console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return mt(n.childNodes[0])},fromTag:function(t,e){var n=(e||document).createElement(t);return mt(n)},fromText:function(t,e){var n=(e||document).createTextNode(t);return mt(n)},fromDom:mt,fromPoint:function(t,e,n){return y(t.dom.elementFromPoint(e,n)).map(mt)}},pt=function(t,e){return t.dom===e.dom},ht=function(t,e){return n=t.dom,o=e.dom,function(t,e,n){return 0!=(t.compareDocumentPosition(e)&n)}(n,o,Node.DOCUMENT_POSITION_CONTAINED_BY);var n,o},vt=function(t,e){return dt().browser.isIE()?ht(t,e):function(t,e){var n=t.dom,o=e.dom;return n!==o&&n.contains(o)}(t,e)},bt=function(t,e){var n=t.dom;if(1!==n.nodeType)return!1;var o=n;if(void 0!==o.matches)return o.matches(e);if(void 0!==o.msMatchesSelector)return o.msMatchesSelector(e);if(void 0!==o.webkitMatchesSelector)return o.webkitMatchesSelector(e);if(void 0!==o.mozMatchesSelector)return o.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},xt=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),yt=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),wt=tinymce.util.Tools.resolve("tinymce.util.VK"),kt=Object.keys,_t=function(t,e){for(var n=kt(t),o=0,r=n.length;o<r;o++){var i=n[o];e(t[i],i)}},Ct=function(t,e){var n={};return function(t,e,n,o){_t(t,(function(t,r){(e(t,r)?n:o)(t,r)}))}(t,e,function(t){return function(e,n){t[n]=e}}(n),s),n};"undefined"!=typeof window?window:Function("return this;")();var St=function(t){return t.dom.nodeName.toLowerCase()},Ot=function(t){return function(e){return function(t){return t.dom.nodeType}(e)===t}}(1),zt=function(t,e){var n=t.dom;_t(e,(function(t,e){!function(t,e,n){if(!(r(n)||u(n)||l(n)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")}(n,e,t)}))},Tt=function(t){return O(t.dom.attributes,(function(t,e){return t[e.name]=e.value,t}),{})},Mt=function(t){return y(t.dom.parentNode).map(gt.fromDom)},At=function(t){return _(t.dom.childNodes,gt.fromDom)},Dt=function(t,e){var n=t.dom.childNodes;return y(n[e]).map(gt.fromDom)},Et=function(t){return Dt(t,0)},Pt=function(t){return Dt(t,t.dom.childNodes.length-1)},Ht=function(t,e){Mt(t).each((function(n){n.dom.insertBefore(e.dom,t.dom)}))},Bt=function(t,e){t.dom.appendChild(e.dom)},Rt=function(t,e){C(e,(function(e){Bt(t,e)}))},It=function(t){var e=t.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},Nt=function(t){return function(t,e){return gt.fromDom(t.dom.cloneNode(e))}(t,!0)},Lt=function(t,e){var n=function(t,e){var n=gt.fromTag(e),o=Tt(t);return zt(n,o),n}(t,e);Ht(t,n);var o=At(t);return Rt(n,o),It(t),n},Ft=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Vt=tinymce.util.Tools.resolve("tinymce.util.Tools"),jt=function(t){return function(e){return e&&e.nodeName.toLowerCase()===t}},Ut=function(t){return function(e){return e&&t.test(e.nodeName)}},Wt=function(t){return t&&3===t.nodeType},qt=Ut(/^(OL|UL|DL)$/),$t=Ut(/^(OL|UL)$/),Gt=jt("ol"),Yt=Ut(/^(LI|DT|DD)$/),Xt=Ut(/^(DT|DD)$/),Kt=Ut(/^(TH|TD)$/),Jt=jt("br"),Zt=function(t,e){return e&&!!t.schema.getTextBlockElements()[e.nodeName]},Qt=function(t,e){return t&&t.nodeName in e},te=function(t,e,n){var o=t.isEmpty(e);return!(n&&t.select("span[data-mce-type=bookmark]",e).length>0)&&o},ee=function(t,e){return t.isChildOf(e,t.getRoot())},ne=function(t,e){var n,o,r,i=t.dom,a=t.schema.getBlockElements(),u=i.createFragment(),c=function(t){var e=t.getParam("forced_root_block","p");return!1===e?"":!0===e?"p":e}(t);if(c&&((o=i.create(c)).tagName===c.toUpperCase()&&i.setAttribs(o,function(t){return t.getParam("forced_root_block_attrs",{})}(t)),Qt(e.firstChild,a)||u.appendChild(o)),e)for(;n=e.firstChild;){var l=n.nodeName;r||"SPAN"===l&&"bookmark"===n.getAttribute("data-mce-type")||(r=!0),Qt(n,a)?(u.appendChild(n),o=null):c?(o||(o=i.create(c),u.appendChild(o)),o.appendChild(n)):u.appendChild(n)}return c?r||o.appendChild(i.create("br",{"data-mce-bogus":"1"})):u.appendChild(i.create("br")),u},oe=Ft.DOM,re=function(t,e){bt(e,"dd")?Lt(e,"dt"):bt(e,"dt")&&Mt(e).each((function(n){return function(t,e,n){var o=oe.select('span[data-mce-type="bookmark"]',e),r=ne(t,n),i=oe.createRng();i.setStartAfter(n),i.setEndAfter(e);for(var a,u=i.extractContents(),c=u.firstChild;c;c=c.firstChild)if("LI"===c.nodeName&&t.dom.isEmpty(c)){oe.remove(c);break}t.dom.isEmpty(u)||oe.insertAfter(u,e),oe.insertAfter(r,e),te(t.dom,n.parentNode)&&(a=n.parentNode,Vt.each(o,(function(t){a.parentNode.insertBefore(t,n.parentNode)})),oe.remove(a)),oe.remove(n),te(t.dom,e)&&oe.remove(e)}(t,n.dom,e.dom)}))},ie=function(t){bt(t,"dt")&&Lt(t,"dd")},ae=function(t,e){if(Wt(t))return{container:t,offset:e};var n=xt.getNode(t,e);return Wt(n)?{container:n,offset:e>=t.childNodes.length?n.data.length:0}:n.previousSibling&&Wt(n.previousSibling)?{container:n.previousSibling,offset:n.previousSibling.data.length}:n.nextSibling&&Wt(n.nextSibling)?{container:n.nextSibling,offset:0}:{container:t,offset:e}},ue=function(t){var e=t.cloneRange(),n=ae(t.startContainer,t.startOffset);e.setStart(n.container,n.offset);var o=ae(t.endContainer,t.endOffset);return e.setEnd(o.container,o.offset),e},ce=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),le=function(t,e){var n=e||t.selection.getStart(!0);return t.dom.getParent(n,"OL,UL,DL",de(t,n))},se=function(t){var e=le(t),n=t.selection.getSelectedBlocks();return function(t,e){return t&&1===e.length&&e[0]===t}(e,n)?function(t){return Vt.grep(t.querySelectorAll("ol,ul,dl"),(function(t){return qt(t)}))}(e):Vt.grep(n,(function(t){return qt(t)&&e!==t}))},fe=function(t){var e=t.selection.getSelectedBlocks();return Vt.grep(function(t,e){var n=Vt.map(e,(function(e){return t.dom.getParent(e,"li,dd,dt",de(t,e))||e}));return ce.unique(n)}(t,e),(function(t){return Yt(t)}))},de=function(t,e){var n=t.dom.getParents(e,"TD,TH");return n.length>0?n[0]:t.getBody()},me=function(t,e){var n=t.dom.getParents(e,"ol,ul",de(t,e));return P(n)},ge=function(t){var e=function(t){var e=me(t,t.selection.getStart()),n=S(t.selection.getSelectedBlocks(),$t);return e.toArray().concat(n)}(t);return pe(t,e)},pe=function(t,e){var n=_(e,(function(e){return me(t,e).getOr(e)}));return ce.unique(n)},he=function(t,e,n){return t.isSome()&&e.isSome()?b(n(t.getOrDie(),e.getOrDie())):x()},ve=function(t,e,n){return t.fire("ListMutation",{action:e,element:n})},be=function(t,e,n){if(!r(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);(function(t){return void 0!==t.style&&c(t.style.getPropertyValue)})(t)&&t.style.setProperty(e,n)},xe=function(t,e){Bt(t.item,e.list)},ye=function(t,e){var n={list:gt.fromTag(e,t),item:gt.fromTag("li",t)};return Bt(n.list,n.item),n},we=function(t,e,n){var o=e.slice(0,n.depth);return P(o).each((function(e){var o=function(t,e,n){var o=gt.fromTag("li",t);return zt(o,e),Rt(o,n),o}(t,n.itemAttributes,n.content);!function(t,e){Bt(t.list,e),t.item=e}(e,o),function(t,e){St(t.list)!==e.listType&&(t.list=Lt(t.list,e.listType)),zt(t.list,e.listAttributes)}(e,n)})),o},ke=function(t,e,n){var o,r=function(t,e,n){for(var o=[],r=0;r<n;r++)o.push(ye(t,e.listType));return o}(t,n,n.depth-e.length);return function(t){for(var e=1;e<t.length;e++)xe(t[e-1],t[e])}(r),function(t,e){for(var n=0;n<t.length-1;n++)o=t[n].item,r="list-style-type",i="none",a=void 0,a=o.dom,be(a,r,i);var o,r,i,a;P(t).each((function(t){zt(t.list,e.listAttributes),zt(t.item,e.itemAttributes),Rt(t.item,e.content)}))}(r,n),o=r,he(P(e),E(o),xe),e.concat(r)},_e=function(t){return bt(t,"OL,UL")},Ce=function(t){return Et(t).map(_e).getOr(!1)},Se=function(t){return t.depth>0},Oe=function(t){return t.isSelected},ze=function(t){var e=At(t),n=Pt(t).map(_e).getOr(!1)?e.slice(0,-1):e;return _(n,Nt)},Te=function(t){return C(t,(function(e,n){(function(t,e){var n=t[e].depth,o=function(t){return t.depth===n&&!t.dirty},r=function(t){return t.depth<n};return z(A(t.slice(0,e)),o,r).orThunk((function(){return z(t.slice(e+1),o,r)}))})(t,n).fold((function(){e.dirty&&function(t){t.listAttributes=Ct(t.listAttributes,(function(t,e){return"start"!==e}))}(e)}),(function(t){return o=t,(n=e).listType=o.listType,void(n.listAttributes=H({},o.listAttributes));var n,o}))})),t},Me=function(t,e,n,o){return Et(o).filter(_e).fold((function(){e.each((function(t){pt(t.start,o)&&n.set(!0)}));var r=function(t,e,n){return Mt(t).filter(Ot).map((function(o){return{depth:e,dirty:!1,isSelected:n,content:ze(t),itemAttributes:Tt(t),listAttributes:Tt(o),listType:St(o)}}))}(o,t,n.get());e.each((function(t){pt(t.end,o)&&n.set(!1)}));var i=Pt(o).filter(_e).map((function(o){return Ae(t,e,n,o)})).getOr([]);return r.toArray().concat(i)}),(function(o){return Ae(t,e,n,o)}))},Ae=function t(e,n,o,r){return M(At(r),(function(r){return(_e(r)?t:Me)(e+1,n,o,r)}))},De=function(t,e){var n=Te(e);return _(n,(function(e){var n,o,r,i=(n=e.content,r=(o||document).createDocumentFragment(),C(n,(function(t){r.appendChild(t.dom)})),gt.fromDom(r));return gt.fromDom(ne(t,i.dom))}))},Ee=function(t,e){var n=Te(e);return function(t,e){var n=O(e,(function(e,n){return n.depth>e.length?ke(t,e,n):we(t,e,n)}),[]);return E(n).map((function(t){return t.list}))}(t.contentDocument,n).toArray()},Pe=function(t,e,n){var o=function(t,e){var n,o=(n=!1,{get:function(){return n},set:function(t){n=t}});return _(t,(function(t){return{sourceList:t,entries:Ae(0,e,o,t)}}))}(e,function(t){var e=_(fe(t),gt.fromDom);return he(T(e,d(Ce)),T(A(e),d(Ce)),(function(t,e){return{start:t,end:e}}))}(t));C(o,(function(e){!function(t,e){C(S(t,Oe),(function(t){return function(t,e){switch(t){case"Indent":e.depth++;break;case"Outdent":e.depth--;break;case"Flatten":e.depth=0}e.dirty=!0}(e,t)}))}(e.entries,n);var o,r=function(t,e){return M(function(t,e){if(0===t.length)return[];for(var n=e(t[0]),o=[],r=[],i=0,a=t.length;i<a;i++){var u=t[i],c=e(u);c!==n&&(o.push(r),r=[]),n=c,r.push(u)}return 0!==r.length&&o.push(r),o}(e,Se),(function(e){return E(e).map(Se).getOr(!1)?Ee(t,e):De(t,e)}))}(t,e.entries);C(r,(function(e){ve(t,"Indent"===n?"IndentList":"OutdentList",e.dom)})),o=e.sourceList,C(r,(function(t){Ht(o,t)})),It(e.sourceList)}))},He=function(t,e){var n=_(ge(t),gt.fromDom),o=_(function(t){return S(fe(t),Xt)}(t),gt.fromDom),r=!1;if(n.length||o.length){var i=t.selection.getBookmark();Pe(t,n,e),function(t,e,n){C(n,"Indent"===e?ie:function(e){return re(t,e)})}(t,e,o),t.selection.moveToBookmark(i),t.selection.setRng(ue(t.selection.getRng())),t.nodeChanged(),r=!0}return r},Be=function(t){return He(t,"Indent")},Re=function(t){return He(t,"Outdent")},Ie=function(t){return He(t,"Flatten")},Ne=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),Le=Ft.DOM,Fe=function(t){var e={},n=function(n){var o,r,i;r=t[n?"startContainer":"endContainer"],i=t[n?"startOffset":"endOffset"],1===r.nodeType&&(o=Le.create("span",{"data-mce-type":"bookmark"}),r.hasChildNodes()?(i=Math.min(i,r.childNodes.length-1),n?r.insertBefore(o,r.childNodes[i]):Le.insertAfter(o,r.childNodes[i])):r.appendChild(o),r=o,i=0),e[n?"startContainer":"endContainer"]=r,e[n?"startOffset":"endOffset"]=i};return n(!0),t.collapsed||n(),e},Ve=function(t){var e=function(e){var n,o,r;n=r=t[e?"startContainer":"endContainer"],o=t[e?"startOffset":"endOffset"],n&&(1===n.nodeType&&(o=function(t){for(var e=t.parentNode.firstChild,n=0;e;){if(e===t)return n;1===e.nodeType&&"bookmark"===e.getAttribute("data-mce-type")||n++,e=e.nextSibling}return-1}(n),n=n.parentNode,Le.remove(r),!n.hasChildNodes()&&Le.isBlock(n)&&n.appendChild(Le.create("br"))),t[e?"startContainer":"endContainer"]=n,t[e?"startOffset":"endOffset"]=o)};e(!0),e();var n=Le.createRng();return n.setStart(t.startContainer,t.startOffset),t.endContainer&&n.setEnd(t.endContainer,t.endOffset),ue(n)},je=function(t){switch(t){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},Ue=function(t){return/\btox\-/.test(t.className)},We=function(t,e,n){var o=function(t){var o=z(t.parents,qt,Kt).filter((function(t){return t.nodeName===e&&!Ue(t)})).isSome();n(o)},r=t.dom.getParents(t.selection.getNode());return o({parents:r}),t.on("NodeChange",o),function(){return t.off("NodeChange",o)}},qe=function(t,e){Vt.each(e,(function(e,n){t.setAttribute(n,e)}))},$e=function(t,e,n){!function(t,e,n){var o=n["list-style-type"]?n["list-style-type"]:null;t.setStyle(e,"list-style-type",o)}(t,e,n),function(t,e,n){qe(e,n["list-attributes"]),Vt.each(t.select("li",e),(function(t){qe(t,n["list-item-attributes"])}))}(t,e,n)},Ge=function(t,e,n,o){var r=e[n?"startContainer":"endContainer"],i=e[n?"startOffset":"endOffset"];for(1===r.nodeType&&(r=r.childNodes[Math.min(i,r.childNodes.length-1)]||r),!n&&Jt(r.nextSibling)&&(r=r.nextSibling);r.parentNode!==o;){if(Zt(t,r))return r;if(/^(TD|TH)$/.test(r.parentNode.nodeName))return r;r=r.parentNode}return r},Ye=function(t,e,n){var o=t.selection.getRng(),r="LI",i=de(t,t.selection.getStart(!0)),a=t.dom;if("false"!==a.getContentEditable(t.selection.getNode())){"DL"===(e=e.toUpperCase())&&(r="DT");var u=Fe(o),c=function(t,e,n){for(var o,r=[],i=t.dom,a=Ge(t,e,!0,n),u=Ge(t,e,!1,n),c=[],l=a;l&&(c.push(l),l!==u);l=l.nextSibling);return Vt.each(c,(function(e){if(Zt(t,e))return r.push(e),void(o=null);if(i.isBlock(e)||Jt(e))return Jt(e)&&i.remove(e),void(o=null);var a=e.nextSibling;Ne.isBookmarkNode(e)&&(qt(a)||Zt(t,a)||!a&&e.parentNode===n)?o=null:(o||(o=i.create("p"),e.parentNode.insertBefore(o,e),r.push(o)),o.appendChild(e))})),r}(t,o,i);Vt.each(c,(function(o){var i,u=o.previousSibling,c=o.parentNode;Yt(c)||(u&&qt(u)&&u.nodeName===e&&function(t,e,n){var o=t.getStyle(e,"list-style-type"),r=n?n["list-style-type"]:"";return o===(null===r?"":r)}(a,u,n)?(i=u,o=a.rename(o,r),u.appendChild(o)):(i=a.create(e),o.parentNode.insertBefore(i,o),i.appendChild(o),o=a.rename(o,r)),function(t,e,n){Vt.each(n,(function(n){var o;return t.setStyle(e,((o={})[n]="",o))}))}(a,o,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),$e(a,i,n),Ke(t.dom,i))})),t.selection.setRng(Ve(u))}},Xe=function(t,e,n){return function(t,e){return t&&e&&qt(t)&&t.nodeName===e.nodeName}(e,n)&&function(t,e,n){return t.getStyle(e,"list-style-type",!0)===t.getStyle(n,"list-style-type",!0)}(t,e,n)&&(o=n,e.className===o.className);var o},Ke=function(t,e){var n,o;if(n=e.nextSibling,Xe(t,e,n)){for(;o=n.firstChild;)e.appendChild(o);t.remove(n)}if(n=e.previousSibling,Xe(t,e,n)){for(;o=n.lastChild;)e.insertBefore(o,e.firstChild);t.remove(n)}},Je=function(t,e,n,o,r){var i=qt(e);if(i&&e.nodeName===o&&!Ze(r))Ie(t);else{Ye(t,o,r);var a=Fe(t.selection.getRng(!0)),u=i?function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,u=i.length;a<u;a++,r++)o[r]=i[a];return o}([e],n):n;Vt.each(u,(function(e){!function(t,e,n,o){if(e.nodeName!==n){var r=t.dom.rename(e,n);$e(t.dom,r,o),ve(t,je(n),r)}else $e(t.dom,e,o),ve(t,je(n),e)}(t,e,o,r)})),t.selection.setRng(Ve(a))}},Ze=function(t){return"list-style-type"in t},Qe=function(t,e,n){var o=le(t),r=se(t),a=i(n)?n:{};r.length>0?Je(t,o,r,e,a):function(t,e,n,o){if(e!==t.getBody())if(e)if(e.nodeName!==n||Ze(o)||Ue(e)){var r=Fe(t.selection.getRng(!0));$e(t.dom,e,o);var i=t.dom.rename(e,n);Ke(t.dom,i),t.selection.setRng(Ve(r)),Ye(t,n,o),ve(t,je(n),i)}else Ie(t);else Ye(t,n,o),ve(t,je(n),e)}(t,o,e,a)},tn=Ft.DOM,en=function(t,e){Vt.each(Vt.grep(t.select("ol,ul",e)),(function(e){!function(t,e){var n,o=e.parentNode;"LI"===o.nodeName&&o.firstChild===e&&((n=o.previousSibling)&&"LI"===n.nodeName?(n.appendChild(e),te(t,o)&&tn.remove(o)):tn.setStyle(o,"listStyleType","none")),qt(o)&&(n=o.previousSibling)&&"LI"===n.nodeName&&n.appendChild(e)}(t,e)}))},nn=function(t,e,n,o){var r=e.startContainer,i=e.startOffset;if(Wt(r)&&(n?i<r.data.length:i>0))return r;var a=t.schema.getNonEmptyElements();1===r.nodeType&&(r=xt.getNode(r,i));var u=new yt(r,o);for(n&&function(t,e){return!!Jt(e)&&t.isBlock(e.nextSibling)&&!Jt(e.previousSibling)}(t.dom,r)&&u.next();r=u[n?"next":"prev2"]();){if("LI"===r.nodeName&&!r.hasChildNodes())return r;if(a[r.nodeName])return r;if(Wt(r)&&r.data.length>0)return r}},on=function(t,e){var n=e.childNodes;return 1===n.length&&!qt(n[0])&&t.isBlock(n[0])},rn=function(t,e,n){var o,r=on(t,n)?n.firstChild:n;if(function(t,e){on(t,e)&&t.remove(e.firstChild,!0)}(t,e),!te(t,e,!0))for(;o=e.firstChild;)r.appendChild(o)},an=function(t,e,n){var o,r=e.parentNode;if(ee(t,e)&&ee(t,n)){qt(n.lastChild)&&(o=n.lastChild),r===n.lastChild&&Jt(r.previousSibling)&&t.remove(r.previousSibling);var i=n.lastChild;i&&Jt(i)&&e.hasChildNodes()&&t.remove(i),te(t,n,!0)&&t.$(n).empty(),rn(t,e,n),o&&n.appendChild(o);var a=vt(gt.fromDom(n),gt.fromDom(e))?t.getParents(e,qt,n):[];t.remove(e),C(a,(function(e){te(t,e)&&e!==t.getRoot()&&t.remove(e)}))}},un=function(t,e,n,o){var r=t.dom;if(r.isEmpty(o))!function(t,e,n){t.dom.$(n).empty(),an(t.dom,e,n),t.selection.setCursorLocation(n,0)}(t,n,o);else{var i=Fe(e);an(r,n,o),t.selection.setRng(Ve(i))}},cn=function(t,e){var n=t.dom,o=t.selection,r=o.getStart(),i=de(t,r),a=n.getParent(o.getStart(),"LI",i);if(a){var u=a.parentNode;if(u===t.getBody()&&te(n,u))return!0;var c=ue(o.getRng()),l=n.getParent(nn(t,c,e,i),"LI",i);if(l&&l!==a)return t.undoManager.transact((function(){var n;e?un(t,c,l,a):(n=a).parentNode.firstChild===n?Re(t):function(t,e,n,o){var r=Fe(e);an(t.dom,n,o);var i=Ve(r);t.selection.setRng(i)}(t,c,a,l)})),!0;if(!l&&!e&&0===c.startOffset&&0===c.endOffset)return t.undoManager.transact((function(){Ie(t)})),!0}return!1},ln=function(t,e){return cn(t,e)||function(t,e){var n=t.dom,o=t.selection.getStart(),r=de(t,o),i=n.getParent(o,n.isBlock,r);if(i&&n.isEmpty(i)){var a=ue(t.selection.getRng()),u=n.getParent(nn(t,a,e,r),"LI",r);if(u)return t.undoManager.transact((function(){!function(t,e,n){var o=t.getParent(e.parentNode,t.isBlock,n);t.remove(e),o&&t.isEmpty(o)&&t.remove(o)}(n,i,r),Ke(n,u.parentNode),t.selection.select(u,!0),t.selection.collapse(e)})),!0}return!1}(t,e)},sn=function(t,e){return t.selection.isCollapsed()?ln(t,e):function(t){var e=t.selection.getStart(),n=de(t,e);return!!(t.dom.getParent(e,"LI,DT,DD",n)||fe(t).length>0)&&(t.undoManager.transact((function(){t.execCommand("Delete"),en(t.dom,t.getBody())})),!0)}(t)},fn=function(t){var e=A(U(t).split("")),n=_(e,(function(t,e){var n=t.toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+1;return Math.pow(26,e)*n}));return O(n,(function(t,e){return t+e}),0)},dn=function t(e){if(--e<0)return"";var n=e%26;return t(Math.floor(e/26))+String.fromCharCode("A".charCodeAt(0)+n)},mn=function(t){var e,n,o=le(t);Gt(o)&&t.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:(e={start:t.dom.getAttrib(o,"start","1"),listStyleType:b(t.dom.getStyle(o,"list-style-type"))},n=parseInt(e.start,10),e.listStyleType.is("upper-alpha")?dn(n):e.listStyleType.is("lower-alpha")?dn(n).toLowerCase():e.start)},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:function(e){(function(t){switch(function(t){return/^[0-9]+$/.test(t)?2:/^[A-Z]+$/.test(t)?0:function(t){return/^[a-z]+$/.test(t)}(t)?1:t.length>0?4:3}(t)){case 2:return b({listStyleType:x(),start:t});case 0:return b({listStyleType:b("upper-alpha"),start:fn(t).toString()});case 1:return b({listStyleType:b("lower-alpha"),start:fn(t).toString()});case 3:return b({listStyleType:x(),start:""});case 4:return x()}})(e.getData().start).each((function(e){t.execCommand("mceListUpdate",!1,{attrs:{start:"1"===e.start?"":e.start},styles:{"list-style-type":e.listStyleType.getOr("")}})})),e.close()}})},gn=function(t,e){return function(){var n=le(t);return n&&n.nodeName===e}},pn=function(t){t.addCommand("mceListProps",(function(){mn(t)}))},hn=function(t){t.on("BeforeExecCommand",(function(e){var n=e.command.toLowerCase();"indent"===n?Be(t):"outdent"===n&&Re(t)})),t.addCommand("InsertUnorderedList",(function(e,n){Qe(t,"UL",n)})),t.addCommand("InsertOrderedList",(function(e,n){Qe(t,"OL",n)})),t.addCommand("InsertDefinitionList",(function(e,n){Qe(t,"DL",n)})),t.addCommand("RemoveList",(function(){Ie(t)})),pn(t),t.addCommand("mceListUpdate",(function(e,n){i(n)&&function(t,e){var n=le(t);t.undoManager.transact((function(){i(e.styles)&&t.dom.setStyles(n,e.styles),i(e.attrs)&&_t(e.attrs,(function(e,o){return t.dom.setAttrib(n,o,e)}))}))}(t,n)})),t.addQueryStateHandler("InsertUnorderedList",gn(t,"UL")),t.addQueryStateHandler("InsertOrderedList",gn(t,"OL")),t.addQueryStateHandler("InsertDefinitionList",gn(t,"DL"))},vn=function(t){(function(t){return t.getParam("lists_indent_on_tab",!0)})(t)&&function(t){t.on("keydown",(function(e){e.keyCode!==wt.TAB||wt.metaKeyPressed(e)||t.undoManager.transact((function(){(e.shiftKey?Re(t):Be(t))&&e.preventDefault()}))}))}(t),function(t){t.on("keydown",(function(e){e.keyCode===wt.BACKSPACE?sn(t,!1)&&e.preventDefault():e.keyCode===wt.DELETE&&sn(t,!0)&&e.preventDefault()}))}(t)};e.add("lists",(function(t){return!1===t.hasPlugin("rtc",!0)?(vn(t),hn(t)):pn(t),function(t){var e=function(e){return function(){return t.execCommand(e)}};t.hasPlugin("advlist")||(t.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:e("InsertOrderedList"),onSetup:function(e){return We(t,"OL",e.setActive)}}),t.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:e("InsertUnorderedList"),onSetup:function(e){return We(t,"UL",e.setActive)}}))}(t),function(t){var e={text:"List properties...",icon:"ordered-list",onAction:function(){return t.execCommand("mceListProps")},onSetup:function(e){return We(t,"OL",(function(t){return e.setDisabled(!t)}))}};t.ui.registry.addMenuItem("listprops",e),t.ui.registry.addContextMenu("lists",{update:function(e){var n=le(t,e);return Gt(n)?["listprops"]:[]}})}(t),function(t){return{backspaceDelete:function(e){sn(t,e)}}}(t)}))}(),function(){var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=function(t,e,n){var o="UL"===e?"InsertUnorderedList":"InsertOrderedList";t.execCommand(o,!1,!1===n?null:{"list-style-type":n})},n=tinymce.util.Tools.resolve("tinymce.util.Tools"),o=function(){},r=function(t){return function(){return t}},i=r(!1),a=r(!0),u=function(){return c},c=function(){var t=function(t){return t.isNone()},e=function(t){return t()},n=function(t){return t};return{fold:function(t,e){return t()},is:i,isSome:i,isNone:a,getOr:n,getOrThunk:e,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:r(null),getOrUndefined:r(void 0),or:n,orThunk:e,map:u,each:o,bind:u,exists:i,forall:a,filter:u,equals:t,equals_:t,toArray:function(){return[]},toString:r("none()")}}(),l=function t(e){var n=r(e),o=function(){return l},u=function(t){return t(e)},l={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:a,isNone:i,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:o,orThunk:o,map:function(n){return t(n(e))},each:function(t){t(e)},bind:u,exists:u,forall:u,filter:function(t){return t(e)?l:c},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(i,(function(t){return n(e,t)}))}};return l},s=function(t){return null==t?c:l(t)},f=function(t){return t&&/^(TH|TD)$/.test(t.nodeName)},d=function(t,e,o){var r=function(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n;return-1}(e.parents,f),i=-1!==r?e.parents.slice(0,r):e.parents,a=n.grep(i,function(t){return function(e){return e&&/^(OL|UL|DL)$/.test(e.nodeName)&&function(t,e){return t.$.contains(t.getBody(),e)}(t,e)}}(t));return a.length>0&&a[0].nodeName===o},m=function(t,o,r,i,a,u){t.ui.registry.addSplitButton(o,{tooltip:r,icon:"OL"===a?"ordered-list":"unordered-list",presets:"listpreview",columns:3,fetch:function(t){t(n.map(u,(function(t){var e="OL"===a?"num":"bull",n="disc"===t||"decimal"===t?"default":t,o="default"===t?"":t,r=function(t){return t.replace(/\-/g," ").replace(/\b\w/g,(function(t){return t.toUpperCase()}))}(t);return{type:"choiceitem",value:o,icon:"list-"+e+"-"+n,text:r}})))},onAction:function(){return t.execCommand(i)},onItemAction:function(n,o){e(t,a,o)},select:function(e){var n=function(t){var e=t.dom.getParent(t.selection.getNode(),"ol,ul"),n=t.dom.getStyle(e,"listStyleType");return s(n)}(t);return n.map((function(t){return e===t})).getOr(!1)},onSetup:function(e){var n=function(n){e.setActive(d(t,n,a))};return t.on("NodeChange",n),function(){return t.off("NodeChange",n)}}})},g=function(t,e,n,o,r,i){i.length>1?m(t,e,n,o,r,i):function(t,e,n,o,r,i){t.ui.registry.addToggleButton(e,{active:!1,tooltip:n,icon:"OL"===r?"ordered-list":"unordered-list",onSetup:function(e){var n=function(n){e.setActive(d(t,n,r))};return t.on("NodeChange",n),function(){return t.off("NodeChange",n)}},onAction:function(){return t.execCommand(o)}})}(t,e,n,o,r)};t.add("advlist",(function(t){t.hasPlugin("lists")?(function(t){g(t,"numlist","Numbered list","InsertOrderedList","OL",function(t){var e=t.getParam("advlist_number_styles","default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman");return e?e.split(/[ ,]/):[]}(t)),g(t,"bullist","Bullet list","InsertUnorderedList","UL",function(t){var e=t.getParam("advlist_bullet_styles","default,circle,square");return e?e.split(/[ ,]/):[]}(t))}(t),function(t){t.addCommand("ApplyUnorderedListStyle",(function(n,o){e(t,"UL",o["list-style-type"])})),t.addCommand("ApplyOrderedListStyle",(function(n,o){e(t,"OL",o["list-style-type"])}))}(t)):console.error("Please use the Lists plugin together with the Advanced List plugin.")}))}(),function(){var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),n=tinymce.util.Tools.resolve("tinymce.util.Tools"),o="a:not([href])",r=function(t){return!t},i=function(t){return t.getAttribute("id")||t.getAttribute("name")||""},a=function(t){return function(t){return t&&"a"===t.nodeName.toLowerCase()}(t)&&!t.getAttribute("href")&&""!==i(t)},u=function(t){var o=t.dom;e(o).walk(t.selection.getRng(),(function(t){n.each(t,(function(t){var e;a(e=t)&&!e.firstChild&&o.remove(t,!1)}))}))},c=function(t){return t.dom.getParent(t.selection.getStart(),o)},l=function(t,e){var n=c(t);n?function(t,e,n){n.removeAttribute("name"),n.id=e,t.addVisual(),t.undoManager.add()}(t,e,n):function(t,e){t.undoManager.transact((function(){(function(t){return t.getParam("allow_html_in_named_anchor",!1,"boolean")})(t)||t.selection.collapse(!0),t.selection.isCollapsed()?t.insertContent(t.dom.createHTML("a",{id:e})):(u(t),t.formatter.remove("namedAnchor",null,null,!0),t.formatter.apply("namedAnchor",{value:e}),t.addVisual())}))}(t,e),t.focus()},s=function(t){var e=function(t){var e=c(t);return e?i(e):""}(t);t.windowManager.open({title:"Anchor",size:"normal",body:{type:"panel",items:[{name:"id",type:"input",label:"ID",placeholder:"example"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{id:e},onSubmit:function(e){(function(t,e){return function(t){return/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(t)}(e)?(l(t,e),!0):(t.windowManager.alert("Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores."),!1)})(t,e.getData().id)&&e.close()}})},f=function(t){return function(t){return t&&r(t.attr("href"))&&!r(t.attr("id")||t.attr("name"))}(t)&&!t.firstChild},d=function(t){return function(e){for(var n=0;n<e.length;n++){var o=e[n];f(o)&&o.attr("contenteditable",t)}}};t.add("anchor",(function(t){!function(t){t.on("PreInit",(function(){t.parser.addNodeFilter("a",d("false")),t.serializer.addNodeFilter("a",d(null))}))}(t),function(t){t.addCommand("mceAnchor",(function(){s(t)}))}(t),function(t){t.ui.registry.addToggleButton("anchor",{icon:"bookmark",tooltip:"Anchor",onAction:function(){return t.execCommand("mceAnchor")},onSetup:function(e){return t.selection.selectorChangedWithUnbind("a:not([href])",e.setActive).unbind}}),t.ui.registry.addMenuItem("anchor",{icon:"bookmark",text:"Anchor...",onAction:function(){return t.execCommand("mceAnchor")}})}(t),t.on("PreInit",(function(){!function(t){t.formatter.register("namedAnchor",{inline:"a",selector:o,remove:"all",split:!0,deep:!0,attributes:{id:"%value"},onmatch:function(t,e,n){return a(t)}})}(t)}))}))}(),function(){var e,n=tinymce.util.Tools.resolve("tinymce.PluginManager"),o=function(t,e){var n=function(t,e){return t.fire("insertCustomChar",{chr:e})}(t,e).chr;t.execCommand("mceInsertContent",!1,n)},r=(e="array",function(n){return function(e){var n=t(e);return null===e?"null":"object"===n&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===n&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":n}(n)===e}),i=function(){},a=function(t){return function(){return t}},u=a(!1),c=a(!0),l=function(){return s},s=function(){var t=function(t){return t.isNone()},e=function(t){return t()},n=function(t){return t};return{fold:function(t,e){return t()},is:u,isSome:u,isNone:c,getOr:n,getOrThunk:e,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:a(null),getOrUndefined:a(void 0),or:n,orThunk:e,map:l,each:i,bind:l,exists:u,forall:c,filter:l,equals:t,equals_:t,toArray:function(){return[]},toString:a("none()")}}(),f=function t(e){var n=a(e),o=function(){return i},r=function(t){return t(e)},i={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:c,isNone:u,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:o,orThunk:o,map:function(n){return t(n(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?i:s},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(u,(function(t){return n(e,t)}))}};return i},d=f,m=l,g=Array.prototype.push,p=function(t,e){for(var n=t.length,o=new Array(n),r=0;r<n;r++){var i=t[r];o[r]=e(i,r)}return o},h=function(t,e){return function(t,e,n){for(var o=0,r=t.length;o<r;o++){var i=t[o];if(e(i,o))return d(i);if(n(i,o))break}return m()}(t,e,u)},v=function(t,e){return function(t){for(var e=[],n=0,o=t.length;n<o;++n){if(!r(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);g.apply(e,t[n])}return e}(p(t,e))},b=tinymce.util.Tools.resolve("tinymce.util.Tools"),x=b.isArray,y="User Defined",w=function(t){return x(t)?[].concat((e=t,b.grep(e,(function(t){return x(t)&&2===t.length})))):"function"==typeof t?t():[];var e},k=function(t){var e=function(t,e){var n=function(t){return t.getParam("charmap")}(t);n&&(e=[{name:y,characters:w(n)}]);var o=function(t){return t.getParam("charmap_append")}(t);if(o){var r=b.grep(e,(function(t){return t.name===y}));return r.length?(r[0].characters=[].concat(r[0].characters).concat(w(o)),e):[].concat(e).concat({name:y,characters:w(o)})}return e}(t,[{name:"Currency",characters:[[36,"dollar sign"],[162,"cent sign"],[8364,"euro sign"],[163,"pound sign"],[165,"yen sign"],[164,"currency sign"],[8352,"euro-currency sign"],[8353,"colon sign"],[8354,"cruzeiro sign"],[8355,"french franc sign"],[8356,"lira sign"],[8357,"mill sign"],[8358,"naira sign"],[8359,"peseta sign"],[8360,"rupee sign"],[8361,"won sign"],[8362,"new sheqel sign"],[8363,"dong sign"],[8365,"kip sign"],[8366,"tugrik sign"],[8367,"drachma sign"],[8368,"german penny symbol"],[8369,"peso sign"],[8370,"guarani sign"],[8371,"austral sign"],[8372,"hryvnia sign"],[8373,"cedi sign"],[8374,"livre tournois sign"],[8375,"spesmilo sign"],[8376,"tenge sign"],[8377,"indian rupee sign"],[8378,"turkish lira sign"],[8379,"nordic mark sign"],[8380,"manat sign"],[8381,"ruble sign"],[20870,"yen character"],[20803,"yuan character"],[22291,"yuan character, in hong kong and taiwan"],[22278,"yen/yuan character variant one"]]},{name:"Text",characters:[[169,"copyright sign"],[174,"registered sign"],[8482,"trade mark sign"],[8240,"per mille sign"],[181,"micro sign"],[183,"middle dot"],[8226,"bullet"],[8230,"three dot leader"],[8242,"minutes / feet"],[8243,"seconds / inches"],[167,"section sign"],[182,"paragraph sign"],[223,"sharp s / ess-zed"]]},{name:"Quotations",characters:[[8249,"single left-pointing angle quotation mark"],[8250,"single right-pointing angle quotation mark"],[171,"left pointing guillemet"],[187,"right pointing guillemet"],[8216,"left single quotation mark"],[8217,"right single quotation mark"],[8220,"left double quotation mark"],[8221,"right double quotation mark"],[8218,"single low-9 quotation mark"],[8222,"double low-9 quotation mark"],[60,"less-than sign"],[62,"greater-than sign"],[8804,"less-than or equal to"],[8805,"greater-than or equal to"],[8211,"en dash"],[8212,"em dash"],[175,"macron"],[8254,"overline"],[164,"currency sign"],[166,"broken bar"],[168,"diaeresis"],[161,"inverted exclamation mark"],[191,"turned question mark"],[710,"circumflex accent"],[732,"small tilde"],[176,"degree sign"],[8722,"minus sign"],[177,"plus-minus sign"],[247,"division sign"],[8260,"fraction slash"],[215,"multiplication sign"],[185,"superscript one"],[178,"superscript two"],[179,"superscript three"],[188,"fraction one quarter"],[189,"fraction one half"],[190,"fraction three quarters"]]},{name:"Mathematical",characters:[[402,"function / florin"],[8747,"integral"],[8721,"n-ary sumation"],[8734,"infinity"],[8730,"square root"],[8764,"similar to"],[8773,"approximately equal to"],[8776,"almost equal to"],[8800,"not equal to"],[8801,"identical to"],[8712,"element of"],[8713,"not an element of"],[8715,"contains as member"],[8719,"n-ary product"],[8743,"logical and"],[8744,"logical or"],[172,"not sign"],[8745,"intersection"],[8746,"union"],[8706,"partial differential"],[8704,"for all"],[8707,"there exists"],[8709,"diameter"],[8711,"backward difference"],[8727,"asterisk operator"],[8733,"proportional to"],[8736,"angle"]]},{name:"Extended Latin",characters:[[192,"A - grave"],[193,"A - acute"],[194,"A - circumflex"],[195,"A - tilde"],[196,"A - diaeresis"],[197,"A - ring above"],[256,"A - macron"],[198,"ligature AE"],[199,"C - cedilla"],[200,"E - grave"],[201,"E - acute"],[202,"E - circumflex"],[203,"E - diaeresis"],[274,"E - macron"],[204,"I - grave"],[205,"I - acute"],[206,"I - circumflex"],[207,"I - diaeresis"],[298,"I - macron"],[208,"ETH"],[209,"N - tilde"],[210,"O - grave"],[211,"O - acute"],[212,"O - circumflex"],[213,"O - tilde"],[214,"O - diaeresis"],[216,"O - slash"],[332,"O - macron"],[338,"ligature OE"],[352,"S - caron"],[217,"U - grave"],[218,"U - acute"],[219,"U - circumflex"],[220,"U - diaeresis"],[362,"U - macron"],[221,"Y - acute"],[376,"Y - diaeresis"],[562,"Y - macron"],[222,"THORN"],[224,"a - grave"],[225,"a - acute"],[226,"a - circumflex"],[227,"a - tilde"],[228,"a - diaeresis"],[229,"a - ring above"],[257,"a - macron"],[230,"ligature ae"],[231,"c - cedilla"],[232,"e - grave"],[233,"e - acute"],[234,"e - circumflex"],[235,"e - diaeresis"],[275,"e - macron"],[236,"i - grave"],[237,"i - acute"],[238,"i - circumflex"],[239,"i - diaeresis"],[299,"i - macron"],[240,"eth"],[241,"n - tilde"],[242,"o - grave"],[243,"o - acute"],[244,"o - circumflex"],[245,"o - tilde"],[246,"o - diaeresis"],[248,"o slash"],[333,"o macron"],[339,"ligature oe"],[353,"s - caron"],[249,"u - grave"],[250,"u - acute"],[251,"u - circumflex"],[252,"u - diaeresis"],[363,"u - macron"],[253,"y - acute"],[254,"thorn"],[255,"y - diaeresis"],[563,"y - macron"],[913,"Alpha"],[914,"Beta"],[915,"Gamma"],[916,"Delta"],[917,"Epsilon"],[918,"Zeta"],[919,"Eta"],[920,"Theta"],[921,"Iota"],[922,"Kappa"],[923,"Lambda"],[924,"Mu"],[925,"Nu"],[926,"Xi"],[927,"Omicron"],[928,"Pi"],[929,"Rho"],[931,"Sigma"],[932,"Tau"],[933,"Upsilon"],[934,"Phi"],[935,"Chi"],[936,"Psi"],[937,"Omega"],[945,"alpha"],[946,"beta"],[947,"gamma"],[948,"delta"],[949,"epsilon"],[950,"zeta"],[951,"eta"],[952,"theta"],[953,"iota"],[954,"kappa"],[955,"lambda"],[956,"mu"],[957,"nu"],[958,"xi"],[959,"omicron"],[960,"pi"],[961,"rho"],[962,"final sigma"],[963,"sigma"],[964,"tau"],[965,"upsilon"],[966,"phi"],[967,"chi"],[968,"psi"],[969,"omega"]]},{name:"Symbols",characters:[[8501,"alef symbol"],[982,"pi symbol"],[8476,"real part symbol"],[978,"upsilon - hook symbol"],[8472,"Weierstrass p"],[8465,"imaginary part"]]},{name:"Arrows",characters:[[8592,"leftwards arrow"],[8593,"upwards arrow"],[8594,"rightwards arrow"],[8595,"downwards arrow"],[8596,"left right arrow"],[8629,"carriage return"],[8656,"leftwards double arrow"],[8657,"upwards double arrow"],[8658,"rightwards double arrow"],[8659,"downwards double arrow"],[8660,"left right double arrow"],[8756,"therefore"],[8834,"subset of"],[8835,"superset of"],[8836,"not a subset of"],[8838,"subset of or equal to"],[8839,"superset of or equal to"],[8853,"circled plus"],[8855,"circled times"],[8869,"perpendicular"],[8901,"dot operator"],[8968,"left ceiling"],[8969,"right ceiling"],[8970,"left floor"],[8971,"right floor"],[9001,"left-pointing angle bracket"],[9002,"right-pointing angle bracket"],[9674,"lozenge"],[9824,"black spade suit"],[9827,"black club suit"],[9829,"black heart suit"],[9830,"black diamond suit"],[8194,"en space"],[8195,"em space"],[8201,"thin space"],[8204,"zero width non-joiner"],[8205,"zero width joiner"],[8206,"left-to-right mark"],[8207,"right-to-left mark"]]}]);return e.length>1?[{name:"All",characters:v(e,(function(t){return t.characters}))}].concat(e):e},_=function(t){var e=t;return{get:function(){return e},set:function(t){e=t}}},C=String.fromCodePoint,S=function(t,e){return-1!==t.indexOf(e)},O=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(C)return C.apply(void 0,t);for(var n=[],o=0,r="",i=0,a=t.length;i!==a;++i){var u=+t[i];if(!(u<1114111&&u>>>0===u))throw RangeError("Invalid code point: "+u);u<=65535?o=n.push(u):(u-=65536,o=n.push(55296+(u>>10),u%1024+56320)),o>=16383&&(r+=String.fromCharCode.apply(null,n),n.length=0)}return r+String.fromCharCode.apply(null,n)},z=function(t,e){var n=[],o=e.toLowerCase();return function(t,e){for(var n=0,o=t.length;n<o;n++)e(t[n],n)}(t.characters,(function(t){(function(t,e,n){return!!S(O(t).toLowerCase(),n)||S(e.toLowerCase(),n)||S(e.toLowerCase().replace(/\s+/g,""),n)})(t[0],t[1],o)&&n.push(t)})),p(n,(function(t){return{text:t[1],value:O(t[0]),icon:O(t[0])}}))},T="pattern",M=function(t,e){var n,r,i,a=function(){return[{label:"Search",type:"input",name:T},{type:"collection",name:"results"}]},u=1===e.length?_(y):_("All"),c=(n=function(t){var n=t.getData().pattern;!function(t,n){h(e,(function(t){return t.name===u.get()})).each((function(e){var o=z(e,n);t.setData({results:o})}))}(t,n)},r=40,i=null,{cancel:function(){null!==i&&(clearTimeout(i),i=null)},throttle:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];null!==i&&clearTimeout(i),i=setTimeout((function(){n.apply(null,t),i=null}),r)}}),l={title:"Special Character",size:"normal",body:1===e.length?{type:"panel",items:a()}:{type:"tabpanel",tabs:p(e,(function(t){return{title:t.name,name:t.name,items:a()}}))},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{pattern:"",results:z(e[0],"")},onAction:function(e,n){"results"===n.name&&(o(t,n.value),e.close())},onTabChange:function(t,e){u.set(e.newTabName),c.throttle(t)},onChange:function(t,e){e.name===T&&c.throttle(t)}};t.windowManager.open(l).focus(T)},A=tinymce.util.Tools.resolve("tinymce.util.Promise");n.add("charmap",(function(t){var e=k(t);return function(t,e){t.addCommand("mceShowCharmap",(function(){M(t,e)}))}(t,e),function(t){t.ui.registry.addButton("charmap",{icon:"insert-character",tooltip:"Special character",onAction:function(){return t.execCommand("mceShowCharmap")}}),t.ui.registry.addMenuItem("charmap",{icon:"insert-character",text:"Special character...",onAction:function(){return t.execCommand("mceShowCharmap")}})}(t),function(t,e){t.ui.registry.addAutocompleter("charmap",{ch:":",columns:"auto",minChars:2,fetch:function(t,n){return new A((function(n,o){n(z(e,t))}))},onAction:function(e,n,o){t.selection.setRng(n),t.insertContent(o),e.hide()}})}(t,e[0]),function(t){return{getCharMap:function(){return k(t)},insertChar:function(e){o(t,e)}}}(t)}))}(),function(){var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=tinymce.util.Tools.resolve("tinymce.Env");t.add("print",(function(t){!function(t){t.addCommand("mcePrint",(function(){e.browser.isIE()?t.getDoc().execCommand("print",!1,null):t.getWin().print()}))}(t),function(t){t.ui.registry.addButton("print",{icon:"print",tooltip:"Print",onAction:function(){return t.execCommand("mcePrint")}}),t.ui.registry.addMenuItem("print",{text:"Print...",icon:"print",onAction:function(){return t.execCommand("mcePrint")}})}(t),t.addShortcut("Meta+P","","mcePrint")}))}(),function(){var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=tinymce.util.Tools.resolve("tinymce.Env"),n=tinymce.util.Tools.resolve("tinymce.util.Tools"),o=function(t){var o=function(t){var o="",r=t.dom.encode,i=function(t){return t.getParam("content_style","","string")}(t);o+='<base href="'+r(t.documentBaseURI.getURI())+'">';var a=function(t){return t.getParam("content_css_cors",!1,"boolean")}(t)?' crossorigin="anonymous"':"";n.each(t.contentCSS,(function(e){o+='<link type="text/css" rel="stylesheet" href="'+r(t.documentBaseURI.toAbsolute(e))+'"'+a+">"})),i&&(o+='<style type="text/css">'+i+"</style>");var u=function(t){var e=t.getParam("body_id","tinymce","string");return-1===e.indexOf("=")?e:function(t){var e=t.getParam("body_id","","hash");return e[t.id]||e}(t)}(t),c=function(t){var e=t.getParam("body_class","","string");return-1===e.indexOf("=")?e:function(t){return t.getParam("body_class","","hash")[t.id]||""}(t)}(t),l='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+(e.mac?"e.metaKey":"e.ctrlKey && !e.altKey")+")) {e.preventDefault();}}}, false);<\/script> ",s=t.getBody().dir,f=s?' dir="'+r(s)+'"':"";return"<!DOCTYPE html><html><head>"+o+'</head><body id="'+r(u)+'" class="mce-content-body '+r(c)+'"'+f+">"+t.getContent()+l+"</body></html>"}(t);t.windowManager.open({title:"Preview",size:"large",body:{type:"panel",items:[{name:"preview",type:"iframe",sandboxed:!0}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{preview:o}}).focus("close")};t.add("preview",(function(t){!function(t){t.addCommand("mcePreview",(function(){o(t)}))}(t),function(t){t.ui.registry.addButton("preview",{icon:"preview",tooltip:"Preview",onAction:function(){return t.execCommand("mcePreview")}}),t.ui.registry.addMenuItem("preview",{icon:"preview",text:"Preview",onAction:function(){return t.execCommand("mcePreview")}})}(t)}))}(),function(){var e=function(t){var e=t;return{get:function(){return e},set:function(t){e=t}}},n=tinymce.util.Tools.resolve("tinymce.PluginManager"),o=function(){return o=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)},r=function(e){return function(n){return function(e){var n=t(e);return null===e?"null":"object"===n&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===n&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":n}(n)===e}},i=function(e){return function(n){return t(n)===e}},a=r("string"),u=r("array"),c=i("boolean"),l=i("number"),s=function(){},f=function(t){return function(){return t}},d=f(!1),m=f(!0),g=f("[!-#%-*,-\\/:;?@\\[-\\]_{};----------------------------------------------]"),p=function(){return h},h=function(){var t=function(t){return t.isNone()},e=function(t){return t()},n=function(t){return t};return{fold:function(t,e){return t()},is:d,isSome:d,isNone:m,getOr:n,getOrThunk:e,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:f(null),getOrUndefined:f(void 0),or:n,orThunk:e,map:p,each:s,bind:p,exists:d,forall:m,filter:p,equals:t,equals_:t,toArray:function(){return[]},toString:f("none()")}}(),v=function t(e){var n=f(e),o=function(){return i},r=function(t){return t(e)},i={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:m,isNone:d,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:o,orThunk:o,map:function(n){return t(n(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?i:h},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(d,(function(t){return n(e,t)}))}};return i},b=v,x=p,y=function(t){return null==t?h:v(t)},w=g,k=tinymce.util.Tools.resolve("tinymce.util.Tools"),_=Array.prototype.slice,C=Array.prototype.push,S=function(t,e){for(var n=t.length,o=new Array(n),r=0;r<n;r++){var i=t[r];o[r]=e(i,r)}return o},O=function(t,e){for(var n=0,o=t.length;n<o;n++){e(t[n],n)}},z=function(t,e){for(var n=t.length-1;n>=0;n--){e(t[n],n)}},T=function(t,e){return function(t){for(var e=[],n=0,o=t.length;n<o;++n){if(!u(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);C.apply(e,t[n])}return e}(S(t,e))},M=Object.hasOwnProperty,A=function(t,e){return M.call(t,e)};"undefined"!=typeof window?window:Function("return this;")();var D,E,P,H=function(t){return function(e){return function(t){return t.dom.nodeType}(e)===t}}(3),B=function(t,e,n){!function(t,e,n){if(!(a(n)||c(n)||l(n)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")}(t.dom,e,n)},R=function(t){if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}},I={fromHtml:function(t,e){var n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||n.childNodes.length>1)throw console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return R(n.childNodes[0])},fromTag:function(t,e){var n=(e||document).createElement(t);return R(n)},fromText:function(t,e){var n=(e||document).createTextNode(t);return R(n)},fromDom:R,fromPoint:function(t,e,n){return y(t.dom.elementFromPoint(e,n)).map(R)}},N=function(t,e){return{element:t,offset:e}},L=function(t,e){var n=function(t){return S(t.dom.childNodes,I.fromDom)}(t);return n.length>0&&e<n.length?N(n[e],0):N(t,e)},F=function(t,e){var n=function(t){return y(t.dom.parentNode).map(I.fromDom)}(t);n.each((function(n){n.dom.insertBefore(e.dom,t.dom)}))},V=function(t,e){F(t,e),function(t,e){t.dom.appendChild(e.dom)}(e,t)},j=(D=H,E="text",{get:function(t){if(!D(t))throw new Error("Can only get "+E+" value of a "+E+" node");return P(t).getOr("")},getOption:P=function(t){return D(t)?y(t.dom.nodeValue):x()},set:function(t,e){if(!D(t))throw new Error("Can only set raw "+E+" value of a "+E+" node");t.dom.nodeValue=e}}),U=function(t){return j.get(t)},W=function(t,e){return function(t,e){var n,o=void 0===e?document:e.dom;return 1!==(n=o).nodeType&&9!==n.nodeType&&11!==n.nodeType||0===n.childElementCount?[]:S(o.querySelectorAll(t),I.fromDom)}(e,t)},q=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),$=function(t,e){return t.isBlock(e)||A(t.schema.getShortEndedElements(),e.nodeName)},G=function(t,e){return"false"===t.getContentEditable(e)},Y=function(t,e){return!t.isBlock(e)&&A(t.schema.getWhiteSpaceElements(),e.nodeName)},X=function(t,e){return L(I.fromDom(t),e)},K=function(t,e,n,o,r,i){void 0===i&&(i=!0);for(var a=i?e(!1):n;a;){var u=G(t,a);if(u||Y(t,a)){if(u?o.cef(a):o.boundary(a))break;a=e(!0)}else{if($(t,a)){if(o.boundary(a))break}else 3===a.nodeType&&o.text(a);if(a===r)break;a=e(!1)}}},J=function(t,e,n,o,r){if(!function(t,e){return $(t,e)||G(t,e)||Y(t,e)||function(t,e){return"true"===t.getContentEditable(e)&&"false"===t.getContentEditableParent(e.parentNode)}(t,e)}(t,n)){var i=t.getParent(o,t.isBlock),a=new q(n,i),u=r?a.next.bind(a):a.prev.bind(a);K(t,u,n,{boundary:m,cef:m,text:function(t){r?e.fOffset+=t.length:e.sOffset+=t.length,e.elements.push(I.fromDom(t))}})}},Z=function(t,e,n,o,r,i){void 0===i&&(i=!0);var a=new q(n,e),u=[],c={sOffset:0,fOffset:0,elements:[]};J(t,c,n,e,!1);var l=function(){return c.elements.length>0&&(u.push(c),c={sOffset:0,fOffset:0,elements:[]}),!1};return K(t,a.next.bind(a),n,{boundary:l,cef:function(t){return l(),r&&u.push.apply(u,r.cef(t)),!1},text:function(t){c.elements.push(I.fromDom(t)),r&&r.text(t,c)}},o,i),o&&J(t,c,o,e,!0),l(),u},Q=function(t,e){var n=X(e.startContainer,e.startOffset),o=n.element.dom,r=X(e.endContainer,e.endOffset),i=r.element.dom;return Z(t,e.commonAncestorContainer,o,i,{text:function(t,e){t===i?e.fOffset+=t.length-r.offset:t===o&&(e.sOffset+=n.offset)},cef:function(e){var n,o,r,i=T(W(I.fromDom(e),"*[contenteditable=true]"),(function(e){var n=e.dom;return Z(t,n,n)}));return n=i,o=function(t,e){return function(t,e){return function(t,e,n){return 0!=(t.compareDocumentPosition(e)&n)}(t,e,Node.DOCUMENT_POSITION_PRECEDING)}(t.elements[0].dom,e.elements[0].dom)?1:-1},(r=_.call(n,0)).sort(o),r}},!1)},tt=function(t,e){return e.collapsed?[]:Q(t,e)},et=function(t,e){var n=t.createRng();return n.selectNode(e),tt(t,n)},nt=function(t,e){var n,o,r,i=(n=t,o=function(t,n){var o=U(n),r=t.last,i=r+o.length,a=T(e,(function(t,e){return t.start<i&&t.finish>r?[{element:n,start:Math.max(r,t.start)-r,finish:Math.min(i,t.finish)-r,matchId:e}]:[]}));return{results:t.results.concat(a),last:i}},r={results:[],last:0},O(n,(function(t){r=o(r,t)})),r).results;return function(t,e){if(0===t.length)return[];for(var n=e(t[0]),o=[],r=[],i=0,a=t.length;i<a;i++){var u=t[i],c=e(u);c!==n&&(o.push(r),r=[]),n=c,r.push(u)}return 0!==r.length&&o.push(r),o}(i,(function(t){return t.matchId}))},ot=function(t,e){return T(e,(function(e){var n=e.elements,o=S(n,U).join(""),r=function(t,e,n,o){void 0===n&&(n=0),void 0===o&&(o=t.length);var r=e.regex;r.lastIndex=n;for(var i,a=[];i=r.exec(t);){var u=i[e.matchIndex],c=i.index+i[0].indexOf(u),l=c+u.length;if(l>o)break;a.push({start:c,finish:l}),r.lastIndex=l}return a}(o,t,e.sOffset,o.length-e.fOffset);return nt(n,r)}))},rt=function(t,e){z(t,(function(t,n){z(t,(function(t){var o=I.fromDom(e.cloneNode(!1));B(o,"data-mce-index",n);var r=t.element.dom;if(r.length===t.finish&&0===t.start)V(t.element,o);else{r.length!==t.finish&&r.splitText(t.finish);var i=r.splitText(t.start);V(I.fromDom(i),o)}}))}))},it=function(t,e,n,o){var r=n.getBookmark(),i=t.select("td[data-mce-selected],th[data-mce-selected]"),a=i.length>0?function(t,e){return T(e,(function(e){return et(t,e)}))}(t,i):tt(t,n.getRng()),u=ot(e,a);return rt(u,o),n.moveToBookmark(r),u.length},at=function(t){var e=t.getAttribute("data-mce-index");return"number"==typeof e?""+e:e},ut=function(t,e,n,o){var r=t.dom.create("span",{"data-mce-bogus":1});r.className="mce-match-marker";var i=t.getBody();return vt(t,e,!1),o?it(t.dom,n,t.selection,r):function(t,e,n,o){var r=et(t,n),i=ot(e,r);return rt(i,o),i.length}(t.dom,n,i,r)},ct=function(t){var e=t.parentNode;t.firstChild&&e.insertBefore(t.firstChild,t),t.parentNode.removeChild(t)},lt=function(t,e){var n=[],o=k.toArray(t.getBody().getElementsByTagName("span"));if(o.length)for(var r=0;r<o.length;r++){var i=at(o[r]);null!==i&&i.length&&(i===e.toString()&&n.push(o[r]))}return n},st=function(t,e,n){var o=e.get(),r=o.index,i=t.dom;(n=!1!==n)?r+1===o.count?r=0:r++:r-1==-1?r=o.count-1:r--,i.removeClass(lt(t,o.index),"mce-match-marker-selected");var a=lt(t,r);return a.length?(i.addClass(lt(t,r),"mce-match-marker-selected"),t.selection.scrollIntoView(a[0]),r):-1},ft=function(t,e){var n=e.parentNode;t.remove(e),t.isEmpty(n)&&t.remove(n)},dt=function(t,e,n,o,r,i){var a=function(t,e){var n="("+t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&").replace(/\s/g,"[^\\S\\r\\n\\uFEFF]")+")";return e?"(?:^|\\s|"+w()+")"+n+"(?=$|\\s|"+w()+")":n}(n,r),u={regex:new RegExp(a,o?"g":"gi"),matchIndex:1},c=ut(t,e,u,i);if(c){var l=st(t,e,!0);e.set({index:l,count:c,text:n,matchCase:o,wholeWord:r,inSelection:i})}return c},mt=function(t,e){var n=st(t,e,!0);e.set(o(o({},e.get()),{index:n}))},gt=function(t,e){var n=st(t,e,!1);e.set(o(o({},e.get()),{index:n}))},pt=function(t){var e=at(t);return null!==e&&e.length>0},ht=function(t,e,n,r,i){var a,u=e.get(),c=u.index,l=c;r=!1!==r;for(var s=t.getBody(),f=k.grep(k.toArray(s.getElementsByTagName("span")),pt),d=0;d<f.length;d++){var m=at(f[d]),g=a=parseInt(m,10);if(i||g===u.index){for(n.length?(f[d].firstChild.nodeValue=n,ct(f[d])):ft(t.dom,f[d]);f[++d];){if((g=parseInt(at(f[d]),10))!==a){d--;break}ft(t.dom,f[d])}r&&l--}else a>c&&f[d].setAttribute("data-mce-index",String(a-1))}return e.set(o(o({},u),{count:i?0:u.count-1,index:l})),r?mt(t,e):gt(t,e),!i&&e.get().count>0},vt=function(t,e,n){var r,i,a,u=e.get(),c=k.toArray(t.getBody().getElementsByTagName("span"));for(r=0;r<c.length;r++){var l=at(c[r]);null!==l&&l.length&&(l===u.index.toString()&&(i||(i=c[r].firstChild),a=c[r].firstChild),ct(c[r]))}if(e.set(o(o({},u),{index:-1,count:0,text:""})),i&&a){var s=t.dom.createRng();return s.setStart(i,0),s.setEnd(a,a.data.length),!1!==n&&t.selection.setRng(s),s}},bt=tinymce.util.Tools.resolve("tinymce.Env"),xt=function(t,n){var r,i=(r=e(x()),{clear:function(){return r.set(x())},set:function(t){return r.set(b(t))},isSet:function(){return r.get().isSome()},on:function(t){return r.get().each(t)}});t.undoManager.add();var a=k.trim(t.selection.getContent({format:"text"})),u=function(t){var e=function(t,e){return e.get().count>1}(0,n)?t.enable:t.disable;e("next");var o=function(t,e){return e.get().count>1}(0,n)?t.enable:t.disable;o("prev")},c=function(t,e){var n=e?t.disable:t.enable;O(["replace","replaceall","prev","next"],n)},l=function(t,e){bt.browser.isSafari()&&bt.deviceType.isTouch()&&("find"===e||"replace"===e||"replaceall"===e)&&t.focus(e)},s=function(e){vt(t,n,!1),c(e,!0),u(e)},f=function(e){var o=e.getData(),r=n.get();if(o.findtext.length){if(r.text===o.findtext&&r.matchCase===o.matchcase&&r.wholeWord===o.wholewords)mt(t,n);else{var i=dt(t,n,o.findtext,o.matchcase,o.wholewords,o.inselection);i<=0&&function(e){t.windowManager.alert("Could not find the specified string.",(function(){e.focus("findtext")}))}(e),c(e,0===i)}u(e)}else s(e)},d=n.get(),m={title:"Find and Replace",size:"normal",body:{type:"panel",items:[{type:"bar",items:[{type:"input",name:"findtext",placeholder:"Find",maximized:!0,inputMode:"search"},{type:"button",name:"prev",text:"Previous",icon:"action-prev",disabled:!0,borderless:!0},{type:"button",name:"next",text:"Next",icon:"action-next",disabled:!0,borderless:!0}]},{type:"input",name:"replacetext",placeholder:"Replace with",inputMode:"search"}]},buttons:[{type:"menu",name:"options",icon:"preferences",tooltip:"Preferences",align:"start",items:[{type:"togglemenuitem",name:"matchcase",text:"Match case"},{type:"togglemenuitem",name:"wholewords",text:"Find whole words only"},{type:"togglemenuitem",name:"inselection",text:"Find in selection"}]},{type:"custom",name:"find",text:"Find",primary:!0},{type:"custom",name:"replace",text:"Replace",disabled:!0},{type:"custom",name:"replaceall",text:"Replace all",disabled:!0}],initialData:{findtext:a,replacetext:"",wholewords:d.wholeWord,matchcase:d.matchCase,inselection:d.inSelection},onChange:function(t,e){"findtext"===e.name&&n.get().count>0&&s(t)},onAction:function(e,r){var i=e.getData();switch(r.name){case"find":f(e);break;case"replace":ht(t,n,i.replacetext)?u(e):s(e);break;case"replaceall":ht(t,n,i.replacetext,!0,!0),s(e);break;case"prev":gt(t,n),u(e);break;case"next":mt(t,n),u(e);break;case"matchcase":case"wholewords":case"inselection":!function(t){var e=t.getData(),r=n.get();n.set(o(o({},r),{matchCase:e.matchcase,wholeWord:e.wholewords,inSelection:e.inselection}))}(e),s(e)}l(e,r.name)},onSubmit:function(t){f(t),l(t,"find")},onClose:function(){t.focus(),vt(t,n),t.undoManager.add()}};i.set(t.windowManager.open(m,{inline:"toolbar"}))},yt=function(t,e){return function(){xt(t,e)}};n.add("searchreplace",(function(t){var n=e({index:-1,count:0,text:"",matchCase:!1,wholeWord:!1,inSelection:!1});return function(t,e){t.addCommand("SearchReplace",(function(){xt(t,e)}))}(t,n),function(t,e){t.ui.registry.addMenuItem("searchreplace",{text:"Find and replace...",shortcut:"Meta+F",onAction:yt(t,e),icon:"search"}),t.ui.registry.addButton("searchreplace",{tooltip:"Find and replace",onAction:yt(t,e),icon:"search"}),t.shortcuts.add("Meta+F","",yt(t,e))}(t,n),function(t,e){return{done:function(n){return vt(t,e,n)},find:function(n,o,r,i){return void 0===i&&(i=!1),dt(t,e,n,o,r,i)},next:function(){return mt(t,e)},prev:function(){return gt(t,e)},replace:function(n,o,r){return ht(t,e,n,o,r)}}}(t,n)}))}(),function(){var t,e=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(t){return t},o=function(){return o=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)},r="[-'\\.]",i="[:]",a="[+*/,;;]",u="[0-9---------------------------------]",c="\\r",l="\\n",s="[\v\f\u2028\u2029]",f="[------------------------------------------------------------------------------------------------------]",d="[----\ufeff-]",m="[-------]",g="[=_--<>]",p="[!-#%-*,-\\/:;?@\\[-\\]_{};----------------------------------------------]",h=0,v=1,b=2,x=3,y=4,w=5,k=6,_=7,C=8,S=9,O=10,z=11,T=12,M=13,A=[new RegExp("[A-Za-z---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]"),new RegExp(r),new RegExp(i),new RegExp(a),new RegExp(u),new RegExp(c),new RegExp(l),new RegExp(s),new RegExp(f),new RegExp(d),new RegExp(m),new RegExp(g),new RegExp("@")],D=new RegExp("^"+p+"$"),E=A,P=M,H=function(t){for(var e=P,n=E.length,o=0;o<n;++o){var r=E[o];if(r&&r.test(t)){e=o;break}}return e},B=function(t){var e,n;return function(t,e){for(var n=t.length,o=new Array(n),r=0;r<n;r++){var i=t[r];o[r]=e(i,r)}return o}(t,(e=H,n={},function(t){if(n[t])return n[t];var o=e(t);return n[t]=o,o}))},R=function(t,e){var n=t[e],o=t[e+1];if(e<0||e>t.length-1&&0!==e)return!1;if(n===h&&o===h)return!1;var r=t[e+2];if(n===h&&(o===b||o===v||o===T)&&r===h)return!1;var i=t[e-1];return(n!==b&&n!==v&&o!==T||o!==h||i!==h)&&((n!==y&&n!==h||o!==y&&o!==h)&&((n!==x&&n!==v||o!==y||i!==y)&&((n!==y||o!==x&&o!==v||r!==y)&&(n!==C&&n!==S&&i!==C&&i!==S&&o!==C&&o!==S&&((n!==w||o!==k)&&(n===_||n===w||n===k||(o===_||o===w||o===k||(n!==O||o!==O)&&((o!==z||n!==h&&n!==y&&n!==O&&n!==z)&&((n!==z||o!==h&&o!==y&&o!==O)&&n!==T)))))))))},I=/^\s+$/,N=D,L=function(t){return"http"===t||"https"===t},F=function(t,e){var n=function(t,e){var n;for(n=e;n<t.length&&!I.test(t[n]);n++);return n}(t,e+1);return"://"===t.slice(e+1,n).join("").substr(0,3)?n:e},V=function(t,e,n){n=o(o({},{includeWhitespace:!1,includePunctuation:!1}),n);for(var r=[],i=[],a=0;a<t.length;a++){var u=e(t[a]);"\ufeff"!==u&&(r.push(t[a]),i.push(u))}return function(t,e,n,o){for(var r=[],i=[],a=0;a<n.length;++a)if(i.push(t[a]),R(n,a)){var u=e[a];if((o.includeWhitespace||!I.test(u))&&(o.includePunctuation||!N.test(u))){var c=a-i.length+1,l=a+1,s=e.slice(c,l).join("");if(L(s)){var f=F(e,a),d=t.slice(l,f);Array.prototype.push.apply(i,d),a=f}r.push(i)}i=[]}return r}(r,i,B(i),n)},j=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),U=function(t,e){for(var n=e.getBlockElements(),o=e.getShortEndedElements(),r=function(t){return n[t.nodeName]||o[t.nodeName]},i=[],a="",u=new j(t,t);t=u.next();)3===t.nodeType?a+=t.data.replace(/\uFEFF/g,""):r(t)&&a.length&&(i.push(a),a="");return a.length&&i.push(a),i},W=function(t){return t.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length},q=function(t,e){var o=U(t,e).join("\n");return V(o.split(""),n).length},$=function(t,e){var n=U(t,e).join("");return W(n)},G=function(t,e){var n=U(t,e).join("").replace(/\s/g,"");return W(n)},Y=function(t,e){return function(){return e(t.getBody(),t.schema)}},X=function(t,e){return function(){return e(t.selection.getRng().cloneContents(),t.schema)}},K=function(t){return Y(t,q)},J=tinymce.util.Tools.resolve("tinymce.util.Delay"),Z=function(t,e){!function(t,e){t.fire("wordCountUpdate",{wordCount:{words:e.body.getWordCount(),characters:e.body.getCharacterCount(),charactersWithoutSpaces:e.body.getCharacterCountWithoutSpaces()}})}(t,e)},Q=function(t,e){t.windowManager.open({title:"Word Count",body:{type:"panel",items:[{type:"table",header:["Count","Document","Selection"],cells:[["Words",String(e.body.getWordCount()),String(e.selection.getWordCount())],["Characters (no spaces)",String(e.body.getCharacterCountWithoutSpaces()),String(e.selection.getCharacterCountWithoutSpaces())],["Characters",String(e.body.getCharacterCount()),String(e.selection.getCharacterCount())]]}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}]})};void 0===t&&(t=300),e.add("wordcount",(function(e){var n=function(t){return{body:{getWordCount:K(t),getCharacterCount:Y(t,$),getCharacterCountWithoutSpaces:Y(t,G)},selection:{getWordCount:X(t,q),getCharacterCount:X(t,$),getCharacterCountWithoutSpaces:X(t,G)},getCount:K(t)}}(e);return function(t,e){t.ui.registry.addButton("wordcount",{tooltip:"Word count",icon:"character-count",onAction:function(){return Q(t,e)}}),t.ui.registry.addMenuItem("wordcount",{text:"Word count",icon:"character-count",onAction:function(){return Q(t,e)}})}(e,n),function(t,e,n){var o=J.debounce((function(){return Z(t,e)}),n);t.on("init",(function(){Z(t,e),J.setEditorTimeout(t,(function(){t.on("SetContent BeforeAddUndo Undo Redo keyup",o)}),0)}))}(e,n,t),n}))}(),function(){var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=function(t,e,n){t.dom.toggleClass(t.getBody(),"mce-visualblocks"),n.set(!n.get()),function(t,e){t.fire("VisualBlocks",{state:e})}(t,n.get())},n=function(t,e){return function(n){n.setActive(e.get());var o=function(t){return n.setActive(t.state)};return t.on("VisualBlocks",o),function(){return t.off("VisualBlocks",o)}}};t.add("visualblocks",(function(t,o){var r,i=(r=!1,{get:function(){return r},set:function(t){r=t}});!function(t,n,o){t.addCommand("mceVisualBlocks",(function(){e(t,0,o)}))}(t,0,i),function(t,e){t.ui.registry.addToggleButton("visualblocks",{icon:"visualblocks",tooltip:"Show blocks",onAction:function(){return t.execCommand("mceVisualBlocks")},onSetup:n(t,e)}),t.ui.registry.addToggleMenuItem("visualblocks",{text:"Show blocks",icon:"visualblocks",onAction:function(){return t.execCommand("mceVisualBlocks")},onSetup:n(t,e)})}(t,i),function(t,n,o){t.on("PreviewFormats AfterPreviewFormats",(function(e){o.get()&&t.dom.toggleClass(t.getBody(),"mce-visualblocks","afterpreviewformats"===e.type)})),t.on("init",(function(){(function(t){return t.getParam("visualblocks_default_state",!1,"boolean")})(t)&&e(t,0,o)}))}(t,0,i)}))}(),function(){var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(e){return function(n){return t(n)===e}},o=function(e){return function(n){return function(e){var n=t(e);return null===e?"null":"object"===n&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===n&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":n}(n)===e}}("string"),r=n("boolean"),i=n("number"),a=function(){},u=function(t){return function(){return t}},c=u(!1),l=u(!0),s=function(){return f},f=function(){var t=function(t){return t.isNone()},e=function(t){return t()},n=function(t){return t};return{fold:function(t,e){return t()},is:c,isSome:c,isNone:l,getOr:n,getOrThunk:e,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:u(null),getOrUndefined:u(void 0),or:n,orThunk:e,map:s,each:a,bind:s,exists:c,forall:l,filter:s,equals:t,equals_:t,toArray:function(){return[]},toString:u("none()")}}(),d=function t(e){var n=u(e),o=function(){return i},r=function(t){return t(e)},i={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:l,isNone:c,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:o,orThunk:o,map:function(n){return t(n(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?i:f},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(c,(function(t){return n(e,t)}))}};return i},m=function(t){return null==t?f:d(t)},g=function(t,e){for(var n=0,o=t.length;n<o;n++){e(t[n],n)}},p=Object.keys,h=function(t,e){for(var n=p(t),o=0,r=n.length;o<r;o++){var i=n[o];e(t[i],i)}};"undefined"!=typeof window?window:Function("return this;")();var v=function(t){return t.dom.nodeValue},b=function(t){return function(e){return function(t){return t.dom.nodeType}(e)===t}}(3),x=function(t,e,n){!function(t,e,n){if(!(o(n)||r(n)||i(n)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")}(t.dom,e,n)},y=function(t,e){t.dom.removeAttribute(e)},w=function(t,e){var n=function(t,e){var n=t.dom.getAttribute(e);return null===n?void 0:n}(t,e);return void 0===n||""===n?[]:n.split(" ")},k=function(t){return void 0!==t.dom.classList},_=function(t,e){return function(t,e,n){var o=w(t,e).concat([n]);return x(t,e,o.join(" ")),!0}(t,"class",e)},C=function(t,e){return function(t,e,n){var o=function(t,e){for(var n=[],o=0,r=t.length;o<r;o++){var i=t[o];e(i,o)&&n.push(i)}return n}(w(t,e),(function(t){return t!==n}));return o.length>0?x(t,e,o.join(" ")):y(t,e),!1}(t,"class",e)},S=function(t){var e=k(t)?t.dom.classList:function(t){return w(t,"class")}(t);0===e.length&&y(t,"class")},O=function(t){if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}},z={fromHtml:function(t,e){var n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||n.childNodes.length>1)throw console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return O(n.childNodes[0])},fromTag:function(t,e){var n=(e||document).createElement(t);return O(n)},fromText:function(t,e){var n=(e||document).createTextNode(t);return O(n)},fromDom:O,fromPoint:function(t,e,n){return m(t.dom.elementFromPoint(e,n)).map(O)}},T={"":"nbsp","":"shy"},M=function(t,e){var n="";return h(t,(function(t,e){n+=e})),new RegExp("["+n+"]",e?"g":"")},A=M(T),D=M(T,!0),E=function(t){var e="";return h(t,(function(t){e&&(e+=","),e+="span.mce-"+t})),e}(T),P="mce-nbsp",H=function(t){return'<span data-mce-bogus="1" class="mce-'+T[t]+'">'+t+"</span>"},B=function(t){var e=v(t);return b(t)&&void 0!==e&&A.test(e)},R=function t(e,n){var o=[],r=function(t,e){for(var n=t.length,o=new Array(n),r=0;r<n;r++){var i=t[r];o[r]=e(i,r)}return o}(e.dom.childNodes,z.fromDom);return g(r,(function(e){n(e)&&(o=o.concat([e])),o=o.concat(t(e,n))})),o},I=function(t){return"span"===t.nodeName.toLowerCase()&&t.classList.contains("mce-nbsp-wrap")},N=function(t,e){var n=R(z.fromDom(e),B);g(n,(function(e){var n,o,r=e.dom.parentNode;if(I(r))n=z.fromDom(r),o=P,k(n)?n.dom.classList.add(o):_(n,o);else{for(var i=t.dom.encode(v(e)).replace(D,H),a=t.dom.create("div",null,i),u=void 0;u=a.lastChild;)t.dom.insertAfter(u,e.dom);t.dom.remove(e.dom)}}))},L=function(t,e){var n=t.dom.select(E,e);g(n,(function(e){var n,o;I(e)?(n=z.fromDom(e),o=P,k(n)?n.dom.classList.remove(o):C(n,o),S(n)):t.dom.remove(e,!0)}))},F=function(t){var e=t.getBody(),n=t.selection.getBookmark(),o=function(t,e){for(;t.parentNode;){if(t.parentNode===e)return t;t=t.parentNode}}(t.selection.getNode(),e);L(t,o=void 0!==o?o:e),N(t,o),t.selection.moveToBookmark(n)},V=function(t,e){!function(t,e){t.fire("VisualChars",{state:e})}(t,e.get());var n=t.getBody();!0===e.get()?N(t,n):L(t,n)},j=function(t,e){t.addCommand("mceVisualChars",(function(){!function(t,e){e.set(!e.get());var n=t.selection.getBookmark();V(t,e),t.selection.moveToBookmark(n)}(t,e)}))},U=tinymce.util.Tools.resolve("tinymce.util.Delay"),W=function(t,e){return function(n){n.setActive(e.get());var o=function(t){return n.setActive(t.state)};return t.on("VisualChars",o),function(){return t.off("VisualChars",o)}}};e.add("visualchars",(function(t){var e=function(t){var e=t;return{get:function(){return e},set:function(t){e=t}}}(function(t){return t.getParam("visualchars_default_state",!1)}(t));return j(t,e),function(t,e){t.ui.registry.addToggleButton("visualchars",{tooltip:"Show invisible characters",icon:"visualchars",onAction:function(){return t.execCommand("mceVisualChars")},onSetup:W(t,e)}),t.ui.registry.addToggleMenuItem("visualchars",{text:"Show invisible characters",icon:"visualchars",onAction:function(){return t.execCommand("mceVisualChars")},onSetup:W(t,e)})}(t,e),function(t,e){var n=U.debounce((function(){F(t)}),300);(function(t){return!1!==t.getParam("forced_root_block")})(t)&&t.on("keydown",(function(o){!0===e.get()&&(13===o.keyCode?F(t):n())})),t.on("remove",n.stop)}(t,e),function(t,e){t.on("init",(function(){V(t,e)}))}(t,e),function(t){return{isEnabled:function(){return t.get()}}}(e)}))}(),function(){var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=function(t,e){for(var n="",o=0;o<e;o++)n+=t;return n},n=function(t,n){var o=function(t){return t.getParam("nonbreaking_wrap",!0,"boolean")}(t),r=o||t.plugins.visualchars?'<span class="'+(function(t){return!!t.plugins.visualchars&&t.plugins.visualchars.isEnabled()}(t)?"mce-nbsp-wrap mce-nbsp":"mce-nbsp-wrap")+'" contenteditable="false">'+e("&nbsp;",n)+"</span>":e("&nbsp;",n);t.undoManager.transact((function(){return t.insertContent(r)}))},o=tinymce.util.Tools.resolve("tinymce.util.VK");t.add("nonbreaking",(function(t){!function(t){t.addCommand("mceNonBreaking",(function(){n(t,1)}))}(t),function(t){t.ui.registry.addButton("nonbreaking",{icon:"non-breaking",tooltip:"Nonbreaking space",onAction:function(){return t.execCommand("mceNonBreaking")}}),t.ui.registry.addMenuItem("nonbreaking",{icon:"non-breaking",text:"Nonbreaking space",onAction:function(){return t.execCommand("mceNonBreaking")}})}(t),function(t){var e=function(t){var e=t.getParam("nonbreaking_force_tab",0);return"boolean"==typeof e?!0===e?3:0:e}(t);e>0&&t.on("keydown",(function(r){if(r.keyCode===o.TAB&&!r.isDefaultPrevented()){if(r.shiftKey)return;r.preventDefault(),r.stopImmediatePropagation(),n(t,e)}}))}(t)}))}(),function(){var t=function(t){var e=t;return{get:function(){return e},set:function(t){e=t}}},e=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(){return n=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},n.apply(this,arguments)},o=tinymce.util.Tools.resolve("tinymce.util.Tools"),r=tinymce.util.Tools.resolve("tinymce.html.DomParser"),i=tinymce.util.Tools.resolve("tinymce.html.Node"),a=tinymce.util.Tools.resolve("tinymce.html.Serializer"),u=function(t){return t.getParam("fullpage_hide_in_source_view")},c=function(t){return t.getParam("fullpage_default_encoding")},l=function(t){return t.getParam("fullpage_default_font_family")},s=function(t){return t.getParam("fullpage_default_font_size")},f=function(t){return r({validate:!1,root_name:"#document"}).parse(t,{format:"xhtml"})},d=function(t,e){var r=function(t,e){var n,r,i=f(e),a={},u=function(t,e){return t.attr(e)||""};return a.fontface=l(t),a.fontsize=s(t),7===(n=i.firstChild).type&&(a.xml_pi=!0,(r=/encoding="([^"]+)"/.exec(n.value))&&(a.docencoding=r[1])),(n=i.getAll("#doctype")[0])&&(a.doctype="<!DOCTYPE"+n.value+">"),(n=i.getAll("title")[0])&&n.firstChild&&(a.title=n.firstChild.value),o.each(i.getAll("meta"),(function(t){var e,n=t.attr("name"),o=t.attr("http-equiv");n?a[n.toLowerCase()]=t.attr("content"):"Content-Type"===o&&(e=/charset\s*=\s*(.*)\s*/gi.exec(t.attr("content")))&&(a.docencoding=e[1])})),(n=i.getAll("html")[0])&&(a.langcode=u(n,"lang")||u(n,"xml:lang")),a.stylesheets=[],o.each(i.getAll("link"),(function(t){"stylesheet"===t.attr("rel")&&a.stylesheets.push(t.attr("href"))})),(n=i.getAll("body")[0])&&(a.langdir=u(n,"dir"),a.style=u(n,"style"),a.visited_color=u(n,"vlink"),a.link_color=u(n,"link"),a.active_color=u(n,"alink")),a}(t,e.get()),u=n(n({},{title:"",keywords:"",description:"",robots:"",author:"",docencoding:""}),r);t.windowManager.open({title:"Metadata and Document Properties",size:"normal",body:{type:"panel",items:[{name:"title",type:"input",label:"Title"},{name:"keywords",type:"input",label:"Keywords"},{name:"description",type:"input",label:"Description"},{name:"robots",type:"input",label:"Robots"},{name:"author",type:"input",label:"Author"},{name:"docencoding",type:"input",label:"Encoding"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:u,onSubmit:function(n){var u=n.getData(),c=function(t,e,n){var r,u,c,l=t.dom,s=function(t,e,n){t.attr(e,n||void 0)},d=function(t){r.firstChild?r.insert(t,r.firstChild):r.append(t)},m=f(n);(r=m.getAll("head")[0])||(u=m.getAll("html")[0],r=new i("head",1),u.firstChild?u.insert(r,u.firstChild,!0):u.append(r)),u=m.firstChild,e.xml_pi?(c='version="1.0"',e.docencoding&&(c+=' encoding="'+e.docencoding+'"'),7!==u.type&&(u=new i("xml",7),m.insert(u,m.firstChild,!0)),u.value=c):u&&7===u.type&&u.remove(),u=m.getAll("#doctype")[0],e.doctype?(u||(u=new i("#doctype",10),e.xml_pi?m.insert(u,m.firstChild):d(u)),u.value=e.doctype.substring(9,e.doctype.length-1)):u&&u.remove(),u=null,o.each(m.getAll("meta"),(function(t){"Content-Type"===t.attr("http-equiv")&&(u=t)})),e.docencoding?(u||((u=new i("meta",1)).attr("http-equiv","Content-Type"),u.shortEnded=!0,d(u)),u.attr("content","text/html; charset="+e.docencoding)):u&&u.remove(),u=m.getAll("title")[0],e.title?(u?u.empty():(u=new i("title",1),d(u)),u.append(new i("#text",3)).value=e.title):u&&u.remove(),o.each("keywords,description,author,copyright,robots".split(","),(function(t){var n,o,r=m.getAll("meta"),a=e[t];for(n=0;n<r.length;n++)if((o=r[n]).attr("name")===t)return void(a?o.attr("content",a):o.remove());a&&((u=new i("meta",1)).attr("name",t),u.attr("content",a),u.shortEnded=!0,d(u))}));var g={};o.each(m.getAll("link"),(function(t){"stylesheet"===t.attr("rel")&&(g[t.attr("href")]=t)})),o.each(e.stylesheets,(function(t){g[t]||((u=new i("link",1)).attr({rel:"stylesheet",text:"text/css",href:t}),u.shortEnded=!0,d(u)),delete g[t]})),o.each(g,(function(t){t.remove()})),(u=m.getAll("body")[0])&&(s(u,"dir",e.langdir),s(u,"style",e.style),s(u,"vlink",e.visited_color),s(u,"link",e.link_color),s(u,"alink",e.active_color),l.setAttribs(t.getBody(),{style:e.style,dir:e.dir,vLink:e.visited_color,link:e.link_color,aLink:e.active_color})),(u=m.getAll("html")[0])&&(s(u,"lang",e.langcode),s(u,"xml:lang",e.langcode)),r.firstChild||r.remove();var p=a({validate:!1,indent:!0,indent_before:"head,html,body,meta,title,script,link,style",indent_after:"head,html,body,meta,title,script,link,style"}).serialize(m);return p.substring(0,p.indexOf("</body>"))}(t,o.extend(r,u),e.get());e.set(c),n.close()}})},m=o.each,g=function(t){return t.replace(/<\/?[A-Z]+/g,(function(t){return t.toLowerCase()}))},p=function(t,e,n,r){var i,a,c,l,s,d="",p=t.dom;if(!r.selection&&(l=function(t){return t.getParam("protect")}(t),s=r.content,o.each(l,(function(t){s=s.replace(t,(function(t){return"\x3c!--mce:protected "+escape(t)+"--\x3e"}))})),c=s,!("raw"===r.format&&e.get()||r.source_view&&u(t)))){0!==c.length||r.source_view||(c=o.trim(e.get())+"\n"+o.trim(c)+"\n"+o.trim(n.get())),-1!==(i=(c=c.replace(/<(\/?)BODY/gi,"<$1body")).indexOf("<body"))?(i=c.indexOf(">",i),e.set(g(c.substring(0,i+1))),-1===(a=c.indexOf("</body",i))&&(a=c.length),r.content=o.trim(c.substring(i+1,a)),n.set(g(c.substring(a)))):(e.set(h(t)),n.set("\n</body>\n</html>"));var v=f(e.get());m(v.getAll("style"),(function(t){t.firstChild&&(d+=t.firstChild.value)}));var b=v.getAll("body")[0];b&&p.setAttribs(t.getBody(),{style:b.attr("style")||"",dir:b.attr("dir")||"",vLink:b.attr("vlink")||"",link:b.attr("link")||"",aLink:b.attr("alink")||""}),p.remove("fullpage_styles");var x=t.getDoc().getElementsByTagName("head")[0];if(d)p.add(x,"style",{id:"fullpage_styles"}).appendChild(document.createTextNode(d));var y={};o.each(x.getElementsByTagName("link"),(function(t){"stylesheet"===t.rel&&t.getAttribute("data-mce-fullpage")&&(y[t.href]=t)})),o.each(v.getAll("link"),(function(t){var e=t.attr("href");if(!e)return!0;y[e]||"stylesheet"!==t.attr("rel")||p.add(x,"link",{rel:"stylesheet",text:"text/css",href:e,"data-mce-fullpage":"1"}),delete y[e]})),o.each(y,(function(t){t.parentNode.removeChild(t)}))}},h=function(t){var e,n="",o="";if(function(t){return t.getParam("fullpage_default_xml_pi")}(t)){var r=c(t);n+='<?xml version="1.0" encoding="'+(r||"ISO-8859-1")+'" ?>\n'}return n+=function(t){return t.getParam("fullpage_default_doctype","<!DOCTYPE html>")}(t),n+="\n<html>\n<head>\n",(e=function(t){return t.getParam("fullpage_default_title")}(t))&&(n+="<title>"+e+"</title>\n"),(e=c(t))&&(n+='<meta http-equiv="Content-Type" content="text/html; charset='+e+'" />\n'),(e=l(t))&&(o+="font-family: "+e+";"),(e=s(t))&&(o+="font-size: "+e+";"),(e=function(t){return t.getParam("fullpage_default_text_color")}(t))&&(o+="color: "+e+";"),n+="</head>\n<body"+(o?' style="'+o+'"':"")+">\n"},v=function(t,e,n,r){"html"!==r.format||r.selection||r.source_view&&u(t)||(r.content=(o.trim(e)+"\n"+o.trim(r.content)+"\n"+o.trim(n)).replace(/<!--mce:protected ([\s\S]*?)-->/g,(function(t,e){return unescape(e)})))};e.add("fullpage",(function(e){var n=t(""),o=t("");!function(t,e){t.addCommand("mceFullPageProperties",(function(){d(t,e)}))}(e,n),function(t){t.ui.registry.addButton("fullpage",{tooltip:"Metadata and document properties",icon:"document-properties",onAction:function(){t.execCommand("mceFullPageProperties")}}),t.ui.registry.addMenuItem("fullpage",{text:"Metadata and document properties",icon:"document-properties",onAction:function(){t.execCommand("mceFullPageProperties")}})}(e),function(t,e,n){t.on("BeforeSetContent",(function(o){p(t,e,n,o)})),t.on("GetContent",(function(o){v(t,e.get(),n.get(),o)}))}(e,n,o)}))}(),function(){var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=function(){},n=function(t){return function(){return t}};var o=n(!1),r=n(!0),i=tinymce.util.Tools.resolve("tinymce.util.Tools"),a=tinymce.util.Tools.resolve("tinymce.util.XHR"),u=function(t){return t.getParam("template_mdate_classes","mdate")},c=function(t){return t.getParam("template_replace_values")},l=function(t){return t.getParam("template_mdate_format",t.translate("%Y-%m-%d"))},s=function(t,e){if((t=""+t).length<e)for(var n=0;n<e-t.length;n++)t="0"+t;return t},f=function(t,e,n){var o="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),r="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),i="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),a="January February March April May June July August September October November December".split(" ");return n=n||new Date,e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace("%D","%m/%d/%Y")).replace("%r","%I:%M:%S %p")).replace("%Y",""+n.getFullYear())).replace("%y",""+n.getYear())).replace("%m",s(n.getMonth()+1,2))).replace("%d",s(n.getDate(),2))).replace("%H",""+s(n.getHours(),2))).replace("%M",""+s(n.getMinutes(),2))).replace("%S",""+s(n.getSeconds(),2))).replace("%I",""+((n.getHours()+11)%12+1))).replace("%p",n.getHours()<12?"AM":"PM")).replace("%B",""+t.translate(a[n.getMonth()]))).replace("%b",""+t.translate(i[n.getMonth()]))).replace("%A",""+t.translate(r[n.getDay()]))).replace("%a",""+t.translate(o[n.getDay()]))).replace("%%","%")},d=function(t,e){return function(){var n=function(t){return t.getParam("templates")}(t);"function"!=typeof n?"string"==typeof n?a.send({url:n,success:function(t){e(JSON.parse(t))}}):e(n):n(e)}},m=function(t,e){return i.each(e,(function(e,n){"function"==typeof e&&(e=e(n)),t=t.replace(new RegExp("\\{\\$"+n+"\\}","g"),e)})),t},g=function(t,e){var n=t.dom,o=c(t);i.each(n.select("*",e),(function(t){i.each(o,(function(e,r){n.hasClass(t,r)&&"function"==typeof o[r]&&o[r](t)}))}))},p=function(t,e){return new RegExp("\\b"+e+"\\b","g").test(t.className)},h=function(t,e,n){var o,r=t.dom,a=t.selection.getContent();n=m(n,c(t)),o=r.create("div",null,n);var s=r.select(".mceTmpl",o);s&&s.length>0&&(o=r.create("div",null)).appendChild(s[0].cloneNode(!0)),i.each(r.select("*",o),(function(e){p(e,function(t){return t.getParam("template_cdate_classes","cdate")}(t).replace(/\s+/g,"|"))&&(e.innerHTML=f(t,function(t){return t.getParam("template_cdate_format",t.translate("%Y-%m-%d"))}(t))),p(e,u(t).replace(/\s+/g,"|"))&&(e.innerHTML=f(t,l(t))),p(e,function(t){return t.getParam("template_selected_content_classes","selcontent")}(t).replace(/\s+/g,"|"))&&(e.innerHTML=a)})),g(t,o),t.execCommand("mceInsertContent",!1,o.innerHTML),t.addVisual()},v=function(){return b},b=function(){var t=function(t){return t.isNone()},i=function(t){return t()},a=function(t){return t};return{fold:function(t,e){return t()},is:o,isSome:o,isNone:r,getOr:a,getOrThunk:i,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:n(null),getOrUndefined:n(void 0),or:a,orThunk:i,map:v,each:e,bind:v,exists:o,forall:r,filter:v,equals:t,equals_:t,toArray:function(){return[]},toString:n("none()")}}(),x=function t(e){var i=n(e),a=function(){return c},u=function(t){return t(e)},c={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:r,isNone:o,getOr:i,getOrThunk:i,getOrDie:i,getOrNull:i,getOrUndefined:i,or:a,orThunk:a,map:function(n){return t(n(e))},each:function(t){t(e)},bind:u,exists:u,forall:u,filter:function(t){return t(e)?c:b},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(o,(function(t){return n(e,t)}))}};return c},y=x,w=v,k=function(t){return null==t?b:x(t)},_=function(t,e){return function(t,e,n){for(var o=0,r=t.length;o<r;o++){var i=t[o];if(e(i,o))return y(i);if(n(i,o))break}return w()}(t,e,o)},C=tinymce.util.Tools.resolve("tinymce.Env"),S=tinymce.util.Tools.resolve("tinymce.util.Promise"),O=Object.hasOwnProperty,z=function(t,e){return O.call(t,e)},T={'"':"&quot;","<":"&lt;",">":"&gt;","&":"&amp;","'":"&#039;"},M=function(t){return t.replace(/["'<>&]/g,(function(t){return(e=T,n=t,z(e,n)?k(e[n]):w()).getOr(t);var e,n}))},A=function(t,e){var n=function(t){return function(t,e){for(var n=t.length,o=new Array(n),r=0;r<n;r++){var i=t[r];o[r]=e(i,r)}return o}(t,(function(t){return{text:t.text,value:t.text}}))},o=function(t,e){return _(t,(function(t){return t.text===e}))},r=function(e){t.windowManager.alert("Could not load the specified template.",(function(){return e.focus("template")}))},u=function(t){return new S((function(e,n){t.value.url.fold((function(){return e(t.value.content.getOr(""))}),(function(t){return a.send({url:t,success:function(t){e(t)},error:function(t){n(t)}})}))}))},c=function(t,e){return function(n,i){if("template"===i.name){var a=n.getData().template;o(t,a).each((function(t){n.block("Loading..."),u(t).then((function(o){e(n,t,o)})).catch((function(){e(n,t,""),n.disable("save"),r(n)}))}))}}},l=function(e){return function(n){var i=n.getData();o(e,i.template).each((function(e){u(e).then((function(e){h(t,0,e),n.close()})).catch((function(){n.disable("save"),r(n)}))}))}},s=function(){if(!e||0===e.length){var n=t.translate("No templates defined.");return t.notificationManager.open({text:n,type:"info"}),w()}return k(i.map(e,(function(t,e){var n=function(t){return void 0!==t.url};return{selected:0===e,text:t.title,value:{url:n(t)?k(t.url):w(),content:n(t)?w():k(t.content),description:t.description}}})))}();s.each((function(e){var o=n(e),a=function(t,n){return{title:"Insert Template",size:"large",body:{type:"panel",items:t},initialData:n,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:l(e),onChange:c(e,s)}},s=function(e,n,r){var u=function(t,e){if(-1===e.indexOf("<html>")){var n="",o=function(t){return t.getParam("content_style","","string")}(t),r=function(t){return t.getParam("content_css_cors",!1,"boolean")}(t)?' crossorigin="anonymous"':"";i.each(t.contentCSS,(function(e){n+='<link type="text/css" rel="stylesheet" href="'+t.documentBaseURI.toAbsolute(e)+'"'+r+">"})),o&&(n+='<style type="text/css">'+o+"</style>");var a=function(t){var e=t.getParam("body_class","","string");return-1===e.indexOf("=")?e:function(t){return t.getParam("body_class","","hash")[t.id]||""}(t)}(t),u=t.dom.encode,c='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+(C.mac?"e.metaKey":"e.ctrlKey && !e.altKey")+")) {e.preventDefault();}}}, false);<\/script> ",l=t.getBody().dir,s=l?' dir="'+u(l)+'"':"";e='<!DOCTYPE html><html><head><base href="'+u(t.documentBaseURI.getURI())+'">'+n+c+'</head><body class="'+u(a)+'"'+s+">"+e+"</body></html>"}return m(e,function(t){return t.getParam("template_preview_replace_values")}(t))}(t,r),c=[{type:"selectbox",name:"template",label:"Templates",items:o},{type:"htmlpanel",html:'<p aria-live="polite">'+M(n.value.description)+"</p>"},{label:"Preview",type:"iframe",name:"preview",sandboxed:!1}],l={template:n.text,preview:u};e.unblock(),e.redial(a(c,l)),e.focus("template")},f=t.windowManager.open(a([],{template:"",preview:""}));f.block("Loading..."),u(e[0]).then((function(t){s(f,e[0],t)})).catch((function(){s(f,e[0],""),f.disable("save"),r(f)}))}))},D=function(t){return function(e){A(t,e)}};t.add("template",(function(t){!function(t){t.ui.registry.addButton("template",{icon:"template",tooltip:"Insert template",onAction:d(t,D(t))}),t.ui.registry.addMenuItem("template",{icon:"template",text:"Insert template...",onAction:d(t,D(t))})}(t),function(t){t.addCommand("mceInsertTemplate",function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var r=e.concat(n);return t.apply(null,r)}}(h,t))}(t),function(t){t.on("PreProcess",(function(e){var n=t.dom,o=l(t);i.each(n.select("div",e.node),(function(e){n.hasClass(e,"mceTmpl")&&(i.each(n.select("*",e),(function(e){n.hasClass(e,u(t).replace(/\s+/g,"|"))&&(e.innerHTML=f(t,o))})),g(t,e))}))}))}(t)}))}(),tinymce.util.Tools.resolve("tinymce.PluginManager").add("contextmenu",(function(){console.warn("Context menu plugin is now built in to the core editor, please remove it from your editor configuration")})),function(){var e,n,o,r=function(t){var e=t;return{get:function(){return e},set:function(t){e=t}}},i=tinymce.util.Tools.resolve("tinymce.PluginManager"),a=function(t){return!function(t){return null==t}(t)},u=(e="function",function(n){return t(n)===e}),c=function(){},l=function(t){return function(){return t}},s=l(!1),f=l(!0),d=function(){return m},m=function(){var t=function(t){return t.isNone()},e=function(t){return t()},n=function(t){return t};return{fold:function(t,e){return t()},is:s,isSome:s,isNone:f,getOr:n,getOrThunk:e,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:l(null),getOrUndefined:l(void 0),or:n,orThunk:e,map:d,each:c,bind:d,exists:s,forall:f,filter:d,equals:t,equals_:t,toArray:function(){return[]},toString:l("none()")}}(),g=function t(e){var n=l(e),o=function(){return i},r=function(t){return t(e)},i={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:f,isNone:s,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:o,orThunk:o,map:function(n){return t(n(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?i:m},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(s,(function(t){return n(e,t)}))}};return i},p=g,h=d,v=Array.prototype.slice,b=function(t,e){for(var n=0,o=t.length;n<o;n++){if(e(t[n],n))return!0}return!1},x=function(t,e){for(var n=t.length,o=new Array(n),r=0;r<n;r++){var i=t[r];o[r]=e(i,r)}return o},y=function(t,e){for(var n=0,o=t.length;n<o;n++){e(t[n],n)}},w=u(Array.from)?Array.from:function(t){return v.call(t)},k=function(){var t=r(h());return{clear:function(){return t.set(h())},set:function(e){return t.set(p(e))},isSet:function(){return t.get().isSome()},on:function(e){return t.get().each(e)}}},_=function(t,e,n){return""===e||t.length>=e.length&&t.substr(n,n+e.length)===e},C=tinymce.util.Tools.resolve("tinymce.Env"),S=tinymce.util.Tools.resolve("tinymce.util.Delay"),O=tinymce.util.Tools.resolve("tinymce.util.Promise"),z=tinymce.util.Tools.resolve("tinymce.util.VK"),T=function(t,e){return t.fire("PastePlainTextToggle",{state:e})},M=tinymce.util.Tools.resolve("tinymce.util.Tools"),A=function(t){return t.getParam("paste_data_images",!1)},D=function(t){return t.getParam("paste_merge_formats",!0)},E=function(t){return t.getParam("paste_retain_style_properties")},P=function(t){return t.getParam("validate")},H=function(t){return t.getParam("allow_html_data_urls",!1,"boolean")},B=function(t){return t.getParam("paste_data_images",!1,"boolean")},R=function(t){return M.explode(t.getParam("images_file_types","jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp","string"))},I="x-tinymce/html",N="\x3c!-- x-tinymce/html --\x3e",L=function(t){return-1!==t.indexOf(N)},F=function(){return I},V=tinymce.util.Tools.resolve("tinymce.html.Entities"),j=function(e,n,o){var r=e.split(/\n\n/),i=function(e,n){var o,r=[],i="<"+e;if("object"===t(n)){for(o in n)n.hasOwnProperty(o)&&r.push(o+'="'+V.encodeAllRaw(n[o])+'"');r.length&&(i+=" "+r.join(" "))}return i+">"}(n,o),a="</"+n+">",u=M.map(r,(function(t){return t.split(/\n/).join("<br />")}));return 1===u.length?u[0]:M.map(u,(function(t){return i+t+a})).join("")},U=tinymce.util.Tools.resolve("tinymce.html.DomParser"),W=tinymce.util.Tools.resolve("tinymce.html.Serializer"),q="",$=tinymce.util.Tools.resolve("tinymce.html.Node"),G=tinymce.util.Tools.resolve("tinymce.html.Schema"),Y=function(t,e){return M.each(e,(function(e){t=e.constructor===RegExp?t.replace(e,""):t.replace(e[0],e[1])})),t},X=function(t){return t=Y(t,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,function(t,e,n){return e||n?q:" "}],/<br class="Apple-interchange-newline">/g,/<br>$/i])},K=function(t){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^']*\bmso-|w:WordDocument/i.test(t)||/class="OutlineElement/.test(t)||/id="?docs\-internal\-guid\-/.test(t)},J=function(t){var e;return t=t.replace(/^[\u00a0 ]+/,""),M.each([/^[IVXLMCD]+\.[ \u00a0]/,/^[ivxlmcd]+\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/],(function(n){if(n.test(t))return e=!0,!1})),e},Z=function(t,e,n,o){var r,i={},a=t.dom.parseStyle(o);return M.each(a,(function(a,u){switch(u){case"mso-list":(r=/\w+ \w+([0-9]+)/i.exec(o))&&(n._listLevel=parseInt(r[1],10)),/Ignore/i.test(a)&&n.firstChild&&(n._listIgnore=!0,n.firstChild._listIgnore=!0);break;case"horiz-align":u="text-align";break;case"vert-align":u="vertical-align";break;case"font-color":case"mso-foreground":u="color";break;case"mso-background":case"mso-highlight":u="background";break;case"font-weight":case"font-style":return void("normal"!==a&&(i[u]=a));case"mso-element":if(/^(comment|comment-list)$/i.test(a))return void n.remove()}0!==u.indexOf("mso-comment")?0!==u.indexOf("mso-")&&("all"===E(t)||e&&e[u])&&(i[u]=a):n.remove()})),/(bold)/i.test(i["font-weight"])&&(delete i["font-weight"],n.wrap(new $("b",1))),/(italic)/i.test(i["font-style"])&&(delete i["font-style"],n.wrap(new $("i",1))),(i=t.dom.serializeStyle(i,n.name))||null},Q=function(t,e){var n,o=E(t);o&&(n=M.makeMap(o.split(/[, ]/))),e=Y(e,[/<br class="?Apple-interchange-newline"?>/gi,/<b[^>]+id="?docs-internal-[^>]*>/gi,/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,q],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(t,e){return e.length>0?e.replace(/./," ").slice(Math.floor(e.length/2)).split("").join(q):""}]]);var r=function(t){return t.getParam("paste_word_valid_elements","-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody")}(t),i=G({valid_elements:r,valid_children:"-li[p]"});M.each(i.elements,(function(t){t.attributes.class||(t.attributes.class={},t.attributesOrder.push("class")),t.attributes.style||(t.attributes.style={},t.attributesOrder.push("style"))}));var a=U({},i);a.addAttributeFilter("style",(function(e){for(var o,r=e.length;r--;)(o=e[r]).attr("style",Z(t,n,o,o.attr("style"))),"span"===o.name&&o.parent&&!o.attributes.length&&o.unwrap()})),a.addAttributeFilter("class",(function(t){for(var e,n,o=t.length;o--;)n=(e=t[o]).attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(n)&&e.remove(),e.attr("class",null)})),a.addNodeFilter("del",(function(t){for(var e=t.length;e--;)t[e].remove()})),a.addNodeFilter("a",(function(t){for(var e,n,o,r=t.length;r--;)if(n=(e=t[r]).attr("href"),o=e.attr("name"),n&&-1!==n.indexOf("#_msocom_"))e.remove();else if(n&&0===n.indexOf("file://")&&(n=n.split("#")[1])&&(n="#"+n),n||o){if(o&&!/^_?(?:toc|edn|ftn)/i.test(o)){e.unwrap();continue}e.attr({href:n,name:o})}else e.unwrap()}));var u=a.parse(e);return function(t){return t.getParam("paste_convert_word_fake_lists",!0)}(t)&&function(t){for(var e,n,o=1,r=function t(e){var n="";if(3===e.type)return e.value;if(e=e.firstChild)do{n+=t(e)}while(e=e.next);return n},i=function t(e,n){if(3===e.type&&n.test(e.value))return e.value=e.value.replace(n,""),!1;if(e=e.firstChild)do{if(!t(e,n))return!1}while(e=e.next);return!0},a=function t(e){if(e._listIgnore)e.remove();else if(e=e.firstChild)do{t(e)}while(e=e.next)},u=function(t,r,u){var c=t._listLevel||o;c!==o&&(c<o?e&&(e=e.parent.parent):(n=e,e=null)),e&&e.name===r?e.append(t):(n=n||e,e=new $(r,1),u>1&&e.attr("start",""+u),t.wrap(e)),t.name="li",c>o&&n&&n.lastChild.append(e),o=c,a(t),i(t,/^\u00a0+/),i(t,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/),i(t,/^\u00a0+/)},c=[],l=t.firstChild;null!=l;)if(c.push(l),null!==(l=l.walk()))for(;void 0!==l&&l.parent!==t;)l=l.walk();for(var s=0;s<c.length;s++)if("p"===(t=c[s]).name&&t.firstChild){var f=r(t);if(/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(f)){u(t,"ul");continue}if(J(f)){var d=/([0-9]+)\./.exec(f),m=1;d&&(m=parseInt(d[1],10)),u(t,"ol",m);continue}if(t._listLevel){u(t,"ul",1);continue}e=null}else n=e,e=null}(u),e=W({validate:P(t)},i).serialize(u)},tt=function(t,e){return{content:t,cancelled:e}},et=function(t,e,n,o){var r=function(t,e,n,o){return t.fire("PastePreProcess",{content:e,internal:n,wordContent:o})}(t,e,n,o),i=function(t,e){var n=U({},t.schema);n.addNodeFilter("meta",(function(t){M.each(t,(function(t){t.remove()}))}));var o=n.parse(e,{forced_root_block:!1,isRootContent:!0});return W({validate:P(t)},t.schema).serialize(o)}(t,r.content);return t.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?function(t,e,n,o){var r=t.dom.create("div",{style:"display:none"},e),i=function(t,e,n,o){return t.fire("PastePostProcess",{node:e,internal:n,wordContent:o})}(t,r,n,o);return tt(i.node.innerHTML,i.isDefaultPrevented())}(t,i,n,o):tt(i,r.isDefaultPrevented())},nt=function(t,e,n){var o=K(e),r=o?function(t,e){return function(t){return t.getParam("paste_enable_default_filters",!0)}(t)?Q(t,e):e}(t,e):e;return et(t,r,n,o)},ot=function(t,e){return t.insertContent(e,{merge:D(t),paste:!0}),!0},rt=function(t){return/^https?:\/\/[\w\?\-\/+=.&%@~#]+$/i.test(t)},it=function(t,e){return rt(e)&&b(R(t),(function(t){return n=e.toLowerCase(),o="."+t.toLowerCase(),_(n,o,n.length-o.length);var n,o}))},at=function(t,e,n){return!(!1!==t.selection.isCollapsed()||!rt(e))&&function(t,e,n){return t.undoManager.extra((function(){n(t,e)}),(function(){t.execCommand("mceInsertLink",!1,e)})),!0}(t,e,n)},ut=function(t,e,n){return!!it(t,e)&&function(t,e,n){return t.undoManager.extra((function(){n(t,e)}),(function(){t.insertContent('<img src="'+e+'">')})),!0}(t,e,n)},ct=function(t,e,n){n||!1===function(t){return t.getParam("smart_paste",!0)}(t)?ot(t,e):function(t,e){M.each([at,ut,ot],(function(n){return!0!==n(t,e,ot)}))}(t,e)},lt=function(t){return"\n"===t||"\r"===t},st=function(t,e){var n,o,r,i,a=(n=" ",o=function(t){return t.getParam("paste_tab_spaces",4,"number")}(t),o<=0?"":new Array(o+1).join(n)),u=e.replace(/\t/g,a),c=(r=function(t,e){return function(t){return-1!==" \f\t\v".indexOf(t)}(e)||e===q?t.pcIsSpace||""===t.str||t.str.length===u.length-1||function(t,e){return e<t.length&&e>=0&&lt(t[e])}(u,t.str.length+1)?{pcIsSpace:!1,str:t.str+q}:{pcIsSpace:!0,str:t.str+" "}:{pcIsSpace:lt(e),str:t.str+e}},i={pcIsSpace:!1,str:""},y(u,(function(t){i=r(i,t)})),i);return c.str},ft=function(t,e,n,o){var r=nt(t,e,n);!1===r.cancelled&&ct(t,r.content,o)},dt=function(t,e,n){var o=n||L(e);ft(t,function(t){return t.replace(N,"")}(e),o,!1)},mt=function(t,e){var n=t.dom.encode(e).replace(/\r\n/g,"\n"),o=function(t,e,n){return e?j(t,!0===e?"p":e,n):function(t){return t.replace(/\r?\n/g,"<br>")}(t)}(st(t,n),function(t){return t.getParam("forced_root_block")}(t),function(t){return t.getParam("forced_root_block_attrs")}(t));ft(t,o,!1,!0)},gt=function(t){var e={};if(t){if(t.getData){var n=t.getData("Text");n&&n.length>0&&-1===n.indexOf("data:text/mce-internal,")&&(e["text/plain"]=n)}if(t.types)for(var o=0;o<t.types.length;o++){var r=t.types[o];try{e[r]=t.getData(r)}catch(i){e[r]=""}}}return e},pt=function(t,e){return e in t&&t[e].length>0},ht=function(t){return pt(t,"text/html")||pt(t,"text/plain")},vt=(n="mceclip",o=0,function(){return n+o++}),bt=function(t,e){var n,o,r=(n=e.uri,(o=/data:([^;]+);base64,([a-z0-9\+\/=]+)/i.exec(n))?{type:o[1],data:decodeURIComponent(o[2])}:{type:null,data:null}),i=r.data,u=r.type,c=vt(),l=e.blob,s=new Image;if(s.src=e.uri,function(t,e){var n=function(t){return t.getParam("images_dataimg_filter")}(t);return!n||n(e)}(t,s)){var f=t.editorUpload.blobCache,d=void 0,m=f.getByData(i,u);if(m)d=m;else{var g=function(t){return t.getParam("images_reuse_filename")}(t)&&a(l.name),p=g?function(t,e){var n=e.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return a(n)?t.dom.encode(n[1]):null}(t,l.name):c,h=g?l.name:void 0;d=f.create(c,l,i,p,h),f.add(d)}dt(t,'<img src="'+d.blobUri()+'">',!1)}else dt(t,'<img src="'+e.uri+'">',!1)},xt=function(t){return O.all(x(t,(function(t){return new O((function(e){var n=function(t){return a(t.getAsFile)}(t)?t.getAsFile():t,o=new window.FileReader;o.onload=function(){e({blob:n,uri:o.result})},o.readAsDataURL(n)}))})))},yt=function(t){var e=R(t);return function(t){return function(t,e){return _(t,e,0)}(t.type,"image/")&&b(e,(function(e){return n=e.toLowerCase(),o={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"},(M.hasOwn(o,n)?"image/"+o[n]:"image/"+n)===t.type;var n,o}))}},wt=function(t,e,n){var o="paste"===e.type?e.clipboardData:e.dataTransfer;if(B(t)&&o){var r=function(t,e){var n=e.items?x(w(e.items),(function(t){return t.getAsFile()})):[],o=e.files?w(e.files):[];return function(t,e){for(var n=[],o=0,r=t.length;o<r;o++){var i=t[o];e(i,o)&&n.push(i)}return n}(n.length>0?n:o,yt(t))}(t,o);if(r.length>0)return e.preventDefault(),xt(r).then((function(e){n&&t.selection.setRng(n),y(e,(function(e){bt(t,e)}))})),!0}return!1},kt=function(t){return z.metaKeyPressed(t)&&86===t.keyCode||t.shiftKey&&45===t.keyCode},_t=function(t,e,n){var o,r=k(),i=k();t.on("keyup",i.clear),t.on("keydown",(function(n){var a=function(t){kt(t)&&!t.isDefaultPrevented()&&e.remove()};if(kt(n)&&!n.isDefaultPrevented()){if((o=n.shiftKey&&86===n.keyCode)&&C.webkit&&-1!==navigator.userAgent.indexOf("Version/"))return;if(n.stopImmediatePropagation(),r.set(n),i.set(!0),C.ie&&o)return n.preventDefault(),void function(t,e){t.fire("paste",{ieFake:e})}(t,!0);e.remove(),e.create(),t.once("keyup",a),t.once("paste",(function(){t.off("keyup",a)}))}}));var a=function(t,n,o,r,i){var a;pt(n,"text/html")?a=n["text/html"]:(a=e.getHtml(),i=i||L(a),e.isDefaultContent(a)&&(r=!0)),a=X(a),e.remove();var u=!1===i&&!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(a),c=rt(a);(!a.length||u&&!c)&&(r=!0),(r||c)&&(a=pt(n,"text/plain")&&u?n["text/plain"]:function(t){var e=G(),n=U({},e),o="",r=e.getShortEndedElements(),i=M.makeMap("script noscript style textarea video audio iframe object"," "),a=e.getBlockElements();return t=Y(t,[/<!\[[^\]]+\]>/g]),function t(e){var n=e.name,u=e;if("br"!==n){if("wbr"!==n)if(r[n]&&(o+=" "),i[n])o+=" ";else{if(3===e.type&&(o+=e.value),!e.shortEnded&&(e=e.firstChild))do{t(e)}while(e=e.next);a[n]&&u.next&&(o+="\n","p"===n&&(o+="\n"))}}else o+="\n"}(n.parse(t)),o}(a)),e.isDefaultContent(a)?o||t.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents."):r?mt(t,a):dt(t,a,i)};t.on("paste",(function(u){var c=r.isSet()||i.isSet();c&&r.clear();var l=function(t,e){return gt(e.clipboardData||t.getDoc().dataTransfer)}(t,u),s="text"===n.get()||o,f=pt(l,F());o=!1,u.isDefaultPrevented()||function(t){var e=t.clipboardData;return-1!==navigator.userAgent.indexOf("Android")&&e&&e.items&&0===e.items.length}(u)?e.remove():ht(l)||!wt(t,u,e.getLastRng()||t.selection.getRng())?(c||u.preventDefault(),!C.ie||c&&!u.ieFake||pt(l,"text/html")||(e.create(),t.dom.bind(e.getEl(),"paste",(function(t){t.stopPropagation()})),t.getDoc().execCommand("Paste",!1,null),l["text/html"]=e.getHtml()),pt(l,"text/html")?(u.preventDefault(),f||(f=L(l["text/html"])),a(t,l,c,s,f)):S.setEditorTimeout(t,(function(){a(t,l,c,s,f)}),0)):e.remove()}))},Ct=function(t){return C.ie&&t.inline?document.body:t.getBody()},St=function(t,e,n){(function(t){return Ct(t)!==t.getBody()})(t)&&t.dom.bind(e,"paste keyup",(function(e){Tt(t,n)||t.fire("paste")}))},Ot=function(t){return t.dom.get("mcepastebin")},zt=function(t,e){return e===t},Tt=function(t,e){var n,o=Ot(t);return(n=o)&&"mcepastebin"===n.id&&zt(e,o.innerHTML)},Mt=function(t){var e=r(null),n="%MCEPASTEBIN%";return{create:function(){return function(t,e,n){var o=t.dom,r=t.getBody();e.set(t.selection.getRng());var i=t.dom.add(Ct(t),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},n);(C.ie||C.gecko)&&o.setStyle(i,"left","rtl"===o.getStyle(r,"direction",!0)?65535:-65535),o.bind(i,"beforedeactivate focusin focusout",(function(t){t.stopPropagation()})),St(t,i,n),i.focus(),t.selection.select(i,!0)}(t,e,n)},remove:function(){return function(t,e){if(Ot(t)){for(var n=void 0,o=e.get();n=t.dom.get("mcepastebin");)t.dom.remove(n),t.dom.unbind(n);o&&t.selection.setRng(o)}e.set(null)}(t,e)},getEl:function(){return Ot(t)},getHtml:function(){return function(t){var e=function(e,n){e.appendChild(n),t.dom.remove(n,!0)},n=M.grep(Ct(t).childNodes,(function(t){return"mcepastebin"===t.id})),o=n.shift();M.each(n,(function(t){e(o,t)}));for(var r=t.dom.select("div[id=mcepastebin]",o),i=r.length-1;i>=0;i--){var a=t.dom.create("div");o.insertBefore(a,r[i]),e(a,r[i])}return o?o.innerHTML:""}(t)},getLastRng:function(){return function(t){return t.get()}(e)},isDefault:function(){return Tt(t,n)},isDefaultContent:function(t){return zt(n,t)}}},At=function(t,e){var n=Mt(t);return t.on("PreInit",(function(){return function(t,e,n){var o;_t(t,e,n),t.parser.addNodeFilter("img",(function(e,n,r){var i=function(t){t.attr("data-mce-object")||o===C.transparentSrc||t.remove()},a=function(t){return 0===t.indexOf("webkit-fake-url")},u=function(t){return 0===t.indexOf("data:")};if(!B(t)&&function(t){return t.data&&!0===t.data.paste}(r))for(var c=e.length;c--;)(o=e[c].attr("src"))&&(a(o)||!H(t)&&u(o))&&i(e[c])}))}(t,n,e)})),{pasteFormat:e,pasteHtml:function(e,n){return dt(t,e,n)},pasteText:function(e){return mt(t,e)},pasteImageData:function(e,n){return wt(t,e,n)},getDataTransferItems:gt,hasHtmlOrText:ht,hasContentType:pt}},Dt=function(t,e){t.addCommand("mceTogglePlainTextPaste",(function(){!function(t,e){"text"===e.pasteFormat.get()?(e.pasteFormat.set("html"),T(t,!1)):(e.pasteFormat.set("text"),T(t,!0)),t.focus()}(t,e)})),t.addCommand("mceInsertClipboardContent",(function(t,n){n.content&&e.pasteHtml(n.content,n.internal),n.text&&e.pasteText(n.text)}))},Et=function(t,e,n){if(!function(t){return!1===C.iOS&&"function"==typeof(null==t?void 0:t.setData)}(t))return!1;try{return t.clearData(),t.setData("text/html",e),t.setData("text/plain",n),t.setData(F(),e),!0}catch(o){return!1}},Pt=function(t,e,n,o){Et(t.clipboardData,e.html,e.text)?(t.preventDefault(),o()):n(e.html,o)},Ht=function(t){return function(e,n){var o=function(t){return N+t}(e),r=t.dom.create("div",{contenteditable:"false","data-mce-bogus":"all"}),i=t.dom.create("div",{contenteditable:"true"},o);t.dom.setStyles(r,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),r.appendChild(i),t.dom.add(t.getBody(),r);var a=t.selection.getRng();i.focus();var u=t.dom.createRng();u.selectNodeContents(i),t.selection.setRng(u),S.setTimeout((function(){t.selection.setRng(a),r.parentNode.removeChild(r),n()}),0)}},Bt=function(t){return{html:t.selection.getContent({contextual:!0}),text:t.selection.getContent({format:"text"})}},Rt=function(t){return!t.selection.isCollapsed()||function(t){return!!t.dom.getParent(t.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",t.getBody())}(t)},It=function(t){t.on("cut",function(t){return function(e){Rt(t)&&Pt(e,Bt(t),Ht(t),(function(){if(C.browser.isChrome()||C.browser.isFirefox()){var e=t.selection.getRng();S.setEditorTimeout(t,(function(){t.selection.setRng(e),t.execCommand("Delete")}),0)}else t.execCommand("Delete")}))}}(t)),t.on("copy",function(t){return function(e){Rt(t)&&Pt(e,Bt(t),Ht(t),c)}}(t))},Nt=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Lt=function(t,e){return Nt.getCaretRangeFromPoint(e.clientX,e.clientY,t.getDoc())},Ft=function(t,e){t.focus(),t.selection.setRng(e)},Vt=function(t,e){t.on("PastePreProcess",(function(n){n.content=e(t,n.content,n.internal,n.wordContent)}))},jt=function(t,e){if(!K(e))return e;var n=[];M.each(t.schema.getBlockElements(),(function(t,e){n.push(e)}));var o=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+n.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");return e=Y(e,[[o,"$1"]]),e=Y(e,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])},Ut=function(t,e,n,o){if(o||n)return e;var r,i=function(t){return t.getParam("paste_webkit_styles")}(t);if(!1===function(t){return t.getParam("paste_remove_styles_if_webkit",!0)}(t)||"all"===i)return e;if(i&&(r=i.split(/[, ]/)),r){var a=t.dom,u=t.selection.getNode();e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(function(t,e,n,o){var i=a.parseStyle(a.decode(n)),c={};if("none"===r)return e+o;for(var l=0;l<r.length;l++){var s=i[r[l]],f=a.getStyle(u,r[l],!0);/color/.test(r[l])&&(s=a.toHex(s),f=a.toHex(f)),f!==s&&(c[r[l]]=s)}return(c=a.serializeStyle(c,"span"))?e+' style="'+c+'"'+o:e+o}))}else e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return e=e.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(function(t,e,n,o){return e+' style="'+n+'"'+o})),e},Wt=function(t,e){t.$("a",e).find("font,u").each((function(e,n){t.dom.remove(n,!0)}))},qt=function(t,e){return function(n){n.setActive("text"===e.pasteFormat.get());var o=function(t){return n.setActive(t.state)};return t.on("PastePlainTextToggle",o),function(){return t.off("PastePlainTextToggle",o)}}};i.add("paste",(function(t){if(!1===function(t){return!!t.hasPlugin("powerpaste",!0)&&(void 0!==window.console&&window.console.log&&window.console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option."),!0)}(t)){var e=r(!1),n=r(function(t){return t.getParam("paste_as_text",!1)}(t)?"text":"html"),o=At(t,n),i=function(t){C.webkit&&Vt(t,Ut),C.ie&&(Vt(t,jt),function(t,e){t.on("PastePostProcess",(function(n){e(t,n.node)}))}(t,Wt))}(t);return function(t,e){t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:function(){return t.execCommand("mceTogglePlainTextPaste")},onSetup:qt(t,e)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:function(){return t.execCommand("mceTogglePlainTextPaste")},onSetup:qt(t,e)})}(t,o),Dt(t,o),function(t){var e=t.plugins.paste,n=function(t){return t.getParam("paste_preprocess")}(t);n&&t.on("PastePreProcess",(function(t){n.call(e,e,t)}));var o=function(t){return t.getParam("paste_postprocess")}(t);o&&t.on("PastePostProcess",(function(t){o.call(e,e,t)}))}(t),It(t),function(t,e,n){(function(t){return t.getParam("paste_block_drop",!1)})(t)&&t.on("dragend dragover draggesture dragdrop drop drag",(function(t){t.preventDefault(),t.stopPropagation()})),A(t)||t.on("drop",(function(t){var e=t.dataTransfer;e&&e.files&&e.files.length>0&&t.preventDefault()})),t.on("drop",(function(o){var r=Lt(t,o);if(!o.isDefaultPrevented()&&!n.get()){var i,a=e.getDataTransferItems(o.dataTransfer),u=e.hasContentType(a,F());if((e.hasHtmlOrText(a)&&(!(i=a["text/plain"])||0!==i.indexOf("file://"))||!e.pasteImageData(o,r))&&r&&function(t){return t.getParam("paste_filter_drop",!0)}(t)){var c=a["mce-internal"]||a["text/html"]||a["text/plain"];c&&(o.preventDefault(),S.setEditorTimeout(t,(function(){t.undoManager.transact((function(){a["mce-internal"]&&t.execCommand("Delete"),Ft(t,r),c=X(c),a["text/html"]?e.pasteHtml(c,u):e.pasteText(c)}))})))}}})),t.on("dragstart",(function(t){n.set(!0)})),t.on("dragover dragend",(function(e){A(t)&&!1===n.get()&&(e.preventDefault(),Ft(t,Lt(t,e))),"dragend"===e.type&&n.set(!1)}))}(t,o,e),function(t,e){return{clipboard:t,quirks:e}}(o,i)}}))}(),tinymce.util.Tools.resolve("tinymce.PluginManager").add("textcolor",(function(){console.warn("Text color plugin is now built in to the core editor, please remove it from your editor configuration")})),tinymce.util.Tools.resolve("tinymce.PluginManager").add("colorpicker",(function(){console.warn("Color picker plugin is now built in to the core editor, please remove it from your editor configuration")})),function(){var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(){return n=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},n.apply(this,arguments)};var o=function(e){return function(n){return function(e){var n=t(e);return null===e?"null":"object"===n&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===n&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":n}(n)===e}},r=o("string"),i=o("object"),a=o("array"),u=function(){},c=function(t){return function(){return t}},l=function(t){return t},s=c(!1),f=c(!0),d=function(){return m},m=function(){var t=function(t){return t.isNone()},e=function(t){return t()},n=function(t){return t};return{fold:function(t,e){return t()},is:s,isSome:s,isNone:f,getOr:n,getOrThunk:e,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:c(null),getOrUndefined:c(void 0),or:n,orThunk:e,map:d,each:u,bind:d,exists:s,forall:f,filter:d,equals:t,equals_:t,toArray:function(){return[]},toString:c("none()")}}(),g=function t(e){var n=c(e),o=function(){return i},r=function(t){return t(e)},i={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:f,isNone:s,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:o,orThunk:o,map:function(n){return t(n(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?i:m},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(s,(function(t){return n(e,t)}))}};return i},p={some:g,none:d,from:function(t){return null==t?m:g(t)}},h=Array.prototype.slice,v=Array.prototype.indexOf,b=function(t,e){return function(t,e){return v.call(t,e)}(t,e)>-1},x=function(t,e){for(var n=t.length,o=new Array(n),r=0;r<n;r++){var i=t[r];o[r]=e(i,r)}return o},y=function(t,e){for(var n=0,o=t.length;n<o;n++){e(t[n],n)}},w=function(t,e){for(var n=[],o=0,r=t.length;o<r;o++){var i=t[o];e(i,o)&&n.push(i)}return n},k=function(t,e,n){return function(t,e){for(var n=t.length-1;n>=0;n--)e(t[n],n)}(t,(function(t){n=e(n,t)})),n},_=function(t,e){return function(t,e,n){for(var o=0,r=t.length;o<r;o++){var i=t[o];if(e(i,o))return p.some(i);if(n(i,o))break}return p.none()}(t,e,s)},C=function(t,e){for(var n=0,o=t.length;n<o;++n){if(!0!==e(t[n],n))return!1}return!0},S=function(t){return function(t,e){return e>=0&&e<t.length?p.some(t[e]):p.none()}(t,0)},O=Object.keys,z=Object.hasOwnProperty,T=function(t){if(!a(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");var e=[],n={};return y(t,(function(o,r){var i=O(o);if(1!==i.length)throw new Error("one and only one name per case");var u=i[0],c=o[u];if(void 0!==n[u])throw new Error("duplicate key detected:"+u);if("cata"===u)throw new Error("cannot have a case named cata (sorry)");if(!a(c))throw new Error("case arguments must be an array");e.push(u),n[u]=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var i=n.length;if(i!==c.length)throw new Error("Wrong number of arguments to case "+u+". Expected "+c.length+" ("+c+"), got "+i);var a=function(t){var o=O(t);if(e.length!==o.length)throw new Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+o.join(","));if(!C(e,(function(t){return b(o,t)})))throw new Error("Not all branches were specified when using match. Specified: "+o.join(", ")+"\nRequired: "+e.join(", "));return t[u].apply(null,n)};return{fold:function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];if(e.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+e.length);var i=e[r];return i.apply(null,n)},match:a,log:function(t){console.log(t,{constructors:e,constructor:u,params:n})}}}})),n};T([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);var M=function(t){var e=[],n=[];return y(t,(function(t){t.fold((function(t){e.push(t)}),(function(t){n.push(t)}))})),{errors:e,values:n}},A=function t(e){return{is:function(t){return e===t},isValue:f,isError:s,getOr:c(e),getOrThunk:c(e),getOrDie:c(e),or:function(n){return t(e)},orThunk:function(n){return t(e)},fold:function(t,n){return n(e)},map:function(n){return t(n(e))},mapError:function(n){return t(e)},each:function(t){t(e)},bind:function(t){return t(e)},exists:function(t){return t(e)},forall:function(t){return t(e)},toOptional:function(){return p.some(e)}}},D=function t(e){return{is:s,isValue:s,isError:f,getOr:l,getOrThunk:function(t){return t()},getOrDie:function(){return(t=String(e),function(){throw new Error(t)})();var t},or:function(t){return t},orThunk:function(t){return t()},fold:function(t,n){return t(e)},map:function(n){return t(e)},mapError:function(n){return t(n(e))},each:u,bind:function(n){return t(e)},exists:s,forall:f,toOptional:p.none}},E=A,P=D,H=function(t){return"inline-command"===t.type||"inline-format"===t.type},B=function(t){return"block-command"===t.type||"block-format"===t.type},R=function(t){return e=t,n=function(t,e){return t.start.length===e.start.length?0:t.start.length>e.start.length?-1:1},(o=h.call(e,0)).sort(n),o;var e,n,o},I=function(t){var e=function(e){return P({message:e,pattern:t})},n=function(n,o,i){if(void 0!==t.format){var u=void 0;if(a(t.format)){if(!C(t.format,r))return e(n+" pattern has non-string items in the `format` array");u=t.format}else{if(!r(t.format))return e(n+" pattern has non-string `format` parameter");u=[t.format]}return E(o(u))}return void 0!==t.cmd?r(t.cmd)?E(i(t.cmd,t.value)):e(n+" pattern has non-string `cmd` parameter"):e(n+" pattern is missing both `format` and `cmd` parameters")};if(!i(t))return e("Raw pattern is not an object");if(!r(t.start))return e("Raw pattern is missing `start` parameter");if(void 0!==t.end){if(!r(t.end))return e("Inline pattern has non-string `end` parameter");if(0===t.start.length&&0===t.end.length)return e("Inline pattern has empty `start` and `end` parameters");var o=t.start,u=t.end;return 0===u.length&&(u=o,o=""),n("Inline",(function(t){return{type:"inline-format",start:o,end:u,format:t}}),(function(t,e){return{type:"inline-command",start:o,end:u,cmd:t,value:e}}))}return void 0!==t.replacement?r(t.replacement)?0===t.start.length?e("Replacement pattern has empty `start` parameter"):E({type:"inline-command",start:"",end:t.start,cmd:"mceInsertContent",value:t.replacement}):e("Replacement pattern has non-string `replacement` parameter"):0===t.start.length?e("Block pattern has empty `start` parameter"):n("Block",(function(e){return{type:"block-format",start:t.start,format:e[0]}}),(function(e,n){return{type:"block-command",start:t.start,cmd:e,value:n}}))},N=function(t){return"block-command"===t.type?{start:t.start,cmd:t.cmd,value:t.value}:"block-format"===t.type?{start:t.start,format:t.format}:"inline-command"===t.type?"mceInsertContent"===t.cmd&&""===t.start?{start:t.end,replacement:t.value}:{start:t.start,end:t.end,cmd:t.cmd,value:t.value}:"inline-format"===t.type?{start:t.start,end:t.end,format:1===t.format.length?t.format[0]:t.format}:void 0},L=function(t){return{inlinePatterns:w(t,H),blockPatterns:R(w(t,B))}},F=function(t){return{setPatterns:function(e){var n=M(x(e,I));if(n.errors.length>0){var o=n.errors[0];throw new Error(o.message+":\n"+JSON.stringify(o.pattern,null,2))}t.set(L(n.values))},getPatterns:function(){return function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,u=i.length;a<u;a++,r++)o[r]=i[a];return o}(x(t.get().inlinePatterns,N),x(t.get().blockPatterns,N))}}},V="undefined"!=typeof window?window:Function("return this;")(),j=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=V.console;n&&(n.error?n.error.apply(n,t):n.log.apply(n,t))},U=[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}],W=function(t){var e=t.getParam("forced_root_block","p");return!1===e?"":!0===e?"p":e},q=tinymce.util.Tools.resolve("tinymce.util.Delay"),$=tinymce.util.Tools.resolve("tinymce.util.VK"),G=tinymce.util.Tools.resolve("tinymce.util.Tools"),Y=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),X=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker"),K=function(t,e){return{container:t,offset:e}},J=function(t){return t.nodeType===Node.TEXT_NODE},Z=function t(e,n,o){if(n&&e.isEmpty(n)&&!o(n)){var r=n.parentNode;e.remove(n),t(e,r,o)}},Q=function(t,e,n,o){void 0===o&&(o=!0);var r=e.startContainer.parentNode,i=e.endContainer.parentNode;e.deleteContents(),o&&!n(e.startContainer)&&(J(e.startContainer)&&0===e.startContainer.data.length&&t.remove(e.startContainer),J(e.endContainer)&&0===e.endContainer.data.length&&t.remove(e.endContainer),Z(t,r,n),r!==i&&Z(t,i,n))},tt=function(t,e){var n=e.get(t);return a(n)&&S(n).exists((function(t){return e=t,n="block",z.call(e,n);var e,n}))},et=function(t){return 0===t.start.length},nt=function(t,e){var n=p.from(t.dom.getParent(e.startContainer,t.dom.isBlock));return""===W(t)?n.orThunk((function(){return p.some(t.getBody())})):n},ot=Y.DOM,rt=function(t){return function(e){return t===e?-1:0}},it=function(t,e,n){if(J(t)&&e>=0)return p.some(K(t,e));var o=X(ot);return p.from(o.backwards(t,e,rt(t),n)).map((function(t){return K(t.container,t.container.data.length)}))},at=function t(e,n,o){if(!J(e))return p.none();var r=e.textContent;if(n>=0&&n<=r.length)return p.some(K(e,n));var i=X(ot);return p.from(i.backwards(e,n,rt(e),o)).bind((function(e){var r=e.container.data;return t(e.container,n+r.length,o)}))},ut=function t(e,n,o){if(!J(e))return p.none();var r=e.textContent;if(n<=r.length)return p.some(K(e,n));var i=X(ot);return p.from(i.forwards(e,n,rt(e),o)).bind((function(e){return t(e.container,n-r.length,o)}))},ct=function(t,e,n,o,r){var i=X(t,function(t){return function(e){return t.isBlock(e)||b(["BR","IMG","HR","INPUT"],e.nodeName)||"false"===t.getContentEditable(e)}}(t));return p.from(i.backwards(e,n,o,r))},lt=function(t,e,n){if(J(e)&&(n<0||n>e.data.length))return[];for(var o=[n],r=e;r!==t&&r.parentNode;){for(var i=r.parentNode,a=0;a<i.childNodes.length;a++)if(i.childNodes[a]===r){o.push(a);break}r=i}return r===t?o.reverse():[]},st=function(t,e,n,o,r){return{start:lt(t,e,n),end:lt(t,o,r)}},ft=function(t,e){var n,o,r,i=e.slice(),a=i.pop();return(n=i,o=function(t,e){return t.bind((function(t){return p.from(t.childNodes[e])}))},r=p.some(t),y(n,(function(t){r=o(r,t)})),r).bind((function(t){return J(t)&&(a<0||a>t.data.length)?p.none():p.some({node:t,offset:a})}))},dt=function(t,e){return ft(t,e.start).bind((function(n){var o=n.node,r=n.offset;return ft(t,e.end).map((function(t){var e=t.node,n=t.offset,i=document.createRange();return i.setStart(o,r),i.setEnd(e,n),i}))}))},mt=function(t,e,n){(function(t,e,n){if(J(t)&&e>=t.length)return p.some(K(t,e));var o=X(ot);return p.from(o.forwards(t,e,rt(t),n)).map((function(t){return K(t.container,0)}))})(e,0,e).each((function(o){var r=o.container;ut(r,n.start.length,e).each((function(n){var o=t.createRng();o.setStart(r,0),o.setEnd(n.container,n.offset),Q(t,o,(function(t){return t===e}))}))}))},gt=function(t,e){var n=t.dom,o=t.selection.getRng();return nt(t,o).filter((function(e){var o=W(t),r=""===o&&n.is(e,"body")||n.is(e,o);return null!==e&&r})).bind((function(t){var o=t.textContent,r=function(t,e){var n=e.replace(""," ");return _(t,(function(t){return 0===e.indexOf(t.start)||0===n.indexOf(t.start)}))}(e,o);return r.map((function(e){return G.trim(o).length===e.start.length?[]:[{pattern:e,range:st(n.getRoot(),t,0,t,0)}]}))})).getOr([])},pt=function(t,e){if(0!==e.length){var n=t.selection.getBookmark();y(e,(function(e){return function(t,e){var n=t.dom,o=e.pattern,r=dt(n.getRoot(),e.range).getOrDie("Unable to resolve path range");return nt(t,r).each((function(e){"block-format"===o.type?tt(o.format,t.formatter)&&t.undoManager.transact((function(){mt(t.dom,e,o),t.formatter.apply(o.format)})):"block-command"===o.type&&t.undoManager.transact((function(){mt(t.dom,e,o),t.execCommand(o.cmd,!1,o.value)}))})),!0}(t,e)})),t.selection.moveToBookmark(n)}},ht=0,vt=function(t,e){return t.create("span",{"data-mce-type":"bookmark",id:e})},bt=function(t,e){var n=t.createRng();return n.setStartAfter(e.start),n.setEndBefore(e.end),n},xt=function(t,e,n){var o=dt(t.getRoot(),n).getOrDie("Unable to resolve path range"),r=o.startContainer,i=o.endContainer,a=0===o.endOffset?i:i.splitText(o.endOffset),u=0===o.startOffset?r:r.splitText(o.startOffset);return{prefix:e,end:a.parentNode.insertBefore(vt(t,e+"-end"),a),start:u.parentNode.insertBefore(vt(t,e+"-start"),u)}},yt=function(t,e,n){Z(t,t.get(e.prefix+"-end"),n),Z(t,t.get(e.prefix+"-start"),n)},wt=function t(e,n,o,r){var i,a=n.start;return ct(e,r.container,r.offset,(i=a,function(t,e){var n=t.data.substring(0,e),o=n.lastIndexOf(i.charAt(i.length-1)),r=n.lastIndexOf(i);return-1!==r?r+i.length:-1!==o?o+1:-1}),o).bind((function(r){if(r.offset>=a.length){var i=e.createRng();return i.setStart(r.container,r.offset-a.length),i.setEnd(r.container,r.offset),p.some(i)}var u=r.offset-a.length;return at(r.container,u,o).map((function(t){var n=e.createRng();return n.setStart(t.container,t.offset),n.setEnd(r.container,r.offset),n})).filter((function(t){return t.toString()===a})).orThunk((function(){return t(e,n,o,K(r.container,0))}))}))},kt=function(t,e,n,o,r,i){if(void 0===i&&(i=!1),0===e.start.length&&!i){var a=t.createRng();return a.setStart(n,o),a.setEnd(n,o),p.some(a)}return it(n,o,r).bind((function(n){return wt(t,e,r,n).bind((function(t){if(i){if(t.endContainer===n.container&&t.endOffset===n.offset)return p.none();if(0===n.offset&&t.endContainer.textContent.length===t.endOffset)return p.none()}return p.some(t)}))}))},_t=function(t,e,n){var o=t.dom,r=o.getRoot(),i=n.pattern,a=n.position.container,u=n.position.offset;return at(a,u-n.pattern.end.length,e).bind((function(c){var l=st(r,c.container,c.offset,a,u);if(et(i))return p.some({matches:[{pattern:i,startRng:l,endRng:l}],position:c});var s=Ct(t,n.remainingPatterns,c.container,c.offset,e),f=s.getOr({matches:[],position:c}),d=f.position;return kt(o,i,d.container,d.offset,e,s.isNone()).map((function(t){var e=function(t,e){return st(t,e.startContainer,e.startOffset,e.endContainer,e.endOffset)}(r,t);return{matches:f.matches.concat([{pattern:i,startRng:e,endRng:l}]),position:K(t.startContainer,t.startOffset)}}))}))},Ct=function(t,e,n,o,r){var i=t.dom;return it(n,o,i.getRoot()).bind((function(a){var u=i.createRng();u.setStart(r,0),u.setEnd(n,o);for(var c,l,s=u.toString(),f=0;f<e.length;f++){var d=e[f];if(c=s,l=d.end,function(t,e,n){return""===e||t.length>=e.length&&t.substr(n,n+e.length)===e}(c,l,c.length-l.length)){var m=e.slice();m.splice(f,1);var g=_t(t,r,{pattern:d,remainingPatterns:m,position:a});if(g.isSome())return g}}return p.none()}))},St=function(t,e,n){t.selection.setRng(n),"inline-format"===e.type?y(e.format,(function(e){t.formatter.apply(e)})):t.execCommand(e.cmd,!1,e.value)},Ot=function(t,e){var o,r,i=(o="mce_textpattern",r=(new Date).getTime(),o+"_"+Math.floor(1e9*Math.random())+ ++ht+String(r)),a=k(e,(function(e,o){var r=xt(t,i+"_end"+e.length,o.endRng);return e.concat([n(n({},o),{endMarker:r})])}),[]);return k(a,(function(e,o){var r=a.length-e.length-1,u=et(o.pattern)?o.endMarker:xt(t,i+"_start"+r,o.startRng);return e.concat([n(n({},o),{startMarker:u})])}),[])},zt=function(t,e,n){var o=t.selection.getRng();return!1===o.collapsed?[]:nt(t,o).bind((function(r){var i=o.startOffset-(n?1:0);return Ct(t,e,o.startContainer,i,r)})).fold((function(){return[]}),(function(t){return t.matches}))},Tt=function(t,e){if(0!==e.length){var n=t.dom,o=t.selection.getBookmark(),r=Ot(n,e);y(r,(function(e){var o=n.getParent(e.startMarker.start,n.isBlock),r=function(t){return t===o};et(e.pattern)?function(t,e,n,o){var r=bt(t.dom,n);Q(t.dom,r,o),St(t,e,r)}(t,e.pattern,e.endMarker,r):function(t,e,n,o,r){var i=t.dom,a=bt(i,o),u=bt(i,n);Q(i,u,r),Q(i,a,r);var c={prefix:n.prefix,start:n.end,end:o.start},l=bt(i,c);St(t,e,l)}(t,e.pattern,e.startMarker,e.endMarker,r),yt(n,e.endMarker,r),yt(n,e.startMarker,r)})),t.selection.moveToBookmark(o)}},Mt=function(t,e){var n=zt(t,e.inlinePatterns,!0);n.length>0&&t.undoManager.transact((function(){Tt(t,n)}))},At=function(t,e,n){for(var o=0;o<t.length;o++)if(n(t[o],e))return!0},Dt=function(t,e){var n=[",",".",";",":","!","?"],o=[32];t.on("keydown",(function(n){13!==n.keyCode||$.modifierPressed(n)||function(t,e){if(!t.selection.isCollapsed())return!1;var n=zt(t,e.inlinePatterns,!1),o=gt(t,e.blockPatterns);return(o.length>0||n.length>0)&&(t.undoManager.add(),t.undoManager.extra((function(){t.execCommand("mceInsertNewLine")}),(function(){t.insertContent("\ufeff"),Tt(t,n),pt(t,o);var e=t.selection.getRng(),r=it(e.startContainer,e.startOffset,t.dom.getRoot());t.execCommand("mceInsertNewLine"),r.each((function(e){var n=e.container;"\ufeff"===n.data.charAt(e.offset-1)&&(n.deleteData(e.offset-1,1),Z(t.dom,n.parentNode,(function(e){return e===t.dom.getRoot()})))}))})),!0)}(t,e.get())&&n.preventDefault()}),!0),t.on("keyup",(function(n){At(o,n,(function(t,e){return t===e.keyCode&&!1===$.modifierPressed(e)}))&&Mt(t,e.get())})),t.on("keypress",(function(o){At(n,o,(function(t,e){return t.charCodeAt(0)===e.charCode}))&&q.setEditorTimeout(t,(function(){Mt(t,e.get())}))}))};e.add("textpattern",(function(t){var e=function(t){var e=t;return{get:function(){return e},set:function(t){e=t}}}(function(t){var e=t.getParam("textpattern_patterns",U,"array");if(!a(e))return j("The setting textpattern_patterns should be an array"),{inlinePatterns:[],blockPatterns:[]};var n=M(x(e,I));return y(n.errors,(function(t){return j(t.message,t.pattern)})),L(n.values)}(t));return Dt(t,e),F(e)}))}(),function(){var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(){},o=function(t){return function(){return t}},r=o(!1),i=o(!0),a=function(){return u},u=function(){var t=function(t){return t.isNone()},e=function(t){return t()},u=function(t){return t};return{fold:function(t,e){return t()},is:r,isSome:r,isNone:i,getOr:u,getOrThunk:e,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:o(null),getOrUndefined:o(void 0),or:u,orThunk:e,map:a,each:n,bind:a,exists:r,forall:i,filter:a,equals:t,equals_:t,toArray:function(){return[]},toString:o("none()")}}(),c=function t(e){var n=o(e),a=function(){return l},c=function(t){return t(e)},l={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:i,isNone:r,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:a,orThunk:a,map:function(n){return t(n(e))},each:function(t){t(e)},bind:c,exists:c,forall:c,filter:function(t){return t(e)?l:u},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(r,(function(t){return n(e,t)}))}};return l},l=c,s=a,f=function(t){return function(t,e){return e>=0&&e<t.length?l(t[e]):s()}(t,0)},d=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),m=function(t){return t&&"PRE"===t.nodeName&&-1!==t.className.indexOf("language-")},g=function(t){return function(e,n){return t(n)}},p="undefined"!=typeof window?window:Function("return this;")(),h={},v={exports:h},b={};!function(e,n,o,r){var i=window.Prism;window.Prism={manual:!0},function(r){if("object"===t(n)&&void 0!==o)o.exports=r();else if("function"==typeof e&&e.amd)e([],r);else{("undefined"!=typeof window?window:void 0!==b?b:"undefined"!=typeof self?self:this).EphoxContactWrapper=r()}}((function(){return function t(e,n,o){function i(u,c){if(!n[u]){if(!e[u]){var l="function"==typeof r&&r;if(!c&&l)return l(u,!0);if(a)return a(u,!0);var s=new Error("Cannot find module '"+u+"'");throw s.code="MODULE_NOT_FOUND",s}var f=n[u]={exports:{}};e[u][0].call(f.exports,(function(t){return i(e[u][1][t]||t)}),f,f.exports,t,e,n,o)}return n[u].exports}for(var a="function"==typeof r&&r,u=0;u<o.length;u++)i(o[u]);return i}({1:[function(t,e,n){Prism.languages.c=Prism.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:__attribute__|_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|asm|typeof|inline|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|union|unsigned|void|volatile|while)\b/,function:/[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/}),Prism.languages.insertBefore("c","string",{macro:{pattern:/(^\s*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},Prism.languages.c.string],comment:Prism.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:Prism.languages.c}}},constant:/\b(?:__FILE__|__LINE__|__DATE__|__TIME__|__TIMESTAMP__|__func__|EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|stdin|stdout|stderr)\b/}),delete Prism.languages.c.boolean},{}],2:[function(t,e,n){Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|interface|extends|implements|trait|instanceof|new)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(?:true|false)\b/,function:/\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/}},{}],3:[function(t,e,n){(function(t){(function(){var n=function(t){var e=/\blang(?:uage)?-([\w-]+)\b/i,n=0,o={manual:t.Prism&&t.Prism.manual,disableWorkerMessageHandler:t.Prism&&t.Prism.disableWorkerMessageHandler,util:{encode:function t(e){return e instanceof r?new r(e.type,t(e.content),e.alias):Array.isArray(e)?e.map(t):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(t){return Object.prototype.toString.call(t).slice(8,-1)},objId:function(t){return t.__id||Object.defineProperty(t,"__id",{value:++n}),t.__id},clone:function t(e,n){var r,i;switch(n=n||{},o.util.type(e)){case"Object":if(i=o.util.objId(e),n[i])return n[i];for(var a in r={},n[i]=r,e)e.hasOwnProperty(a)&&(r[a]=t(e[a],n));return r;case"Array":return i=o.util.objId(e),n[i]?n[i]:(r=[],n[i]=r,e.forEach((function(e,o){r[o]=t(e,n)})),r);default:return e}},getLanguage:function(t){for(;t&&!e.test(t.className);)t=t.parentElement;return t?(t.className.match(e)||[,"none"])[1].toLowerCase():"none"},currentScript:function(){if("undefined"==typeof document)return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(o){var t=(/at [^(\r\n]*\((.*):.+:.+\)$/i.exec(o.stack)||[])[1];if(t){var e=document.getElementsByTagName("script");for(var n in e)if(e[n].src==t)return e[n]}return null}},isActive:function(t,e,n){for(var o="no-"+e;t;){var r=t.classList;if(r.contains(e))return!0;if(r.contains(o))return!1;t=t.parentElement}return!!n}},languages:{extend:function(t,e){var n=o.util.clone(o.languages[t]);for(var r in e)n[r]=e[r];return n},insertBefore:function(t,e,n,r){var i=(r=r||o.languages)[t],a={};for(var u in i)if(i.hasOwnProperty(u)){if(u==e)for(var c in n)n.hasOwnProperty(c)&&(a[c]=n[c]);n.hasOwnProperty(u)||(a[u]=i[u])}var l=r[t];return r[t]=a,o.languages.DFS(o.languages,(function(e,n){n===l&&e!=t&&(this[e]=a)})),a},DFS:function t(e,n,r,i){i=i||{};var a=o.util.objId;for(var u in e)if(e.hasOwnProperty(u)){n.call(e,u,e[u],r||u);var c=e[u],l=o.util.type(c);"Object"!==l||i[a(c)]?"Array"!==l||i[a(c)]||(i[a(c)]=!0,t(c,n,u,i)):(i[a(c)]=!0,t(c,n,null,i))}}},plugins:{},highlightAll:function(t,e){o.highlightAllUnder(document,t,e)},highlightAllUnder:function(t,e,n){var r={callback:n,container:t,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};o.hooks.run("before-highlightall",r),r.elements=Array.prototype.slice.apply(r.container.querySelectorAll(r.selector)),o.hooks.run("before-all-elements-highlight",r);for(var i,a=0;i=r.elements[a++];)o.highlightElement(i,!0===e,r.callback)},highlightElement:function(n,r,i){var a=o.util.getLanguage(n),u=o.languages[a];n.className=n.className.replace(e,"").replace(/\s+/g," ")+" language-"+a;var c=n.parentElement;c&&"pre"===c.nodeName.toLowerCase()&&(c.className=c.className.replace(e,"").replace(/\s+/g," ")+" language-"+a);var l={element:n,language:a,grammar:u,code:n.textContent};function s(t){l.highlightedCode=t,o.hooks.run("before-insert",l),l.element.innerHTML=l.highlightedCode,o.hooks.run("after-highlight",l),o.hooks.run("complete",l),i&&i.call(l.element)}if(o.hooks.run("before-sanity-check",l),!l.code)return o.hooks.run("complete",l),void(i&&i.call(l.element));if(o.hooks.run("before-highlight",l),l.grammar)if(r&&t.Worker){var f=new Worker(o.filename);f.onmessage=function(t){s(t.data)},f.postMessage(JSON.stringify({language:l.language,code:l.code,immediateClose:!0}))}else s(o.highlight(l.code,l.grammar,l.language));else s(o.util.encode(l.code))},highlight:function(t,e,n){var i={code:t,grammar:e,language:n};return o.hooks.run("before-tokenize",i),i.tokens=o.tokenize(i.code,i.grammar),o.hooks.run("after-tokenize",i),r.stringify(o.util.encode(i.tokens),i.language)},tokenize:function(t,e){var n=e.rest;if(n){for(var o in n)e[o]=n[o];delete e.rest}var r=new u;return c(r,r.head,t),a(t,r,e,r.head,0),function(t){var e=[],n=t.head.next;for(;n!==t.tail;)e.push(n.value),n=n.next;return e}(r)},hooks:{all:{},add:function(t,e){var n=o.hooks.all;n[t]=n[t]||[],n[t].push(e)},run:function(t,e){var n=o.hooks.all[t];if(n&&n.length)for(var r,i=0;r=n[i++];)r(e)}},Token:r};function r(t,e,n,o){this.type=t,this.content=e,this.alias=n,this.length=0|(o||"").length}function i(t,e,n,o){t.lastIndex=e;var r=t.exec(n);if(r&&o&&r[1]){var i=r[1].length;r.index+=i,r[0]=r[0].slice(i)}return r}function a(t,e,n,u,s,f){for(var d in n)if(n.hasOwnProperty(d)&&n[d]){var m=n[d];m=Array.isArray(m)?m:[m];for(var g=0;g<m.length;++g){if(f&&f.cause==d+","+g)return;var p=m[g],h=p.inside,v=!!p.lookbehind,b=!!p.greedy,x=p.alias;if(b&&!p.pattern.global){var y=p.pattern.toString().match(/[imsuy]*$/)[0];p.pattern=RegExp(p.pattern.source,y+"g")}for(var w=p.pattern||p,k=u.next,_=s;k!==e.tail&&!(f&&_>=f.reach);_+=k.value.length,k=k.next){var C=k.value;if(e.length>t.length)return;if(!(C instanceof r)){var S,O=1;if(b){if(!(S=i(w,_,t,v)))break;var z=S.index,T=S.index+S[0].length,M=_;for(M+=k.value.length;z>=M;)M+=(k=k.next).value.length;if(_=M-=k.value.length,k.value instanceof r)continue;for(var A=k;A!==e.tail&&(M<T||"string"==typeof A.value);A=A.next)O++,M+=A.value.length;O--,C=t.slice(_,M),S.index-=_}else if(!(S=i(w,0,C,v)))continue;z=S.index;var D=S[0],E=C.slice(0,z),P=C.slice(z+D.length),H=_+C.length;f&&H>f.reach&&(f.reach=H);var B=k.prev;E&&(B=c(e,B,E),_+=E.length),l(e,B,O),k=c(e,B,new r(d,h?o.tokenize(D,h):D,x,D)),P&&c(e,k,P),O>1&&a(t,e,n,k.prev,_,{cause:d+","+g,reach:H})}}}}}function u(){var t={value:null,prev:null,next:null},e={value:null,prev:t,next:null};t.next=e,this.head=t,this.tail=e,this.length=0}function c(t,e,n){var o=e.next,r={value:n,prev:e,next:o};return e.next=r,o.prev=r,t.length++,r}function l(t,e,n){for(var o=e.next,r=0;r<n&&o!==t.tail;r++)o=o.next;e.next=o,o.prev=e,t.length-=r}if(t.Prism=o,r.stringify=function t(e,n){if("string"==typeof e)return e;if(Array.isArray(e)){var r="";return e.forEach((function(e){r+=t(e,n)})),r}var i={type:e.type,content:t(e.content,n),tag:"span",classes:["token",e.type],attributes:{},language:n},a=e.alias;a&&(Array.isArray(a)?Array.prototype.push.apply(i.classes,a):i.classes.push(a)),o.hooks.run("wrap",i);var u="";for(var c in i.attributes)u+=" "+c+'="'+(i.attributes[c]||"").replace(/"/g,"&quot;")+'"';return"<"+i.tag+' class="'+i.classes.join(" ")+'"'+u+">"+i.content+"</"+i.tag+">"},!t.document)return t.addEventListener?(o.disableWorkerMessageHandler||t.addEventListener("message",(function(e){var n=JSON.parse(e.data),r=n.language,i=n.code,a=n.immediateClose;t.postMessage(o.highlight(i,o.languages[r],r)),a&&t.close()}),!1),o):o;var s=o.util.currentScript();function f(){o.manual||o.highlightAll()}if(s&&(o.filename=s.src,s.hasAttribute("data-manual")&&(o.manual=!0)),!o.manual){var d=document.readyState;"loading"===d||"interactive"===d&&s&&s.defer?document.addEventListener("DOMContentLoaded",f):window.requestAnimationFrame?window.requestAnimationFrame(f):window.setTimeout(f,16)}return o}("undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{});void 0!==e&&e.exports&&(e.exports=n),void 0!==t&&(t.Prism=n)}).call(this)}).call(this,void 0!==b?b:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(t,e,n){!function(t){var e=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char8_t|char16_t|char32_t|class|compl|concept|const|consteval|constexpr|constinit|const_cast|continue|co_await|co_return|co_yield|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|float|for|friend|goto|if|inline|int|int8_t|int16_t|int32_t|int64_t|uint8_t|uint16_t|uint32_t|uint64_t|long|mutable|namespace|new|noexcept|nullptr|operator|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/;t.languages.cpp=t.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,(function(){return e.source}))),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:e,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:true|false)\b/}),t.languages.insertBefore("cpp","string",{"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),t.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:t.languages.extend("cpp",{})}}),t.languages.insertBefore("inside","operator",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},t.languages.cpp["base-clause"])}(Prism)},{}],5:[function(t,e,n){!function(t){function e(t,e){return t.replace(/<<(\d+)>>/g,(function(t,n){return"(?:"+e[+n]+")"}))}function n(t,n,o){return RegExp(e(t,n),o||"")}function o(t,e){for(var n=0;n<e;n++)t=t.replace(/<<self>>/g,(function(){return"(?:"+t+")"}));return t.replace(/<<self>>/g,"[^\\s\\S]")}var r="bool byte char decimal double dynamic float int long object sbyte short string uint ulong ushort var void",i="class enum interface struct",a="add alias and ascending async await by descending from get global group into join let nameof not notnull on or orderby partial remove select set unmanaged value when where",u="abstract as base break case catch checked const continue default delegate do else event explicit extern finally fixed for foreach goto if implicit in internal is lock namespace new null operator out override params private protected public readonly ref return sealed sizeof stackalloc static switch this throw try typeof unchecked unsafe using virtual volatile while yield";function c(t){return"\\b(?:"+t.trim().replace(/ /g,"|")+")\\b"}var l=c(i),s=RegExp(c(r+" "+i+" "+a+" "+u)),f=c(i+" "+a+" "+u),d=c(r+" "+i+" "+u),m=o(/<(?:[^<>;=+\-*/%&|^]|<<self>>)*>/.source,2),g=o(/\((?:[^()]|<<self>>)*\)/.source,2),p=/@?\b[A-Za-z_]\w*\b/.source,h=e(/<<0>>(?:\s*<<1>>)?/.source,[p,m]),v=e(/(?!<<0>>)<<1>>(?:\s*\.\s*<<1>>)*/.source,[f,h]),b=/\[\s*(?:,\s*)*\]/.source,x=e(/<<0>>(?:\s*(?:\?\s*)?<<1>>)*(?:\s*\?)?/.source,[v,b]),y=e(/[^,()<>[\];=+\-*/%&|^]|<<0>>|<<1>>|<<2>>/.source,[m,g,b]),w=e(/\(<<0>>+(?:,<<0>>+)+\)/.source,[y]),k=e(/(?:<<0>>|<<1>>)(?:\s*(?:\?\s*)?<<2>>)*(?:\s*\?)?/.source,[w,v,b]),_={keyword:s,punctuation:/[<>()?,.:[\]]/},C=/'(?:[^\r\n'\\]|\\.|\\[Uux][\da-fA-F]{1,8})'/.source,S=/"(?:\\.|[^\\"\r\n])*"/.source,O=/@"(?:""|\\[\s\S]|[^\\"])*"(?!")/.source;t.languages.csharp=t.languages.extend("clike",{string:[{pattern:n(/(^|[^$\\])<<0>>/.source,[O]),lookbehind:!0,greedy:!0},{pattern:n(/(^|[^@$\\])<<0>>/.source,[S]),lookbehind:!0,greedy:!0},{pattern:RegExp(C),greedy:!0,alias:"character"}],"class-name":[{pattern:n(/(\busing\s+static\s+)<<0>>(?=\s*;)/.source,[v]),lookbehind:!0,inside:_},{pattern:n(/(\busing\s+<<0>>\s*=\s*)<<1>>(?=\s*;)/.source,[p,k]),lookbehind:!0,inside:_},{pattern:n(/(\busing\s+)<<0>>(?=\s*=)/.source,[p]),lookbehind:!0},{pattern:n(/(\b<<0>>\s+)<<1>>/.source,[l,h]),lookbehind:!0,inside:_},{pattern:n(/(\bcatch\s*\(\s*)<<0>>/.source,[v]),lookbehind:!0,inside:_},{pattern:n(/(\bwhere\s+)<<0>>/.source,[p]),lookbehind:!0},{pattern:n(/(\b(?:is(?:\s+not)?|as)\s+)<<0>>/.source,[x]),lookbehind:!0,inside:_},{pattern:n(/\b<<0>>(?=\s+(?!<<1>>)<<2>>(?:\s*[=,;:{)\]]|\s+(?:in|when)\b))/.source,[k,d,p]),inside:_}],keyword:s,number:/(?:\b0(?:x[\da-f_]*[\da-f]|b[01_]*[01])|(?:\B\.\d+(?:_+\d+)*|\b\d+(?:_+\d+)*(?:\.\d+(?:_+\d+)*)?)(?:e[-+]?\d+(?:_+\d+)*)?)(?:ul|lu|[dflmu])?\b/i,operator:/>>=?|<<=?|[-=]>|([-+&|])\1|~|\?\?=?|[-+*/%&|^!=<>]=?/,punctuation:/\?\.?|::|[{}[\];(),.:]/}),t.languages.insertBefore("csharp","number",{range:{pattern:/\.\./,alias:"operator"}}),t.languages.insertBefore("csharp","punctuation",{"named-parameter":{pattern:n(/([(,]\s*)<<0>>(?=\s*:)/.source,[p]),lookbehind:!0,alias:"punctuation"}}),t.languages.insertBefore("csharp","class-name",{namespace:{pattern:n(/(\b(?:namespace|using)\s+)<<0>>(?:\s*\.\s*<<0>>)*(?=\s*[;{])/.source,[p]),lookbehind:!0,inside:{punctuation:/\./}},"type-expression":{pattern:n(/(\b(?:default|typeof|sizeof)\s*\(\s*(?!\s))(?:[^()\s]|\s(?!\s)|<<0>>)*(?=\s*\))/.source,[g]),lookbehind:!0,alias:"class-name",inside:_},"return-type":{pattern:n(/<<0>>(?=\s+(?:<<1>>\s*(?:=>|[({]|\.\s*this\s*\[)|this\s*\[))/.source,[k,v]),inside:_,alias:"class-name"},"constructor-invocation":{pattern:n(/(\bnew\s+)<<0>>(?=\s*[[({])/.source,[k]),lookbehind:!0,inside:_,alias:"class-name"},"generic-method":{pattern:n(/<<0>>\s*<<1>>(?=\s*\()/.source,[p,m]),inside:{function:n(/^<<0>>/.source,[p]),generic:{pattern:RegExp(m),alias:"class-name",inside:_}}},"type-list":{pattern:n(/\b((?:<<0>>\s+<<1>>|where\s+<<2>>)\s*:\s*)(?:<<3>>|<<4>>)(?:\s*,\s*(?:<<3>>|<<4>>))*(?=\s*(?:where|[{;]|=>|$))/.source,[l,h,p,k,s.source]),lookbehind:!0,inside:{keyword:s,"class-name":{pattern:RegExp(k),greedy:!0,inside:_},punctuation:/,/}},preprocessor:{pattern:/(^\s*)#.*/m,lookbehind:!0,alias:"property",inside:{directive:{pattern:/(\s*#)\b(?:define|elif|else|endif|endregion|error|if|line|pragma|region|undef|warning)\b/,lookbehind:!0,alias:"keyword"}}}});var z=S+"|"+C,T=e(/\/(?![*/])|\/\/[^\r\n]*[\r\n]|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>/.source,[z]),M=o(e(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[T]),2),A=/\b(?:assembly|event|field|method|module|param|property|return|type)\b/.source,D=e(/<<0>>(?:\s*\(<<1>>*\))?/.source,[v,M]);t.languages.insertBefore("csharp","class-name",{attribute:{pattern:n(/((?:^|[^\s\w>)?])\s*\[\s*)(?:<<0>>\s*:\s*)?<<1>>(?:\s*,\s*<<1>>)*(?=\s*\])/.source,[A,D]),lookbehind:!0,greedy:!0,inside:{target:{pattern:n(/^<<0>>(?=\s*:)/.source,[A]),alias:"keyword"},"attribute-arguments":{pattern:n(/\(<<0>>*\)/.source,[M]),inside:t.languages.csharp},"class-name":{pattern:RegExp(v),inside:{punctuation:/\./}},punctuation:/[:,]/}}});var E=/:[^}\r\n]+/.source,P=o(e(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[T]),2),H=e(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[P,E]),B=o(e(/[^"'/()]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>|\(<<self>>*\)/.source,[z]),2),R=e(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[B,E]);function I(e,o){return{interpolation:{pattern:n(/((?:^|[^{])(?:\{\{)*)<<0>>/.source,[e]),lookbehind:!0,inside:{"format-string":{pattern:n(/(^\{(?:(?![}:])<<0>>)*)<<1>>(?=\}$)/.source,[o,E]),lookbehind:!0,inside:{punctuation:/^:/}},punctuation:/^\{|\}$/,expression:{pattern:/[\s\S]+/,alias:"language-csharp",inside:t.languages.csharp}}},string:/[\s\S]+/}}t.languages.insertBefore("csharp","string",{"interpolation-string":[{pattern:n(/(^|[^\\])(?:\$@|@\$)"(?:""|\\[\s\S]|\{\{|<<0>>|[^\\{"])*"/.source,[H]),lookbehind:!0,greedy:!0,inside:I(H,P)},{pattern:n(/(^|[^@\\])\$"(?:\\.|\{\{|<<0>>|[^\\"{])*"/.source,[R]),lookbehind:!0,greedy:!0,inside:I(R,B)}]})}(Prism),Prism.languages.dotnet=Prism.languages.cs=Prism.languages.csharp},{}],6:[function(t,e,n){!function(t){var e=/("|')(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/;t.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-](?:[^;{\s]|\s+(?![\s{]))*(?:;|(?=\s*\{))/,inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+e.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+e.source+"$"),alias:"url"}}},selector:RegExp("[^{}\\s](?:[^{};\"'\\s]|\\s+(?![\\s{])|"+e.source+")*(?=\\s*\\{)"),string:{pattern:e,greedy:!0},property:/(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,important:/!important\b/i,function:/[-a-z0-9]+(?=\()/i,punctuation:/[(){};:,]/},t.languages.css.atrule.inside.rest=t.languages.css;var n=t.languages.markup;n&&(n.tag.addInlined("style","css"),t.languages.insertBefore("inside","attr-value",{"style-attr":{pattern:/(^|["'\s])style\s*=\s*(?:"[^"]*"|'[^']*')/i,lookbehind:!0,inside:{"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{style:{pattern:/(["'])[\s\S]+(?=["']$)/,lookbehind:!0,alias:"language-css",inside:t.languages.css},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}},"attr-name":/^style/i}}},n.tag))}(Prism)},{}],7:[function(t,e,n){!function(t){var e=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,n=/(^|[^\w.])(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,o={pattern:RegExp(n+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};t.languages.java=t.languages.extend("clike",{"class-name":[o,{pattern:RegExp(n+/[A-Z]\w*(?=\s+\w+\s*[;,=())])/.source),lookbehind:!0,inside:o.inside}],keyword:e,function:[t.languages.clike.function,{pattern:/(\:\:\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0}}),t.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"}}),t.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.&?]|<(?:[\w\s,.&?]|<(?:[\w\s,.&?]|<[\w\s,.&?]*>)*>)*>)*>/,inside:{"class-name":o,keyword:e,punctuation:/[<>(),.:]/,operator:/[?&|]/}},namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,(function(){return e.source}))),lookbehind:!0,inside:{punctuation:/\./}}})}(Prism)},{}],8:[function(t,e,n){Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:prototype|constructor))/,lookbehind:!0}],keyword:[{pattern:/((?:^|})\s*)(?:catch|finally)\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|for|from|function|(?:get|set)(?=\s*[\[$\w\xA0-\uFFFF])|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:/\b(?:(?:0[xX](?:[\dA-Fa-f](?:_[\dA-Fa-f])?)+|0[bB](?:[01](?:_[01])?)+|0[oO](?:[0-7](?:_[0-7])?)+)n?|(?:\d(?:_\d)?)+n|NaN|Infinity)\b|(?:\b(?:\d(?:_\d)?)+\.?(?:\d(?:_\d)?)*|\B\.(?:\d(?:_\d)?)+)(?:[Ee][+-]?(?:\d(?:_\d)?)+)?/,operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|interface|extends|implements|instanceof|new)\s+)[\w.\\]+/,Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)\/(?:\[(?:[^\]\\\r\n]|\\.)*]|\\.|[^/\\\[\r\n])+\/[gimyus]{0,6}(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/,lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-flags":/[a-z]+$/,"regex-delimiter":/^\/|\/$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),Prism.languages.insertBefore("javascript","string",{"template-string":{pattern:/`(?:\\[\s\S]|\${(?:[^{}]|{(?:[^{}]|{[^}]*})*})+}|(?!\${)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\${(?:[^{}]|{(?:[^{}]|{[^}]*})*})+}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\${|}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}}}),Prism.languages.markup&&Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.js=Prism.languages.javascript},{}],9:[function(t,e,n){!function(t){function e(t,e){return"___"+t.toUpperCase()+e+"___"}Object.defineProperties(t.languages["markup-templating"]={},{buildPlaceholders:{value:function(n,o,r,i){if(n.language===o){var a=n.tokenStack=[];n.code=n.code.replace(r,(function(t){if("function"==typeof i&&!i(t))return t;for(var r,u=a.length;-1!==n.code.indexOf(r=e(o,u));)++u;return a[u]=t,r})),n.grammar=t.languages.markup}}},tokenizePlaceholders:{value:function(n,o){if(n.language===o&&n.tokenStack){n.grammar=t.languages[o];var r=0,i=Object.keys(n.tokenStack);!function a(u){for(var c=0;c<u.length&&!(r>=i.length);c++){var l=u[c];if("string"==typeof l||l.content&&"string"==typeof l.content){var s=i[r],f=n.tokenStack[s],d="string"==typeof l?l:l.content,m=e(o,s),g=d.indexOf(m);if(g>-1){++r;var p=d.substring(0,g),h=new t.Token(o,t.tokenize(f,n.grammar),"language-"+o,f),v=d.substring(g+m.length),b=[];p&&b.push.apply(b,a([p])),b.push(h),v&&b.push.apply(b,a([v])),"string"==typeof l?u.splice.apply(u,[c,1].concat(b)):l.content=b}}else l.content&&a(l.content)}return u}(n.tokens)}}}})}(Prism)},{}],10:[function(t,e,n){Prism.languages.markup={comment:/<!--[\s\S]*?-->/,prolog:/<\?[\s\S]+?\?>/,doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/,name:/[^\s<>'"]+/}},cdata:/<!\[CDATA\[[\s\S]*?]]>/i,tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},Prism.languages.markup.tag.inside["attr-value"].inside.entity=Prism.languages.markup.entity,Prism.languages.markup.doctype.inside["internal-subset"].inside=Prism.languages.markup,Prism.hooks.add("wrap",(function(t){"entity"===t.type&&(t.attributes.title=t.content.replace(/&amp;/,"&"))})),Object.defineProperty(Prism.languages.markup.tag,"addInlined",{value:function(t,e){var n={};n["language-"+e]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[e]},n.cdata=/^<!\[CDATA\[|\]\]>$/i;var o={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};o["language-"+e]={pattern:/[\s\S]+/,inside:Prism.languages[e]};var r={};r[t]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,(function(){return t})),"i"),lookbehind:!0,greedy:!0,inside:o},Prism.languages.insertBefore("markup","cdata",r)}}),Prism.languages.html=Prism.languages.markup,Prism.languages.mathml=Prism.languages.markup,Prism.languages.svg=Prism.languages.markup,Prism.languages.xml=Prism.languages.extend("markup",{}),Prism.languages.ssml=Prism.languages.xml,Prism.languages.atom=Prism.languages.xml,Prism.languages.rss=Prism.languages.xml},{}],11:[function(t,e,n){!function(t){var e=/\/\*[\s\S]*?\*\/|\/\/.*|#(?!\[).*/,n=[{pattern:/\b(?:false|true)\b/i,alias:"boolean"},/\b[A-Z_][A-Z0-9_]*\b(?!\s*\()/,/\b(?:null)\b/i],o=/\b0b[01]+\b|\b0x[\da-f]+\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+)(?:e[+-]?\d+)?/i,r=/<?=>|\?\?=?|\.{3}|\??->|[!=]=?=?|::|\*\*=?|--|\+\+|&&|\|\||<<|>>|[?~]|[/^|%*&<>.+-]=?/,i=/[{}\[\](),:;]/;t.languages.php={delimiter:{pattern:/\?>$|^<\?(?:php(?=\s)|=)?/i,alias:"important"},comment:e,variable:/\$+(?:\w+\b|(?={))/i,package:{pattern:/(namespace\s+|use\s+(?:function\s+)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,lookbehind:!0,inside:{punctuation:/\\/}},keyword:[{pattern:/(\(\s*)\b(?:bool|boolean|int|integer|float|string|object|array)\b(?=\s*\))/i,alias:"type-casting",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)\b(?:bool|int|float|string|object|array(?!\s*\()|mixed|self|static|callable|iterable|(?:null|false)(?=\s*\|))\b(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*[a-z0-9_|]\|\s*)(?:null|false)\b(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b(?:bool|int|float|string|object|void|array(?!\s*\()|mixed|self|static|callable|iterable|(?:null|false)(?=\s*\|))\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?[a-z0-9_|]\|\s*)(?:null|false)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/\b(?:bool|int|float|string|object|void|array(?!\s*\()|mixed|iterable|(?:null|false)(?=\s*\|))\b/i,alias:"type-declaration",greedy:!0},{pattern:/(\|\s*)(?:null|false)\b/i,alias:"type-declaration",greedy:!0,lookbehind:!0},{pattern:/\b(?:parent|self|static)(?=\s*::)/i,alias:"static-context",greedy:!0},/\b(?:__halt_compiler|abstract|and|array|as|break|callable|case|catch|class|clone|const|continue|declare|default|die|do|echo|else|elseif|empty|enddeclare|endfor|endforeach|endif|endswitch|endwhile|eval|exit|extends|final|finally|for|foreach|function|global|goto|if|implements|include|include_once|instanceof|insteadof|interface|isset|list|namespace|match|new|or|parent|print|private|protected|public|require|require_once|return|self|static|switch|throw|trait|try|unset|use|var|while|xor|yield)\b/i],"argument-name":/\b[a-z_]\w*(?=\s*:(?!:))/i,"class-name":[{pattern:/(\b(?:class|interface|extends|implements|trait|instanceof|new(?!\s+self|\s+static))\s+|\bcatch\s*\()\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/(\|\s*)\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/\b[a-z_]\w*(?!\\)\b(?=\s*\|)/i,greedy:!0},{pattern:/(\|\s*)(?:\\?\b[a-z_]\w*)+\b/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(?:\\?\b[a-z_]\w*)+\b(?=\s*\|)/i,alias:"class-name-fully-qualified",greedy:!0,inside:{punctuation:/\\/}},{pattern:/(\b(?:extends|implements|instanceof|new(?!\s+self\b|\s+static\b))\s+|\bcatch\s*\()(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*\$)/i,alias:"type-declaration",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-declaration"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*::)/i,alias:"static-context",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*::)/i,alias:["class-name-fully-qualified","static-context"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/([(,?]\s*)[a-z_]\w*(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-hint"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b[a-z_]\w*(?!\\)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:["class-name-fully-qualified","return-type"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:n,function:/\w+\s*(?=\()/,property:{pattern:/(->)[\w]+/,lookbehind:!0},number:o,operator:r,punctuation:i};var a={pattern:/{\$(?:{(?:{[^{}]+}|[^{}]+)}|[^{}])+}|(^|[^\\{])\$+(?:\w+(?:\[[^\r\n\[\]]+\]|->\w+)*)/,lookbehind:!0,inside:t.languages.php},u=[{pattern:/<<<'([^']+)'[\r\n](?:.*[\r\n])*?\1;/,alias:"nowdoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<'[^']+'|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<'?|[';]$/}}}},{pattern:/<<<(?:"([^"]+)"[\r\n](?:.*[\r\n])*?\1;|([a-z_]\w*)[\r\n](?:.*[\r\n])*?\2;)/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<(?:"[^"]+"|[a-z_]\w*)|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<"?|[";]$/}},interpolation:a}},{pattern:/`(?:\\[\s\S]|[^\\`])*`/,alias:"backtick-quoted-string",greedy:!0},{pattern:/'(?:\\[\s\S]|[^\\'])*'/,alias:"single-quoted-string",greedy:!0},{pattern:/"(?:\\[\s\S]|[^\\"])*"/,alias:"double-quoted-string",greedy:!0,inside:{interpolation:a}}];t.languages.insertBefore("php","variable",{string:u}),t.languages.insertBefore("php","variable",{attribute:{pattern:/#\[(?:[^"'\/#]|\/(?![*/])|\/\/.*$|#(?!\[).*$|\/\*(?:[^*]|\*(?!\/))*\*\/|"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*')+\](?=\s*[a-z$#])/im,greedy:!0,inside:{"attribute-content":{pattern:/^(#\[)[\s\S]+(?=]$)/,lookbehind:!0,inside:{comment:e,string:u,"attribute-class-name":[{pattern:/([^:]|^)\b[a-z_]\w*(?!\\)\b/i,alias:"class-name",greedy:!0,lookbehind:!0},{pattern:/([^:]|^)(?:\\?\b[a-z_]\w*)+/i,alias:["class-name","class-name-fully-qualified"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:n,number:o,operator:r,punctuation:i}},delimiter:{pattern:/^#\[|]$/,alias:"punctuation"}}}}),t.hooks.add("before-tokenize",(function(e){if(/<\?/.test(e.code)){t.languages["markup-templating"].buildPlaceholders(e,"php",/<\?(?:[^"'/#]|\/(?![*/])|("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|(?:\/\/|#(?!\[))(?:[^?\n\r]|\?(?!>))*(?=$|\?>|[\r\n])|#\[|\/\*(?:[^*]|\*(?!\/))*(?:\*\/|$))*?(?:\?>|$)/gi)}})),t.hooks.add("after-tokenize",(function(e){t.languages["markup-templating"].tokenizePlaceholders(e,"php")}))}(Prism)},{}],12:[function(t,e,n){Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0},"string-interpolation":{pattern:/(?:f|rf|fr)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:{{)*){(?!{)(?:[^{}]|{(?!{)(?:[^{}]|{(?!{)(?:[^{}])+})+})+}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|rb|br)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|rb|br)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^\s*)@\w+(?:\.\w+)*/im,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:and|as|assert|async|await|break|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:True|False|None)\b/,number:/(?:\b(?=\d)|\B(?=\.))(?:0[bo])?(?:(?:\d|0x[\da-f])[\da-f]*(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?j?\b/i,operator:/[-+%=]=?|!=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python},{}],13:[function(t,e,n){!function(t){t.languages.ruby=t.languages.extend("clike",{comment:[/#.*/,{pattern:/^=begin\s[\s\S]*?^=end/m,greedy:!0}],"class-name":{pattern:/(\b(?:class)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:alias|and|BEGIN|begin|break|case|class|def|define_method|defined|do|each|else|elsif|END|end|ensure|extend|for|if|in|include|module|new|next|nil|not|or|prepend|protected|private|public|raise|redo|require|rescue|retry|return|self|super|then|throw|undef|unless|until|when|while|yield)\b/});var e={pattern:/#\{[^}]+\}/,inside:{delimiter:{pattern:/^#\{|\}$/,alias:"tag"},rest:t.languages.ruby}};delete t.languages.ruby.function,t.languages.insertBefore("ruby","keyword",{regex:[{pattern:RegExp(/%r/.source+"(?:"+[/([^a-zA-Z0-9\s{(\[<])(?:(?!\1)[^\\]|\\[\s\S])*\1[gim]{0,3}/.source,/\((?:[^()\\]|\\[\s\S])*\)[gim]{0,3}/.source,/\{(?:[^#{}\\]|#(?:\{[^}]+\})?|\\[\s\S])*\}[gim]{0,3}/.source,/\[(?:[^\[\]\\]|\\[\s\S])*\][gim]{0,3}/.source,/<(?:[^<>\\]|\\[\s\S])*>[gim]{0,3}/.source].join("|")+")"),greedy:!0,inside:{interpolation:e}},{pattern:/(^|[^/])\/(?!\/)(?:\[[^\r\n\]]+\]|\\.|[^[/\\\r\n])+\/[gim]{0,3}(?=\s*(?:$|[\r\n,.;})]))/,lookbehind:!0,greedy:!0}],variable:/[@$]+[a-zA-Z_]\w*(?:[?!]|\b)/,symbol:{pattern:/(^|[^:]):[a-zA-Z_]\w*(?:[?!]|\b)/,lookbehind:!0},"method-definition":{pattern:/(\bdef\s+)[\w.]+/,lookbehind:!0,inside:{function:/\w+$/,rest:t.languages.ruby}}}),t.languages.insertBefore("ruby","number",{builtin:/\b(?:Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Stat|Fixnum|Float|Hash|Integer|IO|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|String|Struct|TMS|Symbol|ThreadGroup|Thread|Time|TrueClass)\b/,constant:/\b[A-Z]\w*(?:[?!]|\b)/}),t.languages.ruby.string=[{pattern:RegExp(/%[qQiIwWxs]?/.source+"(?:"+[/([^a-zA-Z0-9\s{(\[<])(?:(?!\1)[^\\]|\\[\s\S])*\1/.source,/\((?:[^()\\]|\\[\s\S])*\)/.source,/\{(?:[^#{}\\]|#(?:\{[^}]+\})?|\\[\s\S])*\}/.source,/\[(?:[^\[\]\\]|\\[\s\S])*\]/.source,/<(?:[^<>\\]|\\[\s\S])*>/.source].join("|")+")"),greedy:!0,inside:{interpolation:e}},{pattern:/("|')(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|(?!\1)[^\\#\r\n])*\1/,greedy:!0,inside:{interpolation:e}}],t.languages.rb=t.languages.ruby}(Prism)},{}],14:[function(t,e,n){var o=t("prismjs/components/prism-core");t("prismjs/components/prism-clike"),t("prismjs/components/prism-markup-templating"),t("prismjs/components/prism-c"),t("prismjs/components/prism-cpp"),t("prismjs/components/prism-csharp"),t("prismjs/components/prism-css"),t("prismjs/components/prism-java"),t("prismjs/components/prism-javascript"),t("prismjs/components/prism-markup"),t("prismjs/components/prism-php"),t("prismjs/components/prism-python"),t("prismjs/components/prism-ruby"),e.exports={boltExport:o}},{"prismjs/components/prism-c":1,"prismjs/components/prism-clike":2,"prismjs/components/prism-core":3,"prismjs/components/prism-cpp":4,"prismjs/components/prism-csharp":5,"prismjs/components/prism-css":6,"prismjs/components/prism-java":7,"prismjs/components/prism-javascript":8,"prismjs/components/prism-markup":10,"prismjs/components/prism-markup-templating":9,"prismjs/components/prism-php":11,"prismjs/components/prism-python":12,"prismjs/components/prism-ruby":13}]},{},[14])(14)}));var a=window.Prism;window.Prism=i}(void 0,h,v,void 0);var x=v.exports.boltExport,y=function(t){return p.Prism&&function(t){return t.getParam("codesample_global_prismjs",!1,"boolean")}(t)?p.Prism:x},w=function(t){var e=t.selection?t.selection.getNode():null;return m(e)?l(e):s()},k=function(t){var e=function(t){var e=function(t){return t.getParam("codesample_languages")}(t);return e||[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"}]}(t),n=f(e).fold((function(){return""}),(function(t){return t.value})),o=function(t,e){return w(t).fold((function(){return e}),(function(t){var n=t.className.match(/language-(\w+)/);return n?n[1]:e}))}(t,n),r=function(t){return w(t).fold((function(){return""}),(function(t){return t.textContent}))}(t);t.windowManager.open({title:"Insert/Edit Code Sample",size:"large",body:{type:"panel",items:[{type:"selectbox",name:"language",label:"Language",items:e},{type:"textarea",name:"code",label:"Code view"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{language:o,code:r},onSubmit:function(e){var n=e.getData();!function(t,e,n){t.undoManager.transact((function(){var o=w(t);return n=d.DOM.encode(n),o.fold((function(){t.insertContent('<pre id="__new" class="language-'+e+'">'+n+"</pre>"),t.selection.select(t.$("#__new").removeAttr("id")[0])}),(function(o){t.dom.setAttrib(o,"class","language-"+e),o.innerHTML=n,y(t).highlightElement(o),t.selection.select(o)}))}))}(t,n.language,n.code),e.close()}})};e.add("codesample",(function(t){!function(t){var e=t.$;t.on("PreProcess",(function(t){e("pre[contenteditable=false]",t.node).filter(g(m)).each((function(t,n){var o=e(n),r=n.textContent;o.attr("class",e.trim(o.attr("class"))),o.removeAttr("contentEditable"),o.empty().append(e("<code></code>").each((function(){this.textContent=r})))}))})),t.on("SetContent",(function(){var n=e("pre").filter(g(m)).filter((function(t,e){return"false"!==e.contentEditable}));n.length&&t.undoManager.transact((function(){n.each((function(n,o){e(o).find("br").each((function(e,n){n.parentNode.replaceChild(t.getDoc().createTextNode("\n"),n)})),o.contentEditable="false",o.innerHTML=t.dom.encode(o.textContent),y(t).highlightElement(o),o.className=e.trim(o.className)}))}))}))}(t),function(t){t.ui.registry.addToggleButton("codesample",{icon:"code-sample",tooltip:"Insert/edit code sample",onAction:function(){return k(t)},onSetup:function(e){var n=function(){e.setActive(function(t){var e=t.selection.getStart();return t.dom.is(e,'pre[class*="language-"]')}(t))};return t.on("NodeChange",n),function(){return t.off("NodeChange",n)}}}),t.ui.registry.addMenuItem("codesample",{text:"Code sample...",icon:"code-sample",onAction:function(){return k(t)}})}(t),function(t){t.addCommand("codesample",(function(){var e=t.selection.getNode();t.selection.isCollapsed()||m(e)?k(t):t.formatter.toggle("code")}))}(t),t.on("dblclick",(function(e){m(e.target)&&k(t)}))}))}(),function(){var t,e,n=tinymce.util.Tools.resolve("tinymce.PluginManager"),o=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),r=tinymce.util.Tools.resolve("tinymce.util.I18n"),i=tinymce.util.Tools.resolve("tinymce.util.Tools"),a=function(t){return t.getParam("toc_class","mce-toc")},u=function(t){var e=t.getParam("toc_header","h2");return/^h[1-6]$/.test(e)?e:"h2"},c=(t="mcetoc_",e=0,function(){var n=(new Date).getTime().toString(32);return t+n+(e++).toString(32)}),l=function(t){var e=a(t),n=u(t),o=function(t){var e,n=[];for(e=1;e<=t;e++)n.push("h"+e);return n.join(",")}(function(t){var e=parseInt(t.getParam("toc_depth","3"),10);return e>=1&&e<=9?e:3}(t)),r=t.$(o);return r.length&&/^h[1-9]$/i.test(n)&&(r=r.filter((function(n,o){return!t.dom.hasClass(o.parentNode,e)}))),i.map(r,(function(e){var n=e.id;return{id:n||c(),level:parseInt(e.nodeName.replace(/^H/i,""),10),title:t.$.text(e),element:e}}))},s=function(t){var e,n,i,a,c,s,f,d="",m=l(t),g=function(t){var e,n=9;for(e=0;e<t.length;e++)if(t[e].level<n&&(n=t[e].level),1===n)return n;return n}(m)-1;if(!m.length)return"";for(d+=(c=u(t),s=r.translate("Table of Contents"),f="</"+c+">","<"+c+' contenteditable="true">'+o.DOM.encode(s)+f),e=0;e<m.length;e++){if((i=m[e]).element.id=i.id,a=m[e+1]&&m[e+1].level,g===i.level)d+="<li>";else for(n=g;n<i.level;n++)d+="<ul><li>";if(d+='<a href="#'+i.id+'">'+i.title+"</a>",a!==i.level&&a)for(n=i.level;n>a;n--)d+="</li></ul><li>";else d+="</li>",a||(d+="</ul>");g=i.level}return d},f=function(t){var e=a(t),n=t.$("."+e);!function(t,e){return!e.length||t.dom.getParents(e[0],".mce-offscreen-selection").length>0}(t,n)?d(t):t.insertContent(function(t){var e=s(t);return'<div class="'+t.dom.encode(a(t))+'" contenteditable="false">'+e+"</div>"}(t))},d=function(t){var e=a(t),n=t.$("."+e);n.length&&t.undoManager.transact((function(){n.html(s(t))}))},m=function(t){return function(e){var n=function(){return e.setDisabled(t.mode.isReadOnly()||!function(t){return l(t).length>0}(t))};return n(),t.on("LoadContent SetContent change",n),function(){return t.on("LoadContent SetContent change",n)}}},g=function(t){return function(e){return e&&t.dom.is(e,"."+a(t))&&t.getBody().contains(e)}};n.add("toc",(function(t){!function(t){t.addCommand("mceInsertToc",(function(){f(t)})),t.addCommand("mceUpdateToc",(function(){d(t)}))}(t),function(t){t.ui.registry.addButton("toc",{icon:"toc",tooltip:"Table of contents",onAction:function(){return t.execCommand("mceInsertToc")},onSetup:m(t)}),t.ui.registry.addButton("tocupdate",{icon:"reload",tooltip:"Update",onAction:function(){return t.execCommand("mceUpdateToc")}}),t.ui.registry.addMenuItem("toc",{icon:"toc",text:"Table of contents",onAction:function(){return t.execCommand("mceInsertToc")},onSetup:m(t)}),t.ui.registry.addContextToolbar("toc",{items:"tocupdate",predicate:g(t),scope:"node",position:"node"})}(t),function(t){var e=t.$,n=a(t);t.on("PreProcess",(function(t){var o=e("."+n,t.node);o.length&&(o.removeAttr("contentEditable"),o.find("[contenteditable]").removeAttr("contentEditable"))})),t.on("SetContent",(function(){var t=e("."+n);t.length&&(t.attr("contentEditable",!1),t.children(":first-child").attr("contentEditable",!0))}))}(t)}))}(),function(){var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=tinymce.util.Tools.resolve("tinymce.Env"),n=tinymce.util.Tools.resolve("tinymce.util.Delay"),o=function(t){return t.getParam("min_height",t.getElement().offsetHeight,"number")},r=function t(e,o,r,i,a){n.setEditorTimeout(e,(function(){u(e,o),r--?t(e,o,r,i,a):a&&a()}),i)},i=function(t,e){var n=t.getBody();n&&(n.style.overflowY=e?"":"hidden",e||(n.scrollTop=0))},a=function(t,e,n,o){var r=parseInt(t.getStyle(e,n,o),10);return isNaN(r)?0:r},u=function t(n,r){var u=n.dom,c=n.getDoc();if(c)if(function(t){return t.plugins.fullscreen&&t.plugins.fullscreen.isFullscreen()}(n))i(n,!0);else{var l=c.documentElement,s=function(t){return t.getParam("autoresize_bottom_margin",50,"number")}(n),f=o(n),d=a(u,l,"margin-top",!0),m=a(u,l,"margin-bottom",!0),g=l.offsetHeight+d+m+s;g<0&&(g=0);var p=n.getContainer().offsetHeight-n.getContentAreaContainer().offsetHeight;g+p>o(n)&&(f=g+p);var h=function(t){return t.getParam("max_height",0,"number")}(n);if(h&&f>h?(f=h,i(n,!0)):i(n,!1),f!==r.get()){var v=f-r.get();if(u.setStyle(n.getContainer(),"height",f+"px"),r.set(f),function(t){t.fire("ResizeEditor")}(n),e.browser.isSafari()&&e.mac){var b=n.getWin();b.scrollTo(b.pageXOffset,b.pageYOffset)}n.hasFocus()&&n.selection.scrollIntoView(n.selection.getNode()),e.webkit&&v<0&&t(n,r)}}};t.add("autoresize",(function(t){if(t.settings.hasOwnProperty("resize")||(t.settings.resize=!1),!t.inline){var e=(n=0,{get:function(){return n},set:function(t){n=t}});!function(t,e){t.addCommand("mceAutoResize",(function(){u(t,e)}))}(t,e),function(t,e){t.on("init",(function(){var e=function(t){return t.getParam("autoresize_overflow_padding",1,"number")}(t),n=t.dom;n.setStyles(t.getDoc().documentElement,{height:"auto"}),n.setStyles(t.getBody(),{paddingLeft:e,paddingRight:e,"min-height":0})})),t.on("NodeChange SetContent keyup FullscreenStateChanged ResizeContent",(function(){u(t,e)})),function(t){return t.getParam("autoresize_on_init",!0,"boolean")}(t)&&t.on("init",(function(){r(t,e,20,100,(function(){r(t,e,5,1e3)}))}))}(t,e)}var n}))}(),function(){var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=tinymce.util.Tools.resolve("tinymce.Env"),n=function(t,e){if(e<0&&(e=0),3===t.nodeType){var n=t.data.length;e>n&&(e=n)}return e},o=function(t,e,o){1!==e.nodeType||e.hasChildNodes()?t.setStart(e,n(e,o)):t.setStartBefore(e)},r=function(t,e,o){1!==e.nodeType||e.hasChildNodes()?t.setEnd(e,n(e,o)):t.setEndAfter(e)},i=function(t,e,n){var i,a,u,c,l,s,f,d=function(t){return t.getParam("autolink_pattern",/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+\-]+@(?!.*@))(.+)$/i)}(t),m=function(t){return t.getParam("default_link_target",!1)}(t);if("A"!==t.selection.getNode().tagName){var g=t.selection.getRng().cloneRange();if(g.startOffset<5){if(!(l=g.endContainer.previousSibling)){if(!g.endContainer.firstChild||!g.endContainer.firstChild.nextSibling)return;l=g.endContainer.firstChild.nextSibling}if(s=l.length,o(g,l,s),r(g,l,s),g.endOffset<5)return;i=g.endOffset,a=l}else{if(3!==(a=g.endContainer).nodeType&&a.firstChild){for(;3!==a.nodeType&&a.firstChild;)a=a.firstChild;3===a.nodeType&&(o(g,a,0),r(g,a,a.nodeValue.length))}i=1===g.endOffset?2:g.endOffset-1-e}var p=i;do{o(g,a,i>=2?i-2:0),r(g,a,i>=1?i-1:0),i-=1,f=g.toString()}while(" "!==f&&""!==f&&160!==f.charCodeAt(0)&&i-2>=0&&f!==n);!function(t,e){return t===e||" "===t||160===t.charCodeAt(0)}(g.toString(),n)?0===g.startOffset?(o(g,a,0),r(g,a,p)):(o(g,a,i),r(g,a,p)):(o(g,a,i),r(g,a,p),i+=1),"."===(c=g.toString()).charAt(c.length-1)&&r(g,a,p-1);var h=(c=g.toString().trim()).match(d),v=function(t){return t.getParam("link_default_protocol","http","string")}(t);h&&("www."===h[1]?h[1]=v+"://www.":/@$/.test(h[1])&&!/^mailto:/.test(h[1])&&(h[1]="mailto:"+h[1]),u=t.selection.getBookmark(),t.selection.setRng(g),t.execCommand("createlink",!1,h[1]+h[2]),!1!==m&&t.dom.setAttrib(t.selection.getNode(),"target",m),t.selection.moveToBookmark(u),t.nodeChanged())}},a=function(t){var n;t.on("keydown",(function(e){if(13===e.keyCode)return function(t){i(t,-1,"")}(t)})),e.browser.isIE()?t.on("focus",(function(){if(!n){n=!0;try{t.execCommand("AutoUrlDetect",!1,!0)}catch(e){}}})):(t.on("keypress",(function(e){if(41===e.keyCode)return function(t){i(t,-1,"(")}(t)})),t.on("keyup",(function(e){if(32===e.keyCode)return function(t){i(t,0,"")}(t)})))};t.add("autolink",(function(t){a(t)}))}(),
/*! 
            *  @plugin @tinymce-plugin/tp-letterspacing
            *  @version 0.0.9 (2022-4-19)
            *  @description 
            *  @copyright (2022) Five(Li Hailong) https://github.com/tinymce-plugin/tp-letterspacing
            */
ee=function(t,e){t.undoManager.transact((function(){t.focus(),t.execCommand("tpLetterspacing",!1,e)}))},te={name:"Letterspacing",registryName:"tpLetterspacing",title:"Letter Spacing",repo:"https://github.com/tinymce-plugin/tp-letterspacing",icon:'<svg t="1610616201691" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="969" width="24" height="24"><path d="M682.666667 704l128 106.666667-128 106.666666v-85.333333H341.333333v85.333333L213.333333 810.666667l128-106.666667v85.333333h341.333334v-85.333333zM170.666667 170.666667v682.666666H85.333333V170.666667h85.333334z m768 0v682.666666h-85.333334V170.666667h85.333334z m-394.666667 0l202.666667 469.333333h-89.6l-38.4-93.866667h-213.333334L366.933333 640H277.333333l202.666667-469.333333h64zM512 255.146667L432.213333 469.333333h159.573334L512 255.146667z" p-id="970" fill="#222f3e"></path></svg>'},tinymce.PluginManager.add(te.registryName,(function(t,e){return function(t,e){t.ui.registry.getAll().icons[e.registryName]||t.ui.registry.addIcon(e.registryName,e.icon);var n,o,r,i=tinymce.util.Tools.resolve("tinymce.util.Tools"),a=t.tp$.Tools,u=function(t){return t.length>0?t[0]:""},c=function(t){return t.getParam("tp-letterspacing","0px 1px 2px 4px 6px 8px 10px 20px 40px")}(t).split(" "),l=(n=u(c),o=n,r=n,{get:function(){return o},set:function(t,e){o=t,e&&(r=e)},getAction:function(){return r}});t.ui.registry.addSplitButton(e.registryName,{icon:e.registryName,tooltip:e.title,select:function(t){return t===l.get()},fetch:function(e){var n=t.selection.getStart(),o=-1;if(-1==o){var r=a.getCurrentValue(n,"letter-spacing");o=r||u(c)}e(i.map(c,(function(t){return o==t&&l.set(t),{type:"choiceitem",text:t,value:t}})))},onAction:function(){ee(t,l.getAction())},onItemAction:function(e,n){l.set(n,n),ee(t,n)}}),t.ui.registry.addNestedMenuItem(e.registryName,{text:e.title,icon:e.registryName,getSubmenuItems:function(){var e=t.selection.getStart(),n=-1;if(-1==n){var o=a.getCurrentValue(e,"letter-spacing");n=o||u(c)}return i.map(c,(function(e){return{type:"togglemenuitem",text:e,active:n===e,onAction:function(){l.set(e,e),ee(t,e)}}}))}})}(t,te),function(t,e){t.addCommand("mce".concat(e.registryName.substring(0,1).toUpperCase()+e.registryName.substring(1)),(function(e,n){ee(t,n)}))}(t,te),{getMetadata:function(){return{name:te.name,url:te.repo}}}}));var ne={components:{TinymceVue:n},name:"vueDemo2",data:function(){return{editor:"",content:"dsdsdsdsd",content2:"",vueDemoOpt:"",vueDemoOpt2:{min_height:200,max_height:700,skeletonScreen:!0,external_plugins:{tpCollapse:"/tinymce/plugins/tpCollapse/plugin.js",tpTabs:"/tinymce/plugins/tpTabs/plugin.js",tpButtons:"/tinymce/plugins/tpButtons/plugin.js",tpIconlists:"/tinymce/plugins/tpIconlists/plugin.js",tpParagraph:"/tinymce/plugins/tpParagraph/plugin.js",tpIconfont:"/tinymce/plugins/tpIconfont/plugin.js",tpColumns:"/tinymce/plugins/tpColumns/plugin.js",extendgroups:"/tinymce/plugins/extendgroups/plugin.js"},extend_groups_addicon:{mygroupsicon:'<img  src="https://avatars.githubusercontent.com/u/87648636?s=60&v=4" style="width:20px;" >'},extend_groups:{mygroups:{icon:"mygroupsicon",tooltip:"mygroupsicon",isSelect:!0,type:"togglemenuitem",items:[{type:"selectItem",text:"",value:"12px 14px 16px 18px 24px 36px 48px 56px 72px",default:"16px",styleSelector:"font-size",onAction:function(t,e){t.formatter.apply("fontsize",{value:e})}},{icon:"underline",text:"",value:"underline",styleSelector:"text-decoration"},{icon:"bold",text:"",value:"bold",selector:"strong"},{icon:"italic",text:"",value:"italic",selector:"em"}]}},language:"zh_CN",plugins:"code  tpIndent2em tpLetterspacing autoresize  lists advlist tpImportword   preview",toolbar:["code formatselect fontselect  fontsizeselect  forecolor backcolor bold italic underline strikethrough tpIndent2em tpLetterspacing tpImportword  tpCollapse  mygroups Preview"]}}},methods:{important:function(){tinyMCE.activeEditor.execCommand("mceImportword")},init:function(){var t=this;t.vueDemoOpt={toolbar_groups:{formatting:{text:"",tooltip:"Formatting",items:"bold italic underline | superscript subscript"},alignment:{icon:"align-left",tooltip:"alignment",items:"alignleft aligncenter alignright alignjustify"}},extend_groups_addicon:{mygroupsicon:'<img  src="https://avatars.githubusercontent.com/u/87648636?s=60&v=4" style="width:20px;" >'},extend_groups:{mygroups:{icon:"mygroupsicon",tooltip:"mygroupsicon",isSelect:!0,type:"togglemenuitem",items:[{type:"selectItem",text:"",value:"12px 14px 16px 18px 24px 36px 48px 56px 72px",default:"16px",styleSelector:"font-size",onAction:function(t,e){t.formatter.apply("fontsize",{value:e})}},{icon:"underline",text:"",value:"underline",styleSelector:"text-decoration"},{icon:"bold",text:"",value:"bold",selector:"strong"},{icon:"italic",text:"",value:"italic",selector:"em"}]}},plugins:"print  preview extendgroups clearhtml searchreplace  insertdatetime autolink layout fullscreen line-height image imagetools media upfile link   autosave code  table  advlist lists checklist hr emoticons autosave bdmap indent2em   axupimgs  letterspacing  quickbars attachment wordcount template  autoresize importword searchreplace pagebreak pageembed  tpCollapse tpTabs tpButtons tpIconlists",toolbar:["code formatselect fontselect  fontsizeselect   forecolor backcolor bold italic underline strikethrough link alignment alignmentdrop undo redo  restoredraft layout upfile importword hr lineheight letterspacing line-height indent2em table bdmap image media attachment outdent indent blockquote subscript superscript  emoticons mygroups  preview searchreplace","pagebreak template pageembed bullist numlist checklist tpCollapse tpTabs tpButtons tpIconlists"],branding:!1,menubar:!1,language:"zh_CN",schema:"html5",min_height:400,max_height:700,template_replace_values:{username:"Jack Black",staffid:"991234",inboth_username:"Famous Person",inboth_staffid:"2213"},template_preview_replace_values:{preview_username:"Jack Black",preview_staffid:"991234",inboth_username:"Famous Person",inboth_staffid:"2213"},templates:[{title:"Date modified example",description:"Adds a timestamp indicating the last time the document modified.",content:'<p>Last Modified: <time class="mdate">This will be replaced with the date modified.</time></p>'},{title:"Replace values example",description:"These values will be replaced when the template is inserted into the editor content.",content:"<p>Name: {$username}, StaffID: {$staffid}</p>"},{title:"Replace values preview example",description:"These values are replaced in the preview, but not when inserted into the editor content.",content:"<p>Name: {$preview_username}, StaffID: {$preview_staffid}</p>"},{title:"Replace values preview and content example",description:"These values are replaced in the preview, and in the content.",content:"<p>Name: {$inboth_username}, StaffID: {$inboth_staffid}</p>"}],table_default_attributes:{border:"1"},table_default_styles:{"border-collapse":"collapse",width:"100%"},table_header_type:"sectionCells",table_responsive_width:!0,skeletonScreen:!0,images_upload_handler:function(e,n,o,r){var i=e.blob(),a=new FileReader,u="";a.onload=function(t){u=t.target.result};var c=new FormData;c.append("file",i),t.$http({data:c,type:"GET",url:"/tinymce/api/file.json",header:{"Content-Type":"multipart/form-data"},onUploadProgress:function(t){r(t+"%")}}).then((function(t){200==t.code?n(u):o(":"+c.data)})).catch((function(t){o(":"+t.message)})),a.readAsDataURL(i)},file_picker_callback:function(e,n,o){var r=document.createElement("input");r.setAttribute("type","file"),r.setAttribute("accept",".pdf, .txt, .zip, .rar, .7z, .doc, .docx, .xls, .xlsx, .ppt, .pptx, .mp3, .mp4"),r.click(),r.onchange=function(){var n=this.files[0],o=new FormData;o.append("file",n),t.$http.get({data:o,url:"./api/file.json",header:{"Content-Type":"multipart/form-data"},xhr:t.xhrOnProgress((function(t){var e=(t.loaded/t.total*100|0)+"%";progressCallback(e)}))}).then((function(t){e(t.data,{text:t.data})})).catch((function(t){failFun(":"+t.message)}))}},file_callback:function(e,n){var o=new FormData;o.append("file",e),console.log(e),t.$http({data:o,type:"GET",url:"/tinymce/api/file.json",header:{"Content-Type":"multipart/form-data"}}).then((function(t){console.log(t),200==t.code&&n(t.data,{text:e.name})})).catch((function(t){}))},tp_attachment_assets_path:"./plugins/attachment/icons",tp_attachment_icons_path:"https://unpkg.com/@npkg/tinymce-plugins/plugins/attachment/icons",tp_attachment_upload_handler:function(e,n,o,r){var i=new FormData;i.append("file",e),t.$http({data:i,type:"GET",url:"/tinymce/api/file.json",header:{"Content-Type":"multipart/form-data"},xhr:t.xhrOnProgress((function(t){var e=(t.loaded/t.total*100|0)+"%";r(e)}))}).then((function(t){200==t.code?n(t.data):o(":"+t.data)})).catch((function(t){o(":"+t.message)}))},attachment_max_size:5009715200}}},created:function(){this.init()}},oe={class:"vueDemo2"},re=function(t){return l("data-v-1dd532a0"),t=t(),s(),t}((function(){return u("h1",null,"2",-1)})),ie=["innerHTML"];e("default",r(ne,[["render",function(t,e,n,o,r,l){var s=i("tinymce-vue"),d=i("PagesRouter");return f(),a("div",null,[u("div",oe,[c(s,{modelValue:r.content2,"onUpdate:modelValue":e[0]||(e[0]=function(t){return r.content2=t}),init:r.vueDemoOpt2},null,8,["modelValue","init"])]),re,u("div",{innerHTML:r.content2},null,8,ie),c(d,{pagesName:"vuedemo2"})])}],["__scopeId","data-v-1dd532a0"]]))}}}))}();
