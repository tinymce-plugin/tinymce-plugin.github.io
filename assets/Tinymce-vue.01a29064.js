import{o as r,c as a,a as s,b as c,n as l,p as d,e as m}from"./vendor.38666b3a.js";import{_ as p}from"./index.39ad8594.js";const u=JSON.stringify({base_url:"/tinymce",branding:!1,language:"zh_CN",menubar:!1,schema:"html5",plugins:"tp code hr",table_default_attributes:{border:"1"},table_default_styles:{"border-collapse":"collapse",width:"100%"},table_header_type:"sectionCells",table_responsive_width:!0,file_picker_types:"file img media",fontsize_formats:"12px 14px 16px 18px 24px 36px 48px 56px 72px"}),_={name:"TinymceVue",props:{modelValue:{type:[String,Number],default:"dsd"},options:{type:Object,default:{}}},emits:["update:modelValue"],data(){return{tinymceID:"tinymce-"+new Date().getTime()+Math.floor(Math.random()*10)+Math.floor(Math.random()*10),tinymceTimerID:null,tinymce_width:"100%",tinymce_height:400,tinymce_loading:"loading",editorFn:""}},computed:{value:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}},created(){setTimeout(()=>{if(typeof tinymce=="undefined")throw clearInterval(this.tinymceTimerID),new Error("tinymce undefined")},3e3),this.tinymceTimerID=setInterval(()=>{typeof tinymce!="undefined"&&(this.init(),clearInterval(this.tinymceTimerID))},1e3)},methods:{importantFn(){this.editor.execCommand("mceImportword")},xhrOnProgress(e){return this.xhrOnProgress.onprogress=e,function(){var t=this.createXHR();return typeof xhrOnProgress.onprogress!="function"||xhrOnProgress.onprogress&&t.upload&&(t.upload.onprogress=xhrOnProgress.onprogress),t}},createXHR(){return window.XMLHttpRequest?new XMLHttpRequest:window.ActiveXobiect?new ActiveXobiect("Microsoft.XMLHTTP"):""},init(){let e=this,t=JSON.parse(u);t.selector="#"+e.tinymceID,t.setup=n=>{e.editorFn=n,n.on("init",()=>{setTimeout(()=>{e.tinymce_loading=""},200),n.setTpContent(e.value),tinymce.activeEditor.setProgressState(!1,50)}),n.on("setContent",o=>{let i=setInterval(()=>{typeof n.getTpContent=="function"&&(clearInterval(i),e.$emit("update:modelValue",n.getTpContent()))},200)}),n.on("input  focus focusin click focusout drop ObjectResized keydown paste ExecCommand ObjectSelected",()=>{e.$emit("update:modelValue",n.getTpContent())})},Object.assign(t,this.options||{}),e.tinymce_height=t.min_height,tinymce.init(t)}}},h=e=>(d("data-v-ba31a308"),e=e(),m(),e),f={class:"tinymceVue"},y=["id"],g=h(()=>s("div",{class:"tinymce_loading"},null,-1));function v(e,t,n,o,i,x){return r(),a("div",{class:c(i.tinymce_loading),style:l({width:i.tinymce_width,"min-height":i.tinymce_height})},[s("div",f,[s("div",{id:i.tinymceID},null,8,y)]),g],6)}var w=p(_,[["render",v],["__scopeId","data-v-ba31a308"]]);export{w as T};
